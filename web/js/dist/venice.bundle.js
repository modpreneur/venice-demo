webpackJsonp([2],{

/***/ 0:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\n__webpack_require__(146);\n\nvar _routes = __webpack_require__(449);\n\nvar _routes2 = _interopRequireDefault(_routes);\n\nvar _controllers = __webpack_require__(451);\n\nvar _controllers2 = _interopRequireDefault(_controllers);\n\nvar _App = __webpack_require__(497);\n\nvar _App2 = _interopRequireDefault(_App);\n\nvar _GlobalScript = __webpack_require__(499);\n\nvar _GlobalScript2 = _interopRequireDefault(_GlobalScript);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Extends jquery\n// Adds widow.atob() and window.btoa() IE9 support\n_jquery2.default.id = document.getElementById.bind(document);\n\nwindow.$ = _jquery2.default;\nwindow.jQuery = _jquery2.default;\nif (true) {\n    __webpack_require__(469).configure({\n        timeout: 30000,\n        fileTimeout: 30000\n    });\n    window._ = __webpack_require__(22);\n}\n\nvar Application = new _App2.default(_routes2.default, _controllers2.default);\n\nApplication.addPreBOOTScript(_GlobalScript2.default);\n\nApplication.start(function () {\n    removeLoadingBar();\n}, function (err) {\n    console.error(err);\n    var bar = (0, _jquery2.default)('.header-loader .bar')[0];\n    if (bar) {\n        bar.style.backgroundColor = \"#f00\";\n    }\n});\n\nfunction removeLoadingBar() {\n    var $bars = (0, _jquery2.default)('.header-loader .bar');\n    if (!_.isEmpty($bars)) {\n        (function () {\n            $bars.addClass('bar-end');\n\n            var timeoutID = null;\n            timeoutID = setTimeout(function () {\n                (0, _jquery2.default)('.header-loader')[0].style.display = 'none';\n                clearTimeout(timeoutID);\n            }, 5000);\n        })();\n    }\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvbWFpbi5qcz8zYzU2Iiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgJ0Jhc2U2NCc7IC8vIEFkZHMgd2lkb3cuYXRvYigpIGFuZCB3aW5kb3cuYnRvYSgpIElFOSBzdXBwb3J0XG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzLmpzJztcbmltcG9ydCBjb250cm9sbGVycyBmcm9tICcuL2NvbnRyb2xsZXJzLmpzJztcbmltcG9ydCBBcHAgZnJvbSAndHJpbml0eS9BcHAnO1xuaW1wb3J0IGdsb2JhbFNjcmlwdCBmcm9tICcuL0xpYnJhcmllcy9HbG9iYWxTY3JpcHQnO1xuXG4vLyBFeHRlbmRzIGpxdWVyeVxuJC5pZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkLmJpbmQoZG9jdW1lbnQpO1xuXG53aW5kb3cuJCA9ICQ7XG53aW5kb3cualF1ZXJ5ID0gJDtcbmlmKERFVkVMT1BNRU5UKXtcbiAgICByZXF1aXJlKCd0cmluaXR5L0dhdGV3YXknKS5jb25maWd1cmUoe1xuICAgICAgICB0aW1lb3V0OiAzMDAwMCxcbiAgICAgICAgZmlsZVRpbWVvdXQ6IDMwMDAwXG4gICAgfSk7XG4gICAgd2luZG93Ll8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbn1cblxubGV0IEFwcGxpY2F0aW9uID0gbmV3IEFwcChyb3V0ZXMsIGNvbnRyb2xsZXJzKTtcblxuQXBwbGljYXRpb24uYWRkUHJlQk9PVFNjcmlwdChnbG9iYWxTY3JpcHQpO1xuXG5BcHBsaWNhdGlvbi5zdGFydCgoKSA9PiB7XG4gICAgcmVtb3ZlTG9hZGluZ0JhcigpO1xufSwgKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICBsZXQgYmFyID0gJCgnLmhlYWRlci1sb2FkZXIgLmJhcicpWzBdO1xuICAgIGlmKGJhcil7XG4gICAgICAgIGJhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmMDBcIjtcbiAgICB9XG59KTtcblxuXG5mdW5jdGlvbiByZW1vdmVMb2FkaW5nQmFyKCkge1xuICAgIGxldCAkYmFycyA9ICQoJy5oZWFkZXItbG9hZGVyIC5iYXInKTtcbiAgICBpZighXy5pc0VtcHR5KCRiYXJzKSl7XG4gICAgICAgICRiYXJzLmFkZENsYXNzKCdiYXItZW5kJyk7XG5cbiAgICAgICAgbGV0IHRpbWVvdXRJRCA9IG51bGw7XG4gICAgICAgIHRpbWVvdXRJRCA9IHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICQoJy5oZWFkZXItbG9hZGVyJylbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SUQpO1xuICAgICAgICB9LCA1MDAwKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL21haW4uanMiLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFOQTtBQU9BO0FBQ0E7QUNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFRQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 449:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _routes = __webpack_require__(450);\n\nvar _routes2 = _interopRequireDefault(_routes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _routes2.default.concat([\n    // Example\n    // {\n    //     path: '/admin/example/new(/)',\n    //     action: 'Example.new'\n    // },\n    // {\n    //     path: '/admin(/)',\n    //     action: 'Example.new'\n    // }\n]); /**\n     * Created by fisa on 7/23/15.\n     *///# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQ5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2FwcC9yb3V0ZXMuanM/NmRiOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgZmlzYSBvbiA3LzIzLzE1LlxuICovXG5pbXBvcnQgb2xkUm91dGVzIGZyb20gJ3ZlbmljZS1qcy9yb3V0ZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBvbGRSb3V0ZXMuY29uY2F0KFtcbiAgICAvLyBFeGFtcGxlXG4gICAgLy8ge1xuICAgIC8vICAgICBwYXRoOiAnL2FkbWluL2V4YW1wbGUvbmV3KC8pJyxcbiAgICAvLyAgICAgYWN0aW9uOiAnRXhhbXBsZS5uZXcnXG4gICAgLy8gfSxcbiAgICAvLyB7XG4gICAgLy8gICAgIHBhdGg6ICcvYWRtaW4oLyknLFxuICAgIC8vICAgICBhY3Rpb246ICdFeGFtcGxlLm5ldydcbiAgICAvLyB9XG5dKTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9yb3V0ZXMuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUdBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTs7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 450:
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Created by fisa on 7/23/15.\n */\n\nexports.default = [{\n    path: '/admin/product(/)',\n    action: 'Product.index'\n}, {\n    path: '/admin/product/new(/)',\n    action: 'Product.new'\n}, {\n    path: '/admin/product/tabs/:id(/)',\n    action: 'Product.tabs'\n}, {\n    path: '/admin/product/content-product/tabs/:id',\n    action: 'Product.contentProductTabs'\n}, {\n    path: '/admin/blogArticle/tabs/:id(/)',\n    action: 'BlogArticle.tabs'\n}, {\n    path: '/admin/blogArticle/new(/)',\n    action: 'BlogArticle.new'\n}, {\n    path: '/admin/blogArticle(/)',\n    action: 'BlogArticle.index'\n}, {\n    path: '/admin/content/tabs/:id(/)',\n    action: 'Content.tabs'\n}, {\n    path: '/admin/content(/)',\n    action: 'Content.index'\n}, {\n    path: '/admin/content/content-product/tabs/:id(/)',\n    action: 'Content.contentProductTabs'\n}, {\n    path: '/admin/content/new(/)',\n    action: 'Content.new'\n}, {\n    path: '/admin/content/new/group(/)',\n    action: 'Content.newGroup'\n}, {\n    path: '/admin/content/:id/content-product/new(/)',\n    action: 'Content.newContentProduct'\n}, {\n    path: '/admin/product/:id/content-product/new(/)',\n    action: 'Product.newContentProduct'\n}, {\n    path: '/admin/user(/)',\n    action: 'User.index'\n}, {\n    path: '/admin/user/tabs/:id(/)',\n    action: 'User.tabs'\n}, {\n    path: '/admin/billing-plan/tabs/:id(/)',\n    action: 'BillingPlan.tabs'\n}, {\n    path: '/admin/billing-plan/new/:id(/)',\n    action: 'BillingPlan.new'\n}, {\n    path: '/admin/product-access/tabs/:id(/)',\n    action: 'ProductAccess.tabs'\n}, {\n    path: '/admin/logger(/)(:tab)',\n    action: 'Logger.tab'\n}];//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvcm91dGVzLmpzPzFjMTAiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBmaXNhIG9uIDcvMjMvMTUuXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgW1xuICAgIHtcbiAgICAgICAgcGF0aDogJy9hZG1pbi9wcm9kdWN0KC8pJyxcbiAgICAgICAgYWN0aW9uOiAnUHJvZHVjdC5pbmRleCdcbiAgICB9LCB7XG4gICAgICAgIHBhdGg6ICcvYWRtaW4vcHJvZHVjdC9uZXcoLyknLFxuICAgICAgICBhY3Rpb246ICdQcm9kdWN0Lm5ldydcbiAgICB9LCB7XG4gICAgICAgIHBhdGg6ICcvYWRtaW4vcHJvZHVjdC90YWJzLzppZCgvKScsXG4gICAgICAgIGFjdGlvbjogJ1Byb2R1Y3QudGFicydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGF0aDogJy9hZG1pbi9wcm9kdWN0L2NvbnRlbnQtcHJvZHVjdC90YWJzLzppZCcsXG4gICAgICAgIGFjdGlvbjogJ1Byb2R1Y3QuY29udGVudFByb2R1Y3RUYWJzJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBwYXRoOiAnL2FkbWluL2Jsb2dBcnRpY2xlL3RhYnMvOmlkKC8pJyxcbiAgICAgICAgYWN0aW9uOiAnQmxvZ0FydGljbGUudGFicydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGF0aDogJy9hZG1pbi9ibG9nQXJ0aWNsZS9uZXcoLyknLFxuICAgICAgICBhY3Rpb246ICdCbG9nQXJ0aWNsZS5uZXcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBhdGg6ICcvYWRtaW4vYmxvZ0FydGljbGUoLyknLFxuICAgICAgICBhY3Rpb246ICdCbG9nQXJ0aWNsZS5pbmRleCdcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGF0aDogJy9hZG1pbi9jb250ZW50L3RhYnMvOmlkKC8pJyxcbiAgICAgICAgYWN0aW9uOiAnQ29udGVudC50YWJzJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBwYXRoOiAnL2FkbWluL2NvbnRlbnQoLyknLFxuICAgICAgICBhY3Rpb246ICdDb250ZW50LmluZGV4J1xuICAgIH0sXG4gICAge1xuICAgICAgICBwYXRoOiAnL2FkbWluL2NvbnRlbnQvY29udGVudC1wcm9kdWN0L3RhYnMvOmlkKC8pJyxcbiAgICAgICAgYWN0aW9uOiAnQ29udGVudC5jb250ZW50UHJvZHVjdFRhYnMnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBhdGg6ICcvYWRtaW4vY29udGVudC9uZXcoLyknLFxuICAgICAgICBhY3Rpb246ICdDb250ZW50Lm5ldydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGF0aDogJy9hZG1pbi9jb250ZW50L25ldy9ncm91cCgvKScsXG4gICAgICAgIGFjdGlvbjogJ0NvbnRlbnQubmV3R3JvdXAnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBhdGg6ICcvYWRtaW4vY29udGVudC86aWQvY29udGVudC1wcm9kdWN0L25ldygvKScsXG4gICAgICAgIGFjdGlvbjogJ0NvbnRlbnQubmV3Q29udGVudFByb2R1Y3QnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBhdGg6ICcvYWRtaW4vcHJvZHVjdC86aWQvY29udGVudC1wcm9kdWN0L25ldygvKScsXG4gICAgICAgIGFjdGlvbjogJ1Byb2R1Y3QubmV3Q29udGVudFByb2R1Y3QnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBhdGg6ICcvYWRtaW4vdXNlcigvKScsXG4gICAgICAgIGFjdGlvbjogJ1VzZXIuaW5kZXgnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBhdGg6ICcvYWRtaW4vdXNlci90YWJzLzppZCgvKScsXG4gICAgICAgIGFjdGlvbjogJ1VzZXIudGFicydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGF0aDogJy9hZG1pbi9iaWxsaW5nLXBsYW4vdGFicy86aWQoLyknLFxuICAgICAgICBhY3Rpb246ICdCaWxsaW5nUGxhbi50YWJzJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBwYXRoOiAnL2FkbWluL2JpbGxpbmctcGxhbi9uZXcvOmlkKC8pJyxcbiAgICAgICAgYWN0aW9uOiAnQmlsbGluZ1BsYW4ubmV3J1xuICAgIH0sXG4gICAge1xuICAgICAgICBwYXRoOiAnL2FkbWluL3Byb2R1Y3QtYWNjZXNzL3RhYnMvOmlkKC8pJyxcbiAgICAgICAgYWN0aW9uOiAnUHJvZHVjdEFjY2Vzcy50YWJzJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBwYXRoOiAnL2FkbWluL2xvZ2dlcigvKSg6dGFiKScsXG4gICAgICAgIGFjdGlvbjogJ0xvZ2dlci50YWInXG4gICAgfVxuXTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy92ZW5pY2UtanMvcm91dGVzLmpzIiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7OztBQUlBO0FBRUE7QUFDQTtBQ0ZBO0FBSUE7QURDQTtBQ0ZBO0FBSUE7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBO0FBS0E7QURDQTtBQ0ZBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 451:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _controllers = __webpack_require__(452);\n\nvar _controllers2 = _interopRequireDefault(_controllers);\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _ExampleController = __webpack_require__(496);\n\nvar _ExampleController2 = _interopRequireDefault(_ExampleController);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar controllers = {\n    'ExampleController': _ExampleController2.default\n};\n\nexports.default = _jquery2.default.extend({}, _controllers2.default, controllers);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2FwcC9jb250cm9sbGVycy5qcz9iNWYxIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGluaGVyaXRlZCBmcm9tICd2ZW5pY2UtanMvY29udHJvbGxlcnMnO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBFeGFtcGxlQ29udHJvbGxlciBmcm9tICcuL0NvbnRyb2xsZXJzL0V4YW1wbGVDb250cm9sbGVyJztcblxubGV0IGNvbnRyb2xsZXJzICA9IHtcbiAgICAnRXhhbXBsZUNvbnRyb2xsZXInOiBFeGFtcGxlQ29udHJvbGxlclxufTtcblxuZXhwb3J0IGRlZmF1bHQgJC5leHRlbmQoe30sIGluaGVyaXRlZCwgY29udHJvbGxlcnMpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAvY29udHJvbGxlcnMuanMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 452:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _BillingPlanController = __webpack_require__(453);\n\nvar _BillingPlanController2 = _interopRequireDefault(_BillingPlanController);\n\nvar _BlogArticleController = __webpack_require__(470);\n\nvar _BlogArticleController2 = _interopRequireDefault(_BlogArticleController);\n\nvar _ContentController = __webpack_require__(488);\n\nvar _ContentController2 = _interopRequireDefault(_ContentController);\n\nvar _ProductAccessController = __webpack_require__(492);\n\nvar _ProductAccessController2 = _interopRequireDefault(_ProductAccessController);\n\nvar _ProductController = __webpack_require__(493);\n\nvar _ProductController2 = _interopRequireDefault(_ProductController);\n\nvar _UserController = __webpack_require__(494);\n\nvar _UserController2 = _interopRequireDefault(_UserController);\n\nvar _LoggerController = __webpack_require__(495);\n\nvar _LoggerController2 = _interopRequireDefault(_LoggerController);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    'BillingPlanController': _BillingPlanController2.default,\n    'BlogArticleController': _BlogArticleController2.default,\n    'ContentController': _ContentController2.default,\n    'ProductAccessController': _ProductAccessController2.default,\n    'ProductController': _ProductController2.default,\n    'UserController': _UserController2.default,\n    'LoggerController': _LoggerController2.default\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvY29udHJvbGxlcnMuanM/ZGE0YiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgQmlsbGluZ1BsYW5Db250cm9sbGVyIGZyb20gJy4vQ29udHJvbGxlcnMvQmlsbGluZ1BsYW5Db250cm9sbGVyLmpzJztcbmltcG9ydCBCbG9nQXJ0aWNsZUNvbnRyb2xsZXIgZnJvbSAnLi9Db250cm9sbGVycy9CbG9nQXJ0aWNsZUNvbnRyb2xsZXIuanMnO1xuaW1wb3J0IENvbnRlbnRDb250cm9sbGVyIGZyb20gJy4vQ29udHJvbGxlcnMvQ29udGVudENvbnRyb2xsZXIuanMnO1xuaW1wb3J0IFByb2R1Y3RBY2Nlc3NDb250cm9sbGVyIGZyb20gJy4vQ29udHJvbGxlcnMvUHJvZHVjdEFjY2Vzc0NvbnRyb2xsZXIuanMnO1xuaW1wb3J0IFByb2R1Y3RDb250cm9sbGVyIGZyb20gJy4vQ29udHJvbGxlcnMvUHJvZHVjdENvbnRyb2xsZXIuanMnO1xuaW1wb3J0IFVzZXJDb250cm9sbGVyIGZyb20gJy4vQ29udHJvbGxlcnMvVXNlckNvbnRyb2xsZXIuanMnO1xuaW1wb3J0IExvZ2dlckNvbnRyb2xsZXIgZnJvbSAnLi9Db250cm9sbGVycy9Mb2dnZXJDb250cm9sbGVyJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgICdCaWxsaW5nUGxhbkNvbnRyb2xsZXInOiBCaWxsaW5nUGxhbkNvbnRyb2xsZXIsXG4gICAgJ0Jsb2dBcnRpY2xlQ29udHJvbGxlcic6IEJsb2dBcnRpY2xlQ29udHJvbGxlcixcbiAgICAnQ29udGVudENvbnRyb2xsZXInOiBDb250ZW50Q29udHJvbGxlcixcbiAgICAnUHJvZHVjdEFjY2Vzc0NvbnRyb2xsZXInOiBQcm9kdWN0QWNjZXNzQ29udHJvbGxlcixcbiAgICAnUHJvZHVjdENvbnRyb2xsZXInOiBQcm9kdWN0Q29udHJvbGxlcixcbiAgICAnVXNlckNvbnRyb2xsZXInOiBVc2VyQ29udHJvbGxlcixcbiAgICAnTG9nZ2VyQ29udHJvbGxlcic6IExvZ2dlckNvbnRyb2xsZXJcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy92ZW5pY2UtanMvY29udHJvbGxlcnMuanMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 453:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by Jakub Fajkus on 10.12.15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _Controller2 = __webpack_require__(454);\n\nvar _Controller3 = _interopRequireDefault(_Controller2);\n\nvar _VeniceForm = __webpack_require__(455);\n\nvar _VeniceForm2 = _interopRequireDefault(_VeniceForm);\n\nvar _TrinityTab = __webpack_require__(468);\n\nvar _TrinityTab2 = _interopRequireDefault(_TrinityTab);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BillingPlanController = function (_Controller) {\n    _inherits(BillingPlanController, _Controller);\n\n    function BillingPlanController() {\n        _classCallCheck(this, BillingPlanController);\n\n        return _possibleConstructorReturn(this, (BillingPlanController.__proto__ || Object.getPrototypeOf(BillingPlanController)).apply(this, arguments));\n    }\n\n    _createClass(BillingPlanController, [{\n        key: 'tabsAction',\n        value: function tabsAction($scope) {\n            $scope.trinityTab = new _TrinityTab2.default();\n\n            //On tabs load\n            $scope.trinityTab.addListener('tab-load', function (e) {\n                var form = (0, _jquery2.default)('form', e.element)[0];\n                if (form) {\n                    $scope.veniceForms = $scope.veniceForms || {};\n                    $scope.veniceForms[e.id] = new _VeniceForm2.default(form);\n                }\n            });\n        }\n    }]);\n\n    return BillingPlanController;\n}(_Controller3.default);\n\nexports.default = BillingPlanController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvQ29udHJvbGxlcnMvQmlsbGluZ1BsYW5Db250cm9sbGVyLmpzPzlmODgiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBKYWt1YiBGYWprdXMgb24gMTAuMTIuMTUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBDb250cm9sbGVyIGZyb20gJ3RyaW5pdHkvQ29udHJvbGxlcic7XG5pbXBvcnQgVmVuaWNlRm9ybSBmcm9tICcuLi9MaWJyYXJpZXMvVmVuaWNlRm9ybSc7XG5pbXBvcnQgVHJpbml0eVRhYiBmcm9tICd0cmluaXR5L2NvbXBvbmVudHMvVHJpbml0eVRhYic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpbGxpbmdQbGFuQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xuICAgIFxuICAgIHRhYnNBY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS50cmluaXR5VGFiID0gbmV3IFRyaW5pdHlUYWIoKTtcblxuICAgICAgICAvL09uIHRhYnMgbG9hZFxuICAgICAgICAkc2NvcGUudHJpbml0eVRhYi5hZGRMaXN0ZW5lcigndGFiLWxvYWQnLCAoZSk9PntcbiAgICAgICAgICAgIGxldCBmb3JtID0gJCgnZm9ybScsIGUuZWxlbWVudClbMF07XG4gICAgICAgICAgICBpZihmb3JtKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmVuaWNlRm9ybXMgPSAkc2NvcGUudmVuaWNlRm9ybXMgfHwge307XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZlbmljZUZvcm1zW2UuaWRdID0gbmV3IFZlbmljZUZvcm0oZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9Db250cm9sbGVycy9CaWxsaW5nUGxhbkNvbnRyb2xsZXIuanMiLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0FBR0E7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7O0FBRUE7QUNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFiQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 454:
/***/ function(module, exports) {

	eval("/**\n * Created by fisa on 11/2/15.\n */\n'use strict';\n\n/**\n * Abstract Controller class, provides connection between app and activeController itself\n * Should be inherited from in every controller\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Controller = function () {\n    function Controller(name) {\n        _classCallCheck(this, Controller);\n\n        this.name = name;\n        this._app = null;\n        this._scope = null;\n        this._request = null;\n    }\n\n    /**\n     * Simple getter - has to be specified\n     * @returns {*}\n     */\n\n\n    _createClass(Controller, [{\n        key: 'getScope',\n        value: function getScope() {\n            return this._scope;\n        }\n    }, {\n        key: 'getApp',\n        value: function getApp() {\n            return this._app;\n        }\n\n        /**\n         * Hook to run before every action\n         */\n\n    }, {\n        key: 'beforeAction',\n        value: function beforeAction() /*$scope*/{}\n\n        /**\n         * Hook after every action run\n         */\n\n    }, {\n        key: 'afterAction',\n        value: function afterAction() /*$scope*/{}\n\n        /**\n         * Not implemented\n         * @param serviceName\n         */\n        /*getService(serviceName){\n            console.warn('Method not implemented');\n            //TODO: should pull from app requested service, if exists, if not return null\n        }*/\n\n    }, {\n        key: 'request',\n        get: function get() {\n            return this._request;\n        }\n\n        /**\n         * Setter for \"request\" property - make sure that request can be assigned only once\n         * @param value\n         * @returns {void}\n         */\n        ,\n        set: function set(value) {\n            if (this._request === null) {\n                this._request = value;\n            }\n        }\n    }]);\n\n    return Controller;\n}();\n\nexports.default = Controller;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L0NvbnRyb2xsZXIuanM/MWMyNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgZmlzYSBvbiAxMS8yLzE1LlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQWJzdHJhY3QgQ29udHJvbGxlciBjbGFzcywgcHJvdmlkZXMgY29ubmVjdGlvbiBiZXR3ZWVuIGFwcCBhbmQgYWN0aXZlQ29udHJvbGxlciBpdHNlbGZcbiAqIFNob3VsZCBiZSBpbmhlcml0ZWQgZnJvbSBpbiBldmVyeSBjb250cm9sbGVyXG4gKi9cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKG5hbWUpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRyb2xsZXIpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuX2FwcCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3Njb3BlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcmVxdWVzdCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2ltcGxlIGdldHRlciAtIGhhcyB0byBiZSBzcGVjaWZpZWRcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbnRyb2xsZXIsIFt7XG4gICAgICAgIGtleTogJ2dldFNjb3BlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjb3BlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njb3BlO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRBcHAnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXBwKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIb29rIHRvIHJ1biBiZWZvcmUgZXZlcnkgYWN0aW9uXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdiZWZvcmVBY3Rpb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlQWN0aW9uKCkgLyokc2NvcGUqL3t9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhvb2sgYWZ0ZXIgZXZlcnkgYWN0aW9uIHJ1blxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYWZ0ZXJBY3Rpb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWZ0ZXJBY3Rpb24oKSAvKiRzY29wZSove31cblxuICAgICAgICAvKipcbiAgICAgICAgICogTm90IGltcGxlbWVudGVkXG4gICAgICAgICAqIEBwYXJhbSBzZXJ2aWNlTmFtZVxuICAgICAgICAgKi9cbiAgICAgICAgLypnZXRTZXJ2aWNlKHNlcnZpY2VOYW1lKXtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZCcpO1xuICAgICAgICAgICAgLy9UT0RPOiBzaG91bGQgcHVsbCBmcm9tIGFwcCByZXF1ZXN0ZWQgc2VydmljZSwgaWYgZXhpc3RzLCBpZiBub3QgcmV0dXJuIG51bGxcbiAgICAgICAgfSovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlcXVlc3QnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHRlciBmb3IgXCJyZXF1ZXN0XCIgcHJvcGVydHkgLSBtYWtlIHN1cmUgdGhhdCByZXF1ZXN0IGNhbiBiZSBhc3NpZ25lZCBvbmx5IG9uY2VcbiAgICAgICAgICogQHBhcmFtIHZhbHVlXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgLFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3JlcXVlc3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0ID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udHJvbGxlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ29udHJvbGxlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdHJpbml0eS9Db250cm9sbGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA0NTRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 455:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by bures on 06/26/16.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _TrinityForm2 = __webpack_require__(456);\n\nvar _TrinityForm3 = _interopRequireDefault(_TrinityForm2);\n\nvar _Services = __webpack_require__(467);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultSettings = {\n    button: { // Defines which classes add to active button in which state\n        ready: 'trinity-form-ready',\n        success: 'trinity-form-success',\n        timeout: 'trinity-form-timeout trinity-form-error'\n    },\n    requestTimeout: 10000\n};\n\nif (true) {\n    defaultSettings.requestTimeout = 60000;\n}\n\nvar VeniceForm = function (_TrinityForm) {\n    _inherits(VeniceForm, _TrinityForm);\n\n    function VeniceForm(element, settings) {\n        _classCallCheck(this, VeniceForm);\n\n        var _this = _possibleConstructorReturn(this, (VeniceForm.__proto__ || Object.getPrototypeOf(VeniceForm)).call(this, element, _lodash2.default.defaultsDeep(settings || {}, defaultSettings)));\n\n        _this.success(_this.__onSuccess, _this);\n        _this.error(_this.__onError, _this);\n\n        if (true) {\n            _this.addListener('submit-data', function (data) {\n                console.log('JSON DATA:', data);\n            });\n        }\n        return _this;\n    }\n\n    /**\n     * Success Callback\n     * @param e {Object} Event\n     * @private\n     */\n\n\n    _createClass(VeniceForm, [{\n        key: '__onSuccess',\n        value: function __onSuccess(e) {\n            var response = e.data;\n            (0, _Services.messageService)(response.body['message'], 'success');\n            if (true) {\n                console.log('Success', response);\n            }\n        }\n\n        /**\n         * Error callback\n         * @param e {Object} Event\n         * @private\n         */\n\n    }, {\n        key: '__onError',\n        value: function __onError(e) {\n            var _this2 = this;\n\n            var error = e.data;\n            if (true) {\n                console.error('ERROR', error);\n                console.log(error.response);\n            }\n            if (error.timeout) {\n                (0, _Services.messageService)('Request Timed out.<br>Try Again i few seconds.', 'error');\n                return;\n            }\n\n            // Parse error object\n            var response = error.response,\n                error_info = ~response.type.indexOf('json') ? response.body.error : response.text;\n\n            // If it is just string, there is no need to continue\n            if (_lodash2.default.isString(error_info)) {\n                (0, _Services.messageService)(error_info, 'error');\n                return;\n            }\n\n            // More errors\n            var noErrors = true;\n            // DB errors\n            if (error_info.db) {\n                (function () {\n                    noErrors = false;\n                    // Special DB error ?\n                    _lodash2.default.each([].concat(error_info.db), function (err) {\n                        (0, _Services.messageService)(err, 'error');\n                    });\n\n                    var id = setTimeout(function () {\n                        _this2.state = 'ready';\n                        _this2.unlock();\n                        clearTimeout(id);\n                    }, 2000);\n                })();\n            }\n\n            // Global errors - CRFS token, etc.\n            if (!_lodash2.default.isEmpty(error_info.global)) {\n                noErrors = false;\n                __globalErrors([].concat(error_info.global));\n            }\n            // Fields error\n            if (!_lodash2.default.isEmpty(error_info.fields)) {\n                noErrors = false;\n                _lodash2.default.each(error_info.fields, function (message, key) {\n                    _this2.addError(_jquery2.default.id(key), {\n                        key: key,\n                        message: message\n                    });\n                });\n            } else {\n                this.unlock();\n            }\n\n            // Some error, but nothing related to Form\n            if (noErrors && (true)) {\n                (0, _Services.messageService)('DEBUG: Request failed but no FORM errors returned! check server response', 'warning');\n            }\n        }\n    }]);\n\n    return VeniceForm;\n}(_TrinityForm3.default);\n\n/**\n * Handles global errors\n * @param errors\n * @private\n */\n\n\nexports.default = VeniceForm;\nfunction __globalErrors(errors) {\n    _lodash2.default.each(errors, function (err) {\n        if (err.indexOf(\"The CSRF token is invalid\") > -1) {\n            (0, _Services.messageService)(\"Something get wrong, please refresh page.\", 'warning');\n        } else {\n            (0, _Services.messageService)(err, 'warning');\n        }\n    });\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL1ZlbmljZUZvcm0uanM/NGRlYiIsIndlYnBhY2s6Ly8vP2Q0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGJ1cmVzIG9uIDA2LzI2LzE2LlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFRyaW5pdHlGb3JtIGZyb20gJ3RyaW5pdHkvY29tcG9uZW50cy9UcmluaXR5Rm9ybSc7XG5pbXBvcnQge21lc3NhZ2VTZXJ2aWNlfSBmcm9tICd0cmluaXR5L1NlcnZpY2VzJztcblxuY29uc3QgZGVmYXVsdFNldHRpbmdzID0ge1xuICAgIGJ1dHRvbiA6IHsgLy8gRGVmaW5lcyB3aGljaCBjbGFzc2VzIGFkZCB0byBhY3RpdmUgYnV0dG9uIGluIHdoaWNoIHN0YXRlXG4gICAgICAgIHJlYWR5OiAndHJpbml0eS1mb3JtLXJlYWR5JyxcbiAgICAgICAgc3VjY2VzczogJ3RyaW5pdHktZm9ybS1zdWNjZXNzJyxcbiAgICAgICAgdGltZW91dDogJ3RyaW5pdHktZm9ybS10aW1lb3V0IHRyaW5pdHktZm9ybS1lcnJvcidcbiAgICB9LFxuICAgIHJlcXVlc3RUaW1lb3V0OiAxMDAwMFxufTtcblxuaWYoREVWRUxPUE1FTlQpe1xuICAgIGRlZmF1bHRTZXR0aW5ncy5yZXF1ZXN0VGltZW91dCA9IDYwMDAwO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZW5pY2VGb3JtIGV4dGVuZHMgVHJpbml0eUZvcm0ge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHNldHRpbmdzKXtcbiAgICAgICAgc3VwZXIoZWxlbWVudCwgXy5kZWZhdWx0c0RlZXAoc2V0dGluZ3MgfHwge30sIGRlZmF1bHRTZXR0aW5ncykpO1xuICAgICAgICB0aGlzLnN1Y2Nlc3ModGhpcy5fX29uU3VjY2VzcywgdGhpcyk7XG4gICAgICAgIHRoaXMuZXJyb3IodGhpcy5fX29uRXJyb3IsIHRoaXMpO1xuXG4gICAgICAgIGlmKERFVkVMT1BNRU5UKXtcbiAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXIoJ3N1Ym1pdC1kYXRhJywgKGRhdGEpPT57XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0pTT04gREFUQTonLCBkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3VjY2VzcyBDYWxsYmFja1xuICAgICAqIEBwYXJhbSBlIHtPYmplY3R9IEV2ZW50XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfX29uU3VjY2VzcyhlKXtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gZS5kYXRhO1xuICAgICAgICBtZXNzYWdlU2VydmljZShyZXNwb25zZS5ib2R5WydtZXNzYWdlJ10sJ3N1Y2Nlc3MnKTtcbiAgICAgICAgaWYoREVWRUxPUE1FTlQpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3MnLCByZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcnJvciBjYWxsYmFja1xuICAgICAqIEBwYXJhbSBlIHtPYmplY3R9IEV2ZW50XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfX29uRXJyb3IoZSl7XG4gICAgICAgIGxldCBlcnJvciA9IGUuZGF0YTtcbiAgICAgICAgaWYoREVWRUxPUE1FTlQpe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRVJST1InLCBlcnJvcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3IudGltZW91dCl7XG4gICAgICAgICAgICBtZXNzYWdlU2VydmljZSgnUmVxdWVzdCBUaW1lZCBvdXQuPGJyPlRyeSBBZ2FpbiBpIGZldyBzZWNvbmRzLicsICdlcnJvcicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGFyc2UgZXJyb3Igb2JqZWN0XG4gICAgICAgIGxldCByZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlLFxuICAgICAgICAgICAgZXJyb3JfaW5mbyA9IH5yZXNwb25zZS50eXBlLmluZGV4T2YoJ2pzb24nKSA/IHJlc3BvbnNlLmJvZHkuZXJyb3IgOiByZXNwb25zZS50ZXh0O1xuXG4gICAgICAgIC8vIElmIGl0IGlzIGp1c3Qgc3RyaW5nLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNvbnRpbnVlXG4gICAgICAgIGlmKF8uaXNTdHJpbmcoZXJyb3JfaW5mbykpe1xuICAgICAgICAgICAgbWVzc2FnZVNlcnZpY2UoZXJyb3JfaW5mbywgJ2Vycm9yJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNb3JlIGVycm9yc1xuICAgICAgICBsZXQgbm9FcnJvcnMgPSB0cnVlO1xuICAgICAgICAvLyBEQiBlcnJvcnNcbiAgICAgICAgaWYoZXJyb3JfaW5mby5kYil7XG4gICAgICAgICAgICBub0Vycm9ycyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBEQiBlcnJvciA/XG4gICAgICAgICAgICBfLmVhY2goW10uY29uY2F0KGVycm9yX2luZm8uZGIpLCAoZXJyKT0+e1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VTZXJ2aWNlKGVyciwgJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IGlkID0gc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAncmVhZHknO1xuICAgICAgICAgICAgICAgIHRoaXMudW5sb2NrKCk7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2xvYmFsIGVycm9ycyAtIENSRlMgdG9rZW4sIGV0Yy5cbiAgICAgICAgaWYoIV8uaXNFbXB0eShlcnJvcl9pbmZvLmdsb2JhbCkpe1xuICAgICAgICAgICAgbm9FcnJvcnMgPSBmYWxzZTtcbiAgICAgICAgICAgIF9fZ2xvYmFsRXJyb3JzKFtdLmNvbmNhdChlcnJvcl9pbmZvLmdsb2JhbCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpZWxkcyBlcnJvclxuICAgICAgICBpZighXy5pc0VtcHR5KGVycm9yX2luZm8uZmllbGRzKSl7XG4gICAgICAgICAgICBub0Vycm9ycyA9IGZhbHNlO1xuICAgICAgICAgICAgXy5lYWNoKGVycm9yX2luZm8uZmllbGRzLCAobWVzc2FnZSwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcigkLmlkKGtleSksIHtcbiAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5sb2NrKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTb21lIGVycm9yLCBidXQgbm90aGluZyByZWxhdGVkIHRvIEZvcm1cbiAgICAgICAgaWYobm9FcnJvcnMgJiYgREVWRUxPUE1FTlQpe1xuICAgICAgICAgICAgbWVzc2FnZVNlcnZpY2UoJ0RFQlVHOiBSZXF1ZXN0IGZhaWxlZCBidXQgbm8gRk9STSBlcnJvcnMgcmV0dXJuZWQhIGNoZWNrIHNlcnZlciByZXNwb25zZScsICd3YXJuaW5nJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogSGFuZGxlcyBnbG9iYWwgZXJyb3JzXG4gKiBAcGFyYW0gZXJyb3JzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX2dsb2JhbEVycm9ycyhlcnJvcnMpe1xuICAgIF8uZWFjaChlcnJvcnMsIChlcnIpPT57XG4gICAgICAgIGlmKGVyci5pbmRleE9mKFwiVGhlIENTUkYgdG9rZW4gaXMgaW52YWxpZFwiKSA+IC0xKSB7XG4gICAgICAgICAgICBtZXNzYWdlU2VydmljZShcIlNvbWV0aGluZyBnZXQgd3JvbmcsIHBsZWFzZSByZWZyZXNoIHBhZ2UuXCIsICd3YXJuaW5nJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlU2VydmljZShlcnIsICd3YXJuaW5nJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvdmVuaWNlLWpzL0xpYnJhcmllcy9WZW5pY2VGb3JtLmpzIiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6IkFBQUE7OztBQUdBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFDQTtBQUNBO0FDQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FEQ0E7QUNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBVUE7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7Ozs7Ozs7QUE5RkE7QUFtR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 456:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _superagent = __webpack_require__(457);\n\nvar _superagent2 = _interopRequireDefault(_superagent);\n\nvar _fbemitter = __webpack_require__(172);\n\nvar _Events = __webpack_require__(462);\n\nvar _Events2 = _interopRequireDefault(_Events);\n\nvar _TrinityEvent = __webpack_require__(463);\n\nvar _TrinityEvent2 = _interopRequireDefault(_TrinityEvent);\n\nvar _FormInput = __webpack_require__(464);\n\nvar _FormInput2 = _interopRequireDefault(_FormInput);\n\nvar _Dom = __webpack_require__(465);\n\nvar _Dom2 = _interopRequireDefault(_Dom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Default FORM settings\n * @type {{\n *      button: {loading: string, success: string, error: string, ready: string},\n *      successTimeout: number\n *   }}\n */\nvar defaultSettings = {\n    button: { // Defines which classes add to active button in which state\n        loading: 'trinity-form-loading',\n        success: 'trinity-form-success',\n        timeout: 'trinity-form-timeout',\n        error: 'trinity-form-error',\n        ready: 'trinity-form-ready'\n    },\n    requestTimeout: 10000,\n    successTimeout: 3000,\n    timeoutTimeout: 2000,\n    errorTemplate: function errorTemplate(message) {\n        return '<div>' + message + '</div>';\n    },\n    messageTemplate: function messageTemplate(message) {\n        return '<div>' + message + '</div>';\n    }\n};\n\nvar IS_FORM_DATA = !!window.FormData;\nvar INPUT_TYPE_FILTER = ['radio', 'checkbox'];\n\n/**\n * Connects to formElement and change it to ajax form\n *\n * @param form {HTMLFormElement}\n * @param [type] {String} - type of form\n * @param [settings] {Object}\n * @constructor\n */\n\nvar TrinityForm = function (_EventEmitter) {\n    _inherits(TrinityForm, _EventEmitter);\n\n    function TrinityForm(formElement, settings) {\n        _classCallCheck(this, TrinityForm);\n\n        var _this = _possibleConstructorReturn(this, (TrinityForm.__proto__ || Object.getPrototypeOf(TrinityForm)).call(this));\n\n        if (!formElement) {\n            throw new Error('Missing \"formElement\" parameter!');\n        }\n        _this.form = formElement;\n        _this.buttons = formElement.querySelectorAll('input[type=\"submit\"], button[type=\"submit\"]');\n        _this.activeBtn = null;\n        _this.settings = _lodash2.default.defaultsDeep(settings || {}, defaultSettings);\n        _this.__state = 'ready';\n        _this.__inputs = {};\n\n        //Main initialize\n        // Create inputs\n        _lodash2.default.each(_this.form, function (el) {\n            if (el.name && !~INPUT_TYPE_FILTER.indexOf(el.type)) {\n                _this.__inputs[el.name] = new _FormInput2.default(el);\n            }\n        });\n\n        // Add ready class to all buttons\n        var btnReadyClass = _this.settings.button['ready'].split(' ');\n        _lodash2.default.each(_this.buttons, function (btn) {\n            return _Dom2.default.classlist.addAll(btn, btnReadyClass);\n        });\n\n        // Listeners at last\n        // Add listener to form element\n        _this.unlistenSubmit = _Events2.default.listen(formElement, 'submit', _this.submit.bind(_this));\n        // Add listener for input value change\n        _this.unlistenValueInput = _Events2.default.listen(formElement, 'input', _this.onInputChange.bind(_this));\n        _this.unlistenValueChange = _Events2.default.listen(formElement, 'change', _this.onInputChange.bind(_this));\n        return _this;\n    }\n\n    /**\n     * Sets new form state\n     *  - add state classes to button\n     *  - emit \"state-change\" event\n     * @param newState\n     */\n\n\n    _createClass(TrinityForm, [{\n        key: 'lock',\n\n\n        /**\n         * Disable all forms submit inputs\n         */\n        value: function lock() {\n            _lodash2.default.each(this.buttons, _Dom2.default.disable);\n        }\n\n        /**\n         * Enable all forms submit inputs\n         */\n\n    }, {\n        key: 'unlock',\n        value: function unlock() {\n            return this.state !== 'loading' && !!_lodash2.default.each(this.buttons, _Dom2.default.enable);\n        }\n\n        /**\n         * Main function which runs validation\n         * @param e {Event}\n         */\n\n    }, {\n        key: 'onInputChange',\n        value: function onInputChange(e) {\n            // Only elements with name can be tested\n\n            // Filter\n            var isSelectType = e.target.type ? !!~e.target.type.indexOf('select') : false,\n                //tesxtarea does not have type prop\n            isChangeEvent = e.type === 'change';\n\n            if (isSelectType ^ isChangeEvent || !e.target.name) {\n                return;\n            }\n            var inputObj = this.__inputs[e.target.name];\n            if (!inputObj) {\n                return;\n            }\n            inputObj.errors = _lodash2.default.filter(inputObj.errors, function (err) {\n                if (!_lodash2.default.isFunction(err.validate) || err.validate(inputObj.getValue(), inputObj.element)) {\n                    _Dom2.default.removeNode(err.element);\n                    return false;\n                }\n                return true;\n            });\n            this.validate();\n        }\n\n        /*eslint-disable*/\n        /**\n         * TODO: feature\n         * @notImplemented\n         * @param element {HTMLElement || string} - name of input or input itself\n         * @param validator\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'addRule',\n        value: function addRule(element, validator) {}\n        // return;\n        // let inputObj = this.__findInput(element);\n        // if (!inputObj) {\n        //     if (process.env.NODE_ENV !== 'production') {\n        //         throw new Error('Form does not have input ' + (_.isString(element) ? 'with name ' : '') + element + '.');\n        //     }\n        //     return false;\n        // }\n        // return !!inputObj.rules.push(validator);\n\n        /*eslint-enable*/\n\n        /**\n         * Adds new error to TrinityForm instance\n         * @param element {string || HTMLElement} - input name or instance itself\n         * @param error {string || object}\n         * @param [args] {Array}\n         * @public\n         */\n\n    }, {\n        key: 'addError',\n        value: function addError(element, error) {\n            var inputObj = this.__findInput(element);\n            if (!inputObj) {\n                if (process.env.NODE_ENV !== 'production') {\n                    throw new Error('Form does not have input ' + (_lodash2.default.isString(element) ? 'with name ' : '') + element + '.');\n                }\n                return false;\n            }\n            this.state = 'error';\n\n            for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n                args[_key - 2] = arguments[_key];\n            }\n\n            var errObj = __createMessage(error, // error object or string\n            this.settings.errorTemplate, // template\n            inputObj.element.name + '_error_', // prefix if no id\n            args // rest of args\n            );\n            return inputObj.addError(errObj);\n        }\n\n        /**\n         * Check if input element has error with provided key\n         * or if key not provided, checks if input has any error\n         * @param element {HTMLElement || string} - name of input or input itself\n         * @param [errorId] {string}\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'hasError',\n        value: function hasError(element, errorId) {\n            var inputObj = this.__findInput(element);\n            if (!inputObj) {\n                if (process.env.NODE_ENV !== 'production') {\n                    throw new Error('Form does not have input ' + (_lodash2.default.isString(element) ? 'with name ' : '') + element + '.');\n                }\n                return false;\n            }\n            return errorId ? _lodash2.default.some(inputObj.errors, function (err) {\n                return err.id === errorId;\n            }) : inputObj.errors.length > 0;\n        }\n\n        /**\n         * Remove error with errorKey provided, or remove all errors if errorKey is not provided\n         * @param element {HTMLElement || string} - name of input or input itself\n         * @param [errorId] {string}\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'removeError',\n        value: function removeError(element, errorId) {\n            var inputObj = this.__findInput(element);\n            if (!inputObj) {\n                if (process.env.NODE_ENV !== 'production') {\n                    throw new Error('Form does not have input ' + (_lodash2.default.isString(element) ? 'with name ' : '') + element + '.');\n                }\n                return false;\n            }\n\n            if (errorId) {\n                _lodash2.default.remove(inputObj.errors, function (err) {\n                    return err.id === errorId && !!_Dom2.default.removeNode(err.element);\n                });\n            } else {\n                // Remove all if error key not provided\n                _lodash2.default.each(inputObj.errors, function (err) {\n                    return _Dom2.default.removeNode(err.element);\n                });\n                inputObj.errors = [];\n            }\n            this.validate();\n            return true;\n        }\n\n        /**\n         * Set message to requested element\n         * @param element {HTMLElement || string} - name of input or input itself\n         * @param message {object || string}\n         * @param [args]\n         * @returns {*} id or false if element was not found\n         */\n\n    }, {\n        key: 'setMessage',\n        value: function setMessage(element, message) {\n            var inputObj = this.__findInput(element);\n            if (!inputObj) {\n                if (process.env.NODE_ENV !== 'production') {\n                    throw new Error('Form does not have input ' + (_lodash2.default.isString(element) ? 'with name ' : '') + element + '.');\n                }\n                return false;\n            }\n\n            for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n                args[_key2 - 2] = arguments[_key2];\n            }\n\n            var msg = __createMessage(message, // msg object or string\n            this.settings.messageTemplate, // template object\n            inputObj.element.name + '_msg_', // prefix\n            args // args\n            );\n            return inputObj.setMessage(msg);\n        }\n\n        /**\n         * Removes message from input\n         * @param element {HTMLElement || string} - name of input or input itself\n         * @returns {*}\n         */\n\n    }, {\n        key: 'removeMessage',\n        value: function removeMessage(element) {\n            var inputObj = this.__findInput(element);\n            if (!inputObj) {\n                if (process.env.NODE_ENV !== 'production') {\n                    throw new Error('Form does not have input ' + (_lodash2.default.isString(element) ? 'with name ' : '') + element + '.');\n                }\n                return false;\n            }\n            return inputObj.clearMessage() || true;\n        }\n\n        /**\n         * Validates if all errors are removed from form\n         * @public\n         */\n\n    }, {\n        key: 'validate',\n        value: function validate() {\n            if (!_lodash2.default.some(this.__inputs, function (input) {\n                return !input.isValid();\n            })) {\n                this.unlock();\n                this.state = 'ready';\n                return true;\n            }\n            return false;\n        }\n\n        /**\n         * Submit event listener\n         * - can be also forced\n         * @Note - no event is triggered\n         * @param e\n         */\n\n    }, {\n        key: 'submit',\n        value: function submit(e) {\n            var _this2 = this;\n\n            /** catch button with focus first **/\n            this.activeBtn = document.activeElement.type === 'button' ? document.activeElement : this.buttons[0];\n            /** Continue **/\n            e && e.preventDefault();\n\n            /** Lock and Load **/\n            this.lock();\n            this.state = 'loading';\n\n            /** Parse and send Data **/\n            var data = IS_FORM_DATA ? serializeFrom(this.form, this.activeBtn) : __parseSymfonyForm(this.form, this.activeBtn),\n                url = this.form.action.trim(),\n                method = (data.hasOwnProperty('_method') ? data['_method'] : this.form.method).toUpperCase(),\n                submitEvent = new _TrinityEvent2.default({\n                url: url,\n                method: method,\n                data: data\n            });\n\n            this.emit('submit', submitEvent);\n\n            if (submitEvent.defaultPrevented) {\n                return;\n            }\n\n            var req = (0, _superagent2.default)(method, url).set({\n                'Accept': 'application/json',\n                'X-Requested-With': 'XMLHttpRequest'\n            }).timeout(this.settings.requestTimeout).send(data).on('progress', function (e) {\n                _this2.emit('progress', e);\n            });\n\n            this.emit('before-request', req);\n\n            req.end(function (err, response) {\n                // Redirect ?\n                if (response && response.status === 302) {\n                    var redirectTo = response.body.location;\n                    // Do callback and then redirect\n                    if (_this2.__successHandler(response) === false) {\n                        return false;\n                    }\n                    // Redirect\n                    if (!redirectTo && process.env.NODE_ENV !== 'production') {\n                        throw new Error('Missing \"location\" attribute!');\n                    }\n\n                    redirectTo && window.location.assign(redirectTo);\n                    return;\n                }\n                // Error ?\n                if (err) {\n                    return _this2.__errorHandler(err);\n                }\n\n                _this2.__successHandler(response);\n            });\n        }\n\n        /**\n         * Adds 'success' event Listener\n         * @param callback {function}\n         * @param [context] {Object} - this argument\n         * @returns {TrinityForm}\n         */\n\n    }, {\n        key: 'success',\n        value: function success(callback, context) {\n            this.addListener('success', callback, context);\n            return this; // for chaining\n        }\n\n        /**\n         * Adds 'error' event Listener\n         * @param callback {function}\n         * @param [context] {Object} - this argument\n         * @returns {TrinityForm}\n         */\n\n    }, {\n        key: 'error',\n        value: function error(callback, context) {\n            this.addListener('error', callback, context);\n            return this; // for chaining\n        }\n\n        /**\n         * Abbreviation for addListener\n         * @param eventName {string}\n         * @param callback {function}\n         * @param context {object}\n         * @returns {TrinityForm}\n         */\n        /*eslint-disable*/\n\n    }, {\n        key: 'on',\n        value: function on(eventName, callback, context) {\n            /*eslint-enable*/\n            this.addListener.apply(this, arguments);\n        }\n\n        /**\n         * Force set submit buttons\n         * @param buttons {Array<HTMLElement>}\n         */\n\n    }, {\n        key: 'setSubmitButtons',\n        value: function setSubmitButtons(buttons) {\n            /** Add ready class to all buttons **/\n            var btnReadyClass = this.settings.button['ready'].split(' ');\n            _lodash2.default.each(this.buttons, function (btn) {\n                _Dom2.default.classlist.removeAll(btn, btnReadyClass);\n            });\n            this.buttons = buttons;\n            _lodash2.default.each(this.buttons, function (btn) {\n                _Dom2.default.classlist.addAll(btn, btnReadyClass);\n            });\n        }\n    }, {\n        key: 'detach',\n        value: function detach() {\n            // Main listener\n            this.unlistenSubmit();\n            this.unlistenValueChange();\n            this.unlistenValueInput();\n            this.element = null;\n            this.__inputs = null;\n        }\n    }, {\n        key: '__findInput',\n        value: function __findInput(element) {\n            return this.__inputs[_lodash2.default.isString(element) ? element : element.name];\n        }\n\n        /**\n         * Form success handler\n         * @param response {Object}\n         * @private\n         */\n\n    }, {\n        key: '__successHandler',\n        value: function __successHandler(response) {\n            var _this3 = this;\n\n            var event = new _TrinityEvent2.default(response);\n\n            this.state = 'success';\n            this.emit('success', event);\n\n            this.unlock();\n            var id = setTimeout(function () {\n                _this3.state = 'ready';\n                clearTimeout(id);\n            }, this.settings.successTimeout);\n\n            return !event.defaultPrevented;\n        }\n\n        /**\n         * Form error handler\n         * @param error\n         * @private\n         * @returns {boolean}\n         */\n\n    }, {\n        key: '__errorHandler',\n        value: function __errorHandler(error) {\n            var _this4 = this;\n\n            if (error.timeout) {\n                (function () {\n                    _this4.state = 'timeout';\n                    var id = setTimeout(function () {\n                        _this4.unlock();\n                        _this4.state = 'ready';\n                        clearTimeout(id);\n                    }, _this4.settings.timeoutTimeout);\n                })();\n            } else {\n                this.state = 'error';\n            }\n\n            // Emit event\n            var event = new _TrinityEvent2.default(error);\n            this.emit('error', event);\n            return !event.defaultPrevented;\n        }\n    }, {\n        key: 'state',\n        set: function set(newState) {\n            var _this5 = this;\n\n            if (newState === this.__state) {\n                return;\n            }\n            var oldState = this.__state;\n            this.__state = newState;\n\n            if (newState === 'error' || newState === 'ready') {\n                // For all btns\n                _lodash2.default.each(this.buttons, function (btn) {\n                    _Dom2.default.classlist.removeAll(btn, _this5.settings.button[oldState].split(' '));\n                    _Dom2.default.classlist.addAll(btn, _this5.settings.button[newState].split(' '));\n                });\n            } else {\n                //Switch classes for active\n                _Dom2.default.classlist.removeAll(this.activeBtn, this.settings.button[oldState].split(' '));\n                _Dom2.default.classlist.addAll(this.activeBtn, this.settings.button[newState].split(' '));\n            }\n\n            if (newState === 'error') {\n                this.lock();\n            }\n\n            // Emit new state change\n            this.emit('state-change', {\n                oldValue: oldState,\n                value: newState\n            });\n        }\n\n        /**\n         * returns actual state of form\n         */\n        ,\n        get: function get() {\n            return this.__state;\n        }\n    }]);\n\n    return TrinityForm;\n}(_fbemitter.EventEmitter);\n\n/**\n * Create message and returns object with description and element object\n * @param msg {object || string}\n * @param template {function}\n * @param prefix {string}\n * @param args {Array}\n * @returns {{message: *}|*}\n * @private\n */\n\n\nexports.default = TrinityForm;\nfunction __createMessage(msg, template, prefix, args) {\n    msg = _lodash2.default.isString(msg) ? { message: msg } : msg;\n    msg.id = msg.id || prefix + ('' + Math.random() * 100).substr(3, 4);\n\n    // Create message\n    msg.element = _Dom2.default.htmlToDocumentFragment(msg.isHtml ? msg.message : template.apply(null, [msg.message].concat(args)));\n    msg.element.setAttribute('id', msg.id);\n    return msg;\n}\n\n/**** PRIVATE METHODS ****/\n/** FORM PARSER ************************************************************/\n\n/**\n * Used to parse input name -> object path\n * @type {RegExp}\n */\nvar nameRegExp = /\\w+/g;\n\nfunction serializeFrom(form, button) {\n    var formData = new FormData();\n    (0, _lodash2.default)(form).filter(function (el) {\n\n        if (!el.name) {\n            return false;\n        }\n\n        var isValid = false;\n\n        switch (el.type) {\n            case 'submit':\n                {\n                    isValid = el === button;\n                }break;\n            case 'radio':\n            case 'checkbox':\n                {\n                    isValid = el.checked;\n                }break;\n            default:\n                {\n                    isValid = el.value && el.value.length !== 0;\n                }break;\n        }\n\n        return isValid;\n    }).each(function (el) {\n        return formData.append(el.name, el.value);\n    });\n    return formData;\n}\n\n/**\n * Parse form inputs and create json object according symfony name specifications\n * Example: <input value=\"test\" name=\"necktie_product[name]\" />\n *  {\n *      necktie_product : {\n *          name: 'test'\n *      }\n *  }\n * @private\n * @param form {HTMLFormElement}\n * @param button {HTMLElement}\n * @returns {{object}}\n */\nfunction __parseSymfonyForm(form, button) {\n    var data = {},\n        formLength = form.length;\n    /** Go through all inputs in form */\n    for (var i = 0; i < formLength; i++) {\n        if (!form[i].name || form[i].name.length < 1) {\n            continue;\n        }\n        if ((!form[i].value || form[i].value.length < 1) && form[i].type !== 'submit') {\n            continue; // No need to do any work if there are no values\n        }\n\n        switch (form[i].type) {\n            case 'submit':\n                {\n                    if (form[i] === button) {\n                        break;\n                    }\n                    continue;\n                }\n            case 'radio':\n            case 'checkbox':\n                {\n                    if (!form[i].checked) {\n                        continue;\n                    }\n                    break;\n                }\n            default:\n                break;\n        }\n\n        // Init necessary variables\n        var isArray = ~form[i].name.indexOf('[]'),\n            parsed = form[i].name.match(nameRegExp),\n            reference = data,\n            last = parsed.length - 1;\n        /** Evaluate parsed reference object */\n        for (var j = 0; j <= last; j++) {\n            if (!reference[parsed[j]]) {\n                if (j === last) {\n                    if (isArray) {\n                        reference[parsed[j]] = [];\n                        reference[parsed[j]].push(form[i].value);\n                    } else {\n                        reference[parsed[j]] = form[i].value;\n                    }\n                } else {\n                    /** Not last -> create object */\n                    reference[parsed[j]] = {};\n                    reference = reference[parsed[j]];\n                }\n            } else {\n                if (j === last) {\n                    if (isArray) {\n                        reference[parsed[j]].push(form[i].value);\n                    } else {\n                        reference[parsed[j]] = form[i].value;\n                    }\n                } else {\n                    reference = reference[parsed[j]]; // create reference\n                }\n            }\n        }\n    }\n    return data;\n}\n\n//function __parseSymfonyForm2(form, button){\n//    let data = {};\n//\n//    /** Go through all inputs in form */\n//    _(form).filter((el)=>{\n//        return !el.name\n//            || (\n//                !el.value\n//                && el.type !== 'submit'\n//                && el !== button\n//            )\n//            || (\n//                !el.checked\n//                && (\n//                    el.type === 'radio'\n//                    || el.type === 'checkbox'\n//                )\n//            );\n//    }).each((el)=>{\n//        let isArray = el.name.indexOf('[]') !== -1,\n//            parsed = el.name.match(nameRegExp),\n//            ref = data,\n//            lastIndex = parsed.length -1;\n//\n//        _.each(parsed, ()=>{\n//            //TODO:\n//        })\n//    });\n//}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(31)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L2NvbXBvbmVudHMvVHJpbml0eUZvcm0uanM/MWU4NSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9sb2Rhc2ggPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxudmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblxudmFyIF9zdXBlcmFnZW50ID0gcmVxdWlyZSgnc3VwZXJhZ2VudCcpO1xuXG52YXIgX3N1cGVyYWdlbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3VwZXJhZ2VudCk7XG5cbnZhciBfZmJlbWl0dGVyID0gcmVxdWlyZSgnZmJlbWl0dGVyJyk7XG5cbnZhciBfRXZlbnRzID0gcmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRzJyk7XG5cbnZhciBfRXZlbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50cyk7XG5cbnZhciBfVHJpbml0eUV2ZW50ID0gcmVxdWlyZSgnLi4vdXRpbHMvVHJpbml0eUV2ZW50Jyk7XG5cbnZhciBfVHJpbml0eUV2ZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RyaW5pdHlFdmVudCk7XG5cbnZhciBfRm9ybUlucHV0ID0gcmVxdWlyZSgnLi9Gb3JtSW5wdXQnKTtcblxudmFyIF9Gb3JtSW5wdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRm9ybUlucHV0KTtcblxudmFyIF9Eb20gPSByZXF1aXJlKCcuLi91dGlscy9Eb20nKTtcblxudmFyIF9Eb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRG9tKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG4vKipcbiAqIERlZmF1bHQgRk9STSBzZXR0aW5nc1xuICogQHR5cGUge3tcbiAqICAgICAgYnV0dG9uOiB7bG9hZGluZzogc3RyaW5nLCBzdWNjZXNzOiBzdHJpbmcsIGVycm9yOiBzdHJpbmcsIHJlYWR5OiBzdHJpbmd9LFxuICogICAgICBzdWNjZXNzVGltZW91dDogbnVtYmVyXG4gKiAgIH19XG4gKi9cbnZhciBkZWZhdWx0U2V0dGluZ3MgPSB7XG4gICAgYnV0dG9uOiB7IC8vIERlZmluZXMgd2hpY2ggY2xhc3NlcyBhZGQgdG8gYWN0aXZlIGJ1dHRvbiBpbiB3aGljaCBzdGF0ZVxuICAgICAgICBsb2FkaW5nOiAndHJpbml0eS1mb3JtLWxvYWRpbmcnLFxuICAgICAgICBzdWNjZXNzOiAndHJpbml0eS1mb3JtLXN1Y2Nlc3MnLFxuICAgICAgICB0aW1lb3V0OiAndHJpbml0eS1mb3JtLXRpbWVvdXQnLFxuICAgICAgICBlcnJvcjogJ3RyaW5pdHktZm9ybS1lcnJvcicsXG4gICAgICAgIHJlYWR5OiAndHJpbml0eS1mb3JtLXJlYWR5J1xuICAgIH0sXG4gICAgcmVxdWVzdFRpbWVvdXQ6IDEwMDAwLFxuICAgIHN1Y2Nlc3NUaW1lb3V0OiAzMDAwLFxuICAgIHRpbWVvdXRUaW1lb3V0OiAyMDAwLFxuICAgIGVycm9yVGVtcGxhdGU6IGZ1bmN0aW9uIGVycm9yVGVtcGxhdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gJzxkaXY+JyArIG1lc3NhZ2UgKyAnPC9kaXY+JztcbiAgICB9LFxuICAgIG1lc3NhZ2VUZW1wbGF0ZTogZnVuY3Rpb24gbWVzc2FnZVRlbXBsYXRlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuICc8ZGl2PicgKyBtZXNzYWdlICsgJzwvZGl2Pic7XG4gICAgfVxufTtcblxudmFyIElTX0ZPUk1fREFUQSA9ICEhd2luZG93LkZvcm1EYXRhO1xudmFyIElOUFVUX1RZUEVfRklMVEVSID0gWydyYWRpbycsICdjaGVja2JveCddO1xuXG4vKipcbiAqIENvbm5lY3RzIHRvIGZvcm1FbGVtZW50IGFuZCBjaGFuZ2UgaXQgdG8gYWpheCBmb3JtXG4gKlxuICogQHBhcmFtIGZvcm0ge0hUTUxGb3JtRWxlbWVudH1cbiAqIEBwYXJhbSBbdHlwZV0ge1N0cmluZ30gLSB0eXBlIG9mIGZvcm1cbiAqIEBwYXJhbSBbc2V0dGluZ3NdIHtPYmplY3R9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG52YXIgVHJpbml0eUZvcm0gPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuICAgIF9pbmhlcml0cyhUcmluaXR5Rm9ybSwgX0V2ZW50RW1pdHRlcik7XG5cbiAgICBmdW5jdGlvbiBUcmluaXR5Rm9ybShmb3JtRWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyaW5pdHlGb3JtKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVHJpbml0eUZvcm0uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUcmluaXR5Rm9ybSkpLmNhbGwodGhpcykpO1xuXG4gICAgICAgIGlmICghZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBcImZvcm1FbGVtZW50XCIgcGFyYW1ldGVyIScpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmZvcm0gPSBmb3JtRWxlbWVudDtcbiAgICAgICAgX3RoaXMuYnV0dG9ucyA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0sIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XG4gICAgICAgIF90aGlzLmFjdGl2ZUJ0biA9IG51bGw7XG4gICAgICAgIF90aGlzLnNldHRpbmdzID0gX2xvZGFzaDIuZGVmYXVsdC5kZWZhdWx0c0RlZXAoc2V0dGluZ3MgfHwge30sIGRlZmF1bHRTZXR0aW5ncyk7XG4gICAgICAgIF90aGlzLl9fc3RhdGUgPSAncmVhZHknO1xuICAgICAgICBfdGhpcy5fX2lucHV0cyA9IHt9O1xuXG4gICAgICAgIC8vTWFpbiBpbml0aWFsaXplXG4gICAgICAgIC8vIENyZWF0ZSBpbnB1dHNcbiAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5lYWNoKF90aGlzLmZvcm0sIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgaWYgKGVsLm5hbWUgJiYgIX5JTlBVVF9UWVBFX0ZJTFRFUi5pbmRleE9mKGVsLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX19pbnB1dHNbZWwubmFtZV0gPSBuZXcgX0Zvcm1JbnB1dDIuZGVmYXVsdChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCByZWFkeSBjbGFzcyB0byBhbGwgYnV0dG9uc1xuICAgICAgICB2YXIgYnRuUmVhZHlDbGFzcyA9IF90aGlzLnNldHRpbmdzLmJ1dHRvblsncmVhZHknXS5zcGxpdCgnICcpO1xuICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goX3RoaXMuYnV0dG9ucywgZnVuY3Rpb24gKGJ0bikge1xuICAgICAgICAgICAgcmV0dXJuIF9Eb20yLmRlZmF1bHQuY2xhc3NsaXN0LmFkZEFsbChidG4sIGJ0blJlYWR5Q2xhc3MpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXQgbGFzdFxuICAgICAgICAvLyBBZGQgbGlzdGVuZXIgdG8gZm9ybSBlbGVtZW50XG4gICAgICAgIF90aGlzLnVubGlzdGVuU3VibWl0ID0gX0V2ZW50czIuZGVmYXVsdC5saXN0ZW4oZm9ybUVsZW1lbnQsICdzdWJtaXQnLCBfdGhpcy5zdWJtaXQuYmluZChfdGhpcykpO1xuICAgICAgICAvLyBBZGQgbGlzdGVuZXIgZm9yIGlucHV0IHZhbHVlIGNoYW5nZVxuICAgICAgICBfdGhpcy51bmxpc3RlblZhbHVlSW5wdXQgPSBfRXZlbnRzMi5kZWZhdWx0Lmxpc3Rlbihmb3JtRWxlbWVudCwgJ2lucHV0JywgX3RoaXMub25JbnB1dENoYW5nZS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLnVubGlzdGVuVmFsdWVDaGFuZ2UgPSBfRXZlbnRzMi5kZWZhdWx0Lmxpc3Rlbihmb3JtRWxlbWVudCwgJ2NoYW5nZScsIF90aGlzLm9uSW5wdXRDaGFuZ2UuYmluZChfdGhpcykpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBuZXcgZm9ybSBzdGF0ZVxuICAgICAqICAtIGFkZCBzdGF0ZSBjbGFzc2VzIHRvIGJ1dHRvblxuICAgICAqICAtIGVtaXQgXCJzdGF0ZS1jaGFuZ2VcIiBldmVudFxuICAgICAqIEBwYXJhbSBuZXdTdGF0ZVxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoVHJpbml0eUZvcm0sIFt7XG4gICAgICAgIGtleTogJ2xvY2snLFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGUgYWxsIGZvcm1zIHN1Ym1pdCBpbnB1dHNcbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2NrKCkge1xuICAgICAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5lYWNoKHRoaXMuYnV0dG9ucywgX0RvbTIuZGVmYXVsdC5kaXNhYmxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmFibGUgYWxsIGZvcm1zIHN1Ym1pdCBpbnB1dHNcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VubG9jaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1bmxvY2soKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSAhPT0gJ2xvYWRpbmcnICYmICEhX2xvZGFzaDIuZGVmYXVsdC5lYWNoKHRoaXMuYnV0dG9ucywgX0RvbTIuZGVmYXVsdC5lbmFibGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1haW4gZnVuY3Rpb24gd2hpY2ggcnVucyB2YWxpZGF0aW9uXG4gICAgICAgICAqIEBwYXJhbSBlIHtFdmVudH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ29uSW5wdXRDaGFuZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25JbnB1dENoYW5nZShlKSB7XG4gICAgICAgICAgICAvLyBPbmx5IGVsZW1lbnRzIHdpdGggbmFtZSBjYW4gYmUgdGVzdGVkXG5cbiAgICAgICAgICAgIC8vIEZpbHRlclxuICAgICAgICAgICAgdmFyIGlzU2VsZWN0VHlwZSA9IGUudGFyZ2V0LnR5cGUgPyAhIX5lLnRhcmdldC50eXBlLmluZGV4T2YoJ3NlbGVjdCcpIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgLy90ZXN4dGFyZWEgZG9lcyBub3QgaGF2ZSB0eXBlIHByb3BcbiAgICAgICAgICAgIGlzQ2hhbmdlRXZlbnQgPSBlLnR5cGUgPT09ICdjaGFuZ2UnO1xuXG4gICAgICAgICAgICBpZiAoaXNTZWxlY3RUeXBlIF4gaXNDaGFuZ2VFdmVudCB8fCAhZS50YXJnZXQubmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbnB1dE9iaiA9IHRoaXMuX19pbnB1dHNbZS50YXJnZXQubmFtZV07XG4gICAgICAgICAgICBpZiAoIWlucHV0T2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXRPYmouZXJyb3JzID0gX2xvZGFzaDIuZGVmYXVsdC5maWx0ZXIoaW5wdXRPYmouZXJyb3JzLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfbG9kYXNoMi5kZWZhdWx0LmlzRnVuY3Rpb24oZXJyLnZhbGlkYXRlKSB8fCBlcnIudmFsaWRhdGUoaW5wdXRPYmouZ2V0VmFsdWUoKSwgaW5wdXRPYmouZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgX0RvbTIuZGVmYXVsdC5yZW1vdmVOb2RlKGVyci5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyplc2xpbnQtZGlzYWJsZSovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUT0RPOiBmZWF0dXJlXG4gICAgICAgICAqIEBub3RJbXBsZW1lbnRlZFxuICAgICAgICAgKiBAcGFyYW0gZWxlbWVudCB7SFRNTEVsZW1lbnQgfHwgc3RyaW5nfSAtIG5hbWUgb2YgaW5wdXQgb3IgaW5wdXQgaXRzZWxmXG4gICAgICAgICAqIEBwYXJhbSB2YWxpZGF0b3JcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhZGRSdWxlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFJ1bGUoZWxlbWVudCwgdmFsaWRhdG9yKSB7fVxuICAgICAgICAvLyByZXR1cm47XG4gICAgICAgIC8vIGxldCBpbnB1dE9iaiA9IHRoaXMuX19maW5kSW5wdXQoZWxlbWVudCk7XG4gICAgICAgIC8vIGlmICghaW5wdXRPYmopIHtcbiAgICAgICAgLy8gICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8vICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIGRvZXMgbm90IGhhdmUgaW5wdXQgJyArIChfLmlzU3RyaW5nKGVsZW1lbnQpID8gJ3dpdGggbmFtZSAnIDogJycpICsgZWxlbWVudCArICcuJyk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gcmV0dXJuICEhaW5wdXRPYmoucnVsZXMucHVzaCh2YWxpZGF0b3IpO1xuXG4gICAgICAgIC8qZXNsaW50LWVuYWJsZSovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgbmV3IGVycm9yIHRvIFRyaW5pdHlGb3JtIGluc3RhbmNlXG4gICAgICAgICAqIEBwYXJhbSBlbGVtZW50IHtzdHJpbmcgfHwgSFRNTEVsZW1lbnR9IC0gaW5wdXQgbmFtZSBvciBpbnN0YW5jZSBpdHNlbGZcbiAgICAgICAgICogQHBhcmFtIGVycm9yIHtzdHJpbmcgfHwgb2JqZWN0fVxuICAgICAgICAgKiBAcGFyYW0gW2FyZ3NdIHtBcnJheX1cbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYWRkRXJyb3InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRXJyb3IoZWxlbWVudCwgZXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dE9iaiA9IHRoaXMuX19maW5kSW5wdXQoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIWlucHV0T2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIGRvZXMgbm90IGhhdmUgaW5wdXQgJyArIChfbG9kYXNoMi5kZWZhdWx0LmlzU3RyaW5nKGVsZW1lbnQpID8gJ3dpdGggbmFtZSAnIDogJycpICsgZWxlbWVudCArICcuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAnZXJyb3InO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAyID8gX2xlbiAtIDIgOiAwKSwgX2tleSA9IDI7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19rZXkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVyck9iaiA9IF9fY3JlYXRlTWVzc2FnZShlcnJvciwgLy8gZXJyb3Igb2JqZWN0IG9yIHN0cmluZ1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5lcnJvclRlbXBsYXRlLCAvLyB0ZW1wbGF0ZVxuICAgICAgICAgICAgaW5wdXRPYmouZWxlbWVudC5uYW1lICsgJ19lcnJvcl8nLCAvLyBwcmVmaXggaWYgbm8gaWRcbiAgICAgICAgICAgIGFyZ3MgLy8gcmVzdCBvZiBhcmdzXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0T2JqLmFkZEVycm9yKGVyck9iaik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2sgaWYgaW5wdXQgZWxlbWVudCBoYXMgZXJyb3Igd2l0aCBwcm92aWRlZCBrZXlcbiAgICAgICAgICogb3IgaWYga2V5IG5vdCBwcm92aWRlZCwgY2hlY2tzIGlmIGlucHV0IGhhcyBhbnkgZXJyb3JcbiAgICAgICAgICogQHBhcmFtIGVsZW1lbnQge0hUTUxFbGVtZW50IHx8IHN0cmluZ30gLSBuYW1lIG9mIGlucHV0IG9yIGlucHV0IGl0c2VsZlxuICAgICAgICAgKiBAcGFyYW0gW2Vycm9ySWRdIHtzdHJpbmd9XG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFzRXJyb3InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFzRXJyb3IoZWxlbWVudCwgZXJyb3JJZCkge1xuICAgICAgICAgICAgdmFyIGlucHV0T2JqID0gdGhpcy5fX2ZpbmRJbnB1dChlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICghaW5wdXRPYmopIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gZG9lcyBub3QgaGF2ZSBpbnB1dCAnICsgKF9sb2Rhc2gyLmRlZmF1bHQuaXNTdHJpbmcoZWxlbWVudCkgPyAnd2l0aCBuYW1lICcgOiAnJykgKyBlbGVtZW50ICsgJy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVycm9ySWQgPyBfbG9kYXNoMi5kZWZhdWx0LnNvbWUoaW5wdXRPYmouZXJyb3JzLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVyci5pZCA9PT0gZXJyb3JJZDtcbiAgICAgICAgICAgIH0pIDogaW5wdXRPYmouZXJyb3JzLmxlbmd0aCA+IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlIGVycm9yIHdpdGggZXJyb3JLZXkgcHJvdmlkZWQsIG9yIHJlbW92ZSBhbGwgZXJyb3JzIGlmIGVycm9yS2V5IGlzIG5vdCBwcm92aWRlZFxuICAgICAgICAgKiBAcGFyYW0gZWxlbWVudCB7SFRNTEVsZW1lbnQgfHwgc3RyaW5nfSAtIG5hbWUgb2YgaW5wdXQgb3IgaW5wdXQgaXRzZWxmXG4gICAgICAgICAqIEBwYXJhbSBbZXJyb3JJZF0ge3N0cmluZ31cbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW1vdmVFcnJvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVFcnJvcihlbGVtZW50LCBlcnJvcklkKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRPYmogPSB0aGlzLl9fZmluZElucHV0KGVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKCFpbnB1dE9iaikge1xuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBkb2VzIG5vdCBoYXZlIGlucHV0ICcgKyAoX2xvZGFzaDIuZGVmYXVsdC5pc1N0cmluZyhlbGVtZW50KSA/ICd3aXRoIG5hbWUgJyA6ICcnKSArIGVsZW1lbnQgKyAnLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlcnJvcklkKSB7XG4gICAgICAgICAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5yZW1vdmUoaW5wdXRPYmouZXJyb3JzLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnIuaWQgPT09IGVycm9ySWQgJiYgISFfRG9tMi5kZWZhdWx0LnJlbW92ZU5vZGUoZXJyLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGlmIGVycm9yIGtleSBub3QgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goaW5wdXRPYmouZXJyb3JzLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfRG9tMi5kZWZhdWx0LnJlbW92ZU5vZGUoZXJyLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlucHV0T2JqLmVycm9ycyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG1lc3NhZ2UgdG8gcmVxdWVzdGVkIGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIGVsZW1lbnQge0hUTUxFbGVtZW50IHx8IHN0cmluZ30gLSBuYW1lIG9mIGlucHV0IG9yIGlucHV0IGl0c2VsZlxuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSB7b2JqZWN0IHx8IHN0cmluZ31cbiAgICAgICAgICogQHBhcmFtIFthcmdzXVxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gaWQgb3IgZmFsc2UgaWYgZWxlbWVudCB3YXMgbm90IGZvdW5kXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRNZXNzYWdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldE1lc3NhZ2UoZWxlbWVudCwgbWVzc2FnZSkge1xuICAgICAgICAgICAgdmFyIGlucHV0T2JqID0gdGhpcy5fX2ZpbmRJbnB1dChlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICghaW5wdXRPYmopIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gZG9lcyBub3QgaGF2ZSBpbnB1dCAnICsgKF9sb2Rhc2gyLmRlZmF1bHQuaXNTdHJpbmcoZWxlbWVudCkgPyAnd2l0aCBuYW1lICcgOiAnJykgKyBlbGVtZW50ICsgJy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDIgPyBfbGVuMiAtIDIgOiAwKSwgX2tleTIgPSAyOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfa2V5MiAtIDJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG1zZyA9IF9fY3JlYXRlTWVzc2FnZShtZXNzYWdlLCAvLyBtc2cgb2JqZWN0IG9yIHN0cmluZ1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5tZXNzYWdlVGVtcGxhdGUsIC8vIHRlbXBsYXRlIG9iamVjdFxuICAgICAgICAgICAgaW5wdXRPYmouZWxlbWVudC5uYW1lICsgJ19tc2dfJywgLy8gcHJlZml4XG4gICAgICAgICAgICBhcmdzIC8vIGFyZ3NcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRPYmouc2V0TWVzc2FnZShtc2cpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZXMgbWVzc2FnZSBmcm9tIGlucHV0XG4gICAgICAgICAqIEBwYXJhbSBlbGVtZW50IHtIVE1MRWxlbWVudCB8fCBzdHJpbmd9IC0gbmFtZSBvZiBpbnB1dCBvciBpbnB1dCBpdHNlbGZcbiAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW1vdmVNZXNzYWdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZU1lc3NhZ2UoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGlucHV0T2JqID0gdGhpcy5fX2ZpbmRJbnB1dChlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICghaW5wdXRPYmopIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gZG9lcyBub3QgaGF2ZSBpbnB1dCAnICsgKF9sb2Rhc2gyLmRlZmF1bHQuaXNTdHJpbmcoZWxlbWVudCkgPyAnd2l0aCBuYW1lICcgOiAnJykgKyBlbGVtZW50ICsgJy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlucHV0T2JqLmNsZWFyTWVzc2FnZSgpIHx8IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVmFsaWRhdGVzIGlmIGFsbCBlcnJvcnMgYXJlIHJlbW92ZWQgZnJvbSBmb3JtXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3ZhbGlkYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkge1xuICAgICAgICAgICAgaWYgKCFfbG9kYXNoMi5kZWZhdWx0LnNvbWUodGhpcy5fX2lucHV0cywgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFpbnB1dC5pc1ZhbGlkKCk7XG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5sb2NrKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9ICdyZWFkeSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU3VibWl0IGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAqIC0gY2FuIGJlIGFsc28gZm9yY2VkXG4gICAgICAgICAqIEBOb3RlIC0gbm8gZXZlbnQgaXMgdHJpZ2dlcmVkXG4gICAgICAgICAqIEBwYXJhbSBlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzdWJtaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3VibWl0KGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICAvKiogY2F0Y2ggYnV0dG9uIHdpdGggZm9jdXMgZmlyc3QgKiovXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUJ0biA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudHlwZSA9PT0gJ2J1dHRvbicgPyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IDogdGhpcy5idXR0b25zWzBdO1xuICAgICAgICAgICAgLyoqIENvbnRpbnVlICoqL1xuICAgICAgICAgICAgZSAmJiBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIC8qKiBMb2NrIGFuZCBMb2FkICoqL1xuICAgICAgICAgICAgdGhpcy5sb2NrKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gJ2xvYWRpbmcnO1xuXG4gICAgICAgICAgICAvKiogUGFyc2UgYW5kIHNlbmQgRGF0YSAqKi9cbiAgICAgICAgICAgIHZhciBkYXRhID0gSVNfRk9STV9EQVRBID8gc2VyaWFsaXplRnJvbSh0aGlzLmZvcm0sIHRoaXMuYWN0aXZlQnRuKSA6IF9fcGFyc2VTeW1mb255Rm9ybSh0aGlzLmZvcm0sIHRoaXMuYWN0aXZlQnRuKSxcbiAgICAgICAgICAgICAgICB1cmwgPSB0aGlzLmZvcm0uYWN0aW9uLnRyaW0oKSxcbiAgICAgICAgICAgICAgICBtZXRob2QgPSAoZGF0YS5oYXNPd25Qcm9wZXJ0eSgnX21ldGhvZCcpID8gZGF0YVsnX21ldGhvZCddIDogdGhpcy5mb3JtLm1ldGhvZCkudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgICAgICBzdWJtaXRFdmVudCA9IG5ldyBfVHJpbml0eUV2ZW50Mi5kZWZhdWx0KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5lbWl0KCdzdWJtaXQnLCBzdWJtaXRFdmVudCk7XG5cbiAgICAgICAgICAgIGlmIChzdWJtaXRFdmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcmVxID0gKDAsIF9zdXBlcmFnZW50Mi5kZWZhdWx0KShtZXRob2QsIHVybCkuc2V0KHtcbiAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0J1xuICAgICAgICAgICAgfSkudGltZW91dCh0aGlzLnNldHRpbmdzLnJlcXVlc3RUaW1lb3V0KS5zZW5kKGRhdGEpLm9uKCdwcm9ncmVzcycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmVtaXQoJ3Byb2dyZXNzJywgZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5lbWl0KCdiZWZvcmUtcmVxdWVzdCcsIHJlcSk7XG5cbiAgICAgICAgICAgIHJlcS5lbmQoZnVuY3Rpb24gKGVyciwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBSZWRpcmVjdCA/XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gMzAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdFRvID0gcmVzcG9uc2UuYm9keS5sb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gY2FsbGJhY2sgYW5kIHRoZW4gcmVkaXJlY3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMi5fX3N1Y2Nlc3NIYW5kbGVyKHJlc3BvbnNlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBSZWRpcmVjdFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZGlyZWN0VG8gJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFwibG9jYXRpb25cIiBhdHRyaWJ1dGUhJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFRvICYmIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24ocmVkaXJlY3RUbyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRXJyb3IgP1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5fX2Vycm9ySGFuZGxlcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF90aGlzMi5fX3N1Y2Nlc3NIYW5kbGVyKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgJ3N1Y2Nlc3MnIGV2ZW50IExpc3RlbmVyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB7ZnVuY3Rpb259XG4gICAgICAgICAqIEBwYXJhbSBbY29udGV4dF0ge09iamVjdH0gLSB0aGlzIGFyZ3VtZW50XG4gICAgICAgICAqIEByZXR1cm5zIHtUcmluaXR5Rm9ybX1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3N1Y2Nlc3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3VjY2VzcyhjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcignc3VjY2VzcycsIGNhbGxiYWNrLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzOyAvLyBmb3IgY2hhaW5pbmdcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzICdlcnJvcicgZXZlbnQgTGlzdGVuZXJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIHtmdW5jdGlvbn1cbiAgICAgICAgICogQHBhcmFtIFtjb250ZXh0XSB7T2JqZWN0fSAtIHRoaXMgYXJndW1lbnRcbiAgICAgICAgICogQHJldHVybnMge1RyaW5pdHlGb3JtfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZXJyb3InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXJyb3IoY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXIoJ2Vycm9yJywgY2FsbGJhY2ssIGNvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7IC8vIGZvciBjaGFpbmluZ1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFiYnJldmlhdGlvbiBmb3IgYWRkTGlzdGVuZXJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSB7c3RyaW5nfVxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge2Z1bmN0aW9ufVxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dCB7b2JqZWN0fVxuICAgICAgICAgKiBAcmV0dXJucyB7VHJpbml0eUZvcm19XG4gICAgICAgICAqL1xuICAgICAgICAvKmVzbGludC1kaXNhYmxlKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnROYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgICAgICAgLyplc2xpbnQtZW5hYmxlKi9cbiAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3JjZSBzZXQgc3VibWl0IGJ1dHRvbnNcbiAgICAgICAgICogQHBhcmFtIGJ1dHRvbnMge0FycmF5PEhUTUxFbGVtZW50Pn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFN1Ym1pdEJ1dHRvbnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3VibWl0QnV0dG9ucyhidXR0b25zKSB7XG4gICAgICAgICAgICAvKiogQWRkIHJlYWR5IGNsYXNzIHRvIGFsbCBidXR0b25zICoqL1xuICAgICAgICAgICAgdmFyIGJ0blJlYWR5Q2xhc3MgPSB0aGlzLnNldHRpbmdzLmJ1dHRvblsncmVhZHknXS5zcGxpdCgnICcpO1xuICAgICAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5lYWNoKHRoaXMuYnV0dG9ucywgZnVuY3Rpb24gKGJ0bikge1xuICAgICAgICAgICAgICAgIF9Eb20yLmRlZmF1bHQuY2xhc3NsaXN0LnJlbW92ZUFsbChidG4sIGJ0blJlYWR5Q2xhc3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbnMgPSBidXR0b25zO1xuICAgICAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5lYWNoKHRoaXMuYnV0dG9ucywgZnVuY3Rpb24gKGJ0bikge1xuICAgICAgICAgICAgICAgIF9Eb20yLmRlZmF1bHQuY2xhc3NsaXN0LmFkZEFsbChidG4sIGJ0blJlYWR5Q2xhc3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RldGFjaCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRhY2goKSB7XG4gICAgICAgICAgICAvLyBNYWluIGxpc3RlbmVyXG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuU3VibWl0KCk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuVmFsdWVDaGFuZ2UoKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5WYWx1ZUlucHV0KCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fX2lucHV0cyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19fZmluZElucHV0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9fZmluZElucHV0KGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9faW5wdXRzW19sb2Rhc2gyLmRlZmF1bHQuaXNTdHJpbmcoZWxlbWVudCkgPyBlbGVtZW50IDogZWxlbWVudC5uYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3JtIHN1Y2Nlc3MgaGFuZGxlclxuICAgICAgICAgKiBAcGFyYW0gcmVzcG9uc2Uge09iamVjdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19fc3VjY2Vzc0hhbmRsZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX19zdWNjZXNzSGFuZGxlcihyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBfVHJpbml0eUV2ZW50Mi5kZWZhdWx0KHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9ICdzdWNjZXNzJztcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnc3VjY2VzcycsIGV2ZW50KTtcblxuICAgICAgICAgICAgdGhpcy51bmxvY2soKTtcbiAgICAgICAgICAgIHZhciBpZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMy5zdGF0ZSA9ICdyZWFkeSc7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgICAgICAgIH0sIHRoaXMuc2V0dGluZ3Muc3VjY2Vzc1RpbWVvdXQpO1xuXG4gICAgICAgICAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybSBlcnJvciBoYW5kbGVyXG4gICAgICAgICAqIEBwYXJhbSBlcnJvclxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19fZXJyb3JIYW5kbGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9fZXJyb3JIYW5kbGVyKGVycm9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKGVycm9yLnRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuc3RhdGUgPSAndGltZW91dCc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnVubG9jaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnN0YXRlID0gJ3JlYWR5JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIF90aGlzNC5zZXR0aW5ncy50aW1lb3V0VGltZW91dCk7XG4gICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9ICdlcnJvcic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVtaXQgZXZlbnRcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBfVHJpbml0eUV2ZW50Mi5kZWZhdWx0KGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBldmVudCk7XG4gICAgICAgICAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3N0YXRlJyxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3U3RhdGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAobmV3U3RhdGUgPT09IHRoaXMuX19zdGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvbGRTdGF0ZSA9IHRoaXMuX19zdGF0ZTtcbiAgICAgICAgICAgIHRoaXMuX19zdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgICAgICAgICBpZiAobmV3U3RhdGUgPT09ICdlcnJvcicgfHwgbmV3U3RhdGUgPT09ICdyZWFkeScpIHtcbiAgICAgICAgICAgICAgICAvLyBGb3IgYWxsIGJ0bnNcbiAgICAgICAgICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2godGhpcy5idXR0b25zLCBmdW5jdGlvbiAoYnRuKSB7XG4gICAgICAgICAgICAgICAgICAgIF9Eb20yLmRlZmF1bHQuY2xhc3NsaXN0LnJlbW92ZUFsbChidG4sIF90aGlzNS5zZXR0aW5ncy5idXR0b25bb2xkU3RhdGVdLnNwbGl0KCcgJykpO1xuICAgICAgICAgICAgICAgICAgICBfRG9tMi5kZWZhdWx0LmNsYXNzbGlzdC5hZGRBbGwoYnRuLCBfdGhpczUuc2V0dGluZ3MuYnV0dG9uW25ld1N0YXRlXS5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9Td2l0Y2ggY2xhc3NlcyBmb3IgYWN0aXZlXG4gICAgICAgICAgICAgICAgX0RvbTIuZGVmYXVsdC5jbGFzc2xpc3QucmVtb3ZlQWxsKHRoaXMuYWN0aXZlQnRuLCB0aGlzLnNldHRpbmdzLmJ1dHRvbltvbGRTdGF0ZV0uc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICAgICAgX0RvbTIuZGVmYXVsdC5jbGFzc2xpc3QuYWRkQWxsKHRoaXMuYWN0aXZlQnRuLCB0aGlzLnNldHRpbmdzLmJ1dHRvbltuZXdTdGF0ZV0uc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXdTdGF0ZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9jaygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFbWl0IG5ldyBzdGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnc3RhdGUtY2hhbmdlJywge1xuICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBvbGRTdGF0ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3U3RhdGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybnMgYWN0dWFsIHN0YXRlIG9mIGZvcm1cbiAgICAgICAgICovXG4gICAgICAgICxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fX3N0YXRlO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRyaW5pdHlGb3JtO1xufShfZmJlbWl0dGVyLkV2ZW50RW1pdHRlcik7XG5cbi8qKlxuICogQ3JlYXRlIG1lc3NhZ2UgYW5kIHJldHVybnMgb2JqZWN0IHdpdGggZGVzY3JpcHRpb24gYW5kIGVsZW1lbnQgb2JqZWN0XG4gKiBAcGFyYW0gbXNnIHtvYmplY3QgfHwgc3RyaW5nfVxuICogQHBhcmFtIHRlbXBsYXRlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSBwcmVmaXgge3N0cmluZ31cbiAqIEBwYXJhbSBhcmdzIHtBcnJheX1cbiAqIEByZXR1cm5zIHt7bWVzc2FnZTogKn18Kn1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5leHBvcnRzLmRlZmF1bHQgPSBUcmluaXR5Rm9ybTtcbmZ1bmN0aW9uIF9fY3JlYXRlTWVzc2FnZShtc2csIHRlbXBsYXRlLCBwcmVmaXgsIGFyZ3MpIHtcbiAgICBtc2cgPSBfbG9kYXNoMi5kZWZhdWx0LmlzU3RyaW5nKG1zZykgPyB7IG1lc3NhZ2U6IG1zZyB9IDogbXNnO1xuICAgIG1zZy5pZCA9IG1zZy5pZCB8fCBwcmVmaXggKyAoJycgKyBNYXRoLnJhbmRvbSgpICogMTAwKS5zdWJzdHIoMywgNCk7XG5cbiAgICAvLyBDcmVhdGUgbWVzc2FnZVxuICAgIG1zZy5lbGVtZW50ID0gX0RvbTIuZGVmYXVsdC5odG1sVG9Eb2N1bWVudEZyYWdtZW50KG1zZy5pc0h0bWwgPyBtc2cubWVzc2FnZSA6IHRlbXBsYXRlLmFwcGx5KG51bGwsIFttc2cubWVzc2FnZV0uY29uY2F0KGFyZ3MpKSk7XG4gICAgbXNnLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIG1zZy5pZCk7XG4gICAgcmV0dXJuIG1zZztcbn1cblxuLyoqKiogUFJJVkFURSBNRVRIT0RTICoqKiovXG4vKiogRk9STSBQQVJTRVIgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIFVzZWQgdG8gcGFyc2UgaW5wdXQgbmFtZSAtPiBvYmplY3QgcGF0aFxuICogQHR5cGUge1JlZ0V4cH1cbiAqL1xudmFyIG5hbWVSZWdFeHAgPSAvXFx3Ky9nO1xuXG5mdW5jdGlvbiBzZXJpYWxpemVGcm9tKGZvcm0sIGJ1dHRvbikge1xuICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICgwLCBfbG9kYXNoMi5kZWZhdWx0KShmb3JtKS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG5cbiAgICAgICAgaWYgKCFlbC5uYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNWYWxpZCA9IGZhbHNlO1xuXG4gICAgICAgIHN3aXRjaCAoZWwudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnc3VibWl0JzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBlbCA9PT0gYnV0dG9uO1xuICAgICAgICAgICAgICAgIH1icmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3JhZGlvJzpcbiAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBlbC5jaGVja2VkO1xuICAgICAgICAgICAgICAgIH1icmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gZWwudmFsdWUgJiYgZWwudmFsdWUubGVuZ3RoICE9PSAwO1xuICAgICAgICAgICAgICAgIH1icmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpc1ZhbGlkO1xuICAgIH0pLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBmb3JtRGF0YS5hcHBlbmQoZWwubmFtZSwgZWwudmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtRGF0YTtcbn1cblxuLyoqXG4gKiBQYXJzZSBmb3JtIGlucHV0cyBhbmQgY3JlYXRlIGpzb24gb2JqZWN0IGFjY29yZGluZyBzeW1mb255IG5hbWUgc3BlY2lmaWNhdGlvbnNcbiAqIEV4YW1wbGU6IDxpbnB1dCB2YWx1ZT1cInRlc3RcIiBuYW1lPVwibmVja3RpZV9wcm9kdWN0W25hbWVdXCIgLz5cbiAqICB7XG4gKiAgICAgIG5lY2t0aWVfcHJvZHVjdCA6IHtcbiAqICAgICAgICAgIG5hbWU6ICd0ZXN0J1xuICogICAgICB9XG4gKiAgfVxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBmb3JtIHtIVE1MRm9ybUVsZW1lbnR9XG4gKiBAcGFyYW0gYnV0dG9uIHtIVE1MRWxlbWVudH1cbiAqIEByZXR1cm5zIHt7b2JqZWN0fX1cbiAqL1xuZnVuY3Rpb24gX19wYXJzZVN5bWZvbnlGb3JtKGZvcm0sIGJ1dHRvbikge1xuICAgIHZhciBkYXRhID0ge30sXG4gICAgICAgIGZvcm1MZW5ndGggPSBmb3JtLmxlbmd0aDtcbiAgICAvKiogR28gdGhyb3VnaCBhbGwgaW5wdXRzIGluIGZvcm0gKi9cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcm1MZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWZvcm1baV0ubmFtZSB8fCBmb3JtW2ldLm5hbWUubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCghZm9ybVtpXS52YWx1ZSB8fCBmb3JtW2ldLnZhbHVlLmxlbmd0aCA8IDEpICYmIGZvcm1baV0udHlwZSAhPT0gJ3N1Ym1pdCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBObyBuZWVkIHRvIGRvIGFueSB3b3JrIGlmIHRoZXJlIGFyZSBubyB2YWx1ZXNcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoZm9ybVtpXS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdzdWJtaXQnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1baV0gPT09IGJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3JtW2ldLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbml0IG5lY2Vzc2FyeSB2YXJpYWJsZXNcbiAgICAgICAgdmFyIGlzQXJyYXkgPSB+Zm9ybVtpXS5uYW1lLmluZGV4T2YoJ1tdJyksXG4gICAgICAgICAgICBwYXJzZWQgPSBmb3JtW2ldLm5hbWUubWF0Y2gobmFtZVJlZ0V4cCksXG4gICAgICAgICAgICByZWZlcmVuY2UgPSBkYXRhLFxuICAgICAgICAgICAgbGFzdCA9IHBhcnNlZC5sZW5ndGggLSAxO1xuICAgICAgICAvKiogRXZhbHVhdGUgcGFyc2VkIHJlZmVyZW5jZSBvYmplY3QgKi9cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPD0gbGFzdDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoIXJlZmVyZW5jZVtwYXJzZWRbal1dKSB7XG4gICAgICAgICAgICAgICAgaWYgKGogPT09IGxhc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZVtwYXJzZWRbal1dID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VbcGFyc2VkW2pdXS5wdXNoKGZvcm1baV0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlW3BhcnNlZFtqXV0gPSBmb3JtW2ldLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLyoqIE5vdCBsYXN0IC0+IGNyZWF0ZSBvYmplY3QgKi9cbiAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlW3BhcnNlZFtqXV0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlID0gcmVmZXJlbmNlW3BhcnNlZFtqXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gbGFzdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlW3BhcnNlZFtqXV0ucHVzaChmb3JtW2ldLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZVtwYXJzZWRbal1dID0gZm9ybVtpXS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZSA9IHJlZmVyZW5jZVtwYXJzZWRbal1dOyAvLyBjcmVhdGUgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufVxuXG4vL2Z1bmN0aW9uIF9fcGFyc2VTeW1mb255Rm9ybTIoZm9ybSwgYnV0dG9uKXtcbi8vICAgIGxldCBkYXRhID0ge307XG4vL1xuLy8gICAgLyoqIEdvIHRocm91Z2ggYWxsIGlucHV0cyBpbiBmb3JtICovXG4vLyAgICBfKGZvcm0pLmZpbHRlcigoZWwpPT57XG4vLyAgICAgICAgcmV0dXJuICFlbC5uYW1lXG4vLyAgICAgICAgICAgIHx8IChcbi8vICAgICAgICAgICAgICAgICFlbC52YWx1ZVxuLy8gICAgICAgICAgICAgICAgJiYgZWwudHlwZSAhPT0gJ3N1Ym1pdCdcbi8vICAgICAgICAgICAgICAgICYmIGVsICE9PSBidXR0b25cbi8vICAgICAgICAgICAgKVxuLy8gICAgICAgICAgICB8fCAoXG4vLyAgICAgICAgICAgICAgICAhZWwuY2hlY2tlZFxuLy8gICAgICAgICAgICAgICAgJiYgKFxuLy8gICAgICAgICAgICAgICAgICAgIGVsLnR5cGUgPT09ICdyYWRpbydcbi8vICAgICAgICAgICAgICAgICAgICB8fCBlbC50eXBlID09PSAnY2hlY2tib3gnXG4vLyAgICAgICAgICAgICAgICApXG4vLyAgICAgICAgICAgICk7XG4vLyAgICB9KS5lYWNoKChlbCk9Pntcbi8vICAgICAgICBsZXQgaXNBcnJheSA9IGVsLm5hbWUuaW5kZXhPZignW10nKSAhPT0gLTEsXG4vLyAgICAgICAgICAgIHBhcnNlZCA9IGVsLm5hbWUubWF0Y2gobmFtZVJlZ0V4cCksXG4vLyAgICAgICAgICAgIHJlZiA9IGRhdGEsXG4vLyAgICAgICAgICAgIGxhc3RJbmRleCA9IHBhcnNlZC5sZW5ndGggLTE7XG4vL1xuLy8gICAgICAgIF8uZWFjaChwYXJzZWQsICgpPT57XG4vLyAgICAgICAgICAgIC8vVE9ETzpcbi8vICAgICAgICB9KVxuLy8gICAgfSk7XG4vL31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdHJpbml0eS9jb21wb25lbnRzL1RyaW5pdHlGb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSA0NTZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 457:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = __webpack_require__(458);\nvar requestBase = __webpack_require__(459);\nvar isObject = __webpack_require__(460);\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = module.exports = __webpack_require__(461).bind(null, Request);\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only verison of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    pushEncodedKeyValuePair(pairs, key, obj[key]);\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (val != null) {\n    if (Array.isArray(val)) {\n      val.forEach(function(v) {\n        pushEncodedKeyValuePair(pairs, key, v);\n      });\n    } else if (isObject(val)) {\n      for(var subkey in val) {\n        pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n      }\n    } else {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(val));\n    }\n  } else if (val === null) {\n    pairs.push(encodeURIComponent(key));\n  }\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */),\n        key = parts.shift(),\n        val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this._setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this._parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype._setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str){\n  var parse = request.parse[this.type];\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype._setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = this.statusCode = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      err.rawResponse = self.xhr && self.xhr.responseText ? self.xhr.responseText : null;\n      // issue #876: return the http status code if the response parsing fails\n      err.statusCode = self.xhr && self.xhr.status ? self.xhr.status : null;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (res.status < 200 || res.status >= 300) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n        new_err.original = err;\n        new_err.response = res;\n        new_err.status = res.status;\n      }\n    } catch(e) {\n      new_err = e; // #985 touching res may cause INVALID_STATE_ERR on old Android\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `requestBase`.\n */\n\nEmitter(Request.prototype);\nfor (var key in requestBase) {\n  Request.prototype[key] = requestBase[key];\n}\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set responseType to `val`. Presently valid responseTypes are 'blob' and\n * 'arraybuffer'.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @param {Object} options with 'type' property 'auto' or 'basic' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (!options) {\n    options = {\n      type: 'basic'\n    }\n  }\n\n  switch (options.type) {\n    case 'basic':\n      var str = btoa(user + ':' + pass);\n      this.set('Authorization', 'Basic ' + str);\n    break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n    break;\n  }\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  this._getFormData().append(field, file, filename || file.name);\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype._timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\n\nRequest.prototype._appendQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self._timeoutError();\n      if (self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(direction, e) {\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = direction;\n    self.emit('progress', e);\n  }\n  if (this.hasListeners('progress')) {\n    try {\n      xhr.onprogress = handleProgress.bind(null, 'download');\n      if (xhr.upload) {\n        xhr.upload.onprogress = handleProgress.bind(null, 'upload');\n      }\n    } catch(e) {\n      // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n      // Reported here:\n      // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n    }\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  this._appendQueryString();\n\n  // initiate request\n  if (this.username && this.password) {\n    xhr.open(this.method, this.url, true, this.username, this.password);\n  } else {\n    xhr.open(this.method, this.url, true);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) serialize = request.serialize['application/json'];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn){\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9zdXBlcmFnZW50L2xpYi9jbGllbnQuanM/YTU0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJvb3QgcmVmZXJlbmNlIGZvciBpZnJhbWVzLlxuICovXG5cbnZhciByb290O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7IC8vIEJyb3dzZXIgd2luZG93XG4gIHJvb3QgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgeyAvLyBXZWIgV29ya2VyXG4gIHJvb3QgPSBzZWxmO1xufSBlbHNlIHsgLy8gT3RoZXIgZW52aXJvbm1lbnRzXG4gIGNvbnNvbGUud2FybihcIlVzaW5nIGJyb3dzZXItb25seSB2ZXJzaW9uIG9mIHN1cGVyYWdlbnQgaW4gbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG4gIHJvb3QgPSB0aGlzO1xufVxuXG52YXIgRW1pdHRlciA9IHJlcXVpcmUoJ2VtaXR0ZXInKTtcbnZhciByZXF1ZXN0QmFzZSA9IHJlcXVpcmUoJy4vcmVxdWVzdC1iYXNlJyk7XG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzLW9iamVjdCcpO1xuXG4vKipcbiAqIE5vb3AuXG4gKi9cblxuZnVuY3Rpb24gbm9vcCgpe307XG5cbi8qKlxuICogRXhwb3NlIGByZXF1ZXN0YC5cbiAqL1xuXG52YXIgcmVxdWVzdCA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9yZXF1ZXN0JykuYmluZChudWxsLCBSZXF1ZXN0KTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgWEhSLlxuICovXG5cbnJlcXVlc3QuZ2V0WEhSID0gZnVuY3Rpb24gKCkge1xuICBpZiAocm9vdC5YTUxIdHRwUmVxdWVzdFxuICAgICAgJiYgKCFyb290LmxvY2F0aW9uIHx8ICdmaWxlOicgIT0gcm9vdC5sb2NhdGlvbi5wcm90b2NvbFxuICAgICAgICAgIHx8ICFyb290LkFjdGl2ZVhPYmplY3QpKSB7XG4gICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdDtcbiAgfSBlbHNlIHtcbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxIVFRQJyk7IH0gY2F0Y2goZSkge31cbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQLjYuMCcpOyB9IGNhdGNoKGUpIHt9XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUC4zLjAnKTsgfSBjYXRjaChlKSB7fVxuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAnKTsgfSBjYXRjaChlKSB7fVxuICB9XG4gIHRocm93IEVycm9yKFwiQnJvd3Nlci1vbmx5IHZlcmlzb24gb2Ygc3VwZXJhZ2VudCBjb3VsZCBub3QgZmluZCBYSFJcIik7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgYWRkZWQgdG8gc3VwcG9ydCBJRS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxudmFyIHRyaW0gPSAnJy50cmltXG4gID8gZnVuY3Rpb24ocykgeyByZXR1cm4gcy50cmltKCk7IH1cbiAgOiBmdW5jdGlvbihzKSB7IHJldHVybiBzLnJlcGxhY2UoLyheXFxzKnxcXHMqJCkvZywgJycpOyB9O1xuXG4vKipcbiAqIFNlcmlhbGl6ZSB0aGUgZ2l2ZW4gYG9iamAuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2VyaWFsaXplKG9iaikge1xuICBpZiAoIWlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG4gIHZhciBwYWlycyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSwgb2JqW2tleV0pO1xuICB9XG4gIHJldHVybiBwYWlycy5qb2luKCcmJyk7XG59XG5cbi8qKlxuICogSGVscHMgJ3NlcmlhbGl6ZScgd2l0aCBzZXJpYWxpemluZyBhcnJheXMuXG4gKiBNdXRhdGVzIHRoZSBwYWlycyBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBwYWlyc1xuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gKi9cblxuZnVuY3Rpb24gcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSwgdmFsKSB7XG4gIGlmICh2YWwgIT0gbnVsbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgIHZhbC5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcHVzaEVuY29kZWRLZXlWYWx1ZVBhaXIocGFpcnMsIGtleSwgdik7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkpIHtcbiAgICAgIGZvcih2YXIgc3Via2V5IGluIHZhbCkge1xuICAgICAgICBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5ICsgJ1snICsgc3Via2V5ICsgJ10nLCB2YWxbc3Via2V5XSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhaXJzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSlcbiAgICAgICAgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgIHBhaXJzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkpO1xuICB9XG59XG5cbi8qKlxuICogRXhwb3NlIHNlcmlhbGl6YXRpb24gbWV0aG9kLlxuICovXG5cbiByZXF1ZXN0LnNlcmlhbGl6ZU9iamVjdCA9IHNlcmlhbGl6ZTtcblxuIC8qKlxuICAqIFBhcnNlIHRoZSBnaXZlbiB4LXd3dy1mb3JtLXVybGVuY29kZWQgYHN0cmAuXG4gICpcbiAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICogQHJldHVybiB7T2JqZWN0fVxuICAqIEBhcGkgcHJpdmF0ZVxuICAqL1xuXG5mdW5jdGlvbiBwYXJzZVN0cmluZyhzdHIpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgcGFpcnMgPSBzdHIuc3BsaXQoJyYnKTtcbiAgdmFyIHBhaXI7XG4gIHZhciBwb3M7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHBhaXJzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgcGFpciA9IHBhaXJzW2ldO1xuICAgIHBvcyA9IHBhaXIuaW5kZXhPZignPScpO1xuICAgIGlmIChwb3MgPT0gLTEpIHtcbiAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQocGFpcildID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQocGFpci5zbGljZSgwLCBwb3MpKV0gPVxuICAgICAgICBkZWNvZGVVUklDb21wb25lbnQocGFpci5zbGljZShwb3MgKyAxKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBFeHBvc2UgcGFyc2VyLlxuICovXG5cbnJlcXVlc3QucGFyc2VTdHJpbmcgPSBwYXJzZVN0cmluZztcblxuLyoqXG4gKiBEZWZhdWx0IE1JTUUgdHlwZSBtYXAuXG4gKlxuICogICAgIHN1cGVyYWdlbnQudHlwZXMueG1sID0gJ2FwcGxpY2F0aW9uL3htbCc7XG4gKlxuICovXG5cbnJlcXVlc3QudHlwZXMgPSB7XG4gIGh0bWw6ICd0ZXh0L2h0bWwnLFxuICBqc29uOiAnYXBwbGljYXRpb24vanNvbicsXG4gIHhtbDogJ2FwcGxpY2F0aW9uL3htbCcsXG4gIHVybGVuY29kZWQ6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAnZm9ybSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAnZm9ybS1kYXRhJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbi8qKlxuICogRGVmYXVsdCBzZXJpYWxpemF0aW9uIG1hcC5cbiAqXG4gKiAgICAgc3VwZXJhZ2VudC5zZXJpYWxpemVbJ2FwcGxpY2F0aW9uL3htbCddID0gZnVuY3Rpb24ob2JqKXtcbiAqICAgICAgIHJldHVybiAnZ2VuZXJhdGVkIHhtbCBoZXJlJztcbiAqICAgICB9O1xuICpcbiAqL1xuXG4gcmVxdWVzdC5zZXJpYWxpemUgPSB7XG4gICAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJzogc2VyaWFsaXplLFxuICAgJ2FwcGxpY2F0aW9uL2pzb24nOiBKU09OLnN0cmluZ2lmeVxuIH07XG5cbiAvKipcbiAgKiBEZWZhdWx0IHBhcnNlcnMuXG4gICpcbiAgKiAgICAgc3VwZXJhZ2VudC5wYXJzZVsnYXBwbGljYXRpb24veG1sJ10gPSBmdW5jdGlvbihzdHIpe1xuICAqICAgICAgIHJldHVybiB7IG9iamVjdCBwYXJzZWQgZnJvbSBzdHIgfTtcbiAgKiAgICAgfTtcbiAgKlxuICAqL1xuXG5yZXF1ZXN0LnBhcnNlID0ge1xuICAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJzogcGFyc2VTdHJpbmcsXG4gICdhcHBsaWNhdGlvbi9qc29uJzogSlNPTi5wYXJzZVxufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gaGVhZGVyIGBzdHJgIGludG9cbiAqIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBtYXBwZWQgZmllbGRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVyKHN0cikge1xuICB2YXIgbGluZXMgPSBzdHIuc3BsaXQoL1xccj9cXG4vKTtcbiAgdmFyIGZpZWxkcyA9IHt9O1xuICB2YXIgaW5kZXg7XG4gIHZhciBsaW5lO1xuICB2YXIgZmllbGQ7XG4gIHZhciB2YWw7XG5cbiAgbGluZXMucG9wKCk7IC8vIHRyYWlsaW5nIENSTEZcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGluZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBsaW5lID0gbGluZXNbaV07XG4gICAgaW5kZXggPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBmaWVsZCA9IGxpbmUuc2xpY2UoMCwgaW5kZXgpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdHJpbShsaW5lLnNsaWNlKGluZGV4ICsgMSkpO1xuICAgIGZpZWxkc1tmaWVsZF0gPSB2YWw7XG4gIH1cblxuICByZXR1cm4gZmllbGRzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGBtaW1lYCBpcyBqc29uIG9yIGhhcyAranNvbiBzdHJ1Y3R1cmVkIHN5bnRheCBzdWZmaXguXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1pbWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBpc0pTT04obWltZSkge1xuICByZXR1cm4gL1tcXC8rXWpzb25cXGIvLnRlc3QobWltZSk7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBtaW1lIHR5cGUgZm9yIHRoZSBnaXZlbiBgc3RyYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiB0eXBlKHN0cil7XG4gIHJldHVybiBzdHIuc3BsaXQoLyAqOyAqLykuc2hpZnQoKTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGhlYWRlciBmaWVsZCBwYXJhbWV0ZXJzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcmFtcyhzdHIpe1xuICByZXR1cm4gc3RyLnNwbGl0KC8gKjsgKi8pLnJlZHVjZShmdW5jdGlvbihvYmosIHN0cil7XG4gICAgdmFyIHBhcnRzID0gc3RyLnNwbGl0KC8gKj0gKi8pLFxuICAgICAgICBrZXkgPSBwYXJ0cy5zaGlmdCgpLFxuICAgICAgICB2YWwgPSBwYXJ0cy5zaGlmdCgpO1xuXG4gICAgaWYgKGtleSAmJiB2YWwpIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgUmVzcG9uc2VgIHdpdGggdGhlIGdpdmVuIGB4aHJgLlxuICpcbiAqICAtIHNldCBmbGFncyAoLm9rLCAuZXJyb3IsIGV0YylcbiAqICAtIHBhcnNlIGhlYWRlclxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICBBbGlhc2luZyBgc3VwZXJhZ2VudGAgYXMgYHJlcXVlc3RgIGlzIG5pY2U6XG4gKlxuICogICAgICByZXF1ZXN0ID0gc3VwZXJhZ2VudDtcbiAqXG4gKiAgV2UgY2FuIHVzZSB0aGUgcHJvbWlzZS1saWtlIEFQSSwgb3IgcGFzcyBjYWxsYmFja3M6XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnLycpLmVuZChmdW5jdGlvbihyZXMpe30pO1xuICogICAgICByZXF1ZXN0LmdldCgnLycsIGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogIFNlbmRpbmcgZGF0YSBjYW4gYmUgY2hhaW5lZDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgIC5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiAgT3IgcGFzc2VkIHRvIGAuc2VuZCgpYDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9LCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqICBPciBwYXNzZWQgdG8gYC5wb3N0KClgOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicsIHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgIC5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiBPciBmdXJ0aGVyIHJlZHVjZWQgdG8gYSBzaW5nbGUgY2FsbCBmb3Igc2ltcGxlIGNhc2VzOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicsIHsgbmFtZTogJ3RqJyB9LCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqIEBwYXJhbSB7WE1MSFRUUFJlcXVlc3R9IHhoclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIFJlc3BvbnNlKHJlcSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5yZXEgPSByZXE7XG4gIHRoaXMueGhyID0gdGhpcy5yZXEueGhyO1xuICAvLyByZXNwb25zZVRleHQgaXMgYWNjZXNzaWJsZSBvbmx5IGlmIHJlc3BvbnNlVHlwZSBpcyAnJyBvciAndGV4dCcgYW5kIG9uIG9sZGVyIGJyb3dzZXJzXG4gIHRoaXMudGV4dCA9ICgodGhpcy5yZXEubWV0aG9kICE9J0hFQUQnICYmICh0aGlzLnhoci5yZXNwb25zZVR5cGUgPT09ICcnIHx8IHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnKSkgfHwgdHlwZW9mIHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgID8gdGhpcy54aHIucmVzcG9uc2VUZXh0XG4gICAgIDogbnVsbDtcbiAgdGhpcy5zdGF0dXNUZXh0ID0gdGhpcy5yZXEueGhyLnN0YXR1c1RleHQ7XG4gIHRoaXMuX3NldFN0YXR1c1Byb3BlcnRpZXModGhpcy54aHIuc3RhdHVzKTtcbiAgdGhpcy5oZWFkZXIgPSB0aGlzLmhlYWRlcnMgPSBwYXJzZUhlYWRlcih0aGlzLnhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gIC8vIGdldEFsbFJlc3BvbnNlSGVhZGVycyBzb21ldGltZXMgZmFsc2VseSByZXR1cm5zIFwiXCIgZm9yIENPUlMgcmVxdWVzdHMsIGJ1dFxuICAvLyBnZXRSZXNwb25zZUhlYWRlciBzdGlsbCB3b3Jrcy4gc28gd2UgZ2V0IGNvbnRlbnQtdHlwZSBldmVuIGlmIGdldHRpbmdcbiAgLy8gb3RoZXIgaGVhZGVycyBmYWlscy5cbiAgdGhpcy5oZWFkZXJbJ2NvbnRlbnQtdHlwZSddID0gdGhpcy54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ2NvbnRlbnQtdHlwZScpO1xuICB0aGlzLl9zZXRIZWFkZXJQcm9wZXJ0aWVzKHRoaXMuaGVhZGVyKTtcbiAgdGhpcy5ib2R5ID0gdGhpcy5yZXEubWV0aG9kICE9ICdIRUFEJ1xuICAgID8gdGhpcy5fcGFyc2VCb2R5KHRoaXMudGV4dCA/IHRoaXMudGV4dCA6IHRoaXMueGhyLnJlc3BvbnNlKVxuICAgIDogbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgY2FzZS1pbnNlbnNpdGl2ZSBgZmllbGRgIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICByZXR1cm4gdGhpcy5oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG59O1xuXG4vKipcbiAqIFNldCBoZWFkZXIgcmVsYXRlZCBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBgLnR5cGVgIHRoZSBjb250ZW50IHR5cGUgd2l0aG91dCBwYXJhbXNcbiAqXG4gKiBBIHJlc3BvbnNlIG9mIFwiQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04XCJcbiAqIHdpbGwgcHJvdmlkZSB5b3Ugd2l0aCBhIGAudHlwZWAgb2YgXCJ0ZXh0L3BsYWluXCIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGhlYWRlclxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLl9zZXRIZWFkZXJQcm9wZXJ0aWVzID0gZnVuY3Rpb24oaGVhZGVyKXtcbiAgLy8gY29udGVudC10eXBlXG4gIHZhciBjdCA9IHRoaXMuaGVhZGVyWydjb250ZW50LXR5cGUnXSB8fCAnJztcbiAgdGhpcy50eXBlID0gdHlwZShjdCk7XG5cbiAgLy8gcGFyYW1zXG4gIHZhciBvYmogPSBwYXJhbXMoY3QpO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB0aGlzW2tleV0gPSBvYmpba2V5XTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGJvZHkgYHN0cmAuXG4gKlxuICogVXNlZCBmb3IgYXV0by1wYXJzaW5nIG9mIGJvZGllcy4gUGFyc2Vyc1xuICogYXJlIGRlZmluZWQgb24gdGhlIGBzdXBlcmFnZW50LnBhcnNlYCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TWl4ZWR9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuX3BhcnNlQm9keSA9IGZ1bmN0aW9uKHN0cil7XG4gIHZhciBwYXJzZSA9IHJlcXVlc3QucGFyc2VbdGhpcy50eXBlXTtcbiAgaWYgKCFwYXJzZSAmJiBpc0pTT04odGhpcy50eXBlKSkge1xuICAgIHBhcnNlID0gcmVxdWVzdC5wYXJzZVsnYXBwbGljYXRpb24vanNvbiddO1xuICB9XG4gIHJldHVybiBwYXJzZSAmJiBzdHIgJiYgKHN0ci5sZW5ndGggfHwgc3RyIGluc3RhbmNlb2YgT2JqZWN0KVxuICAgID8gcGFyc2Uoc3RyKVxuICAgIDogbnVsbDtcbn07XG5cbi8qKlxuICogU2V0IGZsYWdzIHN1Y2ggYXMgYC5va2AgYmFzZWQgb24gYHN0YXR1c2AuXG4gKlxuICogRm9yIGV4YW1wbGUgYSAyeHggcmVzcG9uc2Ugd2lsbCBnaXZlIHlvdSBhIGAub2tgIG9mIF9fdHJ1ZV9fXG4gKiB3aGVyZWFzIDV4eCB3aWxsIGJlIF9fZmFsc2VfXyBhbmQgYC5lcnJvcmAgd2lsbCBiZSBfX3RydWVfXy4gVGhlXG4gKiBgLmNsaWVudEVycm9yYCBhbmQgYC5zZXJ2ZXJFcnJvcmAgYXJlIGFsc28gYXZhaWxhYmxlIHRvIGJlIG1vcmVcbiAqIHNwZWNpZmljLCBhbmQgYC5zdGF0dXNUeXBlYCBpcyB0aGUgY2xhc3Mgb2YgZXJyb3IgcmFuZ2luZyBmcm9tIDEuLjVcbiAqIHNvbWV0aW1lcyB1c2VmdWwgZm9yIG1hcHBpbmcgcmVzcG9uZCBjb2xvcnMgZXRjLlxuICpcbiAqIFwic3VnYXJcIiBwcm9wZXJ0aWVzIGFyZSBhbHNvIGRlZmluZWQgZm9yIGNvbW1vbiBjYXNlcy4gQ3VycmVudGx5IHByb3ZpZGluZzpcbiAqXG4gKiAgIC0gLm5vQ29udGVudFxuICogICAtIC5iYWRSZXF1ZXN0XG4gKiAgIC0gLnVuYXV0aG9yaXplZFxuICogICAtIC5ub3RBY2NlcHRhYmxlXG4gKiAgIC0gLm5vdEZvdW5kXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLl9zZXRTdGF0dXNQcm9wZXJ0aWVzID0gZnVuY3Rpb24oc3RhdHVzKXtcbiAgLy8gaGFuZGxlIElFOSBidWc6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAwNDY5NzIvbXNpZS1yZXR1cm5zLXN0YXR1cy1jb2RlLW9mLTEyMjMtZm9yLWFqYXgtcmVxdWVzdFxuICBpZiAoc3RhdHVzID09PSAxMjIzKSB7XG4gICAgc3RhdHVzID0gMjA0O1xuICB9XG5cbiAgdmFyIHR5cGUgPSBzdGF0dXMgLyAxMDAgfCAwO1xuXG4gIC8vIHN0YXR1cyAvIGNsYXNzXG4gIHRoaXMuc3RhdHVzID0gdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzO1xuICB0aGlzLnN0YXR1c1R5cGUgPSB0eXBlO1xuXG4gIC8vIGJhc2ljc1xuICB0aGlzLmluZm8gPSAxID09IHR5cGU7XG4gIHRoaXMub2sgPSAyID09IHR5cGU7XG4gIHRoaXMuY2xpZW50RXJyb3IgPSA0ID09IHR5cGU7XG4gIHRoaXMuc2VydmVyRXJyb3IgPSA1ID09IHR5cGU7XG4gIHRoaXMuZXJyb3IgPSAoNCA9PSB0eXBlIHx8IDUgPT0gdHlwZSlcbiAgICA/IHRoaXMudG9FcnJvcigpXG4gICAgOiBmYWxzZTtcblxuICAvLyBzdWdhclxuICB0aGlzLmFjY2VwdGVkID0gMjAyID09IHN0YXR1cztcbiAgdGhpcy5ub0NvbnRlbnQgPSAyMDQgPT0gc3RhdHVzO1xuICB0aGlzLmJhZFJlcXVlc3QgPSA0MDAgPT0gc3RhdHVzO1xuICB0aGlzLnVuYXV0aG9yaXplZCA9IDQwMSA9PSBzdGF0dXM7XG4gIHRoaXMubm90QWNjZXB0YWJsZSA9IDQwNiA9PSBzdGF0dXM7XG4gIHRoaXMubm90Rm91bmQgPSA0MDQgPT0gc3RhdHVzO1xuICB0aGlzLmZvcmJpZGRlbiA9IDQwMyA9PSBzdGF0dXM7XG59O1xuXG4vKipcbiAqIFJldHVybiBhbiBgRXJyb3JgIHJlcHJlc2VudGF0aXZlIG9mIHRoaXMgcmVzcG9uc2UuXG4gKlxuICogQHJldHVybiB7RXJyb3J9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS50b0Vycm9yID0gZnVuY3Rpb24oKXtcbiAgdmFyIHJlcSA9IHRoaXMucmVxO1xuICB2YXIgbWV0aG9kID0gcmVxLm1ldGhvZDtcbiAgdmFyIHVybCA9IHJlcS51cmw7XG5cbiAgdmFyIG1zZyA9ICdjYW5ub3QgJyArIG1ldGhvZCArICcgJyArIHVybCArICcgKCcgKyB0aGlzLnN0YXR1cyArICcpJztcbiAgdmFyIGVyciA9IG5ldyBFcnJvcihtc2cpO1xuICBlcnIuc3RhdHVzID0gdGhpcy5zdGF0dXM7XG4gIGVyci5tZXRob2QgPSBtZXRob2Q7XG4gIGVyci51cmwgPSB1cmw7XG5cbiAgcmV0dXJuIGVycjtcbn07XG5cbi8qKlxuICogRXhwb3NlIGBSZXNwb25zZWAuXG4gKi9cblxucmVxdWVzdC5SZXNwb25zZSA9IFJlc3BvbnNlO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYFJlcXVlc3RgIHdpdGggdGhlIGdpdmVuIGBtZXRob2RgIGFuZCBgdXJsYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFJlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLl9xdWVyeSA9IHRoaXMuX3F1ZXJ5IHx8IFtdO1xuICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgdGhpcy51cmwgPSB1cmw7XG4gIHRoaXMuaGVhZGVyID0ge307IC8vIHByZXNlcnZlcyBoZWFkZXIgbmFtZSBjYXNlXG4gIHRoaXMuX2hlYWRlciA9IHt9OyAvLyBjb2VyY2VzIGhlYWRlciBuYW1lcyB0byBsb3dlcmNhc2VcbiAgdGhpcy5vbignZW5kJywgZnVuY3Rpb24oKXtcbiAgICB2YXIgZXJyID0gbnVsbDtcbiAgICB2YXIgcmVzID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICByZXMgPSBuZXcgUmVzcG9uc2Uoc2VsZik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBlcnIgPSBuZXcgRXJyb3IoJ1BhcnNlciBpcyB1bmFibGUgdG8gcGFyc2UgdGhlIHJlc3BvbnNlJyk7XG4gICAgICBlcnIucGFyc2UgPSB0cnVlO1xuICAgICAgZXJyLm9yaWdpbmFsID0gZTtcbiAgICAgIC8vIGlzc3VlICM2NzU6IHJldHVybiB0aGUgcmF3IHJlc3BvbnNlIGlmIHRoZSByZXNwb25zZSBwYXJzaW5nIGZhaWxzXG4gICAgICBlcnIucmF3UmVzcG9uc2UgPSBzZWxmLnhociAmJiBzZWxmLnhoci5yZXNwb25zZVRleHQgPyBzZWxmLnhoci5yZXNwb25zZVRleHQgOiBudWxsO1xuICAgICAgLy8gaXNzdWUgIzg3NjogcmV0dXJuIHRoZSBodHRwIHN0YXR1cyBjb2RlIGlmIHRoZSByZXNwb25zZSBwYXJzaW5nIGZhaWxzXG4gICAgICBlcnIuc3RhdHVzQ29kZSA9IHNlbGYueGhyICYmIHNlbGYueGhyLnN0YXR1cyA/IHNlbGYueGhyLnN0YXR1cyA6IG51bGw7XG4gICAgICByZXR1cm4gc2VsZi5jYWxsYmFjayhlcnIpO1xuICAgIH1cblxuICAgIHNlbGYuZW1pdCgncmVzcG9uc2UnLCByZXMpO1xuXG4gICAgdmFyIG5ld19lcnI7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChyZXMuc3RhdHVzIDwgMjAwIHx8IHJlcy5zdGF0dXMgPj0gMzAwKSB7XG4gICAgICAgIG5ld19lcnIgPSBuZXcgRXJyb3IocmVzLnN0YXR1c1RleHQgfHwgJ1Vuc3VjY2Vzc2Z1bCBIVFRQIHJlc3BvbnNlJyk7XG4gICAgICAgIG5ld19lcnIub3JpZ2luYWwgPSBlcnI7XG4gICAgICAgIG5ld19lcnIucmVzcG9uc2UgPSByZXM7XG4gICAgICAgIG5ld19lcnIuc3RhdHVzID0gcmVzLnN0YXR1cztcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIG5ld19lcnIgPSBlOyAvLyAjOTg1IHRvdWNoaW5nIHJlcyBtYXkgY2F1c2UgSU5WQUxJRF9TVEFURV9FUlIgb24gb2xkIEFuZHJvaWRcbiAgICB9XG5cbiAgICAvLyAjMTAwMCBkb24ndCBjYXRjaCBlcnJvcnMgZnJvbSB0aGUgY2FsbGJhY2sgdG8gYXZvaWQgZG91YmxlIGNhbGxpbmcgaXRcbiAgICBpZiAobmV3X2Vycikge1xuICAgICAgc2VsZi5jYWxsYmFjayhuZXdfZXJyLCByZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLmNhbGxiYWNrKG51bGwsIHJlcyk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBNaXhpbiBgRW1pdHRlcmAgYW5kIGByZXF1ZXN0QmFzZWAuXG4gKi9cblxuRW1pdHRlcihSZXF1ZXN0LnByb3RvdHlwZSk7XG5mb3IgKHZhciBrZXkgaW4gcmVxdWVzdEJhc2UpIHtcbiAgUmVxdWVzdC5wcm90b3R5cGVba2V5XSA9IHJlcXVlc3RCYXNlW2tleV07XG59XG5cbi8qKlxuICogU2V0IENvbnRlbnQtVHlwZSB0byBgdHlwZWAsIG1hcHBpbmcgdmFsdWVzIGZyb20gYHJlcXVlc3QudHlwZXNgLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgc3VwZXJhZ2VudC50eXBlcy54bWwgPSAnYXBwbGljYXRpb24veG1sJztcbiAqXG4gKiAgICAgIHJlcXVlc3QucG9zdCgnLycpXG4gKiAgICAgICAgLnR5cGUoJ3htbCcpXG4gKiAgICAgICAgLnNlbmQoeG1sc3RyaW5nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqICAgICAgcmVxdWVzdC5wb3N0KCcvJylcbiAqICAgICAgICAudHlwZSgnYXBwbGljYXRpb24veG1sJylcbiAqICAgICAgICAuc2VuZCh4bWxzdHJpbmcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24odHlwZSl7XG4gIHRoaXMuc2V0KCdDb250ZW50LVR5cGUnLCByZXF1ZXN0LnR5cGVzW3R5cGVdIHx8IHR5cGUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IHJlc3BvbnNlVHlwZSB0byBgdmFsYC4gUHJlc2VudGx5IHZhbGlkIHJlc3BvbnNlVHlwZXMgYXJlICdibG9iJyBhbmRcbiAqICdhcnJheWJ1ZmZlcicuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAucmVzcG9uc2VUeXBlKCdibG9iJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUucmVzcG9uc2VUeXBlID0gZnVuY3Rpb24odmFsKXtcbiAgdGhpcy5fcmVzcG9uc2VUeXBlID0gdmFsO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IEFjY2VwdCB0byBgdHlwZWAsIG1hcHBpbmcgdmFsdWVzIGZyb20gYHJlcXVlc3QudHlwZXNgLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgc3VwZXJhZ2VudC50eXBlcy5qc29uID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICpcbiAqICAgICAgcmVxdWVzdC5nZXQoJy9hZ2VudCcpXG4gKiAgICAgICAgLmFjY2VwdCgnanNvbicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnL2FnZW50JylcbiAqICAgICAgICAuYWNjZXB0KCdhcHBsaWNhdGlvbi9qc29uJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWNjZXB0XG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24odHlwZSl7XG4gIHRoaXMuc2V0KCdBY2NlcHQnLCByZXF1ZXN0LnR5cGVzW3R5cGVdIHx8IHR5cGUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IEF1dGhvcml6YXRpb24gZmllbGQgdmFsdWUgd2l0aCBgdXNlcmAgYW5kIGBwYXNzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXNlclxuICogQHBhcmFtIHtTdHJpbmd9IHBhc3NcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHdpdGggJ3R5cGUnIHByb3BlcnR5ICdhdXRvJyBvciAnYmFzaWMnIChkZWZhdWx0ICdiYXNpYycpXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYXV0aCA9IGZ1bmN0aW9uKHVzZXIsIHBhc3MsIG9wdGlvbnMpe1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge1xuICAgICAgdHlwZTogJ2Jhc2ljJ1xuICAgIH1cbiAgfVxuXG4gIHN3aXRjaCAob3B0aW9ucy50eXBlKSB7XG4gICAgY2FzZSAnYmFzaWMnOlxuICAgICAgdmFyIHN0ciA9IGJ0b2EodXNlciArICc6JyArIHBhc3MpO1xuICAgICAgdGhpcy5zZXQoJ0F1dGhvcml6YXRpb24nLCAnQmFzaWMgJyArIHN0cik7XG4gICAgYnJlYWs7XG5cbiAgICBjYXNlICdhdXRvJzpcbiAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VyO1xuICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3M7XG4gICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiogQWRkIHF1ZXJ5LXN0cmluZyBgdmFsYC5cbipcbiogRXhhbXBsZXM6XG4qXG4qICAgcmVxdWVzdC5nZXQoJy9zaG9lcycpXG4qICAgICAucXVlcnkoJ3NpemU9MTAnKVxuKiAgICAgLnF1ZXJ5KHsgY29sb3I6ICdibHVlJyB9KVxuKlxuKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IHZhbFxuKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiogQGFwaSBwdWJsaWNcbiovXG5cblJlcXVlc3QucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24odmFsKXtcbiAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiB2YWwpIHZhbCA9IHNlcmlhbGl6ZSh2YWwpO1xuICBpZiAodmFsKSB0aGlzLl9xdWVyeS5wdXNoKHZhbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBRdWV1ZSB0aGUgZ2l2ZW4gYGZpbGVgIGFzIGFuIGF0dGFjaG1lbnQgdG8gdGhlIHNwZWNpZmllZCBgZmllbGRgLFxuICogd2l0aCBvcHRpb25hbCBgZmlsZW5hbWVgLlxuICpcbiAqIGBgYCBqc1xuICogcmVxdWVzdC5wb3N0KCcvdXBsb2FkJylcbiAqICAgLmF0dGFjaCgnY29udGVudCcsIG5ldyBCbG9iKFsnPGEgaWQ9XCJhXCI+PGIgaWQ9XCJiXCI+aGV5ITwvYj48L2E+J10sIHsgdHlwZTogXCJ0ZXh0L2h0bWxcIn0pKVxuICogICAuZW5kKGNhbGxiYWNrKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHBhcmFtIHtCbG9ifEZpbGV9IGZpbGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZVxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uKGZpZWxkLCBmaWxlLCBmaWxlbmFtZSl7XG4gIHRoaXMuX2dldEZvcm1EYXRhKCkuYXBwZW5kKGZpZWxkLCBmaWxlLCBmaWxlbmFtZSB8fCBmaWxlLm5hbWUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cblJlcXVlc3QucHJvdG90eXBlLl9nZXRGb3JtRGF0YSA9IGZ1bmN0aW9uKCl7XG4gIGlmICghdGhpcy5fZm9ybURhdGEpIHtcbiAgICB0aGlzLl9mb3JtRGF0YSA9IG5ldyByb290LkZvcm1EYXRhKCk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2Zvcm1EYXRhO1xufTtcblxuLyoqXG4gKiBJbnZva2UgdGhlIGNhbGxiYWNrIHdpdGggYGVycmAgYW5kIGByZXNgXG4gKiBhbmQgaGFuZGxlIGFyaXR5IGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyclxuICogQHBhcmFtIHtSZXNwb25zZX0gcmVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5jYWxsYmFjayA9IGZ1bmN0aW9uKGVyciwgcmVzKXtcbiAgdmFyIGZuID0gdGhpcy5fY2FsbGJhY2s7XG4gIHRoaXMuY2xlYXJUaW1lb3V0KCk7XG4gIGZuKGVyciwgcmVzKTtcbn07XG5cbi8qKlxuICogSW52b2tlIGNhbGxiYWNrIHdpdGggeC1kb21haW4gZXJyb3IuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuY3Jvc3NEb21haW5FcnJvciA9IGZ1bmN0aW9uKCl7XG4gIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1JlcXVlc3QgaGFzIGJlZW4gdGVybWluYXRlZFxcblBvc3NpYmxlIGNhdXNlczogdGhlIG5ldHdvcmsgaXMgb2ZmbGluZSwgT3JpZ2luIGlzIG5vdCBhbGxvd2VkIGJ5IEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiwgdGhlIHBhZ2UgaXMgYmVpbmcgdW5sb2FkZWQsIGV0Yy4nKTtcbiAgZXJyLmNyb3NzRG9tYWluID0gdHJ1ZTtcblxuICBlcnIuc3RhdHVzID0gdGhpcy5zdGF0dXM7XG4gIGVyci5tZXRob2QgPSB0aGlzLm1ldGhvZDtcbiAgZXJyLnVybCA9IHRoaXMudXJsO1xuXG4gIHRoaXMuY2FsbGJhY2soZXJyKTtcbn07XG5cbi8qKlxuICogSW52b2tlIGNhbGxiYWNrIHdpdGggdGltZW91dCBlcnJvci5cbiAqXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5fdGltZW91dEVycm9yID0gZnVuY3Rpb24oKXtcbiAgdmFyIHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O1xuICB2YXIgZXJyID0gbmV3IEVycm9yKCd0aW1lb3V0IG9mICcgKyB0aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJyk7XG4gIGVyci50aW1lb3V0ID0gdGltZW91dDtcbiAgdGhpcy5jYWxsYmFjayhlcnIpO1xufTtcblxuLyoqXG4gKiBDb21wb3NlIHF1ZXJ5c3RyaW5nIHRvIGFwcGVuZCB0byByZXEudXJsXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuX2FwcGVuZFF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24oKXtcbiAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcnkuam9pbignJicpO1xuICBpZiAocXVlcnkpIHtcbiAgICB0aGlzLnVybCArPSB+dGhpcy51cmwuaW5kZXhPZignPycpXG4gICAgICA/ICcmJyArIHF1ZXJ5XG4gICAgICA6ICc/JyArIHF1ZXJ5O1xuICB9XG59O1xuXG4vKipcbiAqIEluaXRpYXRlIHJlcXVlc3QsIGludm9raW5nIGNhbGxiYWNrIGBmbihyZXMpYFxuICogd2l0aCBhbiBpbnN0YW5jZW9mIGBSZXNwb25zZWAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihmbil7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHhociA9IHRoaXMueGhyID0gcmVxdWVzdC5nZXRYSFIoKTtcbiAgdmFyIHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O1xuICB2YXIgZGF0YSA9IHRoaXMuX2Zvcm1EYXRhIHx8IHRoaXMuX2RhdGE7XG5cbiAgLy8gc3RvcmUgY2FsbGJhY2tcbiAgdGhpcy5fY2FsbGJhY2sgPSBmbiB8fCBub29wO1xuXG4gIC8vIHN0YXRlIGNoYW5nZVxuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcbiAgICBpZiAoNCAhPSB4aHIucmVhZHlTdGF0ZSkgcmV0dXJuO1xuXG4gICAgLy8gSW4gSUU5LCByZWFkcyB0byBhbnkgcHJvcGVydHkgKGUuZy4gc3RhdHVzKSBvZmYgb2YgYW4gYWJvcnRlZCBYSFIgd2lsbFxuICAgIC8vIHJlc3VsdCBpbiB0aGUgZXJyb3IgXCJDb3VsZCBub3QgY29tcGxldGUgdGhlIG9wZXJhdGlvbiBkdWUgdG8gZXJyb3IgYzAwYzAyM2ZcIlxuICAgIHZhciBzdGF0dXM7XG4gICAgdHJ5IHsgc3RhdHVzID0geGhyLnN0YXR1cyB9IGNhdGNoKGUpIHsgc3RhdHVzID0gMDsgfVxuXG4gICAgaWYgKDAgPT0gc3RhdHVzKSB7XG4gICAgICBpZiAoc2VsZi50aW1lZG91dCkgcmV0dXJuIHNlbGYuX3RpbWVvdXRFcnJvcigpO1xuICAgICAgaWYgKHNlbGYuX2Fib3J0ZWQpIHJldHVybjtcbiAgICAgIHJldHVybiBzZWxmLmNyb3NzRG9tYWluRXJyb3IoKTtcbiAgICB9XG4gICAgc2VsZi5lbWl0KCdlbmQnKTtcbiAgfTtcblxuICAvLyBwcm9ncmVzc1xuICB2YXIgaGFuZGxlUHJvZ3Jlc3MgPSBmdW5jdGlvbihkaXJlY3Rpb24sIGUpIHtcbiAgICBpZiAoZS50b3RhbCA+IDApIHtcbiAgICAgIGUucGVyY2VudCA9IGUubG9hZGVkIC8gZS50b3RhbCAqIDEwMDtcbiAgICB9XG4gICAgZS5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgc2VsZi5lbWl0KCdwcm9ncmVzcycsIGUpO1xuICB9XG4gIGlmICh0aGlzLmhhc0xpc3RlbmVycygncHJvZ3Jlc3MnKSkge1xuICAgIHRyeSB7XG4gICAgICB4aHIub25wcm9ncmVzcyA9IGhhbmRsZVByb2dyZXNzLmJpbmQobnVsbCwgJ2Rvd25sb2FkJyk7XG4gICAgICBpZiAoeGhyLnVwbG9hZCkge1xuICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBoYW5kbGVQcm9ncmVzcy5iaW5kKG51bGwsICd1cGxvYWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIC8vIEFjY2Vzc2luZyB4aHIudXBsb2FkIGZhaWxzIGluIElFIGZyb20gYSB3ZWIgd29ya2VyLCBzbyBqdXN0IHByZXRlbmQgaXQgZG9lc24ndCBleGlzdC5cbiAgICAgIC8vIFJlcG9ydGVkIGhlcmU6XG4gICAgICAvLyBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzgzNzI0NS94bWxodHRwcmVxdWVzdC11cGxvYWQtdGhyb3dzLWludmFsaWQtYXJndW1lbnQtd2hlbi11c2VkLWZyb20td2ViLXdvcmtlci1jb250ZXh0XG4gICAgfVxuICB9XG5cbiAgLy8gdGltZW91dFxuICBpZiAodGltZW91dCAmJiAhdGhpcy5fdGltZXIpIHtcbiAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYudGltZWRvdXQgPSB0cnVlO1xuICAgICAgc2VsZi5hYm9ydCgpO1xuICAgIH0sIHRpbWVvdXQpO1xuICB9XG5cbiAgLy8gcXVlcnlzdHJpbmdcbiAgdGhpcy5fYXBwZW5kUXVlcnlTdHJpbmcoKTtcblxuICAvLyBpbml0aWF0ZSByZXF1ZXN0XG4gIGlmICh0aGlzLnVzZXJuYW1lICYmIHRoaXMucGFzc3dvcmQpIHtcbiAgICB4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmwsIHRydWUsIHRoaXMudXNlcm5hbWUsIHRoaXMucGFzc3dvcmQpO1xuICB9IGVsc2Uge1xuICAgIHhoci5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVybCwgdHJ1ZSk7XG4gIH1cblxuICAvLyBDT1JTXG4gIGlmICh0aGlzLl93aXRoQ3JlZGVudGlhbHMpIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuXG4gIC8vIGJvZHlcbiAgaWYgKCdHRVQnICE9IHRoaXMubWV0aG9kICYmICdIRUFEJyAhPSB0aGlzLm1ldGhvZCAmJiAnc3RyaW5nJyAhPSB0eXBlb2YgZGF0YSAmJiAhdGhpcy5faXNIb3N0KGRhdGEpKSB7XG4gICAgLy8gc2VyaWFsaXplIHN0dWZmXG4gICAgdmFyIGNvbnRlbnRUeXBlID0gdGhpcy5faGVhZGVyWydjb250ZW50LXR5cGUnXTtcbiAgICB2YXIgc2VyaWFsaXplID0gdGhpcy5fc2VyaWFsaXplciB8fCByZXF1ZXN0LnNlcmlhbGl6ZVtjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlLnNwbGl0KCc7JylbMF0gOiAnJ107XG4gICAgaWYgKCFzZXJpYWxpemUgJiYgaXNKU09OKGNvbnRlbnRUeXBlKSkgc2VyaWFsaXplID0gcmVxdWVzdC5zZXJpYWxpemVbJ2FwcGxpY2F0aW9uL2pzb24nXTtcbiAgICBpZiAoc2VyaWFsaXplKSBkYXRhID0gc2VyaWFsaXplKGRhdGEpO1xuICB9XG5cbiAgLy8gc2V0IGhlYWRlciBmaWVsZHNcbiAgZm9yICh2YXIgZmllbGQgaW4gdGhpcy5oZWFkZXIpIHtcbiAgICBpZiAobnVsbCA9PSB0aGlzLmhlYWRlcltmaWVsZF0pIGNvbnRpbnVlO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGZpZWxkLCB0aGlzLmhlYWRlcltmaWVsZF0pO1xuICB9XG5cbiAgaWYgKHRoaXMuX3Jlc3BvbnNlVHlwZSkge1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSB0aGlzLl9yZXNwb25zZVR5cGU7XG4gIH1cblxuICAvLyBzZW5kIHN0dWZmXG4gIHRoaXMuZW1pdCgncmVxdWVzdCcsIHRoaXMpO1xuXG4gIC8vIElFMTEgeGhyLnNlbmQodW5kZWZpbmVkKSBzZW5kcyAndW5kZWZpbmVkJyBzdHJpbmcgYXMgUE9TVCBwYXlsb2FkIChpbnN0ZWFkIG9mIG5vdGhpbmcpXG4gIC8vIFdlIG5lZWQgbnVsbCBoZXJlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gIHhoci5zZW5kKHR5cGVvZiBkYXRhICE9PSAndW5kZWZpbmVkJyA/IGRhdGEgOiBudWxsKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5cbi8qKlxuICogRXhwb3NlIGBSZXF1ZXN0YC5cbiAqL1xuXG5yZXF1ZXN0LlJlcXVlc3QgPSBSZXF1ZXN0O1xuXG4vKipcbiAqIEdFVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBbZGF0YV0gb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QuZ2V0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdHRVQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5xdWVyeShkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogSEVBRCBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBbZGF0YV0gb3IgZm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QuaGVhZCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnSEVBRCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIE9QVElPTlMgcXVlcnkgdG8gYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0Lm9wdGlvbnMgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ09QVElPTlMnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxuLyoqXG4gKiBERUxFVEUgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVsKHVybCwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnREVMRVRFJywgdXJsKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbnJlcXVlc3RbJ2RlbCddID0gZGVsO1xucmVxdWVzdFsnZGVsZXRlJ10gPSBkZWw7XG5cbi8qKlxuICogUEFUQ0ggYHVybGAgd2l0aCBvcHRpb25hbCBgZGF0YWAgYW5kIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfSBbZGF0YV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmbl1cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QucGF0Y2ggPSBmdW5jdGlvbih1cmwsIGRhdGEsIGZuKXtcbiAgdmFyIHJlcSA9IHJlcXVlc3QoJ1BBVENIJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogUE9TVCBgdXJsYCB3aXRoIG9wdGlvbmFsIGBkYXRhYCBhbmQgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR9IFtkYXRhXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXVxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5wb3N0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQT1NUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogUFVUIGB1cmxgIHdpdGggb3B0aW9uYWwgYGRhdGFgIGFuZCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gW2RhdGFdIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZm5dXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LnB1dCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgZm4pe1xuICB2YXIgcmVxID0gcmVxdWVzdCgnUFVUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc3VwZXJhZ2VudC9saWIvY2xpZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA0NTdcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 458:
/***/ function(module, exports, __webpack_require__) {

	eval("\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (true) {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9jb21wb25lbnQtZW1pdHRlci9pbmRleC5qcz9lYTJmIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG4vKipcclxuICogRXhwb3NlIGBFbWl0dGVyYC5cclxuICovXHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cclxuICpcclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5mdW5jdGlvbiBFbWl0dGVyKG9iaikge1xyXG4gIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcclxuICogQHJldHVybiB7T2JqZWN0fVxyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcblxyXG5mdW5jdGlvbiBtaXhpbihvYmopIHtcclxuICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcclxuICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcclxuICB9XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9uID1cclxuRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gICh0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXSlcclxuICAgIC5wdXNoKGZuKTtcclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcclxuICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgZnVuY3Rpb24gb24oKSB7XHJcbiAgICB0aGlzLm9mZihldmVudCwgb24pO1xyXG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICB9XHJcblxyXG4gIG9uLmZuID0gZm47XHJcbiAgdGhpcy5vbihldmVudCwgb24pO1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXHJcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vZmYgPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuXHJcbiAgLy8gYWxsXHJcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgdGhpcy5fY2FsbGJhY2tzID0ge307XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHNwZWNpZmljIGV2ZW50XHJcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgaWYgKCFjYWxsYmFja3MpIHJldHVybiB0aGlzO1xyXG5cclxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXHJcbiAgaWYgKDEgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXHJcbiAgdmFyIGNiO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjYiA9IGNhbGxiYWNrc1tpXTtcclxuICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XHJcbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFbWl0IGBldmVudGAgd2l0aCB0aGUgZ2l2ZW4gYXJncy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7TWl4ZWR9IC4uLlxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXHJcbiAgICAsIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcblxyXG4gIGlmIChjYWxsYmFja3MpIHtcclxuICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJuIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgYGV2ZW50YC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gfHwgW107XHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdGhpcyBlbWl0dGVyIGhhcyBgZXZlbnRgIGhhbmRsZXJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHJldHVybiB7Qm9vbGVhbn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgcmV0dXJuICEhIHRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XHJcbn07XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jb21wb25lbnQtZW1pdHRlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 459:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = __webpack_require__(460);\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nexports.clearTimeout = function _clearTimeout(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nexports.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nexports.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nexports.timeout = function timeout(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} reject\n * @return {Request}\n */\n\nexports.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject){\n      self.end(function(err, res){\n        if (err) innerReject(err); else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n}\n\nexports.catch = function(cb) {\n  return this.then(undefined, cb);\n};\n\n/**\n * Allow for extension\n */\n\nexports.use = function use(fn) {\n  fn(this);\n  return this;\n}\n\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nexports.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nexports.getHeader = exports.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nexports.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nexports.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val`, or multiple fields with one object\n * for \"multipart/form-data\" request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n *\n * request.post('/upload')\n *   .field({ foo: 'bar', baz: 'qux' })\n *   .end(callback);\n * ```\n *\n * @param {String|Object} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nexports.field = function(name, val) {\n\n  // name should be either a string or an object.\n  if (null === name ||  undefined === name) {\n    throw new Error('.field(name, val) name can not be empty');\n  }\n\n  if (isObject(name)) {\n    for (var key in name) {\n      this.field(key, name[key]);\n    }\n    return this;\n  }\n\n  // val should be defined now\n  if (null === val || undefined === val) {\n    throw new Error('.field(name, val) val can not be empty');\n  }\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nexports.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nexports.withCredentials = function(){\n  // This is browser-only functionality. Node side is no-op.\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nexports.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nexports.toJSON = function(){\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header\n  };\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nexports._isHost = function _isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nexports.send = function(data){\n  var obj = isObject(data);\n  var type = this._header['content-type'];\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || this._isHost(data)) return this;\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9zdXBlcmFnZW50L2xpYi9yZXF1ZXN0LWJhc2UuanM/MjA3MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1vZHVsZSBvZiBtaXhlZC1pbiBmdW5jdGlvbnMgc2hhcmVkIGJldHdlZW4gbm9kZSBhbmQgY2xpZW50IGNvZGVcbiAqL1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pcy1vYmplY3QnKTtcblxuLyoqXG4gKiBDbGVhciBwcmV2aW91cyB0aW1lb3V0LlxuICpcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uIF9jbGVhclRpbWVvdXQoKXtcbiAgdGhpcy5fdGltZW91dCA9IDA7XG4gIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBPdmVycmlkZSBkZWZhdWx0IHJlc3BvbnNlIGJvZHkgcGFyc2VyXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB0byBjb252ZXJ0IGluY29taW5nIGRhdGEgaW50byByZXF1ZXN0LmJvZHlcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UoZm4pe1xuICB0aGlzLl9wYXJzZXIgPSBmbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE92ZXJyaWRlIGRlZmF1bHQgcmVxdWVzdCBib2R5IHNlcmlhbGl6ZXJcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHRvIGNvbnZlcnQgZGF0YSBzZXQgdmlhIC5zZW5kIG9yIC5hdHRhY2ggaW50byBwYXlsb2FkIHRvIHNlbmRcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uIHNlcmlhbGl6ZShmbil7XG4gIHRoaXMuX3NlcmlhbGl6ZXIgPSBmbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCB0aW1lb3V0IHRvIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy50aW1lb3V0ID0gZnVuY3Rpb24gdGltZW91dChtcyl7XG4gIHRoaXMuX3RpbWVvdXQgPSBtcztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFByb21pc2Ugc3VwcG9ydFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdFxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqL1xuXG5leHBvcnRzLnRoZW4gPSBmdW5jdGlvbiB0aGVuKHJlc29sdmUsIHJlamVjdCkge1xuICBpZiAoIXRoaXMuX2Z1bGxmaWxsZWRQcm9taXNlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuX2Z1bGxmaWxsZWRQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24oaW5uZXJSZXNvbHZlLCBpbm5lclJlamVjdCl7XG4gICAgICBzZWxmLmVuZChmdW5jdGlvbihlcnIsIHJlcyl7XG4gICAgICAgIGlmIChlcnIpIGlubmVyUmVqZWN0KGVycik7IGVsc2UgaW5uZXJSZXNvbHZlKHJlcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGhpcy5fZnVsbGZpbGxlZFByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xufVxuXG5leHBvcnRzLmNhdGNoID0gZnVuY3Rpb24oY2IpIHtcbiAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIGNiKTtcbn07XG5cbi8qKlxuICogQWxsb3cgZm9yIGV4dGVuc2lvblxuICovXG5cbmV4cG9ydHMudXNlID0gZnVuY3Rpb24gdXNlKGZuKSB7XG4gIGZuKHRoaXMpO1xuICByZXR1cm4gdGhpcztcbn1cblxuXG4vKipcbiAqIEdldCByZXF1ZXN0IGhlYWRlciBgZmllbGRgLlxuICogQ2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbihmaWVsZCl7XG4gIHJldHVybiB0aGlzLl9oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG59O1xuXG4vKipcbiAqIEdldCBjYXNlLWluc2Vuc2l0aXZlIGhlYWRlciBgZmllbGRgIHZhbHVlLlxuICogVGhpcyBpcyBhIGRlcHJlY2F0ZWQgaW50ZXJuYWwgQVBJLiBVc2UgYC5nZXQoZmllbGQpYCBpbnN0ZWFkLlxuICpcbiAqIChnZXRIZWFkZXIgaXMgbm8gbG9uZ2VyIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgc3VwZXJhZ2VudCBjb2RlIGJhc2UpXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqIEBkZXByZWNhdGVkXG4gKi9cblxuZXhwb3J0cy5nZXRIZWFkZXIgPSBleHBvcnRzLmdldDtcblxuLyoqXG4gKiBTZXQgaGVhZGVyIGBmaWVsZGAgdG8gYHZhbGAsIG9yIG11bHRpcGxlIGZpZWxkcyB3aXRoIG9uZSBvYmplY3QuXG4gKiBDYXNlLWluc2Vuc2l0aXZlLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnNldCgnQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKVxuICogICAgICAgIC5zZXQoJ1gtQVBJLUtleScsICdmb29iYXInKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqICAgICAgcmVxLmdldCgnLycpXG4gKiAgICAgICAgLnNldCh7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLCAnWC1BUEktS2V5JzogJ2Zvb2JhcicgfSlcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGZpZWxkXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5zZXQgPSBmdW5jdGlvbihmaWVsZCwgdmFsKXtcbiAgaWYgKGlzT2JqZWN0KGZpZWxkKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBmaWVsZCkge1xuICAgICAgdGhpcy5zZXQoa2V5LCBmaWVsZFtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdGhpcy5faGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldID0gdmFsO1xuICB0aGlzLmhlYWRlcltmaWVsZF0gPSB2YWw7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgaGVhZGVyIGBmaWVsZGAuXG4gKiBDYXNlLWluc2Vuc2l0aXZlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAudW5zZXQoJ1VzZXItQWdlbnQnKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICovXG5leHBvcnRzLnVuc2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICBkZWxldGUgdGhpcy5faGVhZGVyW2ZpZWxkLnRvTG93ZXJDYXNlKCldO1xuICBkZWxldGUgdGhpcy5oZWFkZXJbZmllbGRdO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogV3JpdGUgdGhlIGZpZWxkIGBuYW1lYCBhbmQgYHZhbGAsIG9yIG11bHRpcGxlIGZpZWxkcyB3aXRoIG9uZSBvYmplY3RcbiAqIGZvciBcIm11bHRpcGFydC9mb3JtLWRhdGFcIiByZXF1ZXN0IGJvZGllcy5cbiAqXG4gKiBgYGAganNcbiAqIHJlcXVlc3QucG9zdCgnL3VwbG9hZCcpXG4gKiAgIC5maWVsZCgnZm9vJywgJ2JhcicpXG4gKiAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIHJlcXVlc3QucG9zdCgnL3VwbG9hZCcpXG4gKiAgIC5maWVsZCh7IGZvbzogJ2JhcicsIGJhejogJ3F1eCcgfSlcbiAqICAgLmVuZChjYWxsYmFjayk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfEJsb2J8RmlsZXxCdWZmZXJ8ZnMuUmVhZFN0cmVhbX0gdmFsXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydHMuZmllbGQgPSBmdW5jdGlvbihuYW1lLCB2YWwpIHtcblxuICAvLyBuYW1lIHNob3VsZCBiZSBlaXRoZXIgYSBzdHJpbmcgb3IgYW4gb2JqZWN0LlxuICBpZiAobnVsbCA9PT0gbmFtZSB8fCAgdW5kZWZpbmVkID09PSBuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCcuZmllbGQobmFtZSwgdmFsKSBuYW1lIGNhbiBub3QgYmUgZW1wdHknKTtcbiAgfVxuXG4gIGlmIChpc09iamVjdChuYW1lKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XG4gICAgICB0aGlzLmZpZWxkKGtleSwgbmFtZVtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyB2YWwgc2hvdWxkIGJlIGRlZmluZWQgbm93XG4gIGlmIChudWxsID09PSB2YWwgfHwgdW5kZWZpbmVkID09PSB2YWwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJy5maWVsZChuYW1lLCB2YWwpIHZhbCBjYW4gbm90IGJlIGVtcHR5Jyk7XG4gIH1cbiAgdGhpcy5fZ2V0Rm9ybURhdGEoKS5hcHBlbmQobmFtZSwgdmFsKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFib3J0IHRoZSByZXF1ZXN0LCBhbmQgY2xlYXIgcG90ZW50aWFsIHRpbWVvdXQuXG4gKlxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydHMuYWJvcnQgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5fYWJvcnRlZCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRoaXMuX2Fib3J0ZWQgPSB0cnVlO1xuICB0aGlzLnhociAmJiB0aGlzLnhoci5hYm9ydCgpOyAvLyBicm93c2VyXG4gIHRoaXMucmVxICYmIHRoaXMucmVxLmFib3J0KCk7IC8vIG5vZGVcbiAgdGhpcy5jbGVhclRpbWVvdXQoKTtcbiAgdGhpcy5lbWl0KCdhYm9ydCcpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRW5hYmxlIHRyYW5zbWlzc2lvbiBvZiBjb29raWVzIHdpdGggeC1kb21haW4gcmVxdWVzdHMuXG4gKlxuICogTm90ZSB0aGF0IGZvciB0aGlzIHRvIHdvcmsgdGhlIG9yaWdpbiBtdXN0IG5vdCBiZVxuICogdXNpbmcgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiB3aXRoIGEgd2lsZGNhcmQsXG4gKiBhbmQgYWxzbyBtdXN0IHNldCBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzXCJcbiAqIHRvIFwidHJ1ZVwiLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy53aXRoQ3JlZGVudGlhbHMgPSBmdW5jdGlvbigpe1xuICAvLyBUaGlzIGlzIGJyb3dzZXItb25seSBmdW5jdGlvbmFsaXR5LiBOb2RlIHNpZGUgaXMgbm8tb3AuXG4gIHRoaXMuX3dpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIG1heCByZWRpcmVjdHMgdG8gYG5gLiBEb2VzIG5vdGluZyBpbiBicm93c2VyIFhIUiBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMucmVkaXJlY3RzID0gZnVuY3Rpb24obil7XG4gIHRoaXMuX21heFJlZGlyZWN0cyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0IHRvIGEgcGxhaW4gamF2YXNjcmlwdCBvYmplY3QgKG5vdCBKU09OIHN0cmluZykgb2Ygc2NhbGFyIHByb3BlcnRpZXMuXG4gKiBOb3RlIGFzIHRoaXMgbWV0aG9kIGlzIGRlc2lnbmVkIHRvIHJldHVybiBhIHVzZWZ1bCBub24tdGhpcyB2YWx1ZSxcbiAqIGl0IGNhbm5vdCBiZSBjaGFpbmVkLlxuICpcbiAqIEByZXR1cm4ge09iamVjdH0gZGVzY3JpYmluZyBtZXRob2QsIHVybCwgYW5kIGRhdGEgb2YgdGhpcyByZXF1ZXN0XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydHMudG9KU09OID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICBtZXRob2Q6IHRoaXMubWV0aG9kLFxuICAgIHVybDogdGhpcy51cmwsXG4gICAgZGF0YTogdGhpcy5fZGF0YSxcbiAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJcbiAgfTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYG9iamAgaXMgYSBob3N0IG9iamVjdCxcbiAqIHdlIGRvbid0IHdhbnQgdG8gc2VyaWFsaXplIHRoZXNlIDopXG4gKlxuICogVE9ETzogZnV0dXJlIHByb29mLCBtb3ZlIHRvIGNvbXBvZW50IGxhbmRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5faXNIb3N0ID0gZnVuY3Rpb24gX2lzSG9zdChvYmopIHtcbiAgdmFyIHN0ciA9IHt9LnRvU3RyaW5nLmNhbGwob2JqKTtcblxuICBzd2l0Y2ggKHN0cikge1xuICAgIGNhc2UgJ1tvYmplY3QgRmlsZV0nOlxuICAgIGNhc2UgJ1tvYmplY3QgQmxvYl0nOlxuICAgIGNhc2UgJ1tvYmplY3QgRm9ybURhdGFdJzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBTZW5kIGBkYXRhYCBhcyB0aGUgcmVxdWVzdCBib2R5LCBkZWZhdWx0aW5nIHRoZSBgLnR5cGUoKWAgdG8gXCJqc29uXCIgd2hlblxuICogYW4gb2JqZWN0IGlzIGdpdmVuLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgIC8vIG1hbnVhbCBqc29uXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnR5cGUoJ2pzb24nKVxuICogICAgICAgICAuc2VuZCgne1wibmFtZVwiOlwidGpcIn0nKVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIGF1dG8ganNvblxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIG1hbnVhbCB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAudHlwZSgnZm9ybScpXG4gKiAgICAgICAgIC5zZW5kKCduYW1lPXRqJylcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBhdXRvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC50eXBlKCdmb3JtJylcbiAqICAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gZGVmYXVsdHMgdG8geC13d3ctZm9ybS11cmxlbmNvZGVkXG4gKiAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKCduYW1lPXRvYmknKVxuICogICAgICAgIC5zZW5kKCdzcGVjaWVzPWZlcnJldCcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGRhdGFcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnNlbmQgPSBmdW5jdGlvbihkYXRhKXtcbiAgdmFyIG9iaiA9IGlzT2JqZWN0KGRhdGEpO1xuICB2YXIgdHlwZSA9IHRoaXMuX2hlYWRlclsnY29udGVudC10eXBlJ107XG5cbiAgLy8gbWVyZ2VcbiAgaWYgKG9iaiAmJiBpc09iamVjdCh0aGlzLl9kYXRhKSkge1xuICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICB0aGlzLl9kYXRhW2tleV0gPSBkYXRhW2tleV07XG4gICAgfVxuICB9IGVsc2UgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBkYXRhKSB7XG4gICAgLy8gZGVmYXVsdCB0byB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAgICBpZiAoIXR5cGUpIHRoaXMudHlwZSgnZm9ybScpO1xuICAgIHR5cGUgPSB0aGlzLl9oZWFkZXJbJ2NvbnRlbnQtdHlwZSddO1xuICAgIGlmICgnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyA9PSB0eXBlKSB7XG4gICAgICB0aGlzLl9kYXRhID0gdGhpcy5fZGF0YVxuICAgICAgICA/IHRoaXMuX2RhdGEgKyAnJicgKyBkYXRhXG4gICAgICAgIDogZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGF0YSA9ICh0aGlzLl9kYXRhIHx8ICcnKSArIGRhdGE7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICB9XG5cbiAgaWYgKCFvYmogfHwgdGhpcy5faXNIb3N0KGRhdGEpKSByZXR1cm4gdGhpcztcblxuICAvLyBkZWZhdWx0IHRvIGpzb25cbiAgaWYgKCF0eXBlKSB0aGlzLnR5cGUoJ2pzb24nKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3N1cGVyYWdlbnQvbGliL3JlcXVlc3QtYmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gNDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 460:
/***/ function(module, exports) {

	eval("/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9zdXBlcmFnZW50L2xpYi9pcy1vYmplY3QuanM/OWVkZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBudWxsICE9PSBvYmogJiYgJ29iamVjdCcgPT09IHR5cGVvZiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc3VwZXJhZ2VudC9saWIvaXMtb2JqZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSA0NjBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 461:
/***/ function(module, exports) {

	eval("// The node and browser modules expose versions of this with the\n// appropriate constructor function bound as first argument\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(RequestConstructor, method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new RequestConstructor('GET', method).end(url);\n  }\n\n  // url first\n  if (2 == arguments.length) {\n    return new RequestConstructor('GET', method);\n  }\n\n  return new RequestConstructor(method, url);\n}\n\nmodule.exports = request;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9zdXBlcmFnZW50L2xpYi9yZXF1ZXN0LmpzPzYxYzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG5vZGUgYW5kIGJyb3dzZXIgbW9kdWxlcyBleHBvc2UgdmVyc2lvbnMgb2YgdGhpcyB3aXRoIHRoZVxuLy8gYXBwcm9wcmlhdGUgY29uc3RydWN0b3IgZnVuY3Rpb24gYm91bmQgYXMgZmlyc3QgYXJndW1lbnRcbi8qKlxuICogSXNzdWUgYSByZXF1ZXN0OlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgIHJlcXVlc3QoJ0dFVCcsICcvdXNlcnMnKS5lbmQoY2FsbGJhY2spXG4gKiAgICByZXF1ZXN0KCcvdXNlcnMnKS5lbmQoY2FsbGJhY2spXG4gKiAgICByZXF1ZXN0KCcvdXNlcnMnLCBjYWxsYmFjaylcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdXJsIG9yIGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiByZXF1ZXN0KFJlcXVlc3RDb25zdHJ1Y3RvciwgbWV0aG9kLCB1cmwpIHtcbiAgLy8gY2FsbGJhY2tcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHVybCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdENvbnN0cnVjdG9yKCdHRVQnLCBtZXRob2QpLmVuZCh1cmwpO1xuICB9XG5cbiAgLy8gdXJsIGZpcnN0XG4gIGlmICgyID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3RDb25zdHJ1Y3RvcignR0VUJywgbWV0aG9kKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUmVxdWVzdENvbnN0cnVjdG9yKG1ldGhvZCwgdXJsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1ZXN0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3N1cGVyYWdlbnQvbGliL3JlcXVlc3QuanNcbi8vIG1vZHVsZSBpZCA9IDQ2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 462:
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Events = {\n  /**\n   * Abbreviation for target.addEventListener\n   * @param target {HTMLElement}\n   * @param event {string}\n   * @param callback {function}\n   * @param capture [boolean]\n   * @returns {function}\n   */\n  on: __listen,\n\n  /**\n   * Abbreviation for target.addEventListener\n   * @param target {HTMLElement}\n   * @param event {string}\n   * @param callback {function}\n   * @param capture [boolean]\n   * @returns {function}\n   */\n  listen: __listen,\n\n  /**\n   * Adds wrapper around function and after first invocation, remove listener\n   * @Note Returns correct listener for removing\n   * @param target {HTMLElement}\n   * @param event {string}\n   * @param callback {function}\n   * @param capture [boolean]\n   * @returns {function}\n   */\n  once: __listenOnce,\n\n  /**\n   * Adds wrapper around function and after first invocation, remove listener\n   * @Note Returns correct listener for removing\n   * @param target {HTMLElement}\n   * @param event {string}\n   * @param callback {function}\n   * @param capture [boolean]\n   * @returns {function}\n   */\n  listenOnce: __listenOnce,\n\n  /**\n   * Abbreviation for target.removeEventListener\n   * @param target {HTMLElement}\n   * @param event {string}\n   * @param callback {function}\n   * @param capture [boolean]\n   * @returns {void}\n   */\n  off: __removeListener,\n\n  /**\n   * Abbreviation for target.removeEventListener\n   * @param target {HTMLElement}\n   * @param event {string}\n   * @param callback {function}\n   * @param capture [boolean]\n   * @returns {void}\n   */\n  unlisten: __removeListener,\n\n  /**\n   * Abbreviation for target.removeEventListener\n   * @param target {HTMLElement}\n   * @param event {string}\n   * @param callback {function}\n   * @param capture [boolean]\n   * @returns {void}\n   */\n  removeListener: __removeListener,\n\n  /**\n   * @inherit\n   */\n  onAnimation: __onAnimation,\n\n  /**\n   * @inherit\n   */\n  offAnimation: __offAnimation,\n\n  /**\n   * @inherit\n   */\n  onceAnimation: __onceAnimation\n};\n\n/**\n * Abbreviation for target.addEventListener\n * @param target {HTMLElement}\n * @param event {string}\n * @param callback {function}\n * @param capture [boolean]\n * @returns {function}\n * @private\n */\nfunction __listen(target, event, callback) {\n  var capture = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n  target.addEventListener(event, callback, capture);\n  return __removeListener.bind(null, target, event, callback, capture);\n}\n\n/**\n * Adds wrapper around function and after first invocation, remove listener\n * @Note Returns correct listener for removing\n * @param target {HTMLElement}\n * @param event {string}\n * @param callback {function}\n * @param capture [boolean]\n * @private\n * @returns {function}\n */\nfunction __listenOnce(target, event, callback) {\n  var capture = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n  var wrapper = function () {\n    return function (e) {\n      target.removeEventListener(event, wrapper, capture);\n      callback(e);\n    };\n  }();\n  target.addEventListener(event, wrapper, capture);\n  return __removeListener.bind(null, target, event, wrapper, capture);\n}\n\n/**\n * Abbreviation for target.removeEventListener\n * @param target {HTMLElement}\n * @param event {string}\n * @param callback {function}\n * @param capture [boolean]\n * @returns {void}\n * @private\n */\nfunction __removeListener(target, event, callback) {\n  var capture = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n  return target.removeEventListener(event, callback, capture);\n}\n\n/** ANIMATIONS **/\nvar ANIMATION_TYPE = {\n  end: 'AnimationEnd',\n  start: 'AnimationStart',\n  iteration: 'AnimationIteration'\n};\n\nvar ANIMATION_PREFIX = {\n  'WebkitAnimation': 'webkit',\n  'OAnimation': 'o'\n};\n\n/**\n * Finds Correct animation event name for current browser\n * @param type {string} enum:[start, end, iteration]\n * @returns {string} Animation Event name\n * @throws Incorrect animation type\n * @private\n */\nfunction __whichAnimationEvent(type) {\n  type = ANIMATION_TYPE[type.toLowerCase()];\n  if (!type) {\n    throw new Error('Incorrect animation type! Correct values: [start, end, iteration]');\n  }\n  var el = window.document.createElement('fakeelement'),\n      prefix = '';\n\n  for (var key in ANIMATION_PREFIX) {\n    if (el.style[key] !== undefined) {\n      prefix = ANIMATION_PREFIX[key];\n      break;\n    }\n  }\n\n  return prefix + !prefix ? type.toLowerCase() : type;\n}\n\n/**\n * Adds animation event listener\n * @param element {HTMLElement}\n * @param type {string} enum:[start, end, iteration]\n * @param callback {Function}\n * @param capture {boolean}\n * @returns {Function} - bound callback to remove listener\n * @private\n */\nfunction __onAnimation(element, type, callback) {\n  var capture = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n  var eventName = __whichAnimationEvent(type);\n  return __listen(element, eventName, callback, capture);\n}\n\n/**\n * Adds animation event listener and after first execution its removed\n * @param element {HTMLElement}\n * @param type {string} enum:[start, end, iteration]\n * @param callback {Function}\n * @param capture {boolean}\n * @returns {Function} - bound callback to remove listener\n * @private\n */\nfunction __onceAnimation(element, type, callback) {\n  var capture = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n  var eventName = __whichAnimationEvent(type);\n  return __listenOnce(element, eventName, callback, capture);\n}\n\n/**\n * Remove animation event listener\n * @param element {HTMLElement}\n * @param type {string} enum:[start, end, iteration]\n * @param callback {Function}\n * @param capture {boolean}\n * @returns {void}\n * @private\n */\nfunction __offAnimation(element, type, callback) {\n  var capture = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n  var eventName = __whichAnimationEvent(type);\n  return __removeListener(element, eventName, callback, capture);\n}\n\nexports.default = Events;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L3V0aWxzL0V2ZW50cy5qcz9jYTE4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbnZhciBFdmVudHMgPSB7XG4gIC8qKlxuICAgKiBBYmJyZXZpYXRpb24gZm9yIHRhcmdldC5hZGRFdmVudExpc3RlbmVyXG4gICAqIEBwYXJhbSB0YXJnZXQge0hUTUxFbGVtZW50fVxuICAgKiBAcGFyYW0gZXZlbnQge3N0cmluZ31cbiAgICogQHBhcmFtIGNhbGxiYWNrIHtmdW5jdGlvbn1cbiAgICogQHBhcmFtIGNhcHR1cmUgW2Jvb2xlYW5dXG4gICAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAgICovXG4gIG9uOiBfX2xpc3RlbixcblxuICAvKipcbiAgICogQWJicmV2aWF0aW9uIGZvciB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lclxuICAgKiBAcGFyYW0gdGFyZ2V0IHtIVE1MRWxlbWVudH1cbiAgICogQHBhcmFtIGV2ZW50IHtzdHJpbmd9XG4gICAqIEBwYXJhbSBjYWxsYmFjayB7ZnVuY3Rpb259XG4gICAqIEBwYXJhbSBjYXB0dXJlIFtib29sZWFuXVxuICAgKiBAcmV0dXJucyB7ZnVuY3Rpb259XG4gICAqL1xuICBsaXN0ZW46IF9fbGlzdGVuLFxuXG4gIC8qKlxuICAgKiBBZGRzIHdyYXBwZXIgYXJvdW5kIGZ1bmN0aW9uIGFuZCBhZnRlciBmaXJzdCBpbnZvY2F0aW9uLCByZW1vdmUgbGlzdGVuZXJcbiAgICogQE5vdGUgUmV0dXJucyBjb3JyZWN0IGxpc3RlbmVyIGZvciByZW1vdmluZ1xuICAgKiBAcGFyYW0gdGFyZ2V0IHtIVE1MRWxlbWVudH1cbiAgICogQHBhcmFtIGV2ZW50IHtzdHJpbmd9XG4gICAqIEBwYXJhbSBjYWxsYmFjayB7ZnVuY3Rpb259XG4gICAqIEBwYXJhbSBjYXB0dXJlIFtib29sZWFuXVxuICAgKiBAcmV0dXJucyB7ZnVuY3Rpb259XG4gICAqL1xuICBvbmNlOiBfX2xpc3Rlbk9uY2UsXG5cbiAgLyoqXG4gICAqIEFkZHMgd3JhcHBlciBhcm91bmQgZnVuY3Rpb24gYW5kIGFmdGVyIGZpcnN0IGludm9jYXRpb24sIHJlbW92ZSBsaXN0ZW5lclxuICAgKiBATm90ZSBSZXR1cm5zIGNvcnJlY3QgbGlzdGVuZXIgZm9yIHJlbW92aW5nXG4gICAqIEBwYXJhbSB0YXJnZXQge0hUTUxFbGVtZW50fVxuICAgKiBAcGFyYW0gZXZlbnQge3N0cmluZ31cbiAgICogQHBhcmFtIGNhbGxiYWNrIHtmdW5jdGlvbn1cbiAgICogQHBhcmFtIGNhcHR1cmUgW2Jvb2xlYW5dXG4gICAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAgICovXG4gIGxpc3Rlbk9uY2U6IF9fbGlzdGVuT25jZSxcblxuICAvKipcbiAgICogQWJicmV2aWF0aW9uIGZvciB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lclxuICAgKiBAcGFyYW0gdGFyZ2V0IHtIVE1MRWxlbWVudH1cbiAgICogQHBhcmFtIGV2ZW50IHtzdHJpbmd9XG4gICAqIEBwYXJhbSBjYWxsYmFjayB7ZnVuY3Rpb259XG4gICAqIEBwYXJhbSBjYXB0dXJlIFtib29sZWFuXVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIG9mZjogX19yZW1vdmVMaXN0ZW5lcixcblxuICAvKipcbiAgICogQWJicmV2aWF0aW9uIGZvciB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lclxuICAgKiBAcGFyYW0gdGFyZ2V0IHtIVE1MRWxlbWVudH1cbiAgICogQHBhcmFtIGV2ZW50IHtzdHJpbmd9XG4gICAqIEBwYXJhbSBjYWxsYmFjayB7ZnVuY3Rpb259XG4gICAqIEBwYXJhbSBjYXB0dXJlIFtib29sZWFuXVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHVubGlzdGVuOiBfX3JlbW92ZUxpc3RlbmVyLFxuXG4gIC8qKlxuICAgKiBBYmJyZXZpYXRpb24gZm9yIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyXG4gICAqIEBwYXJhbSB0YXJnZXQge0hUTUxFbGVtZW50fVxuICAgKiBAcGFyYW0gZXZlbnQge3N0cmluZ31cbiAgICogQHBhcmFtIGNhbGxiYWNrIHtmdW5jdGlvbn1cbiAgICogQHBhcmFtIGNhcHR1cmUgW2Jvb2xlYW5dXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgcmVtb3ZlTGlzdGVuZXI6IF9fcmVtb3ZlTGlzdGVuZXIsXG5cbiAgLyoqXG4gICAqIEBpbmhlcml0XG4gICAqL1xuICBvbkFuaW1hdGlvbjogX19vbkFuaW1hdGlvbixcblxuICAvKipcbiAgICogQGluaGVyaXRcbiAgICovXG4gIG9mZkFuaW1hdGlvbjogX19vZmZBbmltYXRpb24sXG5cbiAgLyoqXG4gICAqIEBpbmhlcml0XG4gICAqL1xuICBvbmNlQW5pbWF0aW9uOiBfX29uY2VBbmltYXRpb25cbn07XG5cbi8qKlxuICogQWJicmV2aWF0aW9uIGZvciB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lclxuICogQHBhcmFtIHRhcmdldCB7SFRNTEVsZW1lbnR9XG4gKiBAcGFyYW0gZXZlbnQge3N0cmluZ31cbiAqIEBwYXJhbSBjYWxsYmFjayB7ZnVuY3Rpb259XG4gKiBAcGFyYW0gY2FwdHVyZSBbYm9vbGVhbl1cbiAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9fbGlzdGVuKHRhcmdldCwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gIHZhciBjYXB0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbM107XG5cbiAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrLCBjYXB0dXJlKTtcbiAgcmV0dXJuIF9fcmVtb3ZlTGlzdGVuZXIuYmluZChudWxsLCB0YXJnZXQsIGV2ZW50LCBjYWxsYmFjaywgY2FwdHVyZSk7XG59XG5cbi8qKlxuICogQWRkcyB3cmFwcGVyIGFyb3VuZCBmdW5jdGlvbiBhbmQgYWZ0ZXIgZmlyc3QgaW52b2NhdGlvbiwgcmVtb3ZlIGxpc3RlbmVyXG4gKiBATm90ZSBSZXR1cm5zIGNvcnJlY3QgbGlzdGVuZXIgZm9yIHJlbW92aW5nXG4gKiBAcGFyYW0gdGFyZ2V0IHtIVE1MRWxlbWVudH1cbiAqIEBwYXJhbSBldmVudCB7c3RyaW5nfVxuICogQHBhcmFtIGNhbGxiYWNrIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSBjYXB0dXJlIFtib29sZWFuXVxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gX19saXN0ZW5PbmNlKHRhcmdldCwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gIHZhciBjYXB0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbM107XG5cbiAgdmFyIHdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgd3JhcHBlciwgY2FwdHVyZSk7XG4gICAgICBjYWxsYmFjayhlKTtcbiAgICB9O1xuICB9KCk7XG4gIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCB3cmFwcGVyLCBjYXB0dXJlKTtcbiAgcmV0dXJuIF9fcmVtb3ZlTGlzdGVuZXIuYmluZChudWxsLCB0YXJnZXQsIGV2ZW50LCB3cmFwcGVyLCBjYXB0dXJlKTtcbn1cblxuLyoqXG4gKiBBYmJyZXZpYXRpb24gZm9yIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyXG4gKiBAcGFyYW0gdGFyZ2V0IHtIVE1MRWxlbWVudH1cbiAqIEBwYXJhbSBldmVudCB7c3RyaW5nfVxuICogQHBhcmFtIGNhbGxiYWNrIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSBjYXB0dXJlIFtib29sZWFuXVxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX3JlbW92ZUxpc3RlbmVyKHRhcmdldCwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gIHZhciBjYXB0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbM107XG5cbiAgcmV0dXJuIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBjYWxsYmFjaywgY2FwdHVyZSk7XG59XG5cbi8qKiBBTklNQVRJT05TICoqL1xudmFyIEFOSU1BVElPTl9UWVBFID0ge1xuICBlbmQ6ICdBbmltYXRpb25FbmQnLFxuICBzdGFydDogJ0FuaW1hdGlvblN0YXJ0JyxcbiAgaXRlcmF0aW9uOiAnQW5pbWF0aW9uSXRlcmF0aW9uJ1xufTtcblxudmFyIEFOSU1BVElPTl9QUkVGSVggPSB7XG4gICdXZWJraXRBbmltYXRpb24nOiAnd2Via2l0JyxcbiAgJ09BbmltYXRpb24nOiAnbydcbn07XG5cbi8qKlxuICogRmluZHMgQ29ycmVjdCBhbmltYXRpb24gZXZlbnQgbmFtZSBmb3IgY3VycmVudCBicm93c2VyXG4gKiBAcGFyYW0gdHlwZSB7c3RyaW5nfSBlbnVtOltzdGFydCwgZW5kLCBpdGVyYXRpb25dXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBbmltYXRpb24gRXZlbnQgbmFtZVxuICogQHRocm93cyBJbmNvcnJlY3QgYW5pbWF0aW9uIHR5cGVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9fd2hpY2hBbmltYXRpb25FdmVudCh0eXBlKSB7XG4gIHR5cGUgPSBBTklNQVRJT05fVFlQRVt0eXBlLnRvTG93ZXJDYXNlKCldO1xuICBpZiAoIXR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBhbmltYXRpb24gdHlwZSEgQ29ycmVjdCB2YWx1ZXM6IFtzdGFydCwgZW5kLCBpdGVyYXRpb25dJyk7XG4gIH1cbiAgdmFyIGVsID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zha2VlbGVtZW50JyksXG4gICAgICBwcmVmaXggPSAnJztcblxuICBmb3IgKHZhciBrZXkgaW4gQU5JTUFUSU9OX1BSRUZJWCkge1xuICAgIGlmIChlbC5zdHlsZVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHByZWZpeCA9IEFOSU1BVElPTl9QUkVGSVhba2V5XTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwcmVmaXggKyAhcHJlZml4ID8gdHlwZS50b0xvd2VyQ2FzZSgpIDogdHlwZTtcbn1cblxuLyoqXG4gKiBBZGRzIGFuaW1hdGlvbiBldmVudCBsaXN0ZW5lclxuICogQHBhcmFtIGVsZW1lbnQge0hUTUxFbGVtZW50fVxuICogQHBhcmFtIHR5cGUge3N0cmluZ30gZW51bTpbc3RhcnQsIGVuZCwgaXRlcmF0aW9uXVxuICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn1cbiAqIEBwYXJhbSBjYXB0dXJlIHtib29sZWFufVxuICogQHJldHVybnMge0Z1bmN0aW9ufSAtIGJvdW5kIGNhbGxiYWNrIHRvIHJlbW92ZSBsaXN0ZW5lclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19vbkFuaW1hdGlvbihlbGVtZW50LCB0eXBlLCBjYWxsYmFjaykge1xuICB2YXIgY2FwdHVyZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzNdO1xuXG4gIHZhciBldmVudE5hbWUgPSBfX3doaWNoQW5pbWF0aW9uRXZlbnQodHlwZSk7XG4gIHJldHVybiBfX2xpc3RlbihlbGVtZW50LCBldmVudE5hbWUsIGNhbGxiYWNrLCBjYXB0dXJlKTtcbn1cblxuLyoqXG4gKiBBZGRzIGFuaW1hdGlvbiBldmVudCBsaXN0ZW5lciBhbmQgYWZ0ZXIgZmlyc3QgZXhlY3V0aW9uIGl0cyByZW1vdmVkXG4gKiBAcGFyYW0gZWxlbWVudCB7SFRNTEVsZW1lbnR9XG4gKiBAcGFyYW0gdHlwZSB7c3RyaW5nfSBlbnVtOltzdGFydCwgZW5kLCBpdGVyYXRpb25dXG4gKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufVxuICogQHBhcmFtIGNhcHR1cmUge2Jvb2xlYW59XG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IC0gYm91bmQgY2FsbGJhY2sgdG8gcmVtb3ZlIGxpc3RlbmVyXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX29uY2VBbmltYXRpb24oZWxlbWVudCwgdHlwZSwgY2FsbGJhY2spIHtcbiAgdmFyIGNhcHR1cmUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1szXTtcblxuICB2YXIgZXZlbnROYW1lID0gX193aGljaEFuaW1hdGlvbkV2ZW50KHR5cGUpO1xuICByZXR1cm4gX19saXN0ZW5PbmNlKGVsZW1lbnQsIGV2ZW50TmFtZSwgY2FsbGJhY2ssIGNhcHR1cmUpO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJcbiAqIEBwYXJhbSBlbGVtZW50IHtIVE1MRWxlbWVudH1cbiAqIEBwYXJhbSB0eXBlIHtzdHJpbmd9IGVudW06W3N0YXJ0LCBlbmQsIGl0ZXJhdGlvbl1cbiAqIEBwYXJhbSBjYWxsYmFjayB7RnVuY3Rpb259XG4gKiBAcGFyYW0gY2FwdHVyZSB7Ym9vbGVhbn1cbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19vZmZBbmltYXRpb24oZWxlbWVudCwgdHlwZSwgY2FsbGJhY2spIHtcbiAgdmFyIGNhcHR1cmUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1szXTtcblxuICB2YXIgZXZlbnROYW1lID0gX193aGljaEFuaW1hdGlvbkV2ZW50KHR5cGUpO1xuICByZXR1cm4gX19yZW1vdmVMaXN0ZW5lcihlbGVtZW50LCBldmVudE5hbWUsIGNhbGxiYWNrLCBjYXB0dXJlKTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gRXZlbnRzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi90cmluaXR5L3V0aWxzL0V2ZW50cy5qc1xuLy8gbW9kdWxlIGlkID0gNDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 463:
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nfunction TrinityEvent(data) {\n    this.defaultPrevented = false;\n    this.data = data;\n    return this;\n}\n\nTrinityEvent.prototype.preventDefault = function () {\n    this.defaultPrevented = true;\n};\n\nexports.default = TrinityEvent;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L3V0aWxzL1RyaW5pdHlFdmVudC5qcz81OTU2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZnVuY3Rpb24gVHJpbml0eUV2ZW50KGRhdGEpIHtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHJldHVybiB0aGlzO1xufVxuXG5UcmluaXR5RXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBUcmluaXR5RXZlbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RyaW5pdHkvdXRpbHMvVHJpbml0eUV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSA0NjNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 464:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Dom = __webpack_require__(465);\n\nvar _Dom2 = _interopRequireDefault(_Dom);\n\nvar _classlist = __webpack_require__(466);\n\nvar _classlist2 = _interopRequireDefault(_classlist);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Default is value\nvar TYPE_VAL_MAP = {\n    radio: 'checked',\n    checkbox: 'checked'\n};\n\nvar FormInput = function () {\n    function FormInput(element) {\n        _classCallCheck(this, FormInput);\n\n        this.element = element;\n        this.rules = [];\n        this.errors = [];\n        this.message = null;\n        this.msgWrapper = _Dom2.default.createDom('div', { 'class': 'form-msg-wrapper' });\n        this.errorWrapper = _Dom2.default.createDom('div', { 'class': 'form-error-wrapper' });\n\n        var sibling = element.nextSibling;\n        if (sibling) {\n            element.parentElement.insertBefore(this.msgWrapper, sibling);\n        } else {\n            element.parentElement.appendChild(this.msgWrapper);\n        }\n        this.msgWrapper.appendChild(this.errorWrapper);\n    }\n\n    /**\n     * Returns value of input element\n     * It depends on type of element, if checkbox or radio, returns value of checked property\n     * @returns {*}\n     */\n\n\n    _createClass(FormInput, [{\n        key: 'getValue',\n        value: function getValue() {\n            return this.element[TYPE_VAL_MAP[this.element.type] || 'value'];\n        }\n\n        /**\n         * Validates if input has any error, if not removes 'error' className\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'isValid',\n        value: function isValid() {\n            return this.errors.length === 0 ? _classlist2.default.remove(this.element, 'error') || true : false;\n        }\n\n        /**\n         * Adds error to form input\n         * @param error\n         * @returns {*}\n         */\n\n    }, {\n        key: 'addError',\n        value: function addError(error) {\n            this.errors.push(error);\n            this.errorWrapper.appendChild(error.element);\n            _Dom2.default.classlist.add(this.element, 'error');\n            return error.id;\n        }\n\n        /**\n         * Set information message to input\n         * @param msg\n         * @returns {*}\n         */\n\n    }, {\n        key: 'setMessage',\n        value: function setMessage(msg) {\n            this.clearMessage();\n            this.message = msg;\n            this.msgWrapper.appendChild(msg.element);\n            return msg.id;\n        }\n\n        /**\n         * Delete message\n         */\n\n    }, {\n        key: 'clearMessage',\n        value: function clearMessage() {\n            if (this.message) {\n                _Dom2.default.removeNode(this.message.element);\n                this.message = null;\n            }\n        }\n    }]);\n\n    return FormInput;\n}();\n\nexports.default = FormInput;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L2NvbXBvbmVudHMvRm9ybUlucHV0LmpzP2FkODIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfRG9tID0gcmVxdWlyZSgnLi4vdXRpbHMvRG9tJyk7XG5cbnZhciBfRG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RvbSk7XG5cbnZhciBfY2xhc3NsaXN0ID0gcmVxdWlyZSgnLi4vdXRpbHMvY2xhc3NsaXN0Jyk7XG5cbnZhciBfY2xhc3NsaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbGlzdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8vIERlZmF1bHQgaXMgdmFsdWVcbnZhciBUWVBFX1ZBTF9NQVAgPSB7XG4gICAgcmFkaW86ICdjaGVja2VkJyxcbiAgICBjaGVja2JveDogJ2NoZWNrZWQnXG59O1xuXG52YXIgRm9ybUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEZvcm1JbnB1dChlbGVtZW50KSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGb3JtSW5wdXQpO1xuXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMucnVsZXMgPSBbXTtcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbnVsbDtcbiAgICAgICAgdGhpcy5tc2dXcmFwcGVyID0gX0RvbTIuZGVmYXVsdC5jcmVhdGVEb20oJ2RpdicsIHsgJ2NsYXNzJzogJ2Zvcm0tbXNnLXdyYXBwZXInIH0pO1xuICAgICAgICB0aGlzLmVycm9yV3JhcHBlciA9IF9Eb20yLmRlZmF1bHQuY3JlYXRlRG9tKCdkaXYnLCB7ICdjbGFzcyc6ICdmb3JtLWVycm9yLXdyYXBwZXInIH0pO1xuXG4gICAgICAgIHZhciBzaWJsaW5nID0gZWxlbWVudC5uZXh0U2libGluZztcbiAgICAgICAgaWYgKHNpYmxpbmcpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5tc2dXcmFwcGVyLCBzaWJsaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLm1zZ1dyYXBwZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubXNnV3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVycm9yV3JhcHBlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB2YWx1ZSBvZiBpbnB1dCBlbGVtZW50XG4gICAgICogSXQgZGVwZW5kcyBvbiB0eXBlIG9mIGVsZW1lbnQsIGlmIGNoZWNrYm94IG9yIHJhZGlvLCByZXR1cm5zIHZhbHVlIG9mIGNoZWNrZWQgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKEZvcm1JbnB1dCwgW3tcbiAgICAgICAga2V5OiAnZ2V0VmFsdWUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50W1RZUEVfVkFMX01BUFt0aGlzLmVsZW1lbnQudHlwZV0gfHwgJ3ZhbHVlJ107XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVmFsaWRhdGVzIGlmIGlucHV0IGhhcyBhbnkgZXJyb3IsIGlmIG5vdCByZW1vdmVzICdlcnJvcicgY2xhc3NOYW1lXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaXNWYWxpZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aCA9PT0gMCA/IF9jbGFzc2xpc3QyLmRlZmF1bHQucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2Vycm9yJykgfHwgdHJ1ZSA6IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgZXJyb3IgdG8gZm9ybSBpbnB1dFxuICAgICAgICAgKiBAcGFyYW0gZXJyb3JcbiAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhZGRFcnJvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFcnJvcihlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmVycm9yV3JhcHBlci5hcHBlbmRDaGlsZChlcnJvci5lbGVtZW50KTtcbiAgICAgICAgICAgIF9Eb20yLmRlZmF1bHQuY2xhc3NsaXN0LmFkZCh0aGlzLmVsZW1lbnQsICdlcnJvcicpO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLmlkO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBpbmZvcm1hdGlvbiBtZXNzYWdlIHRvIGlucHV0XG4gICAgICAgICAqIEBwYXJhbSBtc2dcbiAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRNZXNzYWdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldE1lc3NhZ2UobXNnKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZSgpO1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbXNnO1xuICAgICAgICAgICAgdGhpcy5tc2dXcmFwcGVyLmFwcGVuZENoaWxkKG1zZy5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBtc2cuaWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVsZXRlIG1lc3NhZ2VcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NsZWFyTWVzc2FnZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhck1lc3NhZ2UoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgX0RvbTIuZGVmYXVsdC5yZW1vdmVOb2RlKHRoaXMubWVzc2FnZS5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEZvcm1JbnB1dDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRm9ybUlucHV0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi90cmluaXR5L2NvbXBvbmVudHMvRm9ybUlucHV0LmpzXG4vLyBtb2R1bGUgaWQgPSA0NjRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 465:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.classlist = undefined;\nexports.disable = disable;\nexports.enable = enable;\nexports.removeNode = removeNode;\nexports.removeChildren = removeChildren;\nexports.htmlToDocumentFragment = htmlToDocumentFragment;\nexports.replaceNode = replaceNode;\nexports.createDom = createDom;\n\nvar _classlist = __webpack_require__(466);\n\nvar _classlist2 = _interopRequireDefault(_classlist);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Just export classlist to have it all in one component\n * @type {{}}\n */\nvar classlist = exports.classlist = _classlist2.default;\n\n/**\n * Disable element by adding attribute disabled=\"disabled\"\n * @param element\n */\n/**\n * Created by fisa on 10/26/15.\n */\n\nfunction disable(element) {\n    if (!element.disabled) {\n        element.setAttribute('disabled', 'disabled');\n    }\n}\n\n/**\n * Enable disabled attribute by removing attribute \"disabled\"\n * @param element\n */\nfunction enable(element) {\n    if (element.disabled) {\n        element.removeAttribute('disabled');\n    }\n}\n\n/**\n * Removes a node from its parent.\n * @param {Node} node The node to remove.\n * @return {Node} The node removed if removed; else, null.\n */\nfunction removeNode(node) {\n    return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * Removes all the child nodes on a DOM node.\n * @param {Node} node Node to remove children from.\n */\nfunction removeChildren(node) {\n    var child;\n    while (child = node.firstChild) {\n        node.removeChild(child);\n    }\n}\n\n/**\n * Create document fragment from html string\n * @param htmlString\n * @returns {*}\n */\nfunction htmlToDocumentFragment(htmlString) {\n    var tempDiv = document.createElement('div');\n    tempDiv.innerHTML = htmlString;\n\n    if (tempDiv.childNodes.length == 1) {\n        return tempDiv.removeChild(tempDiv.firstChild);\n    } else {\n        var fragment = document.createDocumentFragment();\n        while (tempDiv.firstChild) {\n            fragment.appendChild(tempDiv.firstChild);\n        }\n        return fragment;\n    }\n}\n\n/**\n * Replaces a node in the DOM tree. Will do nothing if {@code oldNode} has no\n * parent.\n * @param {Node} newNode Node to insert.\n * @param {Node} oldNode Node to replace.\n */\nfunction replaceNode(newNode, oldNode) {\n    var parent = oldNode.parentNode;\n    if (parent) {\n        parent.replaceChild(newNode, oldNode);\n    }\n}\n\n/**\n * Creates DOM element\n * @param tagName\n * @param elementAttributes\n * @param innerHTML\n * @returns {Element}\n */\nfunction createDom(tagName, elementAttributes, innerHTML) {\n    var tmpElement = document.createElement(tagName);\n    // Attributes?\n    if (elementAttributes) {\n        var attKeys = Object.keys(elementAttributes),\n            keysLength = attKeys.length;\n\n        for (var i = 0; i < keysLength; i++) {\n            tmpElement.setAttribute(attKeys[i], elementAttributes[attKeys[i]]);\n        }\n    }\n    // InnerHTML?\n    if (innerHTML && typeof innerHTML === 'string') {\n        //TODO: innerHTML should be checked - sanitized\n        tmpElement.innerHTML = innerHTML;\n    } else if (innerHTML instanceof HTMLElement) {\n        tmpElement.appendChild(innerHTML);\n    }\n    return tmpElement;\n}\n\nvar Dom = {\n    classlist: _classlist2.default,\n    disable: disable,\n    enable: enable,\n    removeNode: removeNode,\n    removeChildren: removeChildren,\n    htmlToDocumentFragment: htmlToDocumentFragment,\n    replaceNode: replaceNode,\n    createDom: createDom\n};\nexports.default = Dom;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L3V0aWxzL0RvbS5qcz82MTg2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jbGFzc2xpc3QgPSB1bmRlZmluZWQ7XG5leHBvcnRzLmRpc2FibGUgPSBkaXNhYmxlO1xuZXhwb3J0cy5lbmFibGUgPSBlbmFibGU7XG5leHBvcnRzLnJlbW92ZU5vZGUgPSByZW1vdmVOb2RlO1xuZXhwb3J0cy5yZW1vdmVDaGlsZHJlbiA9IHJlbW92ZUNoaWxkcmVuO1xuZXhwb3J0cy5odG1sVG9Eb2N1bWVudEZyYWdtZW50ID0gaHRtbFRvRG9jdW1lbnRGcmFnbWVudDtcbmV4cG9ydHMucmVwbGFjZU5vZGUgPSByZXBsYWNlTm9kZTtcbmV4cG9ydHMuY3JlYXRlRG9tID0gY3JlYXRlRG9tO1xuXG52YXIgX2NsYXNzbGlzdCA9IHJlcXVpcmUoJy4vY2xhc3NsaXN0LmpzJyk7XG5cbnZhciBfY2xhc3NsaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbGlzdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogSnVzdCBleHBvcnQgY2xhc3NsaXN0IHRvIGhhdmUgaXQgYWxsIGluIG9uZSBjb21wb25lbnRcbiAqIEB0eXBlIHt7fX1cbiAqL1xudmFyIGNsYXNzbGlzdCA9IGV4cG9ydHMuY2xhc3NsaXN0ID0gX2NsYXNzbGlzdDIuZGVmYXVsdDtcblxuLyoqXG4gKiBEaXNhYmxlIGVsZW1lbnQgYnkgYWRkaW5nIGF0dHJpYnV0ZSBkaXNhYmxlZD1cImRpc2FibGVkXCJcbiAqIEBwYXJhbSBlbGVtZW50XG4gKi9cbi8qKlxuICogQ3JlYXRlZCBieSBmaXNhIG9uIDEwLzI2LzE1LlxuICovXG5cbmZ1bmN0aW9uIGRpc2FibGUoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudC5kaXNhYmxlZCkge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9XG59XG5cbi8qKlxuICogRW5hYmxlIGRpc2FibGVkIGF0dHJpYnV0ZSBieSByZW1vdmluZyBhdHRyaWJ1dGUgXCJkaXNhYmxlZFwiXG4gKiBAcGFyYW0gZWxlbWVudFxuICovXG5mdW5jdGlvbiBlbmFibGUoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50LmRpc2FibGVkKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgbm9kZSBmcm9tIGl0cyBwYXJlbnQuXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlLlxuICogQHJldHVybiB7Tm9kZX0gVGhlIG5vZGUgcmVtb3ZlZCBpZiByZW1vdmVkOyBlbHNlLCBudWxsLlxuICovXG5mdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZSAmJiBub2RlLnBhcmVudE5vZGUgPyBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSkgOiBudWxsO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIHRoZSBjaGlsZCBub2RlcyBvbiBhIERPTSBub2RlLlxuICogQHBhcmFtIHtOb2RlfSBub2RlIE5vZGUgdG8gcmVtb3ZlIGNoaWxkcmVuIGZyb20uXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpIHtcbiAgICB2YXIgY2hpbGQ7XG4gICAgd2hpbGUgKGNoaWxkID0gbm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgZG9jdW1lbnQgZnJhZ21lbnQgZnJvbSBodG1sIHN0cmluZ1xuICogQHBhcmFtIGh0bWxTdHJpbmdcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBodG1sVG9Eb2N1bWVudEZyYWdtZW50KGh0bWxTdHJpbmcpIHtcbiAgICB2YXIgdGVtcERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRlbXBEaXYuaW5uZXJIVE1MID0gaHRtbFN0cmluZztcblxuICAgIGlmICh0ZW1wRGl2LmNoaWxkTm9kZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmV0dXJuIHRlbXBEaXYucmVtb3ZlQ2hpbGQodGVtcERpdi5maXJzdENoaWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHdoaWxlICh0ZW1wRGl2LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRlbXBEaXYuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYWdtZW50O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXBsYWNlcyBhIG5vZGUgaW4gdGhlIERPTSB0cmVlLiBXaWxsIGRvIG5vdGhpbmcgaWYge0Bjb2RlIG9sZE5vZGV9IGhhcyBub1xuICogcGFyZW50LlxuICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIE5vZGUgdG8gaW5zZXJ0LlxuICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIE5vZGUgdG8gcmVwbGFjZS5cbiAqL1xuZnVuY3Rpb24gcmVwbGFjZU5vZGUobmV3Tm9kZSwgb2xkTm9kZSkge1xuICAgIHZhciBwYXJlbnQgPSBvbGROb2RlLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsIG9sZE5vZGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIERPTSBlbGVtZW50XG4gKiBAcGFyYW0gdGFnTmFtZVxuICogQHBhcmFtIGVsZW1lbnRBdHRyaWJ1dGVzXG4gKiBAcGFyYW0gaW5uZXJIVE1MXG4gKiBAcmV0dXJucyB7RWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRG9tKHRhZ05hbWUsIGVsZW1lbnRBdHRyaWJ1dGVzLCBpbm5lckhUTUwpIHtcbiAgICB2YXIgdG1wRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gICAgLy8gQXR0cmlidXRlcz9cbiAgICBpZiAoZWxlbWVudEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdmFyIGF0dEtleXMgPSBPYmplY3Qua2V5cyhlbGVtZW50QXR0cmlidXRlcyksXG4gICAgICAgICAgICBrZXlzTGVuZ3RoID0gYXR0S2V5cy5sZW5ndGg7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRtcEVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dEtleXNbaV0sIGVsZW1lbnRBdHRyaWJ1dGVzW2F0dEtleXNbaV1dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBJbm5lckhUTUw/XG4gICAgaWYgKGlubmVySFRNTCAmJiB0eXBlb2YgaW5uZXJIVE1MID09PSAnc3RyaW5nJykge1xuICAgICAgICAvL1RPRE86IGlubmVySFRNTCBzaG91bGQgYmUgY2hlY2tlZCAtIHNhbml0aXplZFxuICAgICAgICB0bXBFbGVtZW50LmlubmVySFRNTCA9IGlubmVySFRNTDtcbiAgICB9IGVsc2UgaWYgKGlubmVySFRNTCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRtcEVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5uZXJIVE1MKTtcbiAgICB9XG4gICAgcmV0dXJuIHRtcEVsZW1lbnQ7XG59XG5cbnZhciBEb20gPSB7XG4gICAgY2xhc3NsaXN0OiBfY2xhc3NsaXN0Mi5kZWZhdWx0LFxuICAgIGRpc2FibGU6IGRpc2FibGUsXG4gICAgZW5hYmxlOiBlbmFibGUsXG4gICAgcmVtb3ZlTm9kZTogcmVtb3ZlTm9kZSxcbiAgICByZW1vdmVDaGlsZHJlbjogcmVtb3ZlQ2hpbGRyZW4sXG4gICAgaHRtbFRvRG9jdW1lbnRGcmFnbWVudDogaHRtbFRvRG9jdW1lbnRGcmFnbWVudCxcbiAgICByZXBsYWNlTm9kZTogcmVwbGFjZU5vZGUsXG4gICAgY3JlYXRlRG9tOiBjcmVhdGVEb21cbn07XG5leHBvcnRzLmRlZmF1bHQgPSBEb207XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RyaW5pdHkvdXRpbHMvRG9tLmpzXG4vLyBtb2R1bGUgaWQgPSA0NjVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 466:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar classlist = {}; /**\n                     * Created by fisa on 10/26/15.\n                     */\nexports.default = classlist;\n\n/**\n * Gets classlist Object\n * @param element {HTMLElement}\n * @returns {*}\n */\n\nclasslist.get = function (element) {\n    if (element.classList) {\n        return element.classList;\n    }\n\n    var className = element.className;\n    // Some types of elements don't have a className in IE (e.g. iframes).\n    // Furthermore, in Firefox, className is not a string when the element is\n    // an SVG element.\n    return _lodash2.default.isString(className) && className.match(/\\S+/g) || [];\n};\n\n/**\n * Adds a class to an element.  Does not add multiples of class names.  This\n * method may throw a DOM exception for an invalid or empty class name if\n * DOMTokenList is used.\n * @param {Element} element DOM node to add class to.\n * @param {string} className Class name to add.\n */\nclasslist.add = function (element, className) {\n    if (element.classList) {\n        element.classList.add(className);\n        return;\n    }\n\n    if (!classlist.contains(element, className)) {\n        // Ensure we add a space if this is not the first class name added.\n        element.className += element.className.length > 0 ? ' ' + className : className;\n    }\n};\n\n/**\n * Add all classes to element, avoid duplicates\n * @param {Element} element\n * @param {Array<string>} classesToAdd\n */\nclasslist.addAll = function (element, classesToAdd) {\n    if (element.classList) {\n        _lodash2.default.each(classesToAdd, function (c) {\n            element.classList.add(c);\n        });\n        return;\n    }\n\n    var classMap = {};\n\n    // Get all current class names into a map.\n    _lodash2.default.each(classlist.get(element), function (className) {\n        classMap[className] = true;\n    });\n\n    // Add new class names to the map.\n    _lodash2.default.each(classesToAdd, function (className) {\n        classMap[className] = true;\n    });\n\n    // Flatten the keys of the map into the className.\n    element.className = '';\n    for (var className in classMap) {\n        element.className += element.className.length > 0 ? ' ' + className : className;\n    }\n};\n\n/**\n * Removes a class from an element.  This method may throw a DOM exception\n * for an invalid or empty class name if DOMTokenList is used.\n * @param {Element} element DOM node to remove class from.\n * @param {string} className Class name to remove.\n */\nclasslist.remove = function (element, className) {\n    if (element.classList) {\n        element.classList.remove(className);\n        return;\n    }\n\n    if (classlist.contains(element, className)) {\n        // Filter out the class name.\n        element.className = _lodash2.default.filter(classlist.get(element), function (c) {\n            return c != className;\n        }).join(' ');\n    }\n};\n\n/**\n * Removes all classes\n * @param {Element} element\n * @param {Array<string>} classesToRemove\n */\nclasslist.removeAll = function (element, classesToRemove) {\n    if (element.classList) {\n        _lodash2.default.each(classesToRemove, function (c) {\n            element.classList.remove(c);\n        });\n        return;\n    }\n    // Filter out those classes in classesToRemove.\n    element.className = _lodash2.default.filter(classlist.get(element), function (className) {\n        // If this class is not one we are trying to remove,\n        // add it to the array of new class names.\n        return !_lodash2.default.contains(classesToRemove, className);\n    }).join(' ');\n};\n\n/**\n * Returns true if element contains className provided\n * @param {Element} element\n * @param {string} className\n * @returns {boolean}\n */\nclasslist.contains = function (element, className) {\n    return element.classList ? element.classList.contains(className) : _lodash2.default.includes(classlist.get(element), className);\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L3V0aWxzL2NsYXNzbGlzdC5qcz9kNjA5Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgY2xhc3NsaXN0ID0ge307IC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDcmVhdGVkIGJ5IGZpc2Egb24gMTAvMjYvMTUuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuZXhwb3J0cy5kZWZhdWx0ID0gY2xhc3NsaXN0O1xuXG4vKipcbiAqIEdldHMgY2xhc3NsaXN0IE9iamVjdFxuICogQHBhcmFtIGVsZW1lbnQge0hUTUxFbGVtZW50fVxuICogQHJldHVybnMgeyp9XG4gKi9cblxuY2xhc3NsaXN0LmdldCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdDtcbiAgICB9XG5cbiAgICB2YXIgY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWU7XG4gICAgLy8gU29tZSB0eXBlcyBvZiBlbGVtZW50cyBkb24ndCBoYXZlIGEgY2xhc3NOYW1lIGluIElFIChlLmcuIGlmcmFtZXMpLlxuICAgIC8vIEZ1cnRoZXJtb3JlLCBpbiBGaXJlZm94LCBjbGFzc05hbWUgaXMgbm90IGEgc3RyaW5nIHdoZW4gdGhlIGVsZW1lbnQgaXNcbiAgICAvLyBhbiBTVkcgZWxlbWVudC5cbiAgICByZXR1cm4gX2xvZGFzaDIuZGVmYXVsdC5pc1N0cmluZyhjbGFzc05hbWUpICYmIGNsYXNzTmFtZS5tYXRjaCgvXFxTKy9nKSB8fCBbXTtcbn07XG5cbi8qKlxuICogQWRkcyBhIGNsYXNzIHRvIGFuIGVsZW1lbnQuICBEb2VzIG5vdCBhZGQgbXVsdGlwbGVzIG9mIGNsYXNzIG5hbWVzLiAgVGhpc1xuICogbWV0aG9kIG1heSB0aHJvdyBhIERPTSBleGNlcHRpb24gZm9yIGFuIGludmFsaWQgb3IgZW1wdHkgY2xhc3MgbmFtZSBpZlxuICogRE9NVG9rZW5MaXN0IGlzIHVzZWQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgRE9NIG5vZGUgdG8gYWRkIGNsYXNzIHRvLlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSBDbGFzcyBuYW1lIHRvIGFkZC5cbiAqL1xuY2xhc3NsaXN0LmFkZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWNsYXNzbGlzdC5jb250YWlucyhlbGVtZW50LCBjbGFzc05hbWUpKSB7XG4gICAgICAgIC8vIEVuc3VyZSB3ZSBhZGQgYSBzcGFjZSBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgY2xhc3MgbmFtZSBhZGRlZC5cbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gZWxlbWVudC5jbGFzc05hbWUubGVuZ3RoID4gMCA/ICcgJyArIGNsYXNzTmFtZSA6IGNsYXNzTmFtZTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEFkZCBhbGwgY2xhc3NlcyB0byBlbGVtZW50LCBhdm9pZCBkdXBsaWNhdGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gY2xhc3Nlc1RvQWRkXG4gKi9cbmNsYXNzbGlzdC5hZGRBbGwgPSBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3Nlc1RvQWRkKSB7XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICAgIF9sb2Rhc2gyLmRlZmF1bHQuZWFjaChjbGFzc2VzVG9BZGQsIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNsYXNzTWFwID0ge307XG5cbiAgICAvLyBHZXQgYWxsIGN1cnJlbnQgY2xhc3MgbmFtZXMgaW50byBhIG1hcC5cbiAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goY2xhc3NsaXN0LmdldChlbGVtZW50KSwgZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgICAgICBjbGFzc01hcFtjbGFzc05hbWVdID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBuZXcgY2xhc3MgbmFtZXMgdG8gdGhlIG1hcC5cbiAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goY2xhc3Nlc1RvQWRkLCBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgICAgIGNsYXNzTWFwW2NsYXNzTmFtZV0gPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgLy8gRmxhdHRlbiB0aGUga2V5cyBvZiB0aGUgbWFwIGludG8gdGhlIGNsYXNzTmFtZS5cbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9ICcnO1xuICAgIGZvciAodmFyIGNsYXNzTmFtZSBpbiBjbGFzc01hcCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSBlbGVtZW50LmNsYXNzTmFtZS5sZW5ndGggPiAwID8gJyAnICsgY2xhc3NOYW1lIDogY2xhc3NOYW1lO1xuICAgIH1cbn07XG5cbi8qKlxuICogUmVtb3ZlcyBhIGNsYXNzIGZyb20gYW4gZWxlbWVudC4gIFRoaXMgbWV0aG9kIG1heSB0aHJvdyBhIERPTSBleGNlcHRpb25cbiAqIGZvciBhbiBpbnZhbGlkIG9yIGVtcHR5IGNsYXNzIG5hbWUgaWYgRE9NVG9rZW5MaXN0IGlzIHVzZWQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgRE9NIG5vZGUgdG8gcmVtb3ZlIGNsYXNzIGZyb20uXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIENsYXNzIG5hbWUgdG8gcmVtb3ZlLlxuICovXG5jbGFzc2xpc3QucmVtb3ZlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjbGFzc2xpc3QuY29udGFpbnMoZWxlbWVudCwgY2xhc3NOYW1lKSkge1xuICAgICAgICAvLyBGaWx0ZXIgb3V0IHRoZSBjbGFzcyBuYW1lLlxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IF9sb2Rhc2gyLmRlZmF1bHQuZmlsdGVyKGNsYXNzbGlzdC5nZXQoZWxlbWVudCksIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICByZXR1cm4gYyAhPSBjbGFzc05hbWU7XG4gICAgICAgIH0pLmpvaW4oJyAnKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGNsYXNzZXNcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBjbGFzc2VzVG9SZW1vdmVcbiAqL1xuY2xhc3NsaXN0LnJlbW92ZUFsbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc2VzVG9SZW1vdmUpIHtcbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5lYWNoKGNsYXNzZXNUb1JlbW92ZSwgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRmlsdGVyIG91dCB0aG9zZSBjbGFzc2VzIGluIGNsYXNzZXNUb1JlbW92ZS5cbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IF9sb2Rhc2gyLmRlZmF1bHQuZmlsdGVyKGNsYXNzbGlzdC5nZXQoZWxlbWVudCksIGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBjbGFzcyBpcyBub3Qgb25lIHdlIGFyZSB0cnlpbmcgdG8gcmVtb3ZlLFxuICAgICAgICAvLyBhZGQgaXQgdG8gdGhlIGFycmF5IG9mIG5ldyBjbGFzcyBuYW1lcy5cbiAgICAgICAgcmV0dXJuICFfbG9kYXNoMi5kZWZhdWx0LmNvbnRhaW5zKGNsYXNzZXNUb1JlbW92ZSwgY2xhc3NOYW1lKTtcbiAgICB9KS5qb2luKCcgJyk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBlbGVtZW50IGNvbnRhaW5zIGNsYXNzTmFtZSBwcm92aWRlZFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuY2xhc3NsaXN0LmNvbnRhaW5zID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdCA/IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgOiBfbG9kYXNoMi5kZWZhdWx0LmluY2x1ZGVzKGNsYXNzbGlzdC5nZXQoZWxlbWVudCksIGNsYXNzTmFtZSk7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi90cmluaXR5L3V0aWxzL2NsYXNzbGlzdC5qc1xuLy8gbW9kdWxlIGlkID0gNDY2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 467:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by fisa on 10/26/15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.messageService = messageService;\n\nvar _Dom = __webpack_require__(465);\n\nvar _Dom2 = _interopRequireDefault(_Dom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Flash messages\n * @param message\n * @param type\n */\nfunction messageService(message, type) {\n    type = type || 'info';\n    message = message || type;\n\n    var ajaxInput = document.querySelector('.ajax-checkbox'),\n        ajaxAlert = document.querySelector('.ajax-alert'),\n        box = document.getElementById('flashMessages');\n\n    if (!ajaxInput || !ajaxAlert) {\n        /*eslint-disable*/\n        console.log('MESSAGE', message);\n        /*eslint-enable*/\n        alert(message);\n        return;\n    }\n\n    ajaxInput = ajaxInput.cloneNode(true);\n    ajaxAlert = ajaxAlert.cloneNode(true);\n\n    var iconClass = '';\n    switch (type) {\n        case 'success':\n            {\n                iconClass = 'trinity trinity-ok';\n            }\n            break;\n        case 'warning':\n            {\n                iconClass = 'trinity trinity-warning';\n            }\n            break;\n        case 'error':\n        case 'danger':\n            {\n                type = 'danger';\n                iconClass = 'tiecons tiecons-exclamation-mark-circle';\n            }\n            break;\n        default:\n            {\n                iconClass = 'trinity trinity-info';\n            }\n            break;\n    }\n\n    // Assign new values\n    var id = Math.floor(Math.random() * (9999 - 10));\n    ajaxInput.setAttribute('id', 'close-alert-' + type + '-' + id);\n    ajaxAlert.innerHTML = ajaxAlert.innerHTML.replace('{id}', id.toString()).replace('{message}', message).replace('{icon}', iconClass).replace('{type}', type);\n    ajaxAlert.className = ajaxAlert.className.replace('{type}', type);\n\n    _Dom2.default.classlist.remove(ajaxInput, 'ajax-checkbox');\n    _Dom2.default.classlist.remove(ajaxAlert, 'ajax-alert');\n\n    box.appendChild(ajaxInput);\n    box.appendChild(ajaxAlert);\n\n    if (type == 'success') {\n        (function () {\n            var timeOutId = setTimeout(function () {\n                _Dom2.default.removeNode(ajaxInput);\n                _Dom2.default.removeNode(ajaxAlert);\n                clearTimeout(timeOutId); // just to be sure\n            }, 2000);\n        })();\n    }\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L1NlcnZpY2VzLmpzP2Y0MDUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGZpc2Egb24gMTAvMjYvMTUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5tZXNzYWdlU2VydmljZSA9IG1lc3NhZ2VTZXJ2aWNlO1xuXG52YXIgX0RvbSA9IHJlcXVpcmUoJy4vdXRpbHMvRG9tLmpzJyk7XG5cbnZhciBfRG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RvbSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogRmxhc2ggbWVzc2FnZXNcbiAqIEBwYXJhbSBtZXNzYWdlXG4gKiBAcGFyYW0gdHlwZVxuICovXG5mdW5jdGlvbiBtZXNzYWdlU2VydmljZShtZXNzYWdlLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgfHwgJ2luZm8nO1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8IHR5cGU7XG5cbiAgICB2YXIgYWpheElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFqYXgtY2hlY2tib3gnKSxcbiAgICAgICAgYWpheEFsZXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFqYXgtYWxlcnQnKSxcbiAgICAgICAgYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYXNoTWVzc2FnZXMnKTtcblxuICAgIGlmICghYWpheElucHV0IHx8ICFhamF4QWxlcnQpIHtcbiAgICAgICAgLyplc2xpbnQtZGlzYWJsZSovXG4gICAgICAgIGNvbnNvbGUubG9nKCdNRVNTQUdFJywgbWVzc2FnZSk7XG4gICAgICAgIC8qZXNsaW50LWVuYWJsZSovXG4gICAgICAgIGFsZXJ0KG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYWpheElucHV0ID0gYWpheElucHV0LmNsb25lTm9kZSh0cnVlKTtcbiAgICBhamF4QWxlcnQgPSBhamF4QWxlcnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgdmFyIGljb25DbGFzcyA9ICcnO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSAndHJpbml0eSB0cmluaXR5LW9rJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSAndHJpbml0eSB0cmluaXR5LXdhcm5pbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgY2FzZSAnZGFuZ2VyJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlID0gJ2Rhbmdlcic7XG4gICAgICAgICAgICAgICAgaWNvbkNsYXNzID0gJ3RpZWNvbnMgdGllY29ucy1leGNsYW1hdGlvbi1tYXJrLWNpcmNsZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSAndHJpbml0eSB0cmluaXR5LWluZm8nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gQXNzaWduIG5ldyB2YWx1ZXNcbiAgICB2YXIgaWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoOTk5OSAtIDEwKSk7XG4gICAgYWpheElucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCAnY2xvc2UtYWxlcnQtJyArIHR5cGUgKyAnLScgKyBpZCk7XG4gICAgYWpheEFsZXJ0LmlubmVySFRNTCA9IGFqYXhBbGVydC5pbm5lckhUTUwucmVwbGFjZSgne2lkfScsIGlkLnRvU3RyaW5nKCkpLnJlcGxhY2UoJ3ttZXNzYWdlfScsIG1lc3NhZ2UpLnJlcGxhY2UoJ3tpY29ufScsIGljb25DbGFzcykucmVwbGFjZSgne3R5cGV9JywgdHlwZSk7XG4gICAgYWpheEFsZXJ0LmNsYXNzTmFtZSA9IGFqYXhBbGVydC5jbGFzc05hbWUucmVwbGFjZSgne3R5cGV9JywgdHlwZSk7XG5cbiAgICBfRG9tMi5kZWZhdWx0LmNsYXNzbGlzdC5yZW1vdmUoYWpheElucHV0LCAnYWpheC1jaGVja2JveCcpO1xuICAgIF9Eb20yLmRlZmF1bHQuY2xhc3NsaXN0LnJlbW92ZShhamF4QWxlcnQsICdhamF4LWFsZXJ0Jyk7XG5cbiAgICBib3guYXBwZW5kQ2hpbGQoYWpheElucHV0KTtcbiAgICBib3guYXBwZW5kQ2hpbGQoYWpheEFsZXJ0KTtcblxuICAgIGlmICh0eXBlID09ICdzdWNjZXNzJykge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRpbWVPdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9Eb20yLmRlZmF1bHQucmVtb3ZlTm9kZShhamF4SW5wdXQpO1xuICAgICAgICAgICAgICAgIF9Eb20yLmRlZmF1bHQucmVtb3ZlTm9kZShhamF4QWxlcnQpO1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lT3V0SWQpOyAvLyBqdXN0IHRvIGJlIHN1cmVcbiAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICB9KSgpO1xuICAgIH1cbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdHJpbml0eS9TZXJ2aWNlcy5qc1xuLy8gbW9kdWxlIGlkID0gNDY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 468:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _Dom = __webpack_require__(465);\n\nvar _Dom2 = _interopRequireDefault(_Dom);\n\nvar _fbemitter = __webpack_require__(172);\n\nvar _Gateway = __webpack_require__(469);\n\nvar _Gateway2 = _interopRequireDefault(_Gateway);\n\nvar _Events = __webpack_require__(462);\n\nvar _Events2 = _interopRequireDefault(_Events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MAX_TRY = 3;\n\n/**\n * Trinity Tab\n */\n\nvar TrinityTab = function (_EventEmitter) {\n    _inherits(TrinityTab, _EventEmitter);\n\n    /**\n     * Heads of tab component\n     * @param [tabHeads] {Array<HTMLElement>}\n     */\n    function TrinityTab(tabHeads) {\n        _classCallCheck(this, TrinityTab);\n\n        tabHeads = tabHeads || document.querySelectorAll('.tab-head');\n        if (tabHeads.length < 1) {\n            throw new Error('No \"tabHeads\" provided or elements with \"tab-head\" class not found!');\n        }\n\n        var _this = _possibleConstructorReturn(this, (TrinityTab.__proto__ || Object.getPrototypeOf(TrinityTab)).call(this));\n\n        _this.heads = tabHeads;\n        _this.aliasIdPairs = { alToId: {}, idToAl: {} };\n        // find heads with aliases\n        _lodash2.default.each(tabHeads, function (head) {\n            head.alias = head.getAttribute('data-alias'); // sets custom attribute, for not having to use getAttribute anny later\n            if (head.alias) {\n                _this.aliasIdPairs.alToId[head.alias] = head.id;\n                _this.aliasIdPairs.idToAl[head.id] = head.alias;\n            }\n        });\n\n        _this.tabs = {};\n        _this.__activeTabName = null;\n\n        //Check which tab to load first\n        var tabName = location.hash.substring(1),\n            activeHead = null;\n\n        if (tabName.length > 0) {\n            if (_this.aliasIdPairs.alToId[tabName]) {\n                (function () {\n                    var tabId = _this.aliasIdPairs.alToId[tabName];\n                    activeHead = _lodash2.default.find(_this.heads, function (head) {\n                        return head.id === tabId;\n                    });\n                })();\n            } else {\n                activeHead = _lodash2.default.find(_this.heads, function (head) {\n                    return head.id === tabName;\n                });\n                if (activeHead && activeHead.alias) {\n                    // if head have alias, replace hash and tabName to it\n                    tabName = activeHead.alias;\n                    window.location.hash = '#' + activeHead.alias;\n                }\n            }\n        }\n\n        if (activeHead) {\n            activeHead.setAttribute('checked', 'checked'); //sets head from url as active\n        } else {\n            activeHead = _lodash2.default.find(_this.heads, function (tab) {\n                var checked = false;\n                if (_lodash2.default.isUndefined(tab.checked)) {\n                    checked = !_lodash2.default.isNull(tab.getAttribute('checked'));\n                } else {\n                    checked = tab.checked;\n                }\n                return checked;\n            });\n            if (!activeHead) {\n                activeHead = _this.heads[0];\n            }\n            tabName = activeHead.alias || activeHead.id;\n            // Replace history string\n            window.history.replaceState(null, tabName, '#' + tabName);\n        }\n        _this.__activeTabName = activeHead.id;\n        // Add new Tab to tabs\n        _this.tabs[activeHead.id] = new Tab(activeHead, _this);\n\n        /** Attach click event Listeners to other heads **/\n        _lodash2.default.map(_this.heads, function (head) {\n            head.addEventListener('click', __handleTabClick.bind(_this, head));\n        });\n\n        // Navigation\n        window.addEventListener('popstate', __handleNavigation.bind(_this));\n        return _this;\n    }\n\n    /**\n     * Set active Tab by provided tabID\n     * @param tabName {string}\n     * @throws {Error} if tab with provided ID does't exit\n     * @public\n     */\n\n\n    _createClass(TrinityTab, [{\n        key: 'setActiveTab',\n        value: function setActiveTab(tabName) {\n            tabName = tabName ? this.aliasIdPairs.alToId[tabName] || tabName : this.heads[0].id;\n\n            // If undefined -> Create and Set as Active\n            if (!this.tabs[tabName]) {\n                var head = _lodash2.default.find(this.heads, function (el) {\n                    return el.id === tabName;\n                });\n                if (!head) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        throw new Error('Tab with id or alias: ' + tabName + ' does not exist!');\n                    }\n                    return false;\n                }\n                this.tabs[tabName] = new Tab(head, this);\n            }\n\n            if (tabName === this.__activeTabName) {\n                return;\n            }\n            var prevTab = this.__activeTabName;\n\n            this.__activeTabName = tabName;\n            this.tabs[prevTab].head.removeAttribute('checked');\n            this.tabs[prevTab].head.checked = false;\n            this.tabs[tabName].head.setAttribute('checked', 'checked');\n            this.tabs[tabName].head.checked = true;\n\n            //Update Hash URL\n            __pushHistory(this.aliasIdPairs.idToAl[tabName] || tabName);\n\n            // Emit change\n            this.emit('tab-changed', {\n                previous: prevTab,\n                id: tabName,\n                alias: this.aliasIdPairs.idToAl[tabName],\n                tab: this.tabs[tabName]\n            });\n        }\n\n        /**\n         * Returns active tab\n         * @NOTE: may return NULL if active tab still processing\n         * @public\n         * @returns {Tab}\n         */\n\n    }, {\n        key: 'getActiveTab',\n        value: function getActiveTab() {\n            return this.tabs[this.__activeTabName];\n        }\n\n        /**\n         * Reloads content of tab\n         * @param tabName {string || Array<string>}\n         */\n\n    }, {\n        key: 'reload',\n        value: function reload(tabName) {\n            var _this2 = this;\n\n            tabName = this.aliasIdPairs.alToId[tabName] || tabName;\n            var __reload = function __reload(name) {\n                var tab = _this2.tabs[name];\n                if (tab) {\n                    tab.reloadContent();\n                }\n            };\n            if (!_lodash2.default.isArray(tabName)) {\n                __reload(tabName);\n            } else {\n                _lodash2.default.each(tabName, function (name) {\n                    __reload(name);\n                });\n            }\n        }\n\n        /**\n         * Reload content of all tabs\n         */\n\n    }, {\n        key: 'reloadAll',\n        value: function reloadAll() {\n            _lodash2.default.each(this.tabs, function (t) {\n                t.reloadContent();\n            });\n        }\n    }, {\n        key: 'onLoad',\n        value: function onLoad(tabID, callback, context) {\n            this.addListener(tabID, callback, context);\n        }\n    }]);\n\n    return TrinityTab;\n}(_fbemitter.EventEmitter);\n\n/**\n * Handles pop state navigation\n * @private\n */\n\n\nexports.default = TrinityTab;\nfunction __handleNavigation() {\n    var tabName = location.hash.substring(1);\n    if (tabName.length > 0) {\n        this.setActiveTab(tabName);\n    }\n}\n\n/**\n * Handles click event on Tab\n * @param head {HTMLElement}\n * @private\n */\nfunction __handleTabClick(head) {\n    this.setActiveTab(head.getAttribute('id'));\n}\n\n/**\n * Push new history\n * @param newHash\n * @private\n */\nfunction __pushHistory(newHash) {\n    if (newHash !== window.location.hash.substring(1)) {\n        window.history.pushState(null, newHash, '#' + newHash);\n    }\n}\n\n/**\n * Tab class\n */\n\nvar Tab = function () {\n    function Tab(head, parent) {\n        _classCallCheck(this, Tab);\n\n        this.alias = head.alias;\n        this.id = head.id;\n        this.head = head;\n        this.parent = parent;\n        this.root = null;\n        this.isLoading = false;\n        // this.forms = []; --never used\n\n        // Tab body\n        this.bodyElement = document.getElementById(head.id.replace('tab', 'tab-body-'));\n\n        __showLoading(this.bodyElement);\n\n        //link of body for root child\n        this.dataSource = this.bodyElement.getAttribute('data-source');\n        this.loadContent();\n    }\n\n    _createClass(Tab, [{\n        key: 'loadContent',\n        value: function loadContent() {\n            __requestWidget(this.dataSource, this, null);\n        }\n    }, {\n        key: 'reloadContent',\n        value: function reloadContent() {\n            __showLoading(this.bodyElement);\n            this.parent.emit('tab-unload', {\n                id: this.id,\n                alias: this.alias,\n                tab: this,\n                element: this.bodyElement\n            });\n            _Dom2.default.removeNode(this.root);\n            __requestWidget(this.dataSource, this, null);\n        }\n    }]);\n\n    return Tab;\n}();\n\nfunction __requestWidget(link, tab, timeout_i, callback) {\n    var _this3 = this;\n\n    if (!tab.isLoading) {\n        tab.isLoading = true;\n        _Gateway2.default.get(link, null, function (res) {\n            if (res.type !== 'text/html') {\n                throw new Error('Unexpected response!: ', res);\n            }\n            var data = res.text,\n                tmpDiv = _Dom2.default.createDom('div', null, data.trim());\n\n            tab.root = tmpDiv.children.length === 1 ? tmpDiv.children[0] : tmpDiv;\n\n            __hideLoading(tab.bodyElement);\n            tab.bodyElement.appendChild(tab.root);\n\n            // Dispatch global event\n            // tab doesn't inherit from EventEmitter class, but his parent does\n\n            tab.parent.emit('tab-load', {\n                id: tab.id,\n                alias: tab.alias,\n                tab: tab,\n                element: tab.bodyElement\n            });\n\n            // Dispatch tabID-specific event\n            tab.parent.emit(tab.name, {\n                tab: tab,\n                element: tab.bodyElement\n            });\n\n            // If id has any content then emit another event\n            var contentID = tab.root.id;\n            if (contentID) {\n                tab.parent.emit(contentID, {\n                    tab: tab,\n                    element: tab.bodyElement\n                });\n            }\n            // IF callback provided\n            if (callback) {\n                callback.call(tab, _this3.bodyElement);\n            }\n            tab.isLoading = false;\n        }, function (error) {\n            if (error.timeout) {\n                if (timeout_i && timeout_i === MAX_TRY) {\n                    // TODO: Logger service?\n                    console.error('Call for maintenance');\n                    tab.parent.emit('error', { message: 'REQUEST TIMED OUT', timeout: true });\n                    __tabNotLoaded(link, tab);\n                } else {\n                    (function () {\n                        console.warn('Request timed out, trying again in 2 sec');\n                        var id = setTimeout(function () {\n                            __requestWidget(link, tab, timeout_i + 1 || 1);\n                            clearTimeout(id);\n                        }, 2000);\n                    })();\n                }\n            } else {\n                console.error(error);\n                tab.parent.emit('error', error);\n                __tabNotLoaded(link, tab);\n            }\n            tab.isLoading = false;\n        });\n    }\n}\n\nfunction __tabNotLoaded(link, tab) {\n    var wrapper = document.createElement('div'),\n        button = document.createElement('input');\n    button.type = 'submit';\n    button.className = 'button button-primary trinityJS-reload-tab-button';\n    button.value = 'Reload';\n\n    wrapper.innerHTML = '<p class=\"trinityJS-reload-tab-text\">We are sorry, something went wrong. Please reload this tab. If the problem persist, contact us.</p>';\n    wrapper.className = 'trinityJS-reload-tab';\n    wrapper.appendChild(button);\n\n    __hideLoading(tab.bodyElement);\n    tab.bodyElement.appendChild(wrapper);\n    _Events2.default.listenOnce(button, 'click', function () {\n        tab.bodyElement.removeChild(wrapper);\n        __showLoading(tab.bodyElement);\n        __requestWidget(link, tab, null);\n    });\n}\n\n/**\n * TODO: loading icon to settings\n * TODO: Loading icon (whole content) should be variable from outside, not strictly defined as it is now\n */\nfunction __showLoading(element) {\n    var loader = element.querySelector('.trinity-tab-loader');\n    if (_lodash2.default.isNull(loader)) {\n        var icon = _Dom2.default.createDom('i', { 'class': 'tiecons tiecons-loading tiecons-rotate font-40' });\n        loader = _Dom2.default.createDom('div', { 'class': 'trinity-tab-loader tab-loader' }, icon);\n        element.appendChild(loader);\n    } else {\n        _Dom2.default.classlist.remove(loader, 'display-none');\n    }\n}\n\nfunction __hideLoading(element) {\n    var loader = element.querySelector('.trinity-tab-loader');\n    if (loader) {\n        _Dom2.default.classlist.add(loader, 'display-none');\n    }\n}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(31)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L2NvbXBvbmVudHMvVHJpbml0eVRhYi5qcz85MjViIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG52YXIgX0RvbSA9IHJlcXVpcmUoJ3RyaW5pdHkvdXRpbHMvRG9tJyk7XG5cbnZhciBfRG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RvbSk7XG5cbnZhciBfZmJlbWl0dGVyID0gcmVxdWlyZSgnZmJlbWl0dGVyJyk7XG5cbnZhciBfR2F0ZXdheSA9IHJlcXVpcmUoJ3RyaW5pdHkvR2F0ZXdheScpO1xuXG52YXIgX0dhdGV3YXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfR2F0ZXdheSk7XG5cbnZhciBfRXZlbnRzID0gcmVxdWlyZSgndHJpbml0eS91dGlscy9FdmVudHMnKTtcblxudmFyIF9FdmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRXZlbnRzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgTUFYX1RSWSA9IDM7XG5cbi8qKlxuICogVHJpbml0eSBUYWJcbiAqL1xuXG52YXIgVHJpbml0eVRhYiA9IGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG4gICAgX2luaGVyaXRzKFRyaW5pdHlUYWIsIF9FdmVudEVtaXR0ZXIpO1xuXG4gICAgLyoqXG4gICAgICogSGVhZHMgb2YgdGFiIGNvbXBvbmVudFxuICAgICAqIEBwYXJhbSBbdGFiSGVhZHNdIHtBcnJheTxIVE1MRWxlbWVudD59XG4gICAgICovXG4gICAgZnVuY3Rpb24gVHJpbml0eVRhYih0YWJIZWFkcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJpbml0eVRhYik7XG5cbiAgICAgICAgdGFiSGVhZHMgPSB0YWJIZWFkcyB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWhlYWQnKTtcbiAgICAgICAgaWYgKHRhYkhlYWRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gXCJ0YWJIZWFkc1wiIHByb3ZpZGVkIG9yIGVsZW1lbnRzIHdpdGggXCJ0YWItaGVhZFwiIGNsYXNzIG5vdCBmb3VuZCEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUcmluaXR5VGFiLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVHJpbml0eVRhYikpLmNhbGwodGhpcykpO1xuXG4gICAgICAgIF90aGlzLmhlYWRzID0gdGFiSGVhZHM7XG4gICAgICAgIF90aGlzLmFsaWFzSWRQYWlycyA9IHsgYWxUb0lkOiB7fSwgaWRUb0FsOiB7fSB9O1xuICAgICAgICAvLyBmaW5kIGhlYWRzIHdpdGggYWxpYXNlc1xuICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2godGFiSGVhZHMsIGZ1bmN0aW9uIChoZWFkKSB7XG4gICAgICAgICAgICBoZWFkLmFsaWFzID0gaGVhZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpYXMnKTsgLy8gc2V0cyBjdXN0b20gYXR0cmlidXRlLCBmb3Igbm90IGhhdmluZyB0byB1c2UgZ2V0QXR0cmlidXRlIGFubnkgbGF0ZXJcbiAgICAgICAgICAgIGlmIChoZWFkLmFsaWFzKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWxpYXNJZFBhaXJzLmFsVG9JZFtoZWFkLmFsaWFzXSA9IGhlYWQuaWQ7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWxpYXNJZFBhaXJzLmlkVG9BbFtoZWFkLmlkXSA9IGhlYWQuYWxpYXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIF90aGlzLnRhYnMgPSB7fTtcbiAgICAgICAgX3RoaXMuX19hY3RpdmVUYWJOYW1lID0gbnVsbDtcblxuICAgICAgICAvL0NoZWNrIHdoaWNoIHRhYiB0byBsb2FkIGZpcnN0XG4gICAgICAgIHZhciB0YWJOYW1lID0gbG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksXG4gICAgICAgICAgICBhY3RpdmVIZWFkID0gbnVsbDtcblxuICAgICAgICBpZiAodGFiTmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuYWxpYXNJZFBhaXJzLmFsVG9JZFt0YWJOYW1lXSkge1xuICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJJZCA9IF90aGlzLmFsaWFzSWRQYWlycy5hbFRvSWRbdGFiTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUhlYWQgPSBfbG9kYXNoMi5kZWZhdWx0LmZpbmQoX3RoaXMuaGVhZHMsIGZ1bmN0aW9uIChoZWFkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGVhZC5pZCA9PT0gdGFiSWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUhlYWQgPSBfbG9kYXNoMi5kZWZhdWx0LmZpbmQoX3RoaXMuaGVhZHMsIGZ1bmN0aW9uIChoZWFkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWFkLmlkID09PSB0YWJOYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVIZWFkICYmIGFjdGl2ZUhlYWQuYWxpYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaGVhZCBoYXZlIGFsaWFzLCByZXBsYWNlIGhhc2ggYW5kIHRhYk5hbWUgdG8gaXRcbiAgICAgICAgICAgICAgICAgICAgdGFiTmFtZSA9IGFjdGl2ZUhlYWQuYWxpYXM7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnICsgYWN0aXZlSGVhZC5hbGlhcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWN0aXZlSGVhZCkge1xuICAgICAgICAgICAgYWN0aXZlSGVhZC5zZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpOyAvL3NldHMgaGVhZCBmcm9tIHVybCBhcyBhY3RpdmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjdGl2ZUhlYWQgPSBfbG9kYXNoMi5kZWZhdWx0LmZpbmQoX3RoaXMuaGVhZHMsIGZ1bmN0aW9uICh0YWIpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChfbG9kYXNoMi5kZWZhdWx0LmlzVW5kZWZpbmVkKHRhYi5jaGVja2VkKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2VkID0gIV9sb2Rhc2gyLmRlZmF1bHQuaXNOdWxsKHRhYi5nZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZCA9IHRhYi5jaGVja2VkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tlZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFhY3RpdmVIZWFkKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlSGVhZCA9IF90aGlzLmhlYWRzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFiTmFtZSA9IGFjdGl2ZUhlYWQuYWxpYXMgfHwgYWN0aXZlSGVhZC5pZDtcbiAgICAgICAgICAgIC8vIFJlcGxhY2UgaGlzdG9yeSBzdHJpbmdcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCB0YWJOYW1lLCAnIycgKyB0YWJOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5fX2FjdGl2ZVRhYk5hbWUgPSBhY3RpdmVIZWFkLmlkO1xuICAgICAgICAvLyBBZGQgbmV3IFRhYiB0byB0YWJzXG4gICAgICAgIF90aGlzLnRhYnNbYWN0aXZlSGVhZC5pZF0gPSBuZXcgVGFiKGFjdGl2ZUhlYWQsIF90aGlzKTtcblxuICAgICAgICAvKiogQXR0YWNoIGNsaWNrIGV2ZW50IExpc3RlbmVycyB0byBvdGhlciBoZWFkcyAqKi9cbiAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5tYXAoX3RoaXMuaGVhZHMsIGZ1bmN0aW9uIChoZWFkKSB7XG4gICAgICAgICAgICBoZWFkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX19oYW5kbGVUYWJDbGljay5iaW5kKF90aGlzLCBoZWFkKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE5hdmlnYXRpb25cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgX19oYW5kbGVOYXZpZ2F0aW9uLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBhY3RpdmUgVGFiIGJ5IHByb3ZpZGVkIHRhYklEXG4gICAgICogQHBhcmFtIHRhYk5hbWUge3N0cmluZ31cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgdGFiIHdpdGggcHJvdmlkZWQgSUQgZG9lcyd0IGV4aXRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhUcmluaXR5VGFiLCBbe1xuICAgICAgICBrZXk6ICdzZXRBY3RpdmVUYWInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWN0aXZlVGFiKHRhYk5hbWUpIHtcbiAgICAgICAgICAgIHRhYk5hbWUgPSB0YWJOYW1lID8gdGhpcy5hbGlhc0lkUGFpcnMuYWxUb0lkW3RhYk5hbWVdIHx8IHRhYk5hbWUgOiB0aGlzLmhlYWRzWzBdLmlkO1xuXG4gICAgICAgICAgICAvLyBJZiB1bmRlZmluZWQgLT4gQ3JlYXRlIGFuZCBTZXQgYXMgQWN0aXZlXG4gICAgICAgICAgICBpZiAoIXRoaXMudGFic1t0YWJOYW1lXSkge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkID0gX2xvZGFzaDIuZGVmYXVsdC5maW5kKHRoaXMuaGVhZHMsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwuaWQgPT09IHRhYk5hbWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFoZWFkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhYiB3aXRoIGlkIG9yIGFsaWFzOiAnICsgdGFiTmFtZSArICcgZG9lcyBub3QgZXhpc3QhJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRhYnNbdGFiTmFtZV0gPSBuZXcgVGFiKGhlYWQsIHRoaXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gdGhpcy5fX2FjdGl2ZVRhYk5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldlRhYiA9IHRoaXMuX19hY3RpdmVUYWJOYW1lO1xuXG4gICAgICAgICAgICB0aGlzLl9fYWN0aXZlVGFiTmFtZSA9IHRhYk5hbWU7XG4gICAgICAgICAgICB0aGlzLnRhYnNbcHJldlRhYl0uaGVhZC5yZW1vdmVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIHRoaXMudGFic1twcmV2VGFiXS5oZWFkLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudGFic1t0YWJOYW1lXS5oZWFkLnNldEF0dHJpYnV0ZSgnY2hlY2tlZCcsICdjaGVja2VkJyk7XG4gICAgICAgICAgICB0aGlzLnRhYnNbdGFiTmFtZV0uaGVhZC5jaGVja2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy9VcGRhdGUgSGFzaCBVUkxcbiAgICAgICAgICAgIF9fcHVzaEhpc3RvcnkodGhpcy5hbGlhc0lkUGFpcnMuaWRUb0FsW3RhYk5hbWVdIHx8IHRhYk5hbWUpO1xuXG4gICAgICAgICAgICAvLyBFbWl0IGNoYW5nZVxuICAgICAgICAgICAgdGhpcy5lbWl0KCd0YWItY2hhbmdlZCcsIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91czogcHJldlRhYixcbiAgICAgICAgICAgICAgICBpZDogdGFiTmFtZSxcbiAgICAgICAgICAgICAgICBhbGlhczogdGhpcy5hbGlhc0lkUGFpcnMuaWRUb0FsW3RhYk5hbWVdLFxuICAgICAgICAgICAgICAgIHRhYjogdGhpcy50YWJzW3RhYk5hbWVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGFjdGl2ZSB0YWJcbiAgICAgICAgICogQE5PVEU6IG1heSByZXR1cm4gTlVMTCBpZiBhY3RpdmUgdGFiIHN0aWxsIHByb2Nlc3NpbmdcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmV0dXJucyB7VGFifVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0QWN0aXZlVGFiJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjdGl2ZVRhYigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhYnNbdGhpcy5fX2FjdGl2ZVRhYk5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbG9hZHMgY29udGVudCBvZiB0YWJcbiAgICAgICAgICogQHBhcmFtIHRhYk5hbWUge3N0cmluZyB8fCBBcnJheTxzdHJpbmc+fVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVsb2FkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbG9hZCh0YWJOYW1lKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdGFiTmFtZSA9IHRoaXMuYWxpYXNJZFBhaXJzLmFsVG9JZFt0YWJOYW1lXSB8fCB0YWJOYW1lO1xuICAgICAgICAgICAgdmFyIF9fcmVsb2FkID0gZnVuY3Rpb24gX19yZWxvYWQobmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciB0YWIgPSBfdGhpczIudGFic1tuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodGFiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYi5yZWxvYWRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghX2xvZGFzaDIuZGVmYXVsdC5pc0FycmF5KHRhYk5hbWUpKSB7XG4gICAgICAgICAgICAgICAgX19yZWxvYWQodGFiTmFtZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9sb2Rhc2gyLmRlZmF1bHQuZWFjaCh0YWJOYW1lLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBfX3JlbG9hZChuYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWxvYWQgY29udGVudCBvZiBhbGwgdGFic1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVsb2FkQWxsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbG9hZEFsbCgpIHtcbiAgICAgICAgICAgIF9sb2Rhc2gyLmRlZmF1bHQuZWFjaCh0aGlzLnRhYnMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdC5yZWxvYWRDb250ZW50KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnb25Mb2FkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uTG9hZCh0YWJJRCwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkTGlzdGVuZXIodGFiSUQsIGNhbGxiYWNrLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUcmluaXR5VGFiO1xufShfZmJlbWl0dGVyLkV2ZW50RW1pdHRlcik7XG5cbi8qKlxuICogSGFuZGxlcyBwb3Agc3RhdGUgbmF2aWdhdGlvblxuICogQHByaXZhdGVcbiAqL1xuXG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRyaW5pdHlUYWI7XG5mdW5jdGlvbiBfX2hhbmRsZU5hdmlnYXRpb24oKSB7XG4gICAgdmFyIHRhYk5hbWUgPSBsb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKTtcbiAgICBpZiAodGFiTmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKHRhYk5hbWUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIYW5kbGVzIGNsaWNrIGV2ZW50IG9uIFRhYlxuICogQHBhcmFtIGhlYWQge0hUTUxFbGVtZW50fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19oYW5kbGVUYWJDbGljayhoZWFkKSB7XG4gICAgdGhpcy5zZXRBY3RpdmVUYWIoaGVhZC5nZXRBdHRyaWJ1dGUoJ2lkJykpO1xufVxuXG4vKipcbiAqIFB1c2ggbmV3IGhpc3RvcnlcbiAqIEBwYXJhbSBuZXdIYXNoXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX3B1c2hIaXN0b3J5KG5ld0hhc2gpIHtcbiAgICBpZiAobmV3SGFzaCAhPT0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBuZXdIYXNoLCAnIycgKyBuZXdIYXNoKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGFiIGNsYXNzXG4gKi9cblxudmFyIFRhYiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYWIoaGVhZCwgcGFyZW50KSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWIpO1xuXG4gICAgICAgIHRoaXMuYWxpYXMgPSBoZWFkLmFsaWFzO1xuICAgICAgICB0aGlzLmlkID0gaGVhZC5pZDtcbiAgICAgICAgdGhpcy5oZWFkID0gaGVhZDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMucm9vdCA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIC8vIHRoaXMuZm9ybXMgPSBbXTsgLS1uZXZlciB1c2VkXG5cbiAgICAgICAgLy8gVGFiIGJvZHlcbiAgICAgICAgdGhpcy5ib2R5RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhlYWQuaWQucmVwbGFjZSgndGFiJywgJ3RhYi1ib2R5LScpKTtcblxuICAgICAgICBfX3Nob3dMb2FkaW5nKHRoaXMuYm9keUVsZW1lbnQpO1xuXG4gICAgICAgIC8vbGluayBvZiBib2R5IGZvciByb290IGNoaWxkXG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IHRoaXMuYm9keUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNvdXJjZScpO1xuICAgICAgICB0aGlzLmxvYWRDb250ZW50KCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFRhYiwgW3tcbiAgICAgICAga2V5OiAnbG9hZENvbnRlbnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZENvbnRlbnQoKSB7XG4gICAgICAgICAgICBfX3JlcXVlc3RXaWRnZXQodGhpcy5kYXRhU291cmNlLCB0aGlzLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVsb2FkQ29udGVudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWxvYWRDb250ZW50KCkge1xuICAgICAgICAgICAgX19zaG93TG9hZGluZyh0aGlzLmJvZHlFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVtaXQoJ3RhYi11bmxvYWQnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgYWxpYXM6IHRoaXMuYWxpYXMsXG4gICAgICAgICAgICAgICAgdGFiOiB0aGlzLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuYm9keUVsZW1lbnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX0RvbTIuZGVmYXVsdC5yZW1vdmVOb2RlKHRoaXMucm9vdCk7XG4gICAgICAgICAgICBfX3JlcXVlc3RXaWRnZXQodGhpcy5kYXRhU291cmNlLCB0aGlzLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUYWI7XG59KCk7XG5cbmZ1bmN0aW9uIF9fcmVxdWVzdFdpZGdldChsaW5rLCB0YWIsIHRpbWVvdXRfaSwgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIGlmICghdGFiLmlzTG9hZGluZykge1xuICAgICAgICB0YWIuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgX0dhdGV3YXkyLmRlZmF1bHQuZ2V0KGxpbmssIG51bGwsIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGlmIChyZXMudHlwZSAhPT0gJ3RleHQvaHRtbCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgcmVzcG9uc2UhOiAnLCByZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMudGV4dCxcbiAgICAgICAgICAgICAgICB0bXBEaXYgPSBfRG9tMi5kZWZhdWx0LmNyZWF0ZURvbSgnZGl2JywgbnVsbCwgZGF0YS50cmltKCkpO1xuXG4gICAgICAgICAgICB0YWIucm9vdCA9IHRtcERpdi5jaGlsZHJlbi5sZW5ndGggPT09IDEgPyB0bXBEaXYuY2hpbGRyZW5bMF0gOiB0bXBEaXY7XG5cbiAgICAgICAgICAgIF9faGlkZUxvYWRpbmcodGFiLmJvZHlFbGVtZW50KTtcbiAgICAgICAgICAgIHRhYi5ib2R5RWxlbWVudC5hcHBlbmRDaGlsZCh0YWIucm9vdCk7XG5cbiAgICAgICAgICAgIC8vIERpc3BhdGNoIGdsb2JhbCBldmVudFxuICAgICAgICAgICAgLy8gdGFiIGRvZXNuJ3QgaW5oZXJpdCBmcm9tIEV2ZW50RW1pdHRlciBjbGFzcywgYnV0IGhpcyBwYXJlbnQgZG9lc1xuXG4gICAgICAgICAgICB0YWIucGFyZW50LmVtaXQoJ3RhYi1sb2FkJywge1xuICAgICAgICAgICAgICAgIGlkOiB0YWIuaWQsXG4gICAgICAgICAgICAgICAgYWxpYXM6IHRhYi5hbGlhcyxcbiAgICAgICAgICAgICAgICB0YWI6IHRhYixcbiAgICAgICAgICAgICAgICBlbGVtZW50OiB0YWIuYm9keUVsZW1lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBEaXNwYXRjaCB0YWJJRC1zcGVjaWZpYyBldmVudFxuICAgICAgICAgICAgdGFiLnBhcmVudC5lbWl0KHRhYi5uYW1lLCB7XG4gICAgICAgICAgICAgICAgdGFiOiB0YWIsXG4gICAgICAgICAgICAgICAgZWxlbWVudDogdGFiLmJvZHlFbGVtZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gSWYgaWQgaGFzIGFueSBjb250ZW50IHRoZW4gZW1pdCBhbm90aGVyIGV2ZW50XG4gICAgICAgICAgICB2YXIgY29udGVudElEID0gdGFiLnJvb3QuaWQ7XG4gICAgICAgICAgICBpZiAoY29udGVudElEKSB7XG4gICAgICAgICAgICAgICAgdGFiLnBhcmVudC5lbWl0KGNvbnRlbnRJRCwge1xuICAgICAgICAgICAgICAgICAgICB0YWI6IHRhYixcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGFiLmJvZHlFbGVtZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJRiBjYWxsYmFjayBwcm92aWRlZFxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0YWIsIF90aGlzMy5ib2R5RWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWIuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yLnRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGltZW91dF9pICYmIHRpbWVvdXRfaSA9PT0gTUFYX1RSWSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBMb2dnZXIgc2VydmljZT9cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2FsbCBmb3IgbWFpbnRlbmFuY2UnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFiLnBhcmVudC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ1JFUVVFU1QgVElNRUQgT1VUJywgdGltZW91dDogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgX190YWJOb3RMb2FkZWQobGluaywgdGFiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdSZXF1ZXN0IHRpbWVkIG91dCwgdHJ5aW5nIGFnYWluIGluIDIgc2VjJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3JlcXVlc3RXaWRnZXQobGluaywgdGFiLCB0aW1lb3V0X2kgKyAxIHx8IDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRhYi5wYXJlbnQuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgX190YWJOb3RMb2FkZWQobGluaywgdGFiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhYi5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX3RhYk5vdExvYWRlZChsaW5rLCB0YWIpIHtcbiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGJ1dHRvbi50eXBlID0gJ3N1Ym1pdCc7XG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9ICdidXR0b24gYnV0dG9uLXByaW1hcnkgdHJpbml0eUpTLXJlbG9hZC10YWItYnV0dG9uJztcbiAgICBidXR0b24udmFsdWUgPSAnUmVsb2FkJztcblxuICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gJzxwIGNsYXNzPVwidHJpbml0eUpTLXJlbG9hZC10YWItdGV4dFwiPldlIGFyZSBzb3JyeSwgc29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSByZWxvYWQgdGhpcyB0YWIuIElmIHRoZSBwcm9ibGVtIHBlcnNpc3QsIGNvbnRhY3QgdXMuPC9wPic7XG4gICAgd3JhcHBlci5jbGFzc05hbWUgPSAndHJpbml0eUpTLXJlbG9hZC10YWInO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcblxuICAgIF9faGlkZUxvYWRpbmcodGFiLmJvZHlFbGVtZW50KTtcbiAgICB0YWIuYm9keUVsZW1lbnQuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG4gICAgX0V2ZW50czIuZGVmYXVsdC5saXN0ZW5PbmNlKGJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0YWIuYm9keUVsZW1lbnQucmVtb3ZlQ2hpbGQod3JhcHBlcik7XG4gICAgICAgIF9fc2hvd0xvYWRpbmcodGFiLmJvZHlFbGVtZW50KTtcbiAgICAgICAgX19yZXF1ZXN0V2lkZ2V0KGxpbmssIHRhYiwgbnVsbCk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogVE9ETzogbG9hZGluZyBpY29uIHRvIHNldHRpbmdzXG4gKiBUT0RPOiBMb2FkaW5nIGljb24gKHdob2xlIGNvbnRlbnQpIHNob3VsZCBiZSB2YXJpYWJsZSBmcm9tIG91dHNpZGUsIG5vdCBzdHJpY3RseSBkZWZpbmVkIGFzIGl0IGlzIG5vd1xuICovXG5mdW5jdGlvbiBfX3Nob3dMb2FkaW5nKGVsZW1lbnQpIHtcbiAgICB2YXIgbG9hZGVyID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudHJpbml0eS10YWItbG9hZGVyJyk7XG4gICAgaWYgKF9sb2Rhc2gyLmRlZmF1bHQuaXNOdWxsKGxvYWRlcikpIHtcbiAgICAgICAgdmFyIGljb24gPSBfRG9tMi5kZWZhdWx0LmNyZWF0ZURvbSgnaScsIHsgJ2NsYXNzJzogJ3RpZWNvbnMgdGllY29ucy1sb2FkaW5nIHRpZWNvbnMtcm90YXRlIGZvbnQtNDAnIH0pO1xuICAgICAgICBsb2FkZXIgPSBfRG9tMi5kZWZhdWx0LmNyZWF0ZURvbSgnZGl2JywgeyAnY2xhc3MnOiAndHJpbml0eS10YWItbG9hZGVyIHRhYi1sb2FkZXInIH0sIGljb24pO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGxvYWRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgX0RvbTIuZGVmYXVsdC5jbGFzc2xpc3QucmVtb3ZlKGxvYWRlciwgJ2Rpc3BsYXktbm9uZScpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19oaWRlTG9hZGluZyhlbGVtZW50KSB7XG4gICAgdmFyIGxvYWRlciA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRyaW5pdHktdGFiLWxvYWRlcicpO1xuICAgIGlmIChsb2FkZXIpIHtcbiAgICAgICAgX0RvbTIuZGVmYXVsdC5jbGFzc2xpc3QuYWRkKGxvYWRlciwgJ2Rpc3BsYXktbm9uZScpO1xuICAgIH1cbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdHJpbml0eS9jb21wb25lbnRzL1RyaW5pdHlUYWIuanNcbi8vIG1vZHVsZSBpZCA9IDQ2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 469:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.configure = undefined;\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _superagent = __webpack_require__(457);\n\nvar _superagent2 = _interopRequireDefault(_superagent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Global configuration\nvar config = {\n    timeout: 10000,\n    fileTimeout: 10000\n};\n\nvar Gateway = {\n    /**\n     *  normal GET request to defined URL\n     * @param url\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    get: function get(url, data, successCallback, errorCallback) {\n        __send(url, 'GET', data, successCallback, errorCallback);\n    },\n    /**\n     * JSON GET request\n     * @param url\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    getJSON: function getJSON(url, data, successCallback, errorCallback) {\n        __sendJSON(url, 'GET', data, successCallback, errorCallback);\n    },\n\n    /**\n     * normal POST request\n     * @param url\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    post: function post(url, data, successCallback, errorCallback) {\n        __send(url, 'POST', data, successCallback, errorCallback);\n    },\n    /**\n     * JSON POST request\n     * @param url\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    postJSON: function postJSON(url, data, successCallback, errorCallback) {\n        __sendJSON(url, 'POST', data, successCallback, errorCallback);\n    },\n    /**\n     * normal PUT request\n     * @param url\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    put: function put(url, data, successCallback, errorCallback) {\n        __send(url, 'PUT', data, successCallback, errorCallback);\n    },\n    /**\n     * JSON PUT request\n     * @param url\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    putJSON: function putJSON(url, data, successCallback, errorCallback) {\n        __sendJSON(url, 'PUT', data, successCallback, errorCallback);\n    },\n\n    /**\n     * JSON PUT request\n     * @param url\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    deleteJSON: function deleteJSON(url, data, successCallback, errorCallback) {\n        __sendJSON(url, 'DELETE', data, successCallback, errorCallback);\n    },\n\n    /**\n     * Same as others, just allow specify method.\n     * @param url\n     * @param method\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    send: __send,\n\n    /**\n     * Send JSON request and accepts only json\n     * @param url\n     * @param method\n     * @param data\n     * @param successCallback\n     * @param errorCallback\n     */\n    sendJSON: __sendJSON,\n\n    /**\n     * Send file fnc\n     * @param url\n     * @param method\n     * @param file\n     * @param fieldName\n     * @param successCallback\n     * @param errorCallback\n     * @param progressCallback\n     * @private\n     */\n    sendFile: __sendFile,\n\n    /**\n     * settings for gateway\n     */\n    settings: config\n};\n\n/** PRIVATE METHODS **/\n/**\n * private abstract send request method\n * @param url {string}\n * @param method {string}\n * @param [data] {object}\n * @param successCallback {function}\n * @param errorCallback {function}\n * @param [isManual] {boolean}\n * @returns {Xhr}\n * @private\n */\nfunction __send(url, method, data, successCallback, errorCallback, isManual) {\n    method = method.toUpperCase();\n    var r = (0, _superagent2.default)(method, url.trim()).set('X-Requested-With', 'XMLHttpRequest').timeout(Gateway.settings.timeout);\n\n    if (data) {\n        if (method === 'GET' && !(window.FormData && data instanceof window.FormData)) {\n            r.query(data);\n        } else {\n            r.send(data);\n        }\n    }\n\n    r.finish = function () {\n        return r.end(__responseHandler(successCallback, errorCallback));\n    };\n    if (isManual) {\n        return r;\n    }\n    r.finish();\n}\n\n/**\n * Private abstract send JSON request method\n * @param url {string}\n * @param method {string}\n * @param [data] {object}\n * @param successCallback {function}\n * @param errorCallback {function}\n * @param [isManual] {boolean}\n * @returns {Xhr}\n * @private\n */\nfunction __sendJSON(url, method, data, successCallback, errorCallback, isManual) {\n    method = method.toUpperCase();\n    var r = (0, _superagent2.default)(method, url.trim()).set({\n        'Content-type': 'application/json',\n        'Accept': 'application/json',\n        'X-Requested-With': 'XMLHttpRequest'\n    }).timeout(Gateway.settings.timeout);\n\n    if (data) {\n        if (method === 'GET') {\n            r.query(data);\n        } else {\n            r.send(data);\n        }\n    }\n\n    r.finish = function () {\n        return r.end(__responseHandler(successCallback, errorCallback));\n    };\n    if (isManual) {\n        return r;\n    }\n    r.finish();\n}\n\n/**\n * Send file fnc\n * @param url\n * @param method\n * @param file\n * @param fieldName\n * @param successCallback\n * @param errorCallback\n * @param progressCallback\n * @private\n */\nfunction __sendFile(url, method, file, fieldName, successCallback, errorCallback, progressCallback) {\n    method = method || 'POST';\n    fieldName = fieldName || 'files';\n    successCallback = successCallback || _lodash2.default.noop;\n    errorCallback = errorCallback || _lodash2.default.noop;\n\n    var r = (0, _superagent2.default)(method.toUpperCase(), url.trim()).set('X-Requested-With', 'XMLHttpRequest').timeout(config.fileTimeout);\n\n    if (_lodash2.default.isArrayLike(file)) {\n        _lodash2.default.each(file, function (f) {\n            r.attach(fieldName, f);\n        });\n    } else {\n        r.attach(fieldName, file);\n    }\n    if (progressCallback) {\n        r.on('progress', progressCallback);\n    }\n    r.end(__responseHandler(successCallback, errorCallback));\n}\n\nfunction __responseHandler(successCallback, errorCallback) {\n    return function __abstractHandler(err, response) {\n        if (response && response.status === 302) {\n            var redirectTo = response.body.location;\n            // Do callback and then redirect\n            if (successCallback(response) === false) {\n                return false;\n            }\n            // Redirect\n            if (process.env.NODE_ENV !== 'production' && !redirectTo) {\n                throw new Error('Missing \"location\" attribute!');\n            }\n            window.location.assign(redirectTo);\n            return;\n        }\n        if (err) {\n            return errorCallback(err);\n        }\n        successCallback(response);\n    };\n}\n\n/**\n * Set global configuration object\n * @param conf\n * @returns {{timeout: number}}\n */\nfunction configure(conf) {\n    return _lodash2.default.extend(config, conf);\n}\n\n/** EXPORTS **/\nexports.default = Gateway;\nexports.configure = configure;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(31)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L0dhdGV3YXkuanM/YTY1OSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY29uZmlndXJlID0gdW5kZWZpbmVkO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG52YXIgX3N1cGVyYWdlbnQgPSByZXF1aXJlKCdzdXBlcmFnZW50Jyk7XG5cbnZhciBfc3VwZXJhZ2VudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdXBlcmFnZW50KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLy8gR2xvYmFsIGNvbmZpZ3VyYXRpb25cbnZhciBjb25maWcgPSB7XG4gICAgdGltZW91dDogMTAwMDAsXG4gICAgZmlsZVRpbWVvdXQ6IDEwMDAwXG59O1xuXG52YXIgR2F0ZXdheSA9IHtcbiAgICAvKipcbiAgICAgKiAgbm9ybWFsIEdFVCByZXF1ZXN0IHRvIGRlZmluZWQgVVJMXG4gICAgICogQHBhcmFtIHVybFxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHBhcmFtIHN1Y2Nlc3NDYWxsYmFja1xuICAgICAqIEBwYXJhbSBlcnJvckNhbGxiYWNrXG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQodXJsLCBkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgX19zZW5kKHVybCwgJ0dFVCcsIGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBKU09OIEdFVCByZXF1ZXN0XG4gICAgICogQHBhcmFtIHVybFxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHBhcmFtIHN1Y2Nlc3NDYWxsYmFja1xuICAgICAqIEBwYXJhbSBlcnJvckNhbGxiYWNrXG4gICAgICovXG4gICAgZ2V0SlNPTjogZnVuY3Rpb24gZ2V0SlNPTih1cmwsIGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgICAgICBfX3NlbmRKU09OKHVybCwgJ0dFVCcsIGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIG5vcm1hbCBQT1NUIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0gc3VjY2Vzc0NhbGxiYWNrXG4gICAgICogQHBhcmFtIGVycm9yQ2FsbGJhY2tcbiAgICAgKi9cbiAgICBwb3N0OiBmdW5jdGlvbiBwb3N0KHVybCwgZGF0YSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIF9fc2VuZCh1cmwsICdQT1NUJywgZGF0YSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEpTT04gUE9TVCByZXF1ZXN0XG4gICAgICogQHBhcmFtIHVybFxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHBhcmFtIHN1Y2Nlc3NDYWxsYmFja1xuICAgICAqIEBwYXJhbSBlcnJvckNhbGxiYWNrXG4gICAgICovXG4gICAgcG9zdEpTT046IGZ1bmN0aW9uIHBvc3RKU09OKHVybCwgZGF0YSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIF9fc2VuZEpTT04odXJsLCAnUE9TVCcsIGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBub3JtYWwgUFVUIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0gc3VjY2Vzc0NhbGxiYWNrXG4gICAgICogQHBhcmFtIGVycm9yQ2FsbGJhY2tcbiAgICAgKi9cbiAgICBwdXQ6IGZ1bmN0aW9uIHB1dCh1cmwsIGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgICAgICBfX3NlbmQodXJsLCAnUFVUJywgZGF0YSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEpTT04gUFVUIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0gc3VjY2Vzc0NhbGxiYWNrXG4gICAgICogQHBhcmFtIGVycm9yQ2FsbGJhY2tcbiAgICAgKi9cbiAgICBwdXRKU09OOiBmdW5jdGlvbiBwdXRKU09OKHVybCwgZGF0YSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIF9fc2VuZEpTT04odXJsLCAnUFVUJywgZGF0YSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSlNPTiBQVVQgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEBwYXJhbSBzdWNjZXNzQ2FsbGJhY2tcbiAgICAgKiBAcGFyYW0gZXJyb3JDYWxsYmFja1xuICAgICAqL1xuICAgIGRlbGV0ZUpTT046IGZ1bmN0aW9uIGRlbGV0ZUpTT04odXJsLCBkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgX19zZW5kSlNPTih1cmwsICdERUxFVEUnLCBkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTYW1lIGFzIG90aGVycywganVzdCBhbGxvdyBzcGVjaWZ5IG1ldGhvZC5cbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICogQHBhcmFtIG1ldGhvZFxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHBhcmFtIHN1Y2Nlc3NDYWxsYmFja1xuICAgICAqIEBwYXJhbSBlcnJvckNhbGxiYWNrXG4gICAgICovXG4gICAgc2VuZDogX19zZW5kLFxuXG4gICAgLyoqXG4gICAgICogU2VuZCBKU09OIHJlcXVlc3QgYW5kIGFjY2VwdHMgb25seSBqc29uXG4gICAgICogQHBhcmFtIHVybFxuICAgICAqIEBwYXJhbSBtZXRob2RcbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqIEBwYXJhbSBzdWNjZXNzQ2FsbGJhY2tcbiAgICAgKiBAcGFyYW0gZXJyb3JDYWxsYmFja1xuICAgICAqL1xuICAgIHNlbmRKU09OOiBfX3NlbmRKU09OLFxuXG4gICAgLyoqXG4gICAgICogU2VuZCBmaWxlIGZuY1xuICAgICAqIEBwYXJhbSB1cmxcbiAgICAgKiBAcGFyYW0gbWV0aG9kXG4gICAgICogQHBhcmFtIGZpbGVcbiAgICAgKiBAcGFyYW0gZmllbGROYW1lXG4gICAgICogQHBhcmFtIHN1Y2Nlc3NDYWxsYmFja1xuICAgICAqIEBwYXJhbSBlcnJvckNhbGxiYWNrXG4gICAgICogQHBhcmFtIHByb2dyZXNzQ2FsbGJhY2tcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHNlbmRGaWxlOiBfX3NlbmRGaWxlLFxuXG4gICAgLyoqXG4gICAgICogc2V0dGluZ3MgZm9yIGdhdGV3YXlcbiAgICAgKi9cbiAgICBzZXR0aW5nczogY29uZmlnXG59O1xuXG4vKiogUFJJVkFURSBNRVRIT0RTICoqL1xuLyoqXG4gKiBwcml2YXRlIGFic3RyYWN0IHNlbmQgcmVxdWVzdCBtZXRob2RcbiAqIEBwYXJhbSB1cmwge3N0cmluZ31cbiAqIEBwYXJhbSBtZXRob2Qge3N0cmluZ31cbiAqIEBwYXJhbSBbZGF0YV0ge29iamVjdH1cbiAqIEBwYXJhbSBzdWNjZXNzQ2FsbGJhY2sge2Z1bmN0aW9ufVxuICogQHBhcmFtIGVycm9yQ2FsbGJhY2sge2Z1bmN0aW9ufVxuICogQHBhcmFtIFtpc01hbnVhbF0ge2Jvb2xlYW59XG4gKiBAcmV0dXJucyB7WGhyfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19zZW5kKHVybCwgbWV0aG9kLCBkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGlzTWFudWFsKSB7XG4gICAgbWV0aG9kID0gbWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gICAgdmFyIHIgPSAoMCwgX3N1cGVyYWdlbnQyLmRlZmF1bHQpKG1ldGhvZCwgdXJsLnRyaW0oKSkuc2V0KCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0JykudGltZW91dChHYXRld2F5LnNldHRpbmdzLnRpbWVvdXQpO1xuXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gJ0dFVCcgJiYgISh3aW5kb3cuRm9ybURhdGEgJiYgZGF0YSBpbnN0YW5jZW9mIHdpbmRvdy5Gb3JtRGF0YSkpIHtcbiAgICAgICAgICAgIHIucXVlcnkoZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByLnNlbmQoZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHIuZW5kKF9fcmVzcG9uc2VIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykpO1xuICAgIH07XG4gICAgaWYgKGlzTWFudWFsKSB7XG4gICAgICAgIHJldHVybiByO1xuICAgIH1cbiAgICByLmZpbmlzaCgpO1xufVxuXG4vKipcbiAqIFByaXZhdGUgYWJzdHJhY3Qgc2VuZCBKU09OIHJlcXVlc3QgbWV0aG9kXG4gKiBAcGFyYW0gdXJsIHtzdHJpbmd9XG4gKiBAcGFyYW0gbWV0aG9kIHtzdHJpbmd9XG4gKiBAcGFyYW0gW2RhdGFdIHtvYmplY3R9XG4gKiBAcGFyYW0gc3VjY2Vzc0NhbGxiYWNrIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSBlcnJvckNhbGxiYWNrIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSBbaXNNYW51YWxdIHtib29sZWFufVxuICogQHJldHVybnMge1hocn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9fc2VuZEpTT04odXJsLCBtZXRob2QsIGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgaXNNYW51YWwpIHtcbiAgICBtZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKTtcbiAgICB2YXIgciA9ICgwLCBfc3VwZXJhZ2VudDIuZGVmYXVsdCkobWV0aG9kLCB1cmwudHJpbSgpKS5zZXQoe1xuICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCdcbiAgICB9KS50aW1lb3V0KEdhdGV3YXkuc2V0dGluZ3MudGltZW91dCk7XG5cbiAgICBpZiAoZGF0YSkge1xuICAgICAgICBpZiAobWV0aG9kID09PSAnR0VUJykge1xuICAgICAgICAgICAgci5xdWVyeShkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHIuc2VuZChkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHIuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gci5lbmQoX19yZXNwb25zZUhhbmRsZXIoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSk7XG4gICAgfTtcbiAgICBpZiAoaXNNYW51YWwpIHtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICAgIHIuZmluaXNoKCk7XG59XG5cbi8qKlxuICogU2VuZCBmaWxlIGZuY1xuICogQHBhcmFtIHVybFxuICogQHBhcmFtIG1ldGhvZFxuICogQHBhcmFtIGZpbGVcbiAqIEBwYXJhbSBmaWVsZE5hbWVcbiAqIEBwYXJhbSBzdWNjZXNzQ2FsbGJhY2tcbiAqIEBwYXJhbSBlcnJvckNhbGxiYWNrXG4gKiBAcGFyYW0gcHJvZ3Jlc3NDYWxsYmFja1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19zZW5kRmlsZSh1cmwsIG1ldGhvZCwgZmlsZSwgZmllbGROYW1lLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICBtZXRob2QgPSBtZXRob2QgfHwgJ1BPU1QnO1xuICAgIGZpZWxkTmFtZSA9IGZpZWxkTmFtZSB8fCAnZmlsZXMnO1xuICAgIHN1Y2Nlc3NDYWxsYmFjayA9IHN1Y2Nlc3NDYWxsYmFjayB8fCBfbG9kYXNoMi5kZWZhdWx0Lm5vb3A7XG4gICAgZXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbGJhY2sgfHwgX2xvZGFzaDIuZGVmYXVsdC5ub29wO1xuXG4gICAgdmFyIHIgPSAoMCwgX3N1cGVyYWdlbnQyLmRlZmF1bHQpKG1ldGhvZC50b1VwcGVyQ2FzZSgpLCB1cmwudHJpbSgpKS5zZXQoJ1gtUmVxdWVzdGVkLVdpdGgnLCAnWE1MSHR0cFJlcXVlc3QnKS50aW1lb3V0KGNvbmZpZy5maWxlVGltZW91dCk7XG5cbiAgICBpZiAoX2xvZGFzaDIuZGVmYXVsdC5pc0FycmF5TGlrZShmaWxlKSkge1xuICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goZmlsZSwgZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgIHIuYXR0YWNoKGZpZWxkTmFtZSwgZik7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHIuYXR0YWNoKGZpZWxkTmFtZSwgZmlsZSk7XG4gICAgfVxuICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICAgIHIub24oJ3Byb2dyZXNzJywgcHJvZ3Jlc3NDYWxsYmFjayk7XG4gICAgfVxuICAgIHIuZW5kKF9fcmVzcG9uc2VIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykpO1xufVxuXG5mdW5jdGlvbiBfX3Jlc3BvbnNlSGFuZGxlcihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gX19hYnN0cmFjdEhhbmRsZXIoZXJyLCByZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09PSAzMDIpIHtcbiAgICAgICAgICAgIHZhciByZWRpcmVjdFRvID0gcmVzcG9uc2UuYm9keS5sb2NhdGlvbjtcbiAgICAgICAgICAgIC8vIERvIGNhbGxiYWNrIGFuZCB0aGVuIHJlZGlyZWN0XG4gICAgICAgICAgICBpZiAoc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZWRpcmVjdFxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXJlZGlyZWN0VG8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgXCJsb2NhdGlvblwiIGF0dHJpYnV0ZSEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24ocmVkaXJlY3RUbyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yQ2FsbGJhY2soZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpO1xuICAgIH07XG59XG5cbi8qKlxuICogU2V0IGdsb2JhbCBjb25maWd1cmF0aW9uIG9iamVjdFxuICogQHBhcmFtIGNvbmZcbiAqIEByZXR1cm5zIHt7dGltZW91dDogbnVtYmVyfX1cbiAqL1xuZnVuY3Rpb24gY29uZmlndXJlKGNvbmYpIHtcbiAgICByZXR1cm4gX2xvZGFzaDIuZGVmYXVsdC5leHRlbmQoY29uZmlnLCBjb25mKTtcbn1cblxuLyoqIEVYUE9SVFMgKiovXG5leHBvcnRzLmRlZmF1bHQgPSBHYXRld2F5O1xuZXhwb3J0cy5jb25maWd1cmUgPSBjb25maWd1cmU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RyaW5pdHkvR2F0ZXdheS5qc1xuLy8gbW9kdWxlIGlkID0gNDY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 470:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by Jakub Fajkus on 10.12.15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _Controller2 = __webpack_require__(454);\n\nvar _Controller3 = _interopRequireDefault(_Controller2);\n\nvar _VeniceForm = __webpack_require__(455);\n\nvar _VeniceForm2 = _interopRequireDefault(_VeniceForm);\n\nvar _GlobalLib = __webpack_require__(471);\n\nvar _TrinityTab = __webpack_require__(468);\n\nvar _TrinityTab2 = _interopRequireDefault(_TrinityTab);\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(210);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _DateAndTime = __webpack_require__(472);\n\nvar _DateAndTime2 = _interopRequireDefault(_DateAndTime);\n\nvar _FroalaLib = __webpack_require__(474);\n\nvar _VeniceGridBuilder = __webpack_require__(475);\n\nvar _VeniceGridBuilder2 = _interopRequireDefault(_VeniceGridBuilder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BlogArticleController = function (_Controller) {\n    _inherits(BlogArticleController, _Controller);\n\n    function BlogArticleController() {\n        _classCallCheck(this, BlogArticleController);\n\n        return _possibleConstructorReturn(this, (BlogArticleController.__proto__ || Object.getPrototypeOf(BlogArticleController)).apply(this, arguments));\n    }\n\n    _createClass(BlogArticleController, [{\n        key: 'indexAction',\n        value: function indexAction($scope) {\n            $scope.productGrid = _VeniceGridBuilder2.default.build(_jquery2.default.id('blog-article-grid'), this.request.query);\n        }\n\n        /**\n         * Tabs action\n         * @param $scope\n         */\n\n    }, {\n        key: 'tabsAction',\n        value: function tabsAction($scope) {\n            //Tell trinity there is tab to be loaded\n            $scope.trinityTab = new _TrinityTab2.default();\n\n            var app = this.getApp();\n            //On tabs load\n            $scope.trinityTab.addListener('tab-load', function (e) {\n\n                var form = (0, _jquery2.default)('form', e.element)[0];\n                if (form) {\n                    $scope.veniceForms = $scope.veniceForms || {};\n                    $scope.veniceForms[e.id] = new _VeniceForm2.default(form);\n                }\n                if (e.id === 'tab2') {\n                    // let article = $('#blog_article_content')[0];\n                    // startFroala(article);\n                    $scope[e.id] = app.parseScope();\n                    (0, _FroalaLib.startFroala)($scope[e.id].froalaInput);\n\n                    var helper = _jquery2.default.id('blog-article-date-format'),\n                        dateEl = _jquery2.default.id('blog_article_dateToPublish'),\n                        div = document.createElement('div');\n\n                    dateEl.parentNode.appendChild(div);\n\n                    var limits = JSON.parse(dateEl.getAttribute('data-limit')),\n                        min = BlogArticleController._parseDate(limits.min),\n                        max = BlogArticleController._parseDate(limits.max);\n\n                    var fromDate = _react2.default.createElement(_DateAndTime2.default, {\n                        minDate: min,\n                        maxDate: max,\n                        type: 'd',\n                        format: helper.value,\n                        value: new Date(helper.getAttribute('data-dateVal') * 1000),\n                        oldElem: dateEl\n                    });\n\n                    _reactDom2.default.render(fromDate, div);\n                    BlogArticleController._handleHandleGeneration();\n                }\n            });\n        }\n\n        /**\n         * New blog article action\n         * @param $scope\n         */\n\n    }, {\n        key: 'newAction',\n        value: function newAction($scope) {\n            $scope.form = new _VeniceForm2.default((0, _jquery2.default)('form[name=\"blog_article\"]')[0]);\n\n            var format = _jquery2.default.id('blog-article-date-format').value,\n                dateEl = _jquery2.default.id('blog_article_dateToPublish');\n\n            var div = document.createElement('div');\n            dateEl.parentNode.appendChild(div);\n\n            var limits = JSON.parse(dateEl.getAttribute('data-limit')),\n                min = BlogArticleController._parseDate(limits.min),\n                max = BlogArticleController._parseDate(limits.max);\n\n            var fromDate = _react2.default.createElement(_DateAndTime2.default, {\n                minDate: min,\n                maxDate: max,\n                type: 'd',\n                format: format,\n                value: new Date(),\n                oldElem: dateEl,\n                required: true\n            });\n\n            dateEl.required = true;\n            _reactDom2.default.render(fromDate, div);\n\n            BlogArticleController._handleHandleGeneration();\n\n            (0, _FroalaLib.startFroala)($scope.froalaInput);\n            // let article = $('#blog_article_content')[0];\n            // startFroala(article);\n\n            // HIDE TRIAL VERSION BANNER\n            if (true) {\n                var $notLicenced = (0, _jquery2.default)('a[href=\"https://froala.com/wysiwyg-editor\"]');\n                if ($notLicenced[0]) {\n                    $notLicenced.parent().css('display', 'none');\n                }\n            }\n        }\n\n        /**\n         * Shortcut\n         * @returns {*}\n         * @private\n         */\n\n    }], [{\n        key: '_handleHandleGeneration',\n        value: function _handleHandleGeneration() {\n            return (0, _GlobalLib.handleHandleGeneration)((0, _jquery2.default)('#blog-article-form').attr('data-slugify'), _jquery2.default.id('blog_article_title'), _jquery2.default.id('blog_article_handle'));\n        }\n\n        /**\n         * Parse date object from venice\n         * @param date\n         * @returns {Date}\n         * @private\n         */\n\n    }, {\n        key: '_parseDate',\n        value: function _parseDate(date) {\n            return date === 'now' ? new Date() : new Date(date.year, date.month || 11, date.day || 31);\n        }\n    }]);\n\n    return BlogArticleController;\n}(_Controller3.default);\n\nexports.default = BlogArticleController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvQ29udHJvbGxlcnMvQmxvZ0FydGljbGVDb250cm9sbGVyLmpzPzZhZWUiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBKYWt1YiBGYWprdXMgb24gMTAuMTIuMTUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBDb250cm9sbGVyIGZyb20gJ3RyaW5pdHkvQ29udHJvbGxlcic7XG5pbXBvcnQgVmVuaWNlRm9ybSBmcm9tICcuLi9MaWJyYXJpZXMvVmVuaWNlRm9ybSc7XG5pbXBvcnQge2hhbmRsZUhhbmRsZUdlbmVyYXRpb259IGZyb20gJy4uL0xpYnJhcmllcy9HbG9iYWxMaWInO1xuaW1wb3J0IFRyaW5pdHlUYWIgZnJvbSAndHJpbml0eS9jb21wb25lbnRzL1RyaW5pdHlUYWInO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IE5lY2t0aWVEYXRlQW5kVGltZSBmcm9tICcuLi9MaWJyYXJpZXMvQ29tcG9uZW50cy9EYXRlQW5kVGltZS5qc3gnO1xuaW1wb3J0IHtzdGFydEZyb2FsYX0gZnJvbSAndHJpbml0eS91dGlscy9Gcm9hbGFMaWInO1xuaW1wb3J0IEdyaWRCdWlsZGVyIGZyb20gJy4uL0xpYnJhcmllcy9WZW5pY2VHcmlkQnVpbGRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsb2dBcnRpY2xlQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xuXG4gICAgaW5kZXhBY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5wcm9kdWN0R3JpZCA9IEdyaWRCdWlsZGVyLmJ1aWxkKCQuaWQoJ2Jsb2ctYXJ0aWNsZS1ncmlkJyksIHRoaXMucmVxdWVzdC5xdWVyeSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFicyBhY3Rpb25cbiAgICAgKiBAcGFyYW0gJHNjb3BlXG4gICAgICovXG4gICAgdGFic0FjdGlvbigkc2NvcGUpIHtcbiAgICAgICAgLy9UZWxsIHRyaW5pdHkgdGhlcmUgaXMgdGFiIHRvIGJlIGxvYWRlZFxuICAgICAgICAkc2NvcGUudHJpbml0eVRhYiA9IG5ldyBUcmluaXR5VGFiKCk7XG5cbiAgICAgICAgbGV0IGFwcCA9IHRoaXMuZ2V0QXBwKCk7XG4gICAgICAgIC8vT24gdGFicyBsb2FkXG4gICAgICAgICRzY29wZS50cmluaXR5VGFiLmFkZExpc3RlbmVyKCd0YWItbG9hZCcsIChlKT0+e1xuXG4gICAgICAgICAgICBsZXQgZm9ybSA9ICQoJ2Zvcm0nLCBlLmVsZW1lbnQpWzBdO1xuICAgICAgICAgICAgaWYoZm9ybSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZlbmljZUZvcm1zID0gJHNjb3BlLnZlbmljZUZvcm1zIHx8IHt9O1xuICAgICAgICAgICAgICAgICRzY29wZS52ZW5pY2VGb3Jtc1tlLmlkXSA9IG5ldyBWZW5pY2VGb3JtKGZvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZS5pZCA9PT0gJ3RhYjInKSB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IGFydGljbGUgPSAkKCcjYmxvZ19hcnRpY2xlX2NvbnRlbnQnKVswXTtcbiAgICAgICAgICAgICAgICAvLyBzdGFydEZyb2FsYShhcnRpY2xlKTtcbiAgICAgICAgICAgICAgICAkc2NvcGVbZS5pZF0gPSBhcHAucGFyc2VTY29wZSgpO1xuICAgICAgICAgICAgICAgIHN0YXJ0RnJvYWxhKCRzY29wZVtlLmlkXS5mcm9hbGFJbnB1dCk7XG5cbiAgICAgICAgICAgICAgICBsZXQgaGVscGVyID0gJC5pZCgnYmxvZy1hcnRpY2xlLWRhdGUtZm9ybWF0JyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGVFbCA9ICQuaWQoJ2Jsb2dfYXJ0aWNsZV9kYXRlVG9QdWJsaXNoJyksXG4gICAgICAgICAgICAgICAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICAgICAgICAgIDtcblxuICAgICAgICAgICAgICAgIGRhdGVFbC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICAgICAgICAgICAgICBsZXQgbGltaXRzID0gSlNPTi5wYXJzZShkYXRlRWwuZ2V0QXR0cmlidXRlKCdkYXRhLWxpbWl0JykpLFxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBCbG9nQXJ0aWNsZUNvbnRyb2xsZXIuX3BhcnNlRGF0ZShsaW1pdHMubWluKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gQmxvZ0FydGljbGVDb250cm9sbGVyLl9wYXJzZURhdGUobGltaXRzLm1heClcbiAgICAgICAgICAgICAgICAgICAgO1xuXG4gICAgICAgICAgICAgICAgbGV0IGZyb21EYXRlID0gUmVhY3QuY3JlYXRlRWxlbWVudChOZWNrdGllRGF0ZUFuZFRpbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkRhdGU6IG1pbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heERhdGU6IG1heCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogaGVscGVyLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKGhlbHBlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGF0ZVZhbCcpICogMTAwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRFbGVtOiBkYXRlRWxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBSZWFjdERPTS5yZW5kZXIoZnJvbURhdGUsIGRpdik7XG4gICAgICAgICAgICAgICAgQmxvZ0FydGljbGVDb250cm9sbGVyLl9oYW5kbGVIYW5kbGVHZW5lcmF0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5ldyBibG9nIGFydGljbGUgYWN0aW9uXG4gICAgICogQHBhcmFtICRzY29wZVxuICAgICAqL1xuICAgIG5ld0FjdGlvbigkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLmZvcm0gPSBuZXcgVmVuaWNlRm9ybSgkKCdmb3JtW25hbWU9XCJibG9nX2FydGljbGVcIl0nKVswXSk7XG5cbiAgICAgICAgbGV0IGZvcm1hdCA9ICQuaWQoJ2Jsb2ctYXJ0aWNsZS1kYXRlLWZvcm1hdCcpLnZhbHVlLFxuICAgICAgICAgICAgZGF0ZUVsID0gJC5pZCgnYmxvZ19hcnRpY2xlX2RhdGVUb1B1Ymxpc2gnKTtcblxuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRhdGVFbC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICAgICAgbGV0IGxpbWl0cyA9IEpTT04ucGFyc2UoZGF0ZUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1saW1pdCcpKSxcbiAgICAgICAgICAgIG1pbiA9IEJsb2dBcnRpY2xlQ29udHJvbGxlci5fcGFyc2VEYXRlKGxpbWl0cy5taW4pLFxuICAgICAgICAgICAgbWF4ID0gQmxvZ0FydGljbGVDb250cm9sbGVyLl9wYXJzZURhdGUobGltaXRzLm1heClcbiAgICAgICAgICAgIDtcblxuICAgICAgICBsZXQgZnJvbURhdGUgPSBSZWFjdC5jcmVhdGVFbGVtZW50KE5lY2t0aWVEYXRlQW5kVGltZSwge1xuICAgICAgICAgICAgbWluRGF0ZTogbWluLFxuICAgICAgICAgICAgbWF4RGF0ZTogbWF4LFxuICAgICAgICAgICAgdHlwZTogJ2QnLFxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIG9sZEVsZW06IGRhdGVFbCxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRhdGVFbC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgIFJlYWN0RE9NLnJlbmRlcihmcm9tRGF0ZSwgZGl2KTtcblxuICAgICAgICBCbG9nQXJ0aWNsZUNvbnRyb2xsZXIuX2hhbmRsZUhhbmRsZUdlbmVyYXRpb24oKTtcblxuICAgICAgICBzdGFydEZyb2FsYSgkc2NvcGUuZnJvYWxhSW5wdXQpO1xuICAgICAgICAvLyBsZXQgYXJ0aWNsZSA9ICQoJyNibG9nX2FydGljbGVfY29udGVudCcpWzBdO1xuICAgICAgICAvLyBzdGFydEZyb2FsYShhcnRpY2xlKTtcblxuICAgICAgICAvLyBISURFIFRSSUFMIFZFUlNJT04gQkFOTkVSXG4gICAgICAgIGlmKERFVkVMT1BNRU5UKXtcbiAgICAgICAgICAgIGxldCAkbm90TGljZW5jZWQgPSAkKCdhW2hyZWY9XCJodHRwczovL2Zyb2FsYS5jb20vd3lzaXd5Zy1lZGl0b3JcIl0nKTtcbiAgICAgICAgICAgIGlmKCRub3RMaWNlbmNlZFswXSl7XG4gICAgICAgICAgICAgICAgJG5vdExpY2VuY2VkLnBhcmVudCgpLmNzcygnZGlzcGxheScsJ25vbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3J0Y3V0XG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgX2hhbmRsZUhhbmRsZUdlbmVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVIYW5kbGVHZW5lcmF0aW9uKFxuICAgICAgICAgICAgJCgnI2Jsb2ctYXJ0aWNsZS1mb3JtJykuYXR0cignZGF0YS1zbHVnaWZ5JyksXG4gICAgICAgICAgICAkLmlkKCdibG9nX2FydGljbGVfdGl0bGUnKSxcbiAgICAgICAgICAgICQuaWQoJ2Jsb2dfYXJ0aWNsZV9oYW5kbGUnKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlIGRhdGUgb2JqZWN0IGZyb20gdmVuaWNlXG4gICAgICogQHBhcmFtIGRhdGVcbiAgICAgKiBAcmV0dXJucyB7RGF0ZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcGFyc2VEYXRlKGRhdGUpe1xuICAgICAgICByZXR1cm4gZGF0ZSA9PT0gJ25vdycgP1xuICAgICAgICAgICAgbmV3IERhdGUoKSA6IG5ldyBEYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCB8fCAxMSwgZGF0ZS5kYXkgfHwgMzEpO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9Db250cm9sbGVycy9CbG9nQXJ0aWNsZUNvbnRyb2xsZXIuanMiLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0FBR0E7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7QUFFQTtBQ0NBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFFQTs7Ozs7O0FBNUhBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 471:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.slugify = slugify;\nexports.handleHandleGeneration = handleHandleGeneration;\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _Gateway = __webpack_require__(469);\n\nvar _Gateway2 = _interopRequireDefault(_Gateway);\n\nvar _Events = __webpack_require__(462);\n\nvar _Events2 = _interopRequireDefault(_Events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar counter = 0; /**\n                  * Created by rockuo on 23.6.16.\n                  */\n\nvar last = 0;\n\n/**\n * Validates name and creates \"handle\" from it\n * @param route {string}\n * @param sourceField  {HTMLInputElement}\n * @param outputField {HTMLInputElement}\n */\nfunction slugify(route, sourceField, outputField) {\n    var myCounter = ++counter;\n    _Gateway2.default.postJSON(route, { string: sourceField.value }, function (response) {\n        if (myCounter >= last) {\n            outputField.value = response.body.handle;\n            last = myCounter;\n        }\n    }, function (err) {\n        if (DEVELOPLEMT) {\n            console.error(err);\n        }\n    });\n}\n\n/**\n * TODO: @RichardBures comment\n * @param route\n * @param titleField\n * @param handleField\n * @returns {*}\n */\nfunction handleHandleGeneration(route, titleField, handleField) {\n    if (titleField && handleField) {\n        // TODO: @RichardBures Timer listener\n        return _Events2.default.listen(titleField, 'input', function () {\n            slugify(route, titleField, handleField);\n        });\n    } else {\n        return function () {};\n    }\n}\n\n// /**\n//  * Initialize Floara editor\n//  * Also adds removing error fn on trinityForm error\n//  * TODO: @RichardBures use trinityForm error methods - @Fisa has to add method for it first\n//  * @param element {object} - jquery object\n//  * @param settings {object}\n//  */\n// export function initializeFroala(element, settings) {\n//     element.froalaEditor(settings);\n//     element.on('froalaEditor.input', function () {\n//         console.log('input');\n//         let button = $('.trinity-form-error');\n//         if(button[0]) {\n//             button[0].disabled = false;\n//             button.first().removeClass('trinity-form-error');\n//         }\n//     });\n// }//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dsb2JhbExpYi5qcz8wZmY1Iiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgcm9ja3VvIG9uIDIzLjYuMTYuXG4gKi9cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBHYXRld2F5IGZyb20gJ3RyaW5pdHkvR2F0ZXdheSc7XG5pbXBvcnQgRXZlbnRzIGZyb20gJ3RyaW5pdHkvdXRpbHMvRXZlbnRzJztcblxuXG5sZXQgY291bnRlciA9IDA7XG5sZXQgbGFzdCA9IDA7XG5cbi8qKlxuICogVmFsaWRhdGVzIG5hbWUgYW5kIGNyZWF0ZXMgXCJoYW5kbGVcIiBmcm9tIGl0XG4gKiBAcGFyYW0gcm91dGUge3N0cmluZ31cbiAqIEBwYXJhbSBzb3VyY2VGaWVsZCAge0hUTUxJbnB1dEVsZW1lbnR9XG4gKiBAcGFyYW0gb3V0cHV0RmllbGQge0hUTUxJbnB1dEVsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbHVnaWZ5KHJvdXRlLCBzb3VyY2VGaWVsZCwgb3V0cHV0RmllbGQpIHtcbiAgICBsZXQgbXlDb3VudGVyID0gKytjb3VudGVyO1xuICAgIEdhdGV3YXkucG9zdEpTT04ocm91dGUsIHtzdHJpbmc6IHNvdXJjZUZpZWxkLnZhbHVlfSxcbiAgICAgICAgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZihteUNvdW50ZXIgPj0gbGFzdCkge1xuICAgICAgICAgICAgICAgIG91dHB1dEZpZWxkLnZhbHVlID0gcmVzcG9uc2UuYm9keS5oYW5kbGU7XG4gICAgICAgICAgICAgICAgbGFzdCA9IG15Q291bnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgaWYoREVWRUxPUExFTVQpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICk7XG59XG5cbi8qKlxuICogVE9ETzogQFJpY2hhcmRCdXJlcyBjb21tZW50XG4gKiBAcGFyYW0gcm91dGVcbiAqIEBwYXJhbSB0aXRsZUZpZWxkXG4gKiBAcGFyYW0gaGFuZGxlRmllbGRcbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlSGFuZGxlR2VuZXJhdGlvbihyb3V0ZSwgdGl0bGVGaWVsZCwgaGFuZGxlRmllbGQpIHtcbiAgICBpZiAodGl0bGVGaWVsZCAmJiBoYW5kbGVGaWVsZCkge1xuICAgICAgICAvLyBUT0RPOiBAUmljaGFyZEJ1cmVzIFRpbWVyIGxpc3RlbmVyXG4gICAgICAgIHJldHVybiBFdmVudHMubGlzdGVuKHRpdGxlRmllbGQsICdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgIHNsdWdpZnkocm91dGUsIHRpdGxlRmllbGQsIGhhbmRsZUZpZWxkKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICgpPT57fTtcbiAgICB9XG59XG5cbi8vIC8qKlxuLy8gICogSW5pdGlhbGl6ZSBGbG9hcmEgZWRpdG9yXG4vLyAgKiBBbHNvIGFkZHMgcmVtb3ZpbmcgZXJyb3IgZm4gb24gdHJpbml0eUZvcm0gZXJyb3Jcbi8vICAqIFRPRE86IEBSaWNoYXJkQnVyZXMgdXNlIHRyaW5pdHlGb3JtIGVycm9yIG1ldGhvZHMgLSBARmlzYSBoYXMgdG8gYWRkIG1ldGhvZCBmb3IgaXQgZmlyc3Rcbi8vICAqIEBwYXJhbSBlbGVtZW50IHtvYmplY3R9IC0ganF1ZXJ5IG9iamVjdFxuLy8gICogQHBhcmFtIHNldHRpbmdzIHtvYmplY3R9XG4vLyAgKi9cbi8vIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRnJvYWxhKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4vLyAgICAgZWxlbWVudC5mcm9hbGFFZGl0b3Ioc2V0dGluZ3MpO1xuLy8gICAgIGVsZW1lbnQub24oJ2Zyb2FsYUVkaXRvci5pbnB1dCcsIGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ2lucHV0Jyk7XG4vLyAgICAgICAgIGxldCBidXR0b24gPSAkKCcudHJpbml0eS1mb3JtLWVycm9yJyk7XG4vLyAgICAgICAgIGlmKGJ1dHRvblswXSkge1xuLy8gICAgICAgICAgICAgYnV0dG9uWzBdLmRpc2FibGVkID0gZmFsc2U7XG4vLyAgICAgICAgICAgICBidXR0b24uZmlyc3QoKS5yZW1vdmVDbGFzcygndHJpbml0eS1mb3JtLWVycm9yJyk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9KTtcbi8vIH1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9MaWJyYXJpZXMvR2xvYmFsTGliLmpzIiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFrQkE7QUF1QkE7QUFDQTtBQ3RDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQUVBOzs7O0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 472:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by Bures on 23/4/16.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _moment = __webpack_require__(36);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _moment3 = __webpack_require__(473);\n\nvar _moment4 = _interopRequireDefault(_moment3);\n\nvar _DateTimePicker = __webpack_require__(438);\n\nvar _DateTimePicker2 = _interopRequireDefault(_DateTimePicker);\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar dateFormMap = {\n    'd': 'YYYY-MM-DD',\n    't': 'hh-mm-ss',\n    'dt': 'YYYY-MM-DD hh:mm:ss'\n};\n\nvar NecktieDateAndTime = function (_React$Component) {\n    _inherits(NecktieDateAndTime, _React$Component);\n\n    function NecktieDateAndTime(props) {\n        _classCallCheck(this, NecktieDateAndTime);\n\n        var _this = _possibleConstructorReturn(this, (NecktieDateAndTime.__proto__ || Object.getPrototypeOf(NecktieDateAndTime)).call(this, props));\n\n        (0, _moment4.default)(_moment2.default);\n        _this.state = { value: props.value }; // Initial state\n        if (props.func) {\n            props.func(_this);\n        }\n        props.oldElem.style.display = 'none';\n        if (props.required) {\n            props.oldElem.value = (0, _moment2.default)(props.value).format(dateFormMap[props.type]);\n        }\n        return _this;\n    }\n\n    _createClass(NecktieDateAndTime, [{\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            return _react2.default.createElement(_DateTimePicker2.default, {\n                value: this.state.value || null,\n                format: getLongFormat(this.props.format),\n                className: this.props.className,\n                id: this.props.id,\n                name: this.props.name,\n                min: this.props.minDate || new Date(1900, 0, 1) // new Date(1900, 0, 1) is react-widgets default\n                , max: this.props.maxDate || new Date(2099, 11, 31) // new Date(2099, 11, 31) is react-widgets default\n                , required: this.props.required,\n                time: this.props.type.indexOf('t') > -1,\n                calendar: this.props.type.indexOf('d') > -1,\n                onChange: function onChange(value) {\n                    _this2.setState({ value: value });\n                    _this2.props.oldElem.value = (0, _moment2.default)(value).format(dateFormMap[_this2.props.type]);\n                }\n            });\n        }\n    }]);\n\n    return NecktieDateAndTime;\n}(_react2.default.Component);\n\nexports.default = NecktieDateAndTime;\n\nNecktieDateAndTime.defaultProps = {\n    type: 'dt',\n    format: 'Y-M-D H:m',\n    required: 'required',\n    value: null\n};\n\nvar changeTo = {\n    Y: 'YYYY',\n    y: 'YY',\n    i: 'mm',\n    h: 'hh',\n    D: 'ddd',\n    d: 'DD',\n    M: 'MMM',\n    m: 'MM',\n    H: 'HH',\n    s: 'ss'\n};\n\n/**\n * Get moment format from user format\n * @param format {string}\n * @return {string}\n */\nfunction getLongFormat(format) {\n    var longFormat = '';\n    _lodash2.default.each(Array.from(format), function (char) {\n        longFormat += changeTo[char] ? char.replace(char, changeTo[char]) : char;\n    });\n    return longFormat;\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0NvbXBvbmVudHMvRGF0ZUFuZFRpbWUuanN4PzliNzkiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBCdXJlcyBvbiAyMy80LzE2LlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgbW9tZW50TG9jYWxpemVyIGZyb20gJ3JlYWN0LXdpZGdldHMvbGliL2xvY2FsaXplcnMvbW9tZW50JztcbmltcG9ydCBEYXRlVGltZVBpY2tlciBmcm9tICdyZWFjdC13aWRnZXRzL2xpYi9EYXRlVGltZVBpY2tlcic7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5jb25zdCBkYXRlRm9ybU1hcCA9IHtcbiAgICAnZCc6ICdZWVlZLU1NLUREJyxcbiAgICAndCc6ICdoaC1tbS1zcycsXG4gICAgJ2R0JzogJ1lZWVktTU0tREQgaGg6bW06c3MnXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOZWNrdGllRGF0ZUFuZFRpbWUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgbW9tZW50TG9jYWxpemVyKG1vbWVudCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7dmFsdWU6IHByb3BzLnZhbHVlfTsgLy8gSW5pdGlhbCBzdGF0ZVxuICAgICAgICBpZiAocHJvcHMuZnVuYykge1xuICAgICAgICAgICAgcHJvcHMuZnVuYyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wcy5vbGRFbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGlmKHByb3BzLnJlcXVpcmVkKXtcbiAgICAgICAgICAgIHByb3BzLm9sZEVsZW0udmFsdWUgPSBtb21lbnQocHJvcHMudmFsdWUpLmZvcm1hdChkYXRlRm9ybU1hcFtwcm9wcy50eXBlXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8RGF0ZVRpbWVQaWNrZXJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS52YWx1ZSB8fCBudWxsfVxuICAgICAgICAgICAgICAgIGZvcm1hdD17Z2V0TG9uZ0Zvcm1hdCh0aGlzLnByb3BzLmZvcm1hdCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5pZH1cbiAgICAgICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgbWluPXt0aGlzLnByb3BzLm1pbkRhdGUgfHwgbmV3IERhdGUoMTkwMCwgMCwgMSl9IC8vIG5ldyBEYXRlKDE5MDAsIDAsIDEpIGlzIHJlYWN0LXdpZGdldHMgZGVmYXVsdFxuICAgICAgICAgICAgICAgIG1heD17dGhpcy5wcm9wcy5tYXhEYXRlIHx8IG5ldyBEYXRlKDIwOTksIDExLCAzMSl9IC8vIG5ldyBEYXRlKDIwOTksIDExLCAzMSkgaXMgcmVhY3Qtd2lkZ2V0cyBkZWZhdWx0XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3RoaXMucHJvcHMucmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgdGltZT17KHRoaXMucHJvcHMudHlwZS5pbmRleE9mKCd0JykgPiAtMSl9XG4gICAgICAgICAgICAgICAgY2FsZW5kYXI9eyh0aGlzLnByb3BzLnR5cGUuaW5kZXhPZignZCcpPiAtMSl9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3ZhbHVlIDogdmFsdWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub2xkRWxlbS52YWx1ZSA9IG1vbWVudCh2YWx1ZSkuZm9ybWF0KGRhdGVGb3JtTWFwW3RoaXMucHJvcHMudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG59XG5OZWNrdGllRGF0ZUFuZFRpbWUuZGVmYXVsdFByb3BzID0ge1xuICAgIHR5cGU6ICdkdCcsXG4gICAgZm9ybWF0OiAnWS1NLUQgSDptJyxcbiAgICByZXF1aXJlZDogJ3JlcXVpcmVkJyxcbiAgICB2YWx1ZTogbnVsbFxufTtcblxuY29uc3QgY2hhbmdlVG8gPSB7XG4gICAgWTonWVlZWScsXG4gICAgeTonWVknLFxuICAgIGk6J21tJyxcbiAgICBoOidoaCcsXG4gICAgRDonZGRkJyxcbiAgICBkOidERCcsXG4gICAgTTonTU1NJyxcbiAgICBtOidNTScsXG4gICAgSDonSEgnLFxuICAgIHM6J3NzJ1xufTtcblxuLyoqXG4gKiBHZXQgbW9tZW50IGZvcm1hdCBmcm9tIHVzZXIgZm9ybWF0XG4gKiBAcGFyYW0gZm9ybWF0IHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldExvbmdGb3JtYXQoZm9ybWF0KSB7XG4gICAgbGV0IGxvbmdGb3JtYXQgPSAnJztcbiAgICBfLmVhY2goQXJyYXkuZnJvbShmb3JtYXQpLChjaGFyKT0+e1xuICAgICAgICBsb25nRm9ybWF0ICs9IChjaGFuZ2VUb1tjaGFyXSk/Y2hhci5yZXBsYWNlKGNoYXIsY2hhbmdlVG9bY2hhcl0pOmNoYXI7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxvbmdGb3JtYXQ7XG5cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvdmVuaWNlLWpzL0xpYnJhcmllcy9Db21wb25lbnRzL0RhdGVBbmRUaW1lLmpzeCIsInVuZGVmaW5lZFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAiXSwibWFwcGluZ3MiOiJBQUFBOzs7QUFHQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTs7O0FDR0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBWUE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUFBO0FBU0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBZkE7QUFtQkE7Ozs7QUF0Q0E7QUFDQTtBQURBO0FBQ0E7QUF1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFDQTtBQVlBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 473:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nexports.default = function (moment) {\n  if (typeof moment !== 'function') throw new TypeError('You must provide a valid moment object');\n\n  var localField = typeof moment().locale === 'function' ? 'locale' : 'lang',\n      hasLocaleData = !!moment.localeData;\n\n  if (!hasLocaleData) throw new TypeError('The Moment localizer depends on the `localeData` api, please provide a moment object v2.2.0 or higher');\n\n  function getMoment(culture, value, format) {\n    return culture ? moment(value, format)[localField](culture) : moment(value, format);\n  }\n\n  function endOfDecade(date) {\n    return moment(date).add(10, 'year').add(-1, 'millisecond').toDate();\n  }\n\n  function endOfCentury(date) {\n    return moment(date).add(100, 'year').add(-1, 'millisecond').toDate();\n  }\n\n  var localizer = {\n    formats: {\n      date: 'L',\n      time: 'LT',\n      default: 'lll',\n      header: 'MMMM YYYY',\n      footer: 'LL',\n      weekday: 'dd',\n      dayOfMonth: 'DD',\n      month: 'MMM',\n      year: 'YYYY',\n\n      decade: function decade(date, culture, localizer) {\n        return localizer.format(date, 'YYYY', culture) + ' - ' + localizer.format(endOfDecade(date), 'YYYY', culture);\n      },\n      century: function century(date, culture, localizer) {\n        return localizer.format(date, 'YYYY', culture) + ' - ' + localizer.format(endOfCentury(date), 'YYYY', culture);\n      }\n    },\n\n    firstOfWeek: function firstOfWeek(culture) {\n      return moment.localeData(culture).firstDayOfWeek();\n    },\n    parse: function parse(value, format, culture) {\n      if (!value) return null;\n      var m = getMoment(culture, value, format);\n      if (m.isValid()) return m.toDate();\n      return null;\n    },\n    format: function format(value, _format, culture) {\n      return getMoment(culture, value).format(_format);\n    }\n  };\n\n  _configure2.default.setDateLocalizer(localizer);\n\n  return localizer;\n};\n\nvar _configure = __webpack_require__(364);\n\nvar _configure2 = _interopRequireDefault(_configure);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = exports['default'];//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDczLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC13aWRnZXRzL2xpYi9sb2NhbGl6ZXJzL21vbWVudC5qcz8xMjYyIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKG1vbWVudCkge1xuICBpZiAodHlwZW9mIG1vbWVudCAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIG1vbWVudCBvYmplY3QnKTtcblxuICB2YXIgbG9jYWxGaWVsZCA9IHR5cGVvZiBtb21lbnQoKS5sb2NhbGUgPT09ICdmdW5jdGlvbicgPyAnbG9jYWxlJyA6ICdsYW5nJyxcbiAgICAgIGhhc0xvY2FsZURhdGEgPSAhIW1vbWVudC5sb2NhbGVEYXRhO1xuXG4gIGlmICghaGFzTG9jYWxlRGF0YSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIE1vbWVudCBsb2NhbGl6ZXIgZGVwZW5kcyBvbiB0aGUgYGxvY2FsZURhdGFgIGFwaSwgcGxlYXNlIHByb3ZpZGUgYSBtb21lbnQgb2JqZWN0IHYyLjIuMCBvciBoaWdoZXInKTtcblxuICBmdW5jdGlvbiBnZXRNb21lbnQoY3VsdHVyZSwgdmFsdWUsIGZvcm1hdCkge1xuICAgIHJldHVybiBjdWx0dXJlID8gbW9tZW50KHZhbHVlLCBmb3JtYXQpW2xvY2FsRmllbGRdKGN1bHR1cmUpIDogbW9tZW50KHZhbHVlLCBmb3JtYXQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT2ZEZWNhZGUoZGF0ZSkge1xuICAgIHJldHVybiBtb21lbnQoZGF0ZSkuYWRkKDEwLCAneWVhcicpLmFkZCgtMSwgJ21pbGxpc2Vjb25kJykudG9EYXRlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPZkNlbnR1cnkoZGF0ZSkge1xuICAgIHJldHVybiBtb21lbnQoZGF0ZSkuYWRkKDEwMCwgJ3llYXInKS5hZGQoLTEsICdtaWxsaXNlY29uZCcpLnRvRGF0ZSgpO1xuICB9XG5cbiAgdmFyIGxvY2FsaXplciA9IHtcbiAgICBmb3JtYXRzOiB7XG4gICAgICBkYXRlOiAnTCcsXG4gICAgICB0aW1lOiAnTFQnLFxuICAgICAgZGVmYXVsdDogJ2xsbCcsXG4gICAgICBoZWFkZXI6ICdNTU1NIFlZWVknLFxuICAgICAgZm9vdGVyOiAnTEwnLFxuICAgICAgd2Vla2RheTogJ2RkJyxcbiAgICAgIGRheU9mTW9udGg6ICdERCcsXG4gICAgICBtb250aDogJ01NTScsXG4gICAgICB5ZWFyOiAnWVlZWScsXG5cbiAgICAgIGRlY2FkZTogZnVuY3Rpb24gZGVjYWRlKGRhdGUsIGN1bHR1cmUsIGxvY2FsaXplcikge1xuICAgICAgICByZXR1cm4gbG9jYWxpemVyLmZvcm1hdChkYXRlLCAnWVlZWScsIGN1bHR1cmUpICsgJyAtICcgKyBsb2NhbGl6ZXIuZm9ybWF0KGVuZE9mRGVjYWRlKGRhdGUpLCAnWVlZWScsIGN1bHR1cmUpO1xuICAgICAgfSxcbiAgICAgIGNlbnR1cnk6IGZ1bmN0aW9uIGNlbnR1cnkoZGF0ZSwgY3VsdHVyZSwgbG9jYWxpemVyKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZXIuZm9ybWF0KGRhdGUsICdZWVlZJywgY3VsdHVyZSkgKyAnIC0gJyArIGxvY2FsaXplci5mb3JtYXQoZW5kT2ZDZW50dXJ5KGRhdGUpLCAnWVlZWScsIGN1bHR1cmUpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBmaXJzdE9mV2VlazogZnVuY3Rpb24gZmlyc3RPZldlZWsoY3VsdHVyZSkge1xuICAgICAgcmV0dXJuIG1vbWVudC5sb2NhbGVEYXRhKGN1bHR1cmUpLmZpcnN0RGF5T2ZXZWVrKCk7XG4gICAgfSxcbiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2UodmFsdWUsIGZvcm1hdCwgY3VsdHVyZSkge1xuICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIG51bGw7XG4gICAgICB2YXIgbSA9IGdldE1vbWVudChjdWx0dXJlLCB2YWx1ZSwgZm9ybWF0KTtcbiAgICAgIGlmIChtLmlzVmFsaWQoKSkgcmV0dXJuIG0udG9EYXRlKCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGZvcm1hdDogZnVuY3Rpb24gZm9ybWF0KHZhbHVlLCBfZm9ybWF0LCBjdWx0dXJlKSB7XG4gICAgICByZXR1cm4gZ2V0TW9tZW50KGN1bHR1cmUsIHZhbHVlKS5mb3JtYXQoX2Zvcm1hdCk7XG4gICAgfVxuICB9O1xuXG4gIF9jb25maWd1cmUyLmRlZmF1bHQuc2V0RGF0ZUxvY2FsaXplcihsb2NhbGl6ZXIpO1xuXG4gIHJldHVybiBsb2NhbGl6ZXI7XG59O1xuXG52YXIgX2NvbmZpZ3VyZSA9IHJlcXVpcmUoJy4uL2NvbmZpZ3VyZScpO1xuXG52YXIgX2NvbmZpZ3VyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb25maWd1cmUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtd2lkZ2V0cy9saWIvbG9jYWxpemVycy9tb21lbnQuanNcbi8vIG1vZHVsZSBpZCA9IDQ3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 474:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.startFroala = startFroala;\nexports.editFroala = editFroala;\nexports.harmonicaPlugin = harmonicaPlugin;\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _Events = __webpack_require__(462);\n\nvar _Events2 = _interopRequireDefault(_Events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar froalaState = 'none';\n/**\n *\n * @param containers {HTMLElement[]|HTMLElement}\n * @param froalaBundlePath {String}\n * @param callback {Function}\n */\n/**\n * Created by rockuo on 24.8.16.\n */\nfunction startFroala(containers, froalaBundlePath) {\n    var callback = arguments.length <= 2 || arguments[2] === undefined ? function () {} : arguments[2];\n\n    var url = froalaBundlePath;\n    if (!url) {\n        url = '/js/dist/froala.bundle.min.js';\n        if (process.env.NODE_ENV !== 'production') {\n            url = '/js/dist/froala.bundle.js';\n        }\n    }\n    var doneFn = function doneFn() {\n        _lodash2.default.each([].concat(containers), function (container) {\n            (0, _jquery2.default)(container.children[0]).froalaEditor(JSON.parse(container.getAttribute('data-settings')));\n        });\n        callback();\n        froalaState = 'done';\n    };\n    var testFroala = function testFroala() {\n        switch (froalaState) {\n            case 'none':\n                {\n                    froalaState = 'loading';\n                    _jquery2.default.getScript(url).done(doneFn).fail(function () {\n                        froalaState = 'none';\n                    });\n                }\n                break;\n            case 'loading':\n                {\n                    setTimeout(testFroala, 100);\n                }\n                break;\n            default:\n                {\n                    doneFn();\n                }\n        }\n    };\n    testFroala();\n}\n\n/**\n *\n * @param containers\n * @param how\n */\nfunction editFroala(containers, how) {\n    _lodash2.default.each([].concat(containers), function (container) {\n        var $cont = (0, _jquery2.default)(container.children[1]);\n        $cont.froalaEditor.apply($cont, how);\n    });\n}\n\n/**\n * @param $harmonicaContainer {$}\n */\nfunction harmonicaPlugin($harmonicaContainer) {\n    var harmonicaForms = [];\n    return _lodash2.default.map($harmonicaContainer.find('input[id*=\\'harmonica-global-\\']'), function (radio) {\n        var $harmonicaForm = (0, _jquery2.default)(radio).next().find('form');\n        harmonicaForms.push($harmonicaForm);\n        if (!radio.checked) {\n            $harmonicaForm.css('display', 'none');\n        }\n        return _Events2.default.listen(radio, 'click', function () {\n            _lodash2.default.each(harmonicaForms, function (form) {\n                return form.css('display', 'none');\n            });\n            $harmonicaForm.css('display', 'block');\n        });\n    });\n}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(31)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L3V0aWxzL0Zyb2FsYUxpYi5qcz9hNTE2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5zdGFydEZyb2FsYSA9IHN0YXJ0RnJvYWxhO1xuZXhwb3J0cy5lZGl0RnJvYWxhID0gZWRpdEZyb2FsYTtcbmV4cG9ydHMuaGFybW9uaWNhUGx1Z2luID0gaGFybW9uaWNhUGx1Z2luO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG52YXIgX2pxdWVyeSA9IHJlcXVpcmUoJ2pxdWVyeScpO1xuXG52YXIgX2pxdWVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9qcXVlcnkpO1xuXG52YXIgX0V2ZW50cyA9IHJlcXVpcmUoJ3RyaW5pdHkvdXRpbHMvRXZlbnRzJyk7XG5cbnZhciBfRXZlbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50cyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBmcm9hbGFTdGF0ZSA9ICdub25lJztcbi8qKlxuICpcbiAqIEBwYXJhbSBjb250YWluZXJzIHtIVE1MRWxlbWVudFtdfEhUTUxFbGVtZW50fVxuICogQHBhcmFtIGZyb2FsYUJ1bmRsZVBhdGgge1N0cmluZ31cbiAqIEBwYXJhbSBjYWxsYmFjayB7RnVuY3Rpb259XG4gKi9cbi8qKlxuICogQ3JlYXRlZCBieSByb2NrdW8gb24gMjQuOC4xNi5cbiAqL1xuZnVuY3Rpb24gc3RhcnRGcm9hbGEoY29udGFpbmVycywgZnJvYWxhQnVuZGxlUGF0aCkge1xuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogYXJndW1lbnRzWzJdO1xuXG4gICAgdmFyIHVybCA9IGZyb2FsYUJ1bmRsZVBhdGg7XG4gICAgaWYgKCF1cmwpIHtcbiAgICAgICAgdXJsID0gJy9qcy9kaXN0L2Zyb2FsYS5idW5kbGUubWluLmpzJztcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHVybCA9ICcvanMvZGlzdC9mcm9hbGEuYnVuZGxlLmpzJztcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgZG9uZUZuID0gZnVuY3Rpb24gZG9uZUZuKCkge1xuICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goW10uY29uY2F0KGNvbnRhaW5lcnMpLCBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICAoMCwgX2pxdWVyeTIuZGVmYXVsdCkoY29udGFpbmVyLmNoaWxkcmVuWzBdKS5mcm9hbGFFZGl0b3IoSlNPTi5wYXJzZShjb250YWluZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXNldHRpbmdzJykpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIGZyb2FsYVN0YXRlID0gJ2RvbmUnO1xuICAgIH07XG4gICAgdmFyIHRlc3RGcm9hbGEgPSBmdW5jdGlvbiB0ZXN0RnJvYWxhKCkge1xuICAgICAgICBzd2l0Y2ggKGZyb2FsYVN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZyb2FsYVN0YXRlID0gJ2xvYWRpbmcnO1xuICAgICAgICAgICAgICAgICAgICBfanF1ZXJ5Mi5kZWZhdWx0LmdldFNjcmlwdCh1cmwpLmRvbmUoZG9uZUZuKS5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb2FsYVN0YXRlID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdsb2FkaW5nJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGVzdEZyb2FsYSwgMTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZG9uZUZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICB0ZXN0RnJvYWxhKCk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBjb250YWluZXJzXG4gKiBAcGFyYW0gaG93XG4gKi9cbmZ1bmN0aW9uIGVkaXRGcm9hbGEoY29udGFpbmVycywgaG93KSB7XG4gICAgX2xvZGFzaDIuZGVmYXVsdC5lYWNoKFtdLmNvbmNhdChjb250YWluZXJzKSwgZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgJGNvbnQgPSAoMCwgX2pxdWVyeTIuZGVmYXVsdCkoY29udGFpbmVyLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgJGNvbnQuZnJvYWxhRWRpdG9yLmFwcGx5KCRjb250LCBob3cpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSAkaGFybW9uaWNhQ29udGFpbmVyIHskfVxuICovXG5mdW5jdGlvbiBoYXJtb25pY2FQbHVnaW4oJGhhcm1vbmljYUNvbnRhaW5lcikge1xuICAgIHZhciBoYXJtb25pY2FGb3JtcyA9IFtdO1xuICAgIHJldHVybiBfbG9kYXNoMi5kZWZhdWx0Lm1hcCgkaGFybW9uaWNhQ29udGFpbmVyLmZpbmQoJ2lucHV0W2lkKj1cXCdoYXJtb25pY2EtZ2xvYmFsLVxcJ10nKSwgZnVuY3Rpb24gKHJhZGlvKSB7XG4gICAgICAgIHZhciAkaGFybW9uaWNhRm9ybSA9ICgwLCBfanF1ZXJ5Mi5kZWZhdWx0KShyYWRpbykubmV4dCgpLmZpbmQoJ2Zvcm0nKTtcbiAgICAgICAgaGFybW9uaWNhRm9ybXMucHVzaCgkaGFybW9uaWNhRm9ybSk7XG4gICAgICAgIGlmICghcmFkaW8uY2hlY2tlZCkge1xuICAgICAgICAgICAgJGhhcm1vbmljYUZvcm0uY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX0V2ZW50czIuZGVmYXVsdC5saXN0ZW4ocmFkaW8sICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2Rhc2gyLmRlZmF1bHQuZWFjaChoYXJtb25pY2FGb3JtcywgZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkaGFybW9uaWNhRm9ybS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RyaW5pdHkvdXRpbHMvRnJvYWxhTGliLmpzXG4vLyBtb2R1bGUgaWQgPSA0NzRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 475:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _flux = __webpack_require__(179);\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(210);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _TableDataStore = __webpack_require__(476);\n\nvar _TableDataStore2 = _interopRequireDefault(_TableDataStore);\n\nvar _GridContainer = __webpack_require__(480);\n\nvar _GridContainer2 = _interopRequireDefault(_GridContainer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EXAMPLE_COLUMN = {\n    name: 'string', // REQUIRED\n    // OPTIONAL\n    label: 'string', // default name\n    allowOrder: 'boolean',\n    hidden: 'boolean',\n\n    // STYLES\n    className: 'string',\n    headerClassName: 'string',\n\n    // FILTER\n    allowFilter: 'bool',\n    type: ['string', 'integer', 'double', 'number', 'date', 'datetime', 'time'] // one of\n};\n\nvar defaultOptions = {\n    components: {\n        search: true,\n        pagination: true,\n        queryBuilder: true,\n        loadMoreButton: false\n    },\n    paginateComponent: {\n        marginPagesDisplayed: 2,\n        pageRangeDisplayed: 3,\n        containerClassName: 'pagination',\n        subContainerClassName: 'pages pagination',\n        activeClassName: 'active',\n        nextLinkClassName: 'pull-right bold',\n        previousLinkClassName: 'bold',\n        breakLabel: _react2.default.createElement('i', { className: 'tiecons tiecons-dots-negative' }),\n        previousLabel: _react2.default.createElement('i', { className: 'trinity trinity-arrow-down-two' }),\n        nextLabel: _react2.default.createElement('i', { className: 'trinity trinity-arrow-down-two' })\n    },\n    tableComponent: {\n        orderByClassName: 'order-by',\n        ascClassName: 'order-by-asc',\n        descClassName: 'order-by-desc',\n        header: {\n            rowClassName: '',\n            columnClassName: ''\n        },\n        rowClassName: '',\n        columnClassName: ''\n    },\n    filter: '',\n    query: {\n        page: 0,\n        limit: 15,\n        filter: undefined,\n        search: null\n    },\n    max: 1,\n    editable: false,\n    pageFilter: true\n\n};\n\n//todo: move to trinity?\nvar VeniceGridBuilder = {\n    build: function build(container, query) {\n        var customOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        if (!container) {\n            throw new Error('Container cannot be ' + container);\n        }\n\n        var config = JSON.parse(container.getAttribute('data-config'));\n\n        var options = _lodash2.default.defaultsDeep(\n        // From server options\n        {\n            query: query ? {\n                limit: +query.limit || config['limit'] || 15,\n                page: +query.page || undefined,\n                orderBy: query.orderby,\n                filter: query.filter ? window.atob(query.filter) : undefined,\n                search: query.search ? window.atob(query.search) : undefined\n            } : {\n                limit: config['limit'] || 15,\n                page: 1\n            },\n            max: config['max'],\n            filter: config['filter'],\n            editable: config['editable']\n        }, customOptions, defaultOptions);\n\n        // Logs in elastic does not have ID and _ID is random - no need to order by it\n        if (!options.query.orderBy && config.url.indexOf('/grid/elastic/') > -1) {\n            options.query.orderBy = 'createdAt:DESC';\n        }\n\n        var DataGrid = {\n            options: options,\n            columns: config['columns'],\n            store: null,\n            dispatcher: new _flux.Dispatcher()\n        };\n        DataGrid.store = new _TableDataStore2.default(DataGrid.dispatcher, config['url'], config['columns'], _extends({}, options.query, {\n            max: options.max,\n            maxPages: options.maxPages,\n            forceFilter: options.filter\n        }));\n\n        _reactDom2.default.render(_react2.default.createElement(_GridContainer2.default, _extends({}, DataGrid)), container);\n\n        return DataGrid;\n    }\n};\n\nexports.default = VeniceGridBuilder;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL1ZlbmljZUdyaWRCdWlsZGVyLmpzPzIwZjgiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7RGlzcGF0Y2hlcn0gZnJvbSAnZmx1eCc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgRGF0YVN0b3JlIGZyb20gJy4vR3JpZC9UYWJsZURhdGFTdG9yZSc7XG5pbXBvcnQgR3JpZENvbnRhaW5lciBmcm9tICcuL0dyaWQvY29tcG9uZW50cy9HcmlkQ29udGFpbmVyLmpzeCc7XG5cbmNvbnN0IEVYQU1QTEVfQ09MVU1OID0ge1xuICAgIG5hbWU6J3N0cmluZycsIC8vIFJFUVVJUkVEXG4gICAgLy8gT1BUSU9OQUxcbiAgICBsYWJlbDonc3RyaW5nJywgLy8gZGVmYXVsdCBuYW1lXG4gICAgYWxsb3dPcmRlcjogJ2Jvb2xlYW4nLFxuICAgIGhpZGRlbjonYm9vbGVhbicsXG4gICAgXG4gICAgLy8gU1RZTEVTXG4gICAgY2xhc3NOYW1lOiAnc3RyaW5nJyxcbiAgICBoZWFkZXJDbGFzc05hbWU6ICdzdHJpbmcnLFxuICAgIFxuICAgIC8vIEZJTFRFUlxuICAgIGFsbG93RmlsdGVyOiAnYm9vbCcsXG4gICAgdHlwZTogWydzdHJpbmcnLCAnaW50ZWdlcicsICdkb3VibGUnLCAnbnVtYmVyJywgJ2RhdGUnLCAnZGF0ZXRpbWUnLCAndGltZSddIC8vIG9uZSBvZlxufTtcblxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgY29tcG9uZW50czoge1xuICAgICAgICBzZWFyY2g6IHRydWUsXG4gICAgICAgIHBhZ2luYXRpb246IHRydWUsXG4gICAgICAgIHF1ZXJ5QnVpbGRlcjogdHJ1ZSxcbiAgICAgICAgbG9hZE1vcmVCdXR0b246IGZhbHNlXG4gICAgfSxcbiAgICBwYWdpbmF0ZUNvbXBvbmVudDoge1xuICAgICAgICBtYXJnaW5QYWdlc0Rpc3BsYXllZDogMixcbiAgICAgICAgcGFnZVJhbmdlRGlzcGxheWVkOiAzLFxuICAgICAgICBjb250YWluZXJDbGFzc05hbWU6J3BhZ2luYXRpb24nLFxuICAgICAgICBzdWJDb250YWluZXJDbGFzc05hbWU6J3BhZ2VzIHBhZ2luYXRpb24nLFxuICAgICAgICBhY3RpdmVDbGFzc05hbWU6J2FjdGl2ZScsXG4gICAgICAgIG5leHRMaW5rQ2xhc3NOYW1lOidwdWxsLXJpZ2h0IGJvbGQnLFxuICAgICAgICBwcmV2aW91c0xpbmtDbGFzc05hbWU6J2JvbGQnLFxuICAgICAgICBicmVha0xhYmVsOiBSZWFjdC5jcmVhdGVFbGVtZW50KCdpJywge2NsYXNzTmFtZTogJ3RpZWNvbnMgdGllY29ucy1kb3RzLW5lZ2F0aXZlJ30pLFxuICAgICAgICBwcmV2aW91c0xhYmVsOiBSZWFjdC5jcmVhdGVFbGVtZW50KCdpJywge2NsYXNzTmFtZTogJ3RyaW5pdHkgdHJpbml0eS1hcnJvdy1kb3duLXR3byd9KSxcbiAgICAgICAgbmV4dExhYmVsOiBSZWFjdC5jcmVhdGVFbGVtZW50KCdpJywge2NsYXNzTmFtZTogJ3RyaW5pdHkgdHJpbml0eS1hcnJvdy1kb3duLXR3byd9KVxuICAgIH0sXG4gICAgdGFibGVDb21wb25lbnQ6IHtcbiAgICAgICAgb3JkZXJCeUNsYXNzTmFtZTogJ29yZGVyLWJ5JyxcbiAgICAgICAgYXNjQ2xhc3NOYW1lOiAnb3JkZXItYnktYXNjJyxcbiAgICAgICAgZGVzY0NsYXNzTmFtZTogJ29yZGVyLWJ5LWRlc2MnLFxuICAgICAgICBoZWFkZXI6IHtcbiAgICAgICAgICAgIHJvd0NsYXNzTmFtZTogJycsXG4gICAgICAgICAgICBjb2x1bW5DbGFzc05hbWU6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIHJvd0NsYXNzTmFtZTogJycsXG4gICAgICAgIGNvbHVtbkNsYXNzTmFtZTogJydcbiAgICB9LFxuICAgIGZpbHRlcjogJycsXG4gICAgcXVlcnk6IHtcbiAgICAgICAgcGFnZTogMCxcbiAgICAgICAgbGltaXQ6IDE1LFxuICAgICAgICBmaWx0ZXI6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VhcmNoOiBudWxsXG4gICAgfSxcbiAgICBtYXg6IDEsXG4gICAgZWRpdGFibGU6IGZhbHNlLFxuICAgIHBhZ2VGaWx0ZXI6IHRydWVcblxufTtcblxuXG4vL3RvZG86IG1vdmUgdG8gdHJpbml0eT9cbmNvbnN0IFZlbmljZUdyaWRCdWlsZGVyID0ge1xuICAgIGJ1aWxkKGNvbnRhaW5lciwgcXVlcnksIGN1c3RvbU9wdGlvbnM9e30pe1xuICAgICAgICBpZighY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRhaW5lciBjYW5ub3QgYmUgJyArIGNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29uZmlnID0gSlNPTi5wYXJzZShjb250YWluZXIuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbmZpZycpKTtcblxuICAgICAgICBsZXQgb3B0aW9ucyA9IF8uZGVmYXVsdHNEZWVwKFxuICAgICAgICAgICAgLy8gRnJvbSBzZXJ2ZXIgb3B0aW9uc1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSA/IHtcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6ICtxdWVyeS5saW1pdCB8fCBjb25maWdbJ2xpbWl0J10gfHwgMTUsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6ICtxdWVyeS5wYWdlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJCeTogcXVlcnkub3JkZXJieSxcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBxdWVyeS5maWx0ZXIgPyB3aW5kb3cuYXRvYihxdWVyeS5maWx0ZXIpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBzZWFyY2g6IHF1ZXJ5LnNlYXJjaCA/IHdpbmRvdy5hdG9iKHF1ZXJ5LnNlYXJjaCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgICAgICBsaW1pdDogIGNvbmZpZ1snbGltaXQnXSB8fCAxNSxcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWF4OiBjb25maWdbJ21heCddLFxuICAgICAgICAgICAgICAgIGZpbHRlcjogY29uZmlnWydmaWx0ZXInXSxcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogY29uZmlnWydlZGl0YWJsZSddXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3VzdG9tT3B0aW9ucyxcbiAgICAgICAgICAgIGRlZmF1bHRPcHRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gTG9ncyBpbiBlbGFzdGljIGRvZXMgbm90IGhhdmUgSUQgYW5kIF9JRCBpcyByYW5kb20gLSBubyBuZWVkIHRvIG9yZGVyIGJ5IGl0XG4gICAgICAgIGlmKCFvcHRpb25zLnF1ZXJ5Lm9yZGVyQnkgJiYgY29uZmlnLnVybC5pbmRleE9mKCcvZ3JpZC9lbGFzdGljLycpID4gLTEpe1xuICAgICAgICAgICAgb3B0aW9ucy5xdWVyeS5vcmRlckJ5ID0gJ2NyZWF0ZWRBdDpERVNDJ1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IERhdGFHcmlkID0ge1xuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIGNvbHVtbnMgOiBjb25maWdbJ2NvbHVtbnMnXSxcbiAgICAgICAgICAgIHN0b3JlIDogbnVsbCxcbiAgICAgICAgICAgIGRpc3BhdGNoZXI6IG5ldyBEaXNwYXRjaGVyKClcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YUdyaWQuc3RvcmUgPSBuZXcgRGF0YVN0b3JlKFxuICAgICAgICAgICAgRGF0YUdyaWQuZGlzcGF0Y2hlcixcbiAgICAgICAgICAgIGNvbmZpZ1sndXJsJ10sXG4gICAgICAgICAgICBjb25maWdbJ2NvbHVtbnMnXSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgICAgIG1heDogb3B0aW9ucy5tYXgsXG4gICAgICAgICAgICAgICAgbWF4UGFnZXM6IG9wdGlvbnMubWF4UGFnZXMsXG4gICAgICAgICAgICAgICAgZm9yY2VGaWx0ZXI6IG9wdGlvbnMuZmlsdGVyXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgUmVhY3RET00ucmVuZGVyKFJlYWN0LmNyZWF0ZUVsZW1lbnQoR3JpZENvbnRhaW5lciwgey4uLkRhdGFHcmlkfSksIGNvbnRhaW5lcik7XG5cbiAgICAgICAgcmV0dXJuIERhdGFHcmlkO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFZlbmljZUdyaWRCdWlsZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvdmVuaWNlLWpzL0xpYnJhcmllcy9WZW5pY2VHcmlkQnVpbGRlci5qcyIsInVuZGVmaW5lZFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FDQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFDQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUF4Q0E7QUFDQTtBQTJDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFiQTtBQUNBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQU1BO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQXZEQTtBQUNBO0FBeURBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 476:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by fisa on 11/27/15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _Gateway = __webpack_require__(469);\n\nvar _Gateway2 = _interopRequireDefault(_Gateway);\n\nvar _TrinityQueryBuilder = __webpack_require__(477);\n\nvar _TrinityQueryBuilder2 = _interopRequireDefault(_TrinityQueryBuilder);\n\nvar _FluxStore = __webpack_require__(478);\n\nvar _FluxStore2 = _interopRequireDefault(_FluxStore);\n\nvar _GlobalHistory = __webpack_require__(479);\n\nvar _GlobalHistory2 = _interopRequireDefault(_GlobalHistory);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n// TODO: make it settable - hopefully one day\n\n\n// import Services from 'trinity/services';\n\nvar messageService = null;\nif (true) {\n    // console.log(Services);\n    // messageService = Services.messageService;\n    messageService = __webpack_require__(467).messageService;\n}\n\nvar actions = {\n    SET_PAGE: 'set-page',\n    FILTER: 'filter',\n    ORDER_BY: 'order-by',\n    CLEAR_FILTER: 'clear-filter',\n    SEARCH: 'search'\n};\n\nvar defaultOptions = {\n    limit: 15,\n    page: 1,\n    max: 1,\n    orderBy: 'id:ASC',\n    filter: null,\n    search: null,\n    forceFilter: null\n};\n\nvar ORDER_BY_SPIT_RX = /:(?=ASC$|DESC$)/;\nvar FILTER_STORAGE = 'filter';\nvar NORMAL_STORAGE = 'normal';\nvar SEARCH_STORAGE = 'search';\n\n/**\n * Store data component for grid tables\n */\n\nvar TableDataStore = function (_Store) {\n    _inherits(TableDataStore, _Store);\n\n    function TableDataStore(dispatcher, url, columns, options) {\n        _classCallCheck(this, TableDataStore);\n\n        var _this = _possibleConstructorReturn(this, (TableDataStore.__proto__ || Object.getPrototypeOf(TableDataStore)).call(this, dispatcher));\n\n        _this.options = __processOptions(options);\n        _this.url = url;\n        _this.columns = columns;\n        _this.select = _lodash2.default.map(columns, function (col) {\n            return col.name;\n        });\n        _this.select.push('_id');\n        _this.isFetching = false;\n        // Data storage\n        _this.__data = {\n            normal: new Array(_this.options.maxPages),\n            filter: [],\n            search: []\n        };\n        _this.activeStorage = NORMAL_STORAGE;\n        if (!_lodash2.default.isEmpty(_this.options.search)) {\n            _this.activeStorage = SEARCH_STORAGE;\n        } else if (!_lodash2.default.isEmpty(_this.options.filter)) {\n            _this.activeStorage = FILTER_STORAGE;\n        }\n        // current view\n        _this.dataView = [];\n\n        // History\n        var firstRequest = true;\n        _this.__historyListener = _GlobalHistory2.default.listen(function (loc) {\n            if (firstRequest) {\n                firstRequest = false;\n                return;\n            }\n            if (loc.action === 'POP' && loc.state) {\n                if (loc.state.orderBy !== _this.options.orderBy || loc.state.filter !== _this.options.filter) {\n                    _this.cleanCache();\n                }\n                _this.options = _lodash2.default.clone(loc.state);\n                _this.updateDataView();\n            }\n        });\n        // Initial request\n        _this.__initialPageSet();\n        return _this;\n    }\n\n    /**\n     * Returns actual inner view state of active data\n     * @returns {Array|*}\n     */\n\n\n    _createClass(TableDataStore, [{\n        key: 'getData',\n        value: function getData() {\n            return this.dataView;\n        }\n\n        /**\n         * Returns actual ORDER BY setup\n         * @returns {string|*|string}\n         */\n\n    }, {\n        key: 'getOrderBy',\n        value: function getOrderBy() {\n            return this.options.orderBy;\n        }\n\n        /**\n         * Returns actual pagination info\n         * @returns {{maxPages: number, page: (number|*|string|string)}}\n         */\n\n    }, {\n        key: 'getPaginationInfo',\n        value: function getPaginationInfo() {\n            return {\n                maxPages: this.options.maxPages,\n                page: this.options.page\n            };\n        }\n\n        /**\n         * Clear cached Data\n         */\n\n    }, {\n        key: 'cleanCache',\n        value: function cleanCache() {\n            this.__data[FILTER_STORAGE] = [];\n            this.__data[SEARCH_STORAGE] = [];\n            this.__data[NORMAL_STORAGE] = new Array(this.options.maxPages);\n        }\n\n        /**\n         * Main method handling dispatched actions\n         * @param payload {Object}\n         * @private\n         */\n\n    }, {\n        key: '__onDispatch',\n        value: function __onDispatch(payload) {\n            switch (payload.action) {\n\n                // Pagination\n                case actions.SET_PAGE:\n                    {\n                        this.__setPage(payload.page);\n                    }break;\n\n                // Order by change\n                case actions.ORDER_BY:\n                    {\n                        this.__orderBy(payload.orderBy);\n                    }break;\n                // Search\n                case actions.SEARCH:\n                    {\n                        this.__search(payload.search);\n                    }break;\n                // Filter\n                case actions.FILTER:\n                    {\n                        this.__filter(payload.filter);\n                    }break;\n\n                // Filter\n                case actions.CLEAR_FILTER:\n                    {\n                        this.__clearFilter(payload.filter);\n                    }break;\n                default:\n                    break;\n            }\n        }\n\n        /**\n         * Shortcut for emit state change\n         * @private\n         */\n\n    }, {\n        key: '__stateChange',\n        value: function __stateChange() {\n            this.__emitter.emit(this.__changeEvent);\n        }\n\n        /**\n         * Apply search filter\n         * @param queryString {string}\n         * @private\n         */\n\n    }, {\n        key: '__search',\n        value: function __search(queryString) {\n            if (queryString === this.options.search) {\n                return;\n            }\n\n            if (_lodash2.default.isEmpty(queryString)) {\n                this.activeStorage = NORMAL_STORAGE;\n                this.options.search = null;\n            } else {\n                this.options.search = queryString;\n                this.activeStorage = SEARCH_STORAGE;\n            }\n\n            this.options.page = 0;\n            this.__data[SEARCH_STORAGE] = [];\n            this.__pushHistory();\n            this.updateDataView();\n        }\n\n        /**\n         * Apply filter\n         * @param queryString {string}\n         * @private\n         */\n\n    }, {\n        key: '__filter',\n        value: function __filter(queryString) {\n            if (queryString !== this.options.filter) {\n                this.options.filter = queryString;\n                this.activeStorage = FILTER_STORAGE;\n                this.options.page = 0;\n                this.__data[FILTER_STORAGE] = [];\n                this.__pushHistory();\n                this.updateDataView();\n            }\n        }\n\n        /**\n         * Clears Filter\n         * @private\n         */\n\n    }, {\n        key: '__clearFilter',\n        value: function __clearFilter() {\n            if (!_lodash2.default.isEmpty(this.options.filter)) {\n                this.options.filter = null;\n                this.activeStorage = _lodash2.default.isNull(this.options.search) ? NORMAL_STORAGE : SEARCH_STORAGE;\n                this.options.page = 0;\n                this.__data[FILTER_STORAGE] = [];\n                this.__pushHistory();\n                this.updateDataView();\n            }\n        }\n\n        /**\n         * Handles SET PAGE request\n         * @param page {number}\n         * @private\n         */\n\n    }, {\n        key: '__setPage',\n        value: function __setPage(page) {\n            if (!this.isFetching || this.options.page !== page) {\n                this.options.page = page;\n                this.__pushHistory();\n                this.updateDataView();\n            }\n        }\n\n        /**\n         * Handles orderBy action request\n         * @param column {string}\n         * @private\n         */\n\n    }, {\n        key: '__orderBy',\n        value: function __orderBy(column) {\n            var _options$orderBy$spli = this.options.orderBy.split(ORDER_BY_SPIT_RX),\n                _options$orderBy$spli2 = _slicedToArray(_options$orderBy$spli, 2),\n                preColumn = _options$orderBy$spli2[0],\n                order = _options$orderBy$spli2[1];\n\n            this.options.orderBy = column + (column === preColumn && order === 'ASC' ? ':DESC' : ':ASC');\n            this.cleanCache();\n            this.__pushHistory();\n            this.updateDataView();\n        }\n\n        /**\n         * Update data view\n         */\n\n    }, {\n        key: 'updateDataView',\n        value: function updateDataView() {\n            var _this2 = this;\n\n            var data = this.__data[this.activeStorage],\n                page = this.options.page;\n\n            // Do we have Data?\n            if (data[page] && data[page].length > 0) {\n                this.dataView = data[page];\n                this.__stateChange();\n                return;\n            }\n\n            // We have to download Data\n            this.isFetching = true;\n            this.__stateChange();\n\n            // Save previous orderBy query\n            var requestOrderBy = this.options.orderBy,\n                requestFilter = this.options.filter,\n                requestSearch = this.options.search;\n\n            // REQUEST\n            this.requestData(function (response) {\n                var orderByTest = _this2.options.orderBy === requestOrderBy,\n                    filterTest = requestFilter === _this2.options.filter,\n                    searchTest = requestSearch === _this2.options.search,\n                    dataTest = !data[page] || _lodash2.default.isEmpty(data[page]);\n\n                // Check if some other request was triggered\n                if (orderByTest && dataTest && filterTest && searchTest) {\n                    _this2.isFetching = false;\n                    _this2.options.max = response.body.count.total;\n                    _this2.options.maxPages = Math.ceil(_this2.options.max / _this2.options.limit);\n                    _this2.dataView = data[page] = response.body.result;\n                    _this2.__stateChange();\n                }\n            }, function (error) {\n                // ERROR\n                if (true) {\n                    console.error(error);\n                    console.log(error.response);\n                    if (messageService) {\n                        messageService(error.response.statusCode + \"<br>\" + error.response.statusText, 'error');\n                    }\n                }\n                _this2.isFetching = false;\n                _this2.__stateChange();\n            });\n        }\n\n        /**\n         * Request for all queries\n         * @param successCallback\n         * @param errorCallback\n         */\n\n    }, {\n        key: 'requestData',\n        value: function requestData(successCallback, errorCallback) {\n            var queryRequest = this.activeStorage === SEARCH_STORAGE ? _TrinityQueryBuilder2.default.createSearch(this.url, // Url\n            this.select, this.options.search, {\n                offset: this.options.page * this.options.limit,\n                limit: this.options.limit,\n                orderBy: this.options.orderBy\n            }) : _TrinityQueryBuilder2.default.create(this.url, // Url\n            this.select, // Select\n            this.options.forceFilter, // filter\n            // Query\n            {\n                offset: this.options.page * this.options.limit,\n                limit: this.options.limit,\n                orderBy: this.options.orderBy,\n                filter: this.options.filter\n            });\n            _Gateway2.default.getJSON(encodeURI(queryRequest), null, successCallback, errorCallback);\n        }\n\n        /**\n         * Initial request\n         * @private\n         */\n\n    }, {\n        key: '__initialPageSet',\n        value: function __initialPageSet() {\n            this.updateDataView();\n            _GlobalHistory2.default.replace(this.__createHistoryUrl());\n        }\n\n        /**\n         * Add new state to history\n         * @private\n         */\n\n    }, {\n        key: '__pushHistory',\n        value: function __pushHistory() {\n            _GlobalHistory2.default.push(this.__createHistoryUrl());\n        }\n    }, {\n        key: '__createHistoryUrl',\n        value: function __createHistoryUrl() {\n            var queryUrl = [];\n            queryUrl.push('page=' + (this.options.page + 1));\n            queryUrl.push('limit=' + this.options.limit);\n            queryUrl.push('orderby=' + this.options.orderBy);\n            if (this.options.search) {\n                queryUrl.push('search=' + window.btoa(this.options.search));\n            } else if (this.options.filter) {\n                queryUrl.push('filter=' + window.btoa(this.options.filter));\n            }\n            return {\n                pathname: window.location.pathname,\n                search: '?' + window.encodeURI(queryUrl.join('&')) + window.location.hash,\n                state: _lodash2.default.clone(this.options)\n            };\n        }\n    }]);\n\n    return TableDataStore;\n}(_FluxStore2.default);\n\nexports.default = TableDataStore;\n\n\nTableDataStore.actions = actions;\n\n/**\n * Correct options\n * @param options\n * @returns {*}\n * @private\n */\nfunction __processOptions(options) {\n    options = _lodash2.default.defaultsDeep(options || {}, defaultOptions);\n\n    var _options$orderBy$spli3 = options.orderBy.split(ORDER_BY_SPIT_RX),\n        _options$orderBy$spli4 = _slicedToArray(_options$orderBy$spli3, 2),\n        name = _options$orderBy$spli4[0],\n        order = _options$orderBy$spli4[1];\n\n    if (!name) {\n        options.orderBy = defaultOptions.orderBy;\n    }\n\n    options.limit = options.limit && options.limit > 0 ? options.limit : 15;\n    options.maxPages = Math.ceil(options.max / options.limit);\n    options.page = options.page && options.page > 0 ? options.page - 1 : 0;\n\n    if (options.page >= options.maxPages) {\n        options.page = options.maxPages - 1;\n    }\n    return options;\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvVGFibGVEYXRhU3RvcmUuanM/ODEyMSIsIndlYnBhY2s6Ly8vP2Q0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGZpc2Egb24gMTEvMjcvMTUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBHYXRld2F5IGZyb20gJ3RyaW5pdHkvR2F0ZXdheSc7XG4vLyBUT0RPOiBtYWtlIGl0IHNldHRhYmxlIC0gaG9wZWZ1bGx5IG9uZSBkYXlcbmltcG9ydCBRdWVyeUJ1aWxkZXIgZnJvbSAnLi9UcmluaXR5UXVlcnlCdWlsZGVyJztcbmltcG9ydCBTdG9yZSBmcm9tICdmbHV4L2xpYi9GbHV4U3RvcmUnO1xuaW1wb3J0IEhpc3RvcnkgZnJvbSAnLi9HbG9iYWxIaXN0b3J5Jztcbi8vIGltcG9ydCBTZXJ2aWNlcyBmcm9tICd0cmluaXR5L3NlcnZpY2VzJztcblxubGV0IG1lc3NhZ2VTZXJ2aWNlID0gbnVsbDtcbmlmKERFVkVMT1BNRU5UKXtcbiAgICAvLyBjb25zb2xlLmxvZyhTZXJ2aWNlcyk7XG4gICAgLy8gbWVzc2FnZVNlcnZpY2UgPSBTZXJ2aWNlcy5tZXNzYWdlU2VydmljZTtcbiAgICBtZXNzYWdlU2VydmljZSA9IHJlcXVpcmUoJ3RyaW5pdHkvU2VydmljZXMuanMnKS5tZXNzYWdlU2VydmljZTtcbn1cblxuXG5jb25zdCBhY3Rpb25zID0ge1xuICAgIFNFVF9QQUdFIDogJ3NldC1wYWdlJyxcbiAgICBGSUxURVIgOiAnZmlsdGVyJyxcbiAgICBPUkRFUl9CWTogJ29yZGVyLWJ5JyxcbiAgICBDTEVBUl9GSUxURVI6ICdjbGVhci1maWx0ZXInLFxuICAgIFNFQVJDSDogJ3NlYXJjaCdcbn07XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIGxpbWl0IDogMTUsXG4gICAgcGFnZSA6IDEsXG4gICAgbWF4IDogMSxcbiAgICBvcmRlckJ5OiAnaWQ6QVNDJyxcbiAgICBmaWx0ZXI6IG51bGwsXG4gICAgc2VhcmNoOiBudWxsLFxuICAgIGZvcmNlRmlsdGVyOiBudWxsXG59O1xuXG5cbmNvbnN0IE9SREVSX0JZX1NQSVRfUlggPSAvOig/PUFTQyR8REVTQyQpLztcbmNvbnN0IEZJTFRFUl9TVE9SQUdFID0gJ2ZpbHRlcic7XG5jb25zdCBOT1JNQUxfU1RPUkFHRSA9ICdub3JtYWwnO1xuY29uc3QgU0VBUkNIX1NUT1JBR0UgPSAnc2VhcmNoJztcblxuLyoqXG4gKiBTdG9yZSBkYXRhIGNvbXBvbmVudCBmb3IgZ3JpZCB0YWJsZXNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFibGVEYXRhU3RvcmUgZXh0ZW5kcyBTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoZGlzcGF0Y2hlciwgdXJsLCBjb2x1bW5zLCBvcHRpb25zKXtcbiAgICAgICAgc3VwZXIoZGlzcGF0Y2hlcik7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zID0gX19wcm9jZXNzT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XG4gICAgICAgIHRoaXMuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgIHRoaXMuc2VsZWN0ID0gXy5tYXAoY29sdW1ucywgY29sID0+IGNvbC5uYW1lKTtcbiAgICAgICAgdGhpcy5zZWxlY3QucHVzaCgnX2lkJyk7XG4gICAgICAgIHRoaXMuaXNGZXRjaGluZyA9IGZhbHNlO1xuICAgICAgICAvLyBEYXRhIHN0b3JhZ2VcbiAgICAgICAgdGhpcy5fX2RhdGEgPSB7XG4gICAgICAgICAgICBub3JtYWw6IG5ldyBBcnJheSh0aGlzLm9wdGlvbnMubWF4UGFnZXMpLFxuICAgICAgICAgICAgZmlsdGVyOiBbXSxcbiAgICAgICAgICAgIHNlYXJjaDogW11cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hY3RpdmVTdG9yYWdlID0gTk9STUFMX1NUT1JBR0U7XG4gICAgICAgIGlmKCFfLmlzRW1wdHkodGhpcy5vcHRpb25zLnNlYXJjaCkpe1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVTdG9yYWdlID0gU0VBUkNIX1NUT1JBR0U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZighXy5pc0VtcHR5KHRoaXMub3B0aW9ucy5maWx0ZXIpKXtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RvcmFnZSA9IEZJTFRFUl9TVE9SQUdFO1xuICAgICAgICB9XG4gICAgICAgIC8vIGN1cnJlbnQgdmlld1xuICAgICAgICB0aGlzLmRhdGFWaWV3ID0gW107XG5cbiAgICAgICAgLy8gSGlzdG9yeVxuICAgICAgICBsZXQgZmlyc3RSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fX2hpc3RvcnlMaXN0ZW5lciA9IEhpc3RvcnkubGlzdGVuKChsb2MpPT57XG4gICAgICAgICAgICBpZihmaXJzdFJlcXVlc3Qpe1xuICAgICAgICAgICAgICAgIGZpcnN0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGxvYy5hY3Rpb24gPT09ICdQT1AnICYmIGxvYy5zdGF0ZSl7XG4gICAgICAgICAgICAgICAgaWYobG9jLnN0YXRlLm9yZGVyQnkgIT09IHRoaXMub3B0aW9ucy5vcmRlckJ5IHx8IGxvYy5zdGF0ZS5maWx0ZXIgIT09IHRoaXMub3B0aW9ucy5maWx0ZXIpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFuQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gXy5jbG9uZShsb2Muc3RhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEluaXRpYWwgcmVxdWVzdFxuICAgICAgICB0aGlzLl9faW5pdGlhbFBhZ2VTZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFjdHVhbCBpbm5lciB2aWV3IHN0YXRlIG9mIGFjdGl2ZSBkYXRhXG4gICAgICogQHJldHVybnMge0FycmF5fCp9XG4gICAgICovXG4gICAgZ2V0RGF0YSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhVmlldztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFjdHVhbCBPUkRFUiBCWSBzZXR1cFxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8KnxzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0T3JkZXJCeSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm9yZGVyQnk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhY3R1YWwgcGFnaW5hdGlvbiBpbmZvXG4gICAgICogQHJldHVybnMge3ttYXhQYWdlczogbnVtYmVyLCBwYWdlOiAobnVtYmVyfCp8c3RyaW5nfHN0cmluZyl9fVxuICAgICAqL1xuICAgIGdldFBhZ2luYXRpb25JbmZvKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYXhQYWdlczogdGhpcy5vcHRpb25zLm1heFBhZ2VzLFxuICAgICAgICAgICAgcGFnZTogdGhpcy5vcHRpb25zLnBhZ2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIGNhY2hlZCBEYXRhXG4gICAgICovXG4gICAgY2xlYW5DYWNoZSgpe1xuICAgICAgICB0aGlzLl9fZGF0YVtGSUxURVJfU1RPUkFHRV0gPSBbXTtcbiAgICAgICAgdGhpcy5fX2RhdGFbU0VBUkNIX1NUT1JBR0VdID0gW107XG4gICAgICAgIHRoaXMuX19kYXRhW05PUk1BTF9TVE9SQUdFXSA9IG5ldyBBcnJheSh0aGlzLm9wdGlvbnMubWF4UGFnZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1haW4gbWV0aG9kIGhhbmRsaW5nIGRpc3BhdGNoZWQgYWN0aW9uc1xuICAgICAqIEBwYXJhbSBwYXlsb2FkIHtPYmplY3R9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfX29uRGlzcGF0Y2gocGF5bG9hZCl7XG4gICAgICAgIHN3aXRjaChwYXlsb2FkLmFjdGlvbil7XG5cbiAgICAgICAgICAgIC8vIFBhZ2luYXRpb25cbiAgICAgICAgICAgIGNhc2UgYWN0aW9ucy5TRVRfUEFHRSA6e1xuICAgICAgICAgICAgICAgIHRoaXMuX19zZXRQYWdlKHBheWxvYWQucGFnZSk7XG4gICAgICAgICAgICB9IGJyZWFrO1xuXG4gICAgICAgICAgICAvLyBPcmRlciBieSBjaGFuZ2VcbiAgICAgICAgICAgIGNhc2UgYWN0aW9ucy5PUkRFUl9CWSA6e1xuICAgICAgICAgICAgICAgIHRoaXMuX19vcmRlckJ5KHBheWxvYWQub3JkZXJCeSk7XG4gICAgICAgICAgICB9IGJyZWFrO1xuICAgICAgICAgICAgLy8gU2VhcmNoXG4gICAgICAgICAgICBjYXNlIGFjdGlvbnMuU0VBUkNIOntcbiAgICAgICAgICAgICAgICB0aGlzLl9fc2VhcmNoKHBheWxvYWQuc2VhcmNoKTtcbiAgICAgICAgICAgIH0gYnJlYWs7XG4gICAgICAgICAgICAvLyBGaWx0ZXJcbiAgICAgICAgICAgIGNhc2UgYWN0aW9ucy5GSUxURVIgOntcbiAgICAgICAgICAgICAgICB0aGlzLl9fZmlsdGVyKHBheWxvYWQuZmlsdGVyKTtcbiAgICAgICAgICAgIH0gYnJlYWs7XG5cbiAgICAgICAgICAgIC8vIEZpbHRlclxuICAgICAgICAgICAgY2FzZSBhY3Rpb25zLkNMRUFSX0ZJTFRFUiA6e1xuICAgICAgICAgICAgICAgIHRoaXMuX19jbGVhckZpbHRlcihwYXlsb2FkLmZpbHRlcik7XG4gICAgICAgICAgICB9IGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDogYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG9ydGN1dCBmb3IgZW1pdCBzdGF0ZSBjaGFuZ2VcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9fc3RhdGVDaGFuZ2UoKXtcbiAgICAgICAgdGhpcy5fX2VtaXR0ZXIuZW1pdCh0aGlzLl9fY2hhbmdlRXZlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGx5IHNlYXJjaCBmaWx0ZXJcbiAgICAgKiBAcGFyYW0gcXVlcnlTdHJpbmcge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9fc2VhcmNoKHF1ZXJ5U3RyaW5nKXtcbiAgICAgICAgaWYocXVlcnlTdHJpbmcgPT09IHRoaXMub3B0aW9ucy5zZWFyY2gpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoXy5pc0VtcHR5KHF1ZXJ5U3RyaW5nKSl7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN0b3JhZ2UgPSBOT1JNQUxfU1RPUkFHRTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zZWFyY2ggPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNlYXJjaCA9IHF1ZXJ5U3RyaW5nO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVTdG9yYWdlID0gU0VBUkNIX1NUT1JBR0U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMucGFnZSA9IDA7XG4gICAgICAgIHRoaXMuX19kYXRhW1NFQVJDSF9TVE9SQUdFXSA9IFtdO1xuICAgICAgICB0aGlzLl9fcHVzaEhpc3RvcnkoKTtcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhVmlldygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGx5IGZpbHRlclxuICAgICAqIEBwYXJhbSBxdWVyeVN0cmluZyB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX19maWx0ZXIocXVlcnlTdHJpbmcpe1xuICAgICAgICBpZihxdWVyeVN0cmluZyAhPT0gdGhpcy5vcHRpb25zLmZpbHRlcil7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZmlsdGVyID0gcXVlcnlTdHJpbmc7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN0b3JhZ2UgPSBGSUxURVJfU1RPUkFHRTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wYWdlID0gMDtcbiAgICAgICAgICAgIHRoaXMuX19kYXRhW0ZJTFRFUl9TVE9SQUdFXSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fX3B1c2hIaXN0b3J5KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFWaWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgRmlsdGVyXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfX2NsZWFyRmlsdGVyKCl7XG4gICAgICAgIGlmKCFfLmlzRW1wdHkodGhpcy5vcHRpb25zLmZpbHRlcikpe1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZpbHRlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN0b3JhZ2UgPSBfLmlzTnVsbCh0aGlzLm9wdGlvbnMuc2VhcmNoKSA/IE5PUk1BTF9TVE9SQUdFIDogU0VBUkNIX1NUT1JBR0U7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucGFnZSA9IDA7XG4gICAgICAgICAgICB0aGlzLl9fZGF0YVtGSUxURVJfU1RPUkFHRV0gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX19wdXNoSGlzdG9yeSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVmlldygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBTRVQgUEFHRSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHBhZ2Uge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9fc2V0UGFnZShwYWdlKXtcbiAgICAgICAgaWYoIXRoaXMuaXNGZXRjaGluZyB8fCB0aGlzLm9wdGlvbnMucGFnZSAhPT0gcGFnZSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBhZ2UgPSBwYWdlO1xuICAgICAgICAgICAgdGhpcy5fX3B1c2hIaXN0b3J5KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFWaWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIG9yZGVyQnkgYWN0aW9uIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gY29sdW1uIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfX29yZGVyQnkoY29sdW1uKXtcbiAgICAgICAgbGV0IFtwcmVDb2x1bW4sIG9yZGVyXSA9IHRoaXMub3B0aW9ucy5vcmRlckJ5LnNwbGl0KE9SREVSX0JZX1NQSVRfUlgpO1xuICAgICAgICB0aGlzLm9wdGlvbnMub3JkZXJCeSA9IGNvbHVtbiArICgoY29sdW1uID09PSBwcmVDb2x1bW4gJiYgb3JkZXIgPT09ICdBU0MnKSA/ICc6REVTQycgOiAnOkFTQycpO1xuICAgICAgICB0aGlzLmNsZWFuQ2FjaGUoKTtcbiAgICAgICAgdGhpcy5fX3B1c2hIaXN0b3J5KCk7XG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVZpZXcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgZGF0YSB2aWV3XG4gICAgICovXG4gICAgdXBkYXRlRGF0YVZpZXcoKXtcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLl9fZGF0YVt0aGlzLmFjdGl2ZVN0b3JhZ2VdLFxuICAgICAgICAgICAgcGFnZSA9IHRoaXMub3B0aW9ucy5wYWdlO1xuXG4gICAgICAgIC8vIERvIHdlIGhhdmUgRGF0YT9cbiAgICAgICAgaWYoZGF0YVtwYWdlXSAmJiBkYXRhW3BhZ2VdLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgdGhpcy5kYXRhVmlldyA9IGRhdGFbcGFnZV07XG4gICAgICAgICAgICB0aGlzLl9fc3RhdGVDaGFuZ2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIGhhdmUgdG8gZG93bmxvYWQgRGF0YVxuICAgICAgICB0aGlzLmlzRmV0Y2hpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLl9fc3RhdGVDaGFuZ2UoKTtcblxuICAgICAgICAvLyBTYXZlIHByZXZpb3VzIG9yZGVyQnkgcXVlcnlcbiAgICAgICAgbGV0IHJlcXVlc3RPcmRlckJ5ID0gdGhpcy5vcHRpb25zLm9yZGVyQnksXG4gICAgICAgICAgICByZXF1ZXN0RmlsdGVyID0gdGhpcy5vcHRpb25zLmZpbHRlcixcbiAgICAgICAgICAgIHJlcXVlc3RTZWFyY2ggPSB0aGlzLm9wdGlvbnMuc2VhcmNoO1xuXG4gICAgICAgIC8vIFJFUVVFU1RcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSgocmVzcG9uc2UpPT57XG4gICAgICAgICAgICBsZXQgb3JkZXJCeVRlc3QgPSB0aGlzLm9wdGlvbnMub3JkZXJCeSA9PT0gcmVxdWVzdE9yZGVyQnksXG4gICAgICAgICAgICAgICAgZmlsdGVyVGVzdCA9IHJlcXVlc3RGaWx0ZXIgPT09IHRoaXMub3B0aW9ucy5maWx0ZXIsXG4gICAgICAgICAgICAgICAgc2VhcmNoVGVzdCA9IHJlcXVlc3RTZWFyY2ggPT09IHRoaXMub3B0aW9ucy5zZWFyY2gsXG4gICAgICAgICAgICAgICAgZGF0YVRlc3QgPSAhZGF0YVtwYWdlXSB8fCBfLmlzRW1wdHkoZGF0YVtwYWdlXSk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHNvbWUgb3RoZXIgcmVxdWVzdCB3YXMgdHJpZ2dlcmVkXG4gICAgICAgICAgICBpZihvcmRlckJ5VGVzdCAmJiBkYXRhVGVzdCAmJiBmaWx0ZXJUZXN0ICYmIHNlYXJjaFRlc3Qpe1xuICAgICAgICAgICAgICAgIHRoaXMuaXNGZXRjaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tYXggPSByZXNwb25zZS5ib2R5LmNvdW50LnRvdGFsO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tYXhQYWdlcyA9IE1hdGguY2VpbCh0aGlzLm9wdGlvbnMubWF4IC8gdGhpcy5vcHRpb25zLmxpbWl0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFWaWV3ID0gZGF0YVtwYWdlXSA9IHJlc3BvbnNlLmJvZHkucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMuX19zdGF0ZUNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAoZXJyb3IpPT57XG4gICAgICAgICAgICAvLyBFUlJPUlxuICAgICAgICAgICAgaWYoREVWRUxPUE1FTlQpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZihtZXNzYWdlU2VydmljZSl7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VTZXJ2aWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IucmVzcG9uc2Uuc3RhdHVzQ29kZSArIFwiPGJyPlwiXG4gICAgICAgICAgICAgICAgICAgICAgICArIGVycm9yLnJlc3BvbnNlLnN0YXR1c1RleHQsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0ZldGNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9fc3RhdGVDaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVxdWVzdCBmb3IgYWxsIHF1ZXJpZXNcbiAgICAgKiBAcGFyYW0gc3VjY2Vzc0NhbGxiYWNrXG4gICAgICogQHBhcmFtIGVycm9yQ2FsbGJhY2tcbiAgICAgKi9cbiAgICByZXF1ZXN0RGF0YShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spe1xuICAgICAgICBsZXQgcXVlcnlSZXF1ZXN0ID0gdGhpcy5hY3RpdmVTdG9yYWdlID09PSBTRUFSQ0hfU1RPUkFHRSA/IFxuICAgICAgICAgICAgUXVlcnlCdWlsZGVyLmNyZWF0ZVNlYXJjaChcbiAgICAgICAgICAgICAgICB0aGlzLnVybCwgLy8gVXJsXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QsXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNlYXJjaCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogKHRoaXMub3B0aW9ucy5wYWdlKSAqIHRoaXMub3B0aW9ucy5saW1pdCxcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6IHRoaXMub3B0aW9ucy5saW1pdCxcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJCeTogdGhpcy5vcHRpb25zLm9yZGVyQnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICA6IFF1ZXJ5QnVpbGRlci5jcmVhdGUoXG4gICAgICAgICAgICAgICAgdGhpcy51cmwsIC8vIFVybFxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0LCAvLyBTZWxlY3RcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZm9yY2VGaWx0ZXIsIC8vIGZpbHRlclxuICAgICAgICAgICAgICAgIC8vIFF1ZXJ5XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6ICh0aGlzLm9wdGlvbnMucGFnZSkgKiB0aGlzLm9wdGlvbnMubGltaXQsXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLm9wdGlvbnMubGltaXQsXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQnk6IHRoaXMub3B0aW9ucy5vcmRlckJ5LFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IHRoaXMub3B0aW9ucy5maWx0ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICBHYXRld2F5LmdldEpTT04oZW5jb2RlVVJJKHF1ZXJ5UmVxdWVzdCksIG51bGwsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbCByZXF1ZXN0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfX2luaXRpYWxQYWdlU2V0KCl7XG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVZpZXcoKTtcbiAgICAgICAgSGlzdG9yeS5yZXBsYWNlKHRoaXMuX19jcmVhdGVIaXN0b3J5VXJsKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBuZXcgc3RhdGUgdG8gaGlzdG9yeVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX19wdXNoSGlzdG9yeSgpe1xuICAgICAgICBIaXN0b3J5LnB1c2godGhpcy5fX2NyZWF0ZUhpc3RvcnlVcmwoKSk7XG4gICAgfVxuICAgIFxuICAgIF9fY3JlYXRlSGlzdG9yeVVybCgpe1xuICAgICAgICBsZXQgcXVlcnlVcmwgPSBbXTtcbiAgICAgICAgcXVlcnlVcmwucHVzaCgncGFnZT0nKyh0aGlzLm9wdGlvbnMucGFnZSsxKSk7XG4gICAgICAgIHF1ZXJ5VXJsLnB1c2goJ2xpbWl0PScrdGhpcy5vcHRpb25zLmxpbWl0KTtcbiAgICAgICAgcXVlcnlVcmwucHVzaCgnb3JkZXJieT0nK3RoaXMub3B0aW9ucy5vcmRlckJ5KTtcbiAgICAgICAgaWYodGhpcy5vcHRpb25zLnNlYXJjaCl7XG4gICAgICAgICAgICBxdWVyeVVybC5wdXNoKGBzZWFyY2g9JHt3aW5kb3cuYnRvYSh0aGlzLm9wdGlvbnMuc2VhcmNoKX1gKTtcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMub3B0aW9ucy5maWx0ZXIpe1xuICAgICAgICAgICAgcXVlcnlVcmwucHVzaChgZmlsdGVyPSR7d2luZG93LmJ0b2EodGhpcy5vcHRpb25zLmZpbHRlcil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhdGhuYW1lOndpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAgICAgIHNlYXJjaDonPycrIHdpbmRvdy5lbmNvZGVVUkkocXVlcnlVcmwuam9pbignJicpKSArIHdpbmRvdy5sb2NhdGlvbi5oYXNoLFxuICAgICAgICAgICAgc3RhdGU6Xy5jbG9uZSh0aGlzLm9wdGlvbnMpXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5cblRhYmxlRGF0YVN0b3JlLmFjdGlvbnMgPSBhY3Rpb25zO1xuXG4vKipcbiAqIENvcnJlY3Qgb3B0aW9uc1xuICogQHBhcmFtIG9wdGlvbnNcbiAqIEByZXR1cm5zIHsqfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19wcm9jZXNzT3B0aW9ucyhvcHRpb25zKXtcbiAgICBvcHRpb25zID0gXy5kZWZhdWx0c0RlZXAob3B0aW9ucyB8fCB7fSwgZGVmYXVsdE9wdGlvbnMpO1xuXG4gICAgbGV0IFtuYW1lLCBvcmRlcl0gPSBvcHRpb25zLm9yZGVyQnkuc3BsaXQoT1JERVJfQllfU1BJVF9SWCk7XG4gICAgaWYoIW5hbWUpe1xuICAgICAgICBvcHRpb25zLm9yZGVyQnkgPSBkZWZhdWx0T3B0aW9ucy5vcmRlckJ5O1xuICAgIH1cblxuICAgIG9wdGlvbnMubGltaXQgPSBvcHRpb25zLmxpbWl0ICYmIG9wdGlvbnMubGltaXQgPiAwID8gb3B0aW9ucy5saW1pdCA6IDE1O1xuICAgIG9wdGlvbnMubWF4UGFnZXMgPSBNYXRoLmNlaWwob3B0aW9ucy5tYXggLyBvcHRpb25zLmxpbWl0KTtcbiAgICBvcHRpb25zLnBhZ2UgPSAob3B0aW9ucy5wYWdlICYmIG9wdGlvbnMucGFnZSA+IDApID8gb3B0aW9ucy5wYWdlIC0gMSA6IDA7XG5cbiAgICBpZiggb3B0aW9ucy5wYWdlID49IG9wdGlvbnMubWF4UGFnZXMgKXtcbiAgICAgICAgb3B0aW9ucy5wYWdlID0gKG9wdGlvbnMubWF4UGFnZXMtMSk7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvdmVuaWNlLWpzL0xpYnJhcmllcy9HcmlkL1RhYmxlRGF0YVN0b3JlLmpzIiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6IkFBQUE7OztBQUdBO0FBQ0E7Ozs7Ozs7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7QUFKQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQ0NBO0FBQ0E7QUFDQTtBRENBO0FBQ0E7QUFFQTtBQ0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFHQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekNBO0FBMENBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF4QkE7QUEwQkE7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FEQ0E7QUNHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7Ozs7QUFuVUE7QUFDQTtBQUNBO0FBcVVBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 477:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by fisa on 1/15/16.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TrinityQueryBuilder = function () {\n    function TrinityQueryBuilder() {\n        _classCallCheck(this, TrinityQueryBuilder);\n    }\n\n    _createClass(TrinityQueryBuilder, null, [{\n        key: 'create',\n        value: function create(baseUrl, select, where, query) {\n            // base URL\n            baseUrl = _lodash2.default.last(baseUrl) === '/' ? _lodash2.default.initial(baseUrl).join('') : baseUrl;\n            // Select\n            var buffer = [];\n            buffer.push('(' + select.join(',') + ')');\n\n            // Constrains\n            var constraintsBuffer = [];\n            if (query.limit) {\n                constraintsBuffer.push('LIMIT=' + query.limit);\n            }\n            if (query.offset) {\n                constraintsBuffer.push('OFFSET=' + query.offset);\n            }\n            if (!_lodash2.default.isEmpty(query.orderBy)) {\n                var _query$orderBy$split = query.orderBy.split(/:(?=ASC$|DESC$)/),\n                    _query$orderBy$split2 = _slicedToArray(_query$orderBy$split, 2),\n                    name = _query$orderBy$split2[0],\n                    order = _query$orderBy$split2[1];\n\n                constraintsBuffer.push('ORDERBY ' + name + ' ' + (order ? order.toUpperCase() : 'ASC'));\n            }\n            var filter = query.filter;\n            if (where) {\n                if (!_lodash2.default.isEmpty(filter)) {\n                    filter = where + ' AND (' + filter + ')';\n                } else {\n                    filter = where;\n                }\n            }\n            if (!_lodash2.default.isEmpty(filter)) {\n                buffer.push('{' + filter + '}');\n            }\n            buffer.push(constraintsBuffer.join(' '));\n            return baseUrl + '?q=' + buffer.join(' ');\n        }\n    }, {\n        key: 'createSearch',\n        value: function createSearch(baseUrl, select, search, query) {\n            // base URL\n            baseUrl = (_lodash2.default.last(baseUrl) === '/' ? _lodash2.default.initial(baseUrl).join('') : baseUrl).toLowerCase();\n\n            var queryParams = [];\n            if (query.offset) {\n                queryParams.push('offset=' + query.offset);\n            }\n            if (query.limit) {\n                queryParams.push('limit=' + query.limit);\n            }\n            var queryStr = _lodash2.default.isEmpty(queryParams) ? '' : '&' + queryParams.join('&');\n\n            return baseUrl + '?q=' + search + '&c=' + select.join(',') + queryStr;\n        }\n    }]);\n\n    return TrinityQueryBuilder;\n}();\n\nexports.default = TrinityQueryBuilder;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvVHJpbml0eVF1ZXJ5QnVpbGRlci5qcz9jMzZhIiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgZmlzYSBvbiAxLzE1LzE2LlxuICovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyaW5pdHlRdWVyeUJ1aWxkZXIge1xuICAgIHN0YXRpYyBjcmVhdGUoYmFzZVVybCwgc2VsZWN0LCB3aGVyZSwgcXVlcnkpe1xuICAgICAgICAvLyBiYXNlIFVSTFxuICAgICAgICBiYXNlVXJsID0gXy5sYXN0KGJhc2VVcmwpID09PSAnLycgPyBfLmluaXRpYWwoYmFzZVVybCkuam9pbignJyk6YmFzZVVybDtcbiAgICAgICAgLy8gU2VsZWN0XG4gICAgICAgIGxldCBidWZmZXIgPSBbXTtcbiAgICAgICAgYnVmZmVyLnB1c2goJygnK3NlbGVjdC5qb2luKCcsJykrJyknKTtcblxuICAgICAgICAvLyBDb25zdHJhaW5zXG4gICAgICAgIGxldCBjb25zdHJhaW50c0J1ZmZlciA9IFtdO1xuICAgICAgICBpZihxdWVyeS5saW1pdCl7XG4gICAgICAgICAgICBjb25zdHJhaW50c0J1ZmZlci5wdXNoKCdMSU1JVD0nKyBxdWVyeS5saW1pdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYocXVlcnkub2Zmc2V0KXtcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzQnVmZmVyLnB1c2goJ09GRlNFVD0nKyBxdWVyeS5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmKCFfLmlzRW1wdHkocXVlcnkub3JkZXJCeSkpe1xuICAgICAgICAgICAgbGV0IFtuYW1lLCBvcmRlcl0gPSBxdWVyeS5vcmRlckJ5LnNwbGl0KC86KD89QVNDJHxERVNDJCkvKTtcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzQnVmZmVyLnB1c2goYE9SREVSQlkgJHtuYW1lfSAke29yZGVyID8gb3JkZXIudG9VcHBlckNhc2UoKTonQVNDJ31gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZmlsdGVyID0gcXVlcnkuZmlsdGVyO1xuICAgICAgICBpZih3aGVyZSl7XG4gICAgICAgICAgICBpZighXy5pc0VtcHR5KGZpbHRlcikpe1xuICAgICAgICAgICAgICAgIGZpbHRlciA9IGAke3doZXJlfSBBTkQgKCR7ZmlsdGVyfSlgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXIgPSB3aGVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZighXy5pc0VtcHR5KGZpbHRlcikpe1xuICAgICAgICAgICAgYnVmZmVyLnB1c2goYHske2ZpbHRlcn19YCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyLnB1c2goY29uc3RyYWludHNCdWZmZXIuam9pbignICcpKTtcbiAgICAgICAgcmV0dXJuIGJhc2VVcmwgKyAnP3E9JyArIGJ1ZmZlci5qb2luKCcgJyk7XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBjcmVhdGVTZWFyY2goYmFzZVVybCwgc2VsZWN0LCBzZWFyY2gsIHF1ZXJ5KXtcbiAgICAgICAgLy8gYmFzZSBVUkxcbiAgICAgICAgYmFzZVVybCA9IChfLmxhc3QoYmFzZVVybCkgPT09ICcvJyA/IF8uaW5pdGlhbChiYXNlVXJsKS5qb2luKCcnKTpiYXNlVXJsKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtcyA9IFtdO1xuICAgICAgICBpZihxdWVyeS5vZmZzZXQpe1xuICAgICAgICAgICAgcXVlcnlQYXJhbXMucHVzaCgnb2Zmc2V0PScrcXVlcnkub2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZihxdWVyeS5saW1pdCl7XG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKCdsaW1pdD0nK3F1ZXJ5LmxpbWl0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcXVlcnlTdHIgPSBfLmlzRW1wdHkocXVlcnlQYXJhbXMpID8gJycgOiAnJicrcXVlcnlQYXJhbXMuam9pbignJicpO1xuXG4gICAgICAgIHJldHVybiBgJHtiYXNlVXJsfT9xPSR7c2VhcmNofSZjPSR7c2VsZWN0LmpvaW4oJywnKX0ke3F1ZXJ5U3RyfWBcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvVHJpbml0eVF1ZXJ5QnVpbGRlci5qcyIsInVuZGVmaW5lZFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAiXSwibWFwcGluZ3MiOiJBQUFBOzs7QUFHQTtBQUNBOzs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7O0FBRUE7Ozs7Ozs7QUFDQTtBQ0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFqREEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 478:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule FluxStore\n * \n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _require = __webpack_require__(172);\n\nvar EventEmitter = _require.EventEmitter;\n\nvar invariant = __webpack_require__(177);\n\n/**\n * This class should be extended by the stores in your application, like so:\n *\n * var FluxStore = require('FluxStore');\n * var MyDispatcher = require('MyDispatcher');\n *\n * var _foo;\n *\n * class MyStore extends FluxStore {\n *\n *   getFoo() {\n *     return _foo;\n *   }\n *\n *   __onDispatch = function(action) {\n *     switch(action.type) {\n *\n *       case 'an-action':\n *         changeState(action.someData);\n *         this.__emitChange();\n *         break;\n *\n *       case 'another-action':\n *         changeStateAnotherWay(action.otherData);\n *         this.__emitChange();\n *         break;\n *\n *       default:\n *         // no op\n *     }\n *   }\n *\n * }\n *\n * module.exports = new MyStore(MyDispatcher);\n */\n\nvar FluxStore = (function () {\n\n  /**\n   * @public\n   * @param {Dispatcher} dispatcher\n   */\n\n  function FluxStore(dispatcher) {\n    var _this = this;\n\n    _classCallCheck(this, FluxStore);\n\n    this.__className = this.constructor.name;\n\n    this.__changed = false;\n    this.__changeEvent = 'change';\n    this.__dispatcher = dispatcher;\n    this.__emitter = new EventEmitter();\n    this._dispatchToken = dispatcher.register(function (payload) {\n      _this.__invokeOnDispatch(payload);\n    });\n  }\n\n  /**\n   * @public\n   * @param {function} callback\n   * @return {object} EmitterSubscription that can be used with\n   *   SubscriptionsHandler or directly used to release the subscription.\n   */\n\n  FluxStore.prototype.addListener = function addListener(callback) {\n    return this.__emitter.addListener(this.__changeEvent, callback);\n  };\n\n  /**\n   * @public\n   * @return {Dispatcher} The dispatcher that this store is registered with.\n   */\n\n  FluxStore.prototype.getDispatcher = function getDispatcher() {\n    return this.__dispatcher;\n  };\n\n  /**\n   * @public\n   * @return {string} A string the dispatcher uses to identify each store's\n   *   registered callback. This is used with the dispatcher's waitFor method\n   *   to declaratively depend on other stores updating themselves first.\n   */\n\n  FluxStore.prototype.getDispatchToken = function getDispatchToken() {\n    return this._dispatchToken;\n  };\n\n  /**\n   * @public\n   * @return {boolean} Whether the store has changed during the most recent\n   *   dispatch.\n   */\n\n  FluxStore.prototype.hasChanged = function hasChanged() {\n    !this.__dispatcher.isDispatching() ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.hasChanged(): Must be invoked while dispatching.', this.__className) : invariant(false) : undefined;\n    return this.__changed;\n  };\n\n  /**\n   * @protected\n   * Emit an event notifying listeners that the state of the store has changed.\n   */\n\n  FluxStore.prototype.__emitChange = function __emitChange() {\n    !this.__dispatcher.isDispatching() ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.__emitChange(): Must be invoked while dispatching.', this.__className) : invariant(false) : undefined;\n    this.__changed = true;\n  };\n\n  /**\n   * This method encapsulates all logic for invoking __onDispatch. It should\n   * be used for things like catching changes and emitting them after the\n   * subclass has handled a payload.\n   *\n   * @protected\n   * @param {object} payload The data dispatched by the dispatcher, describing\n   *   something that has happened in the real world: the user clicked, the\n   *   server responded, time passed, etc.\n   */\n\n  FluxStore.prototype.__invokeOnDispatch = function __invokeOnDispatch(payload) {\n    this.__changed = false;\n    this.__onDispatch(payload);\n    if (this.__changed) {\n      this.__emitter.emit(this.__changeEvent);\n    }\n  };\n\n  /**\n   * The callback that will be registered with the dispatcher during\n   * instantiation. Subclasses must override this method. This callback is the\n   * only way the store receives new data.\n   *\n   * @protected\n   * @override\n   * @param {object} payload The data dispatched by the dispatcher, describing\n   *   something that has happened in the real world: the user clicked, the\n   *   server responded, time passed, etc.\n   */\n\n  FluxStore.prototype.__onDispatch = function __onDispatch(payload) {\n     true ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s has not overridden FluxStore.__onDispatch(), which is required', this.__className) : invariant(false) : undefined;\n  };\n\n  return FluxStore;\n})();\n\nmodule.exports = FluxStore;\n\n// private\n\n// protected, available to subclasses\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(31)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9mbHV4L2xpYi9GbHV4U3RvcmUuanM/NjQwYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEZsdXhTdG9yZVxuICogXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnZmJlbWl0dGVyJyk7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSBfcmVxdWlyZS5FdmVudEVtaXR0ZXI7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHNob3VsZCBiZSBleHRlbmRlZCBieSB0aGUgc3RvcmVzIGluIHlvdXIgYXBwbGljYXRpb24sIGxpa2Ugc286XG4gKlxuICogdmFyIEZsdXhTdG9yZSA9IHJlcXVpcmUoJ0ZsdXhTdG9yZScpO1xuICogdmFyIE15RGlzcGF0Y2hlciA9IHJlcXVpcmUoJ015RGlzcGF0Y2hlcicpO1xuICpcbiAqIHZhciBfZm9vO1xuICpcbiAqIGNsYXNzIE15U3RvcmUgZXh0ZW5kcyBGbHV4U3RvcmUge1xuICpcbiAqICAgZ2V0Rm9vKCkge1xuICogICAgIHJldHVybiBfZm9vO1xuICogICB9XG4gKlxuICogICBfX29uRGlzcGF0Y2ggPSBmdW5jdGlvbihhY3Rpb24pIHtcbiAqICAgICBzd2l0Y2goYWN0aW9uLnR5cGUpIHtcbiAqXG4gKiAgICAgICBjYXNlICdhbi1hY3Rpb24nOlxuICogICAgICAgICBjaGFuZ2VTdGF0ZShhY3Rpb24uc29tZURhdGEpO1xuICogICAgICAgICB0aGlzLl9fZW1pdENoYW5nZSgpO1xuICogICAgICAgICBicmVhaztcbiAqXG4gKiAgICAgICBjYXNlICdhbm90aGVyLWFjdGlvbic6XG4gKiAgICAgICAgIGNoYW5nZVN0YXRlQW5vdGhlcldheShhY3Rpb24ub3RoZXJEYXRhKTtcbiAqICAgICAgICAgdGhpcy5fX2VtaXRDaGFuZ2UoKTtcbiAqICAgICAgICAgYnJlYWs7XG4gKlxuICogICAgICAgZGVmYXVsdDpcbiAqICAgICAgICAgLy8gbm8gb3BcbiAqICAgICB9XG4gKiAgIH1cbiAqXG4gKiB9XG4gKlxuICogbW9kdWxlLmV4cG9ydHMgPSBuZXcgTXlTdG9yZShNeURpc3BhdGNoZXIpO1xuICovXG5cbnZhciBGbHV4U3RvcmUgPSAoZnVuY3Rpb24gKCkge1xuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7RGlzcGF0Y2hlcn0gZGlzcGF0Y2hlclxuICAgKi9cblxuICBmdW5jdGlvbiBGbHV4U3RvcmUoZGlzcGF0Y2hlcikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmx1eFN0b3JlKTtcblxuICAgIHRoaXMuX19jbGFzc05hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICB0aGlzLl9fY2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuX19jaGFuZ2VFdmVudCA9ICdjaGFuZ2UnO1xuICAgIHRoaXMuX19kaXNwYXRjaGVyID0gZGlzcGF0Y2hlcjtcbiAgICB0aGlzLl9fZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB0aGlzLl9kaXNwYXRjaFRva2VuID0gZGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgX3RoaXMuX19pbnZva2VPbkRpc3BhdGNoKHBheWxvYWQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7b2JqZWN0fSBFbWl0dGVyU3Vic2NyaXB0aW9uIHRoYXQgY2FuIGJlIHVzZWQgd2l0aFxuICAgKiAgIFN1YnNjcmlwdGlvbnNIYW5kbGVyIG9yIGRpcmVjdGx5IHVzZWQgdG8gcmVsZWFzZSB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKi9cblxuICBGbHV4U3RvcmUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5fX2VtaXR0ZXIuYWRkTGlzdGVuZXIodGhpcy5fX2NoYW5nZUV2ZW50LCBjYWxsYmFjayk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybiB7RGlzcGF0Y2hlcn0gVGhlIGRpc3BhdGNoZXIgdGhhdCB0aGlzIHN0b3JlIGlzIHJlZ2lzdGVyZWQgd2l0aC5cbiAgICovXG5cbiAgRmx1eFN0b3JlLnByb3RvdHlwZS5nZXREaXNwYXRjaGVyID0gZnVuY3Rpb24gZ2V0RGlzcGF0Y2hlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fX2Rpc3BhdGNoZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybiB7c3RyaW5nfSBBIHN0cmluZyB0aGUgZGlzcGF0Y2hlciB1c2VzIHRvIGlkZW50aWZ5IGVhY2ggc3RvcmUnc1xuICAgKiAgIHJlZ2lzdGVyZWQgY2FsbGJhY2suIFRoaXMgaXMgdXNlZCB3aXRoIHRoZSBkaXNwYXRjaGVyJ3Mgd2FpdEZvciBtZXRob2RcbiAgICogICB0byBkZWNsYXJhdGl2ZWx5IGRlcGVuZCBvbiBvdGhlciBzdG9yZXMgdXBkYXRpbmcgdGhlbXNlbHZlcyBmaXJzdC5cbiAgICovXG5cbiAgRmx1eFN0b3JlLnByb3RvdHlwZS5nZXREaXNwYXRjaFRva2VuID0gZnVuY3Rpb24gZ2V0RGlzcGF0Y2hUb2tlbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzcGF0Y2hUb2tlbjtcbiAgfTtcblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBzdG9yZSBoYXMgY2hhbmdlZCBkdXJpbmcgdGhlIG1vc3QgcmVjZW50XG4gICAqICAgZGlzcGF0Y2guXG4gICAqL1xuXG4gIEZsdXhTdG9yZS5wcm90b3R5cGUuaGFzQ2hhbmdlZCA9IGZ1bmN0aW9uIGhhc0NoYW5nZWQoKSB7XG4gICAgIXRoaXMuX19kaXNwYXRjaGVyLmlzRGlzcGF0Y2hpbmcoKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5oYXNDaGFuZ2VkKCk6IE11c3QgYmUgaW52b2tlZCB3aGlsZSBkaXNwYXRjaGluZy4nLCB0aGlzLl9fY2xhc3NOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRoaXMuX19jaGFuZ2VkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEVtaXQgYW4gZXZlbnQgbm90aWZ5aW5nIGxpc3RlbmVycyB0aGF0IHRoZSBzdGF0ZSBvZiB0aGUgc3RvcmUgaGFzIGNoYW5nZWQuXG4gICAqL1xuXG4gIEZsdXhTdG9yZS5wcm90b3R5cGUuX19lbWl0Q2hhbmdlID0gZnVuY3Rpb24gX19lbWl0Q2hhbmdlKCkge1xuICAgICF0aGlzLl9fZGlzcGF0Y2hlci5pc0Rpc3BhdGNoaW5nKCkgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuX19lbWl0Q2hhbmdlKCk6IE11c3QgYmUgaW52b2tlZCB3aGlsZSBkaXNwYXRjaGluZy4nLCB0aGlzLl9fY2xhc3NOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5fX2NoYW5nZWQgPSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBlbmNhcHN1bGF0ZXMgYWxsIGxvZ2ljIGZvciBpbnZva2luZyBfX29uRGlzcGF0Y2guIEl0IHNob3VsZFxuICAgKiBiZSB1c2VkIGZvciB0aGluZ3MgbGlrZSBjYXRjaGluZyBjaGFuZ2VzIGFuZCBlbWl0dGluZyB0aGVtIGFmdGVyIHRoZVxuICAgKiBzdWJjbGFzcyBoYXMgaGFuZGxlZCBhIHBheWxvYWQuXG4gICAqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHBhcmFtIHtvYmplY3R9IHBheWxvYWQgVGhlIGRhdGEgZGlzcGF0Y2hlZCBieSB0aGUgZGlzcGF0Y2hlciwgZGVzY3JpYmluZ1xuICAgKiAgIHNvbWV0aGluZyB0aGF0IGhhcyBoYXBwZW5lZCBpbiB0aGUgcmVhbCB3b3JsZDogdGhlIHVzZXIgY2xpY2tlZCwgdGhlXG4gICAqICAgc2VydmVyIHJlc3BvbmRlZCwgdGltZSBwYXNzZWQsIGV0Yy5cbiAgICovXG5cbiAgRmx1eFN0b3JlLnByb3RvdHlwZS5fX2ludm9rZU9uRGlzcGF0Y2ggPSBmdW5jdGlvbiBfX2ludm9rZU9uRGlzcGF0Y2gocGF5bG9hZCkge1xuICAgIHRoaXMuX19jaGFuZ2VkID0gZmFsc2U7XG4gICAgdGhpcy5fX29uRGlzcGF0Y2gocGF5bG9hZCk7XG4gICAgaWYgKHRoaXMuX19jaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9fZW1pdHRlci5lbWl0KHRoaXMuX19jaGFuZ2VFdmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgZGlzcGF0Y2hlciBkdXJpbmdcbiAgICogaW5zdGFudGlhdGlvbi4gU3ViY2xhc3NlcyBtdXN0IG92ZXJyaWRlIHRoaXMgbWV0aG9kLiBUaGlzIGNhbGxiYWNrIGlzIHRoZVxuICAgKiBvbmx5IHdheSB0aGUgc3RvcmUgcmVjZWl2ZXMgbmV3IGRhdGEuXG4gICAqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQG92ZXJyaWRlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXlsb2FkIFRoZSBkYXRhIGRpc3BhdGNoZWQgYnkgdGhlIGRpc3BhdGNoZXIsIGRlc2NyaWJpbmdcbiAgICogICBzb21ldGhpbmcgdGhhdCBoYXMgaGFwcGVuZWQgaW4gdGhlIHJlYWwgd29ybGQ6IHRoZSB1c2VyIGNsaWNrZWQsIHRoZVxuICAgKiAgIHNlcnZlciByZXNwb25kZWQsIHRpbWUgcGFzc2VkLCBldGMuXG4gICAqL1xuXG4gIEZsdXhTdG9yZS5wcm90b3R5cGUuX19vbkRpc3BhdGNoID0gZnVuY3Rpb24gX19vbkRpc3BhdGNoKHBheWxvYWQpIHtcbiAgICAhZmFsc2UgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMgaGFzIG5vdCBvdmVycmlkZGVuIEZsdXhTdG9yZS5fX29uRGlzcGF0Y2goKSwgd2hpY2ggaXMgcmVxdWlyZWQnLCB0aGlzLl9fY2xhc3NOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgcmV0dXJuIEZsdXhTdG9yZTtcbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gRmx1eFN0b3JlO1xuXG4vLyBwcml2YXRlXG5cbi8vIHByb3RlY3RlZCwgYXZhaWxhYmxlIHRvIHN1YmNsYXNzZXNcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmx1eC9saWIvRmx1eFN0b3JlLmpzXG4vLyBtb2R1bGUgaWQgPSA0Nzhcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 479:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by fisa on 1/18/16.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _history = __webpack_require__(148);\n\nvar instance = (0, _history.createHistory)();\nexports.default = instance;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvR2xvYmFsSGlzdG9yeS5qcz8zNTgwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBmaXNhIG9uIDEvMTgvMTYuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtjcmVhdGVIaXN0b3J5fSBmcm9tICdoaXN0b3J5JztcblxuY29uc3QgaW5zdGFuY2UgPSBjcmVhdGVIaXN0b3J5KCk7XG5leHBvcnQgZGVmYXVsdCBpbnN0YW5jZTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9MaWJyYXJpZXMvR3JpZC9HbG9iYWxIaXN0b3J5LmpzIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0FBR0E7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 480:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactPaginate = __webpack_require__(358);\n\nvar _reactPaginate2 = _interopRequireDefault(_reactPaginate);\n\nvar _TableLoader = __webpack_require__(481);\n\nvar _TableLoader2 = _interopRequireDefault(_TableLoader);\n\nvar _NoDataRow = __webpack_require__(482);\n\nvar _NoDataRow2 = _interopRequireDefault(_NoDataRow);\n\nvar _UnsafeRow = __webpack_require__(483);\n\nvar _UnsafeRow2 = _interopRequireDefault(_UnsafeRow);\n\nvar _Header = __webpack_require__(484);\n\nvar _Header2 = _interopRequireDefault(_Header);\n\nvar _GridSearch = __webpack_require__(485);\n\nvar _GridSearch2 = _interopRequireDefault(_GridSearch);\n\nvar _GridQueryBuilder = __webpack_require__(486);\n\nvar _GridQueryBuilder2 = _interopRequireDefault(_GridQueryBuilder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar NUM_REGEX = /\\d+/;\n\n// Grid Builder\nvar STRING_OPERATORS = ['equal', 'not_equal', 'contains', 'begins_with', 'ends_with'];\nvar NUMBER_OPERATORS = ['equal', 'not_equal', 'less', 'less_or_equal', 'greater', 'greater_or_equal'];\nvar OPERATOR_MAP = {\n    'integer': NUMBER_OPERATORS,\n    'double': NUMBER_OPERATORS,\n    'string': STRING_OPERATORS,\n    'date': NUMBER_OPERATORS\n};\n\nvar GridContainer = function (_React$Component) {\n    _inherits(GridContainer, _React$Component);\n\n    function GridContainer(props) {\n        _classCallCheck(this, GridContainer);\n\n        var _this = _possibleConstructorReturn(this, (GridContainer.__proto__ || Object.getPrototypeOf(GridContainer)).call(this, props));\n\n        _this.__dispatcher = props.dispatcher;\n        _this.__store = props.store;\n        _this.__filters = _this.prepareFilterColumns(props.columns);\n\n        var query = props.options.query,\n            limit = query.limit && query.limit > 0 ? query.limit : 15,\n            maxPages = Math.ceil(props.options.max / limit),\n            page = query.page && query.page > 0 ? query.page - 1 : 0;\n\n        if (page >= maxPages) {\n            page = maxPages - 1;\n        }\n        _this.state = {\n            page: page,\n            maxPages: maxPages,\n            data: [],\n            orderBy: query.orderBy,\n            isFetching: false,\n            loaderOffset: 0,\n            showQueryBuilder: !!query.filter\n        };\n        return _this;\n    }\n\n    _createClass(GridContainer, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var data = this.__store.getData();\n            if (data.length > 0) {\n                this.setState({\n                    data: data,\n                    orderBy: this.__store.getOrderBy()\n                });\n            }\n            // Attach main listener\n            this.__store.addListener(this.onStateChange.bind(this));\n        }\n    }, {\n        key: 'onStateChange',\n        value: function onStateChange() {\n            if (this.__store.isFetching) {\n                // recompute size of loader\n                var tableHeight = Number(window.getComputedStyle(this.refs['table']).height.match(NUM_REGEX)[0]);\n                // If store loading data, just change order-by and show loader\n                this.setState({\n                    isFetching: true,\n                    loaderOffset: Math.floor(tableHeight / 2) - 20\n                });\n            } else {\n                this.setState(_extends({\n                    isFetching: false,\n                    data: this.__store.getData(),\n                    orderBy: this.__store.getOrderBy()\n                }, this.__store.getPaginationInfo()));\n            }\n        }\n    }, {\n        key: 'handleOrderBy',\n        value: function handleOrderBy(property) {\n            this.__dispatcher.dispatch({\n                action: 'order-by',\n                orderBy: property.name\n            });\n        }\n    }, {\n        key: 'handlePageClick',\n        value: function handlePageClick(e) {\n            this.__dispatcher.dispatch({\n                action: 'set-page',\n                page: e.selected\n            });\n        }\n    }, {\n        key: 'switchSearchMode',\n        value: function switchSearchMode() {\n            if (this.state.showQueryBuilder) {\n                this.__dispatcher.dispatch({\n                    action: 'clear-filter'\n                });\n            }\n            this.setState({\n                showQueryBuilder: !this.state.showQueryBuilder\n            });\n        }\n    }, {\n        key: 'prepareFilterColumns',\n        value: function prepareFilterColumns() {\n            return (0, _lodash2.default)(this.props.columns).filter(function (col) {\n                return !!(col.name === 'id' || col.allowFilter || col.type);\n            }).map(function (col) {\n                col.id = col.name;\n                if (col.id === 'id') {\n                    col.type = 'integer';\n                    col.operators = NUMBER_OPERATORS;\n                } else {\n                    col.type = col.type || 'string';\n                    col.operators = OPERATOR_MAP[col.type];\n                }\n                return col;\n            }).value();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var props = this.props,\n                show = props.options.components,\n                isEmpty = _lodash2.default.isEmpty(this.state.data) && this.state.maxPages === 0;\n\n            var paginateOptions = props.options.paginateComponent,\n                tableOptions = props.options.tableComponent,\n\n            // Query builder\n            QueryBuilder = false,\n                searchClassName = '';\n\n            if (show.queryBuilder && !_lodash2.default.isEmpty(this.__filters)) {\n                var builderClassName = 'display-none';\n                if (this.state.showQueryBuilder) {\n                    searchClassName = 'display-none';\n                    builderClassName = '';\n                }\n                QueryBuilder = _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'row pointer' },\n                        _react2.default.createElement(\n                            'a',\n                            { onClick: this.switchSearchMode.bind(this) },\n                            'Advanced search'\n                        ),\n                        _react2.default.createElement('i', { className: \"trinity trinity-close padding-left-10 \" + builderClassName,\n                            onClick: this.switchSearchMode.bind(this) })\n                    ),\n                    _react2.default.createElement(_GridQueryBuilder2.default, {\n                        className: builderClassName,\n                        filters: this.__filters,\n                        dispatcher: this.__dispatcher,\n                        filter: props.options.query.filter\n                    })\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'wrapper-grid' },\n                show.search ? _react2.default.createElement(\n                    'div',\n                    { className: 'grid-search row text-center' },\n                    _react2.default.createElement(_GridSearch2.default, {\n                        className: searchClassName,\n                        columns: props.columns,\n                        dispatcher: this.__dispatcher,\n                        initialSearch: props.options.query.search\n                    }),\n                    QueryBuilder\n                ) : false,\n                _react2.default.createElement(\n                    _TableLoader2.default,\n                    {\n                        display: this.state.isFetching,\n                        iconStyle: { top: this.state.loaderOffset + 'px' },\n                        iconClassName: 'tiecons tiecons-loading tiecons-rotate font-40'\n                    },\n                    _react2.default.createElement(\n                        'table',\n                        { ref: 'table', className: 'grid', style: { width: '100%' } },\n                        _react2.default.createElement(_Header2.default, _extends({\n                            columns: props.columns,\n                            isEmpty: isEmpty,\n                            orderBy: this.state.orderBy,\n                            orderByCallback: this.handleOrderBy.bind(this),\n                            orderByClassName: tableOptions.orderByClassName,\n                            ascClassName: tableOptions.ascClassName,\n                            descClassName: tableOptions.descClassName\n                        }, tableOptions.header)),\n                        _react2.default.createElement(\n                            'tbody',\n                            null,\n                            isEmpty ? _react2.default.createElement(_NoDataRow2.default, { colSpan: props.columns.length }) : _lodash2.default.map(this.state.data, function (el, i) {\n                                return _react2.default.createElement(_UnsafeRow2.default, { key: i, columns: props.columns, data: el });\n                            })\n                        )\n                    )\n                ),\n                show.pagination && this.state.maxPages > 1 ? _react2.default.createElement(_reactPaginate2.default, _extends({\n                    clickCallback: this.handlePageClick.bind(this),\n                    initialSelected: this.state.page,\n                    forceSelected: this.state.page,\n                    pageNum: this.state.maxPages\n                }, paginateOptions)) : false\n            );\n        }\n    }]);\n\n    return GridContainer;\n}(_react2.default.Component);\n\n/**\n * Property types\n */\n\n\nexports.default = GridContainer;\nif (true) {\n    GridContainer.propTypes = {\n        dispatcher: _react2.default.PropTypes.object,\n        store: _react2.default.PropTypes.object,\n        columns: _react2.default.PropTypes.array,\n        initialOrderBy: _react2.default.PropTypes.string\n    };\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDgwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9HcmlkQ29udGFpbmVyLmpzeD85ZGNhIiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFBhZ2luYXRlQ29tcG9uZW50IGZyb20gJ3JlYWN0LXBhZ2luYXRlJztcbmltcG9ydCBUYWJsZUxvYWRlciBmcm9tICcuL1RhYmxlTG9hZGVyLmpzeCc7XG5pbXBvcnQgTm9EYXRhUm93IGZyb20gJy4vTm9EYXRhUm93LmpzeCc7XG5pbXBvcnQgVW5zYWZlUm93IGZyb20gJy4vVW5zYWZlUm93LmpzeCc7XG5pbXBvcnQgSGVhZGVyIGZyb20gJy4vSGVhZGVyLmpzeCc7XG5pbXBvcnQgR3JpZFNlYXJjaCBmcm9tICcuL0dyaWRTZWFyY2guanN4JztcbmltcG9ydCBHcmlkUXVlcnlCdWlsZGVyIGZyb20gJy4vR3JpZFF1ZXJ5QnVpbGRlci5qc3gnO1xuXG5jb25zdCBOVU1fUkVHRVggPSAvXFxkKy87XG5cbi8vIEdyaWQgQnVpbGRlclxuY29uc3QgU1RSSU5HX09QRVJBVE9SUyA9IFsnZXF1YWwnLCAnbm90X2VxdWFsJywgJ2NvbnRhaW5zJywgJ2JlZ2luc193aXRoJywgJ2VuZHNfd2l0aCddO1xuY29uc3QgTlVNQkVSX09QRVJBVE9SUyA9IFsnZXF1YWwnLCAnbm90X2VxdWFsJywgJ2xlc3MnLCAnbGVzc19vcl9lcXVhbCcsICdncmVhdGVyJywgJ2dyZWF0ZXJfb3JfZXF1YWwnXTtcbmNvbnN0IE9QRVJBVE9SX01BUCA9IHtcbiAgICAnaW50ZWdlcic6TlVNQkVSX09QRVJBVE9SUyxcbiAgICAnZG91YmxlJzpOVU1CRVJfT1BFUkFUT1JTLFxuICAgICdzdHJpbmcnOlNUUklOR19PUEVSQVRPUlMsXG4gICAgJ2RhdGUnOk5VTUJFUl9PUEVSQVRPUlNcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JpZENvbnRhaW5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuX19kaXNwYXRjaGVyID0gcHJvcHMuZGlzcGF0Y2hlcjtcbiAgICAgICAgdGhpcy5fX3N0b3JlID0gcHJvcHMuc3RvcmU7XG4gICAgICAgIHRoaXMuX19maWx0ZXJzID0gdGhpcy5wcmVwYXJlRmlsdGVyQ29sdW1ucyhwcm9wcy5jb2x1bW5zKTtcblxuICAgICAgICBsZXQgcXVlcnkgPSBwcm9wcy5vcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgbGltaXQgPSBxdWVyeS5saW1pdCAmJiBxdWVyeS5saW1pdCA+IDAgPyBxdWVyeS5saW1pdCA6IDE1LFxuICAgICAgICAgICAgbWF4UGFnZXMgPSBNYXRoLmNlaWwocHJvcHMub3B0aW9ucy5tYXggLyBsaW1pdCksXG4gICAgICAgICAgICBwYWdlID0gKHF1ZXJ5LnBhZ2UgJiYgcXVlcnkucGFnZSA+IDApID8gcXVlcnkucGFnZSAtIDEgOiAwO1xuXG4gICAgICAgIGlmKCBwYWdlID49IG1heFBhZ2VzICl7XG4gICAgICAgICAgICBwYWdlID0gKG1heFBhZ2VzLTEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBwYWdlLFxuICAgICAgICAgICAgbWF4UGFnZXMsXG4gICAgICAgICAgICBkYXRhOltdLFxuICAgICAgICAgICAgb3JkZXJCeTogcXVlcnkub3JkZXJCeSxcbiAgICAgICAgICAgIGlzRmV0Y2hpbmc6IGZhbHNlLFxuICAgICAgICAgICAgbG9hZGVyT2Zmc2V0OiAwLFxuICAgICAgICAgICAgc2hvd1F1ZXJ5QnVpbGRlcjogISFxdWVyeS5maWx0ZXJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpe1xuICAgICAgICBsZXQgZGF0YSA9IHRoaXMuX19zdG9yZS5nZXREYXRhKCk7XG4gICAgICAgIGlmKGRhdGEubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIG9yZGVyQnk6IHRoaXMuX19zdG9yZS5nZXRPcmRlckJ5KClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEF0dGFjaCBtYWluIGxpc3RlbmVyXG4gICAgICAgIHRoaXMuX19zdG9yZS5hZGRMaXN0ZW5lcih0aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgb25TdGF0ZUNoYW5nZSgpe1xuICAgICAgICBpZih0aGlzLl9fc3RvcmUuaXNGZXRjaGluZyl7XG4gICAgICAgICAgICAvLyByZWNvbXB1dGUgc2l6ZSBvZiBsb2FkZXJcbiAgICAgICAgICAgIGxldCB0YWJsZUhlaWdodCA9IE51bWJlcih3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnJlZnNbJ3RhYmxlJ10pLmhlaWdodC5tYXRjaChOVU1fUkVHRVgpWzBdKTtcbiAgICAgICAgICAgIC8vIElmIHN0b3JlIGxvYWRpbmcgZGF0YSwganVzdCBjaGFuZ2Ugb3JkZXItYnkgYW5kIHNob3cgbG9hZGVyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBpc0ZldGNoaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxvYWRlck9mZnNldDogTWF0aC5mbG9vcih0YWJsZUhlaWdodCAvIDIpIC0gMjBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgaXNGZXRjaGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGF0YTogdGhpcy5fX3N0b3JlLmdldERhdGEoKSxcbiAgICAgICAgICAgICAgICBvcmRlckJ5OiB0aGlzLl9fc3RvcmUuZ2V0T3JkZXJCeSgpLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuX19zdG9yZS5nZXRQYWdpbmF0aW9uSW5mbygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU9yZGVyQnkocHJvcGVydHkpe1xuICAgICAgICB0aGlzLl9fZGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246ICdvcmRlci1ieScsXG4gICAgICAgICAgICBvcmRlckJ5OiBwcm9wZXJ0eS5uYW1lXG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgaGFuZGxlUGFnZUNsaWNrKGUpe1xuICAgICAgICB0aGlzLl9fZGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246J3NldC1wYWdlJyxcbiAgICAgICAgICAgIHBhZ2U6IGUuc2VsZWN0ZWRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3dpdGNoU2VhcmNoTW9kZSgpe1xuICAgICAgICBpZih0aGlzLnN0YXRlLnNob3dRdWVyeUJ1aWxkZXIpe1xuICAgICAgICAgICAgdGhpcy5fX2Rpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2NsZWFyLWZpbHRlcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd1F1ZXJ5QnVpbGRlcjogIXRoaXMuc3RhdGUuc2hvd1F1ZXJ5QnVpbGRlclxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcmVwYXJlRmlsdGVyQ29sdW1ucygpe1xuICAgICAgICByZXR1cm4gXyh0aGlzLnByb3BzLmNvbHVtbnMpXG4gICAgICAgICAgICAuZmlsdGVyKGNvbCA9PiAhIShjb2wubmFtZSA9PT0gJ2lkJyB8fCBjb2wuYWxsb3dGaWx0ZXIgfHwgY29sLnR5cGUpKVxuICAgICAgICAgICAgLm1hcCgoY29sKT0+e1xuICAgICAgICAgICAgICAgIGNvbC5pZCA9IGNvbC5uYW1lO1xuICAgICAgICAgICAgICAgIGlmKGNvbC5pZCA9PT0gJ2lkJyl7XG4gICAgICAgICAgICAgICAgICAgIGNvbC50eXBlID0gJ2ludGVnZXInO1xuICAgICAgICAgICAgICAgICAgICBjb2wub3BlcmF0b3JzID0gTlVNQkVSX09QRVJBVE9SUztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2wudHlwZSA9IGNvbC50eXBlIHx8ICdzdHJpbmcnO1xuICAgICAgICAgICAgICAgICAgICBjb2wub3BlcmF0b3JzID0gT1BFUkFUT1JfTUFQW2NvbC50eXBlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbDtcbiAgICAgICAgICAgIH0pLnZhbHVlKCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCl7XG4gICAgICAgIGxldCBwcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICBzaG93ID0gcHJvcHMub3B0aW9ucy5jb21wb25lbnRzLFxuICAgICAgICAgICAgaXNFbXB0eSA9IF8uaXNFbXB0eSh0aGlzLnN0YXRlLmRhdGEpICYmIHRoaXMuc3RhdGUubWF4UGFnZXMgPT09IDA7XG5cbiAgICAgICAgbGV0IHBhZ2luYXRlT3B0aW9ucyA9IHByb3BzLm9wdGlvbnMucGFnaW5hdGVDb21wb25lbnQsXG4gICAgICAgICAgICB0YWJsZU9wdGlvbnMgPSBwcm9wcy5vcHRpb25zLnRhYmxlQ29tcG9uZW50LFxuICAgICAgICAgICAgLy8gUXVlcnkgYnVpbGRlclxuICAgICAgICAgICAgUXVlcnlCdWlsZGVyID0gZmFsc2UsXG4gICAgICAgICAgICBzZWFyY2hDbGFzc05hbWUgPSAnJztcblxuICAgICAgICBpZihzaG93LnF1ZXJ5QnVpbGRlciAmJiAhXy5pc0VtcHR5KHRoaXMuX19maWx0ZXJzKSl7XG4gICAgICAgICAgICBsZXQgYnVpbGRlckNsYXNzTmFtZSA9ICdkaXNwbGF5LW5vbmUnO1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5zaG93UXVlcnlCdWlsZGVyKXtcbiAgICAgICAgICAgICAgICBzZWFyY2hDbGFzc05hbWUgPSAnZGlzcGxheS1ub25lJztcbiAgICAgICAgICAgICAgICBidWlsZGVyQ2xhc3NOYW1lID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBRdWVyeUJ1aWxkZXIgPSAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgcG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17dGhpcy5zd2l0Y2hTZWFyY2hNb2RlLmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkdmFuY2VkIHNlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPXtcInRyaW5pdHkgdHJpbml0eS1jbG9zZSBwYWRkaW5nLWxlZnQtMTAgXCIgKyBidWlsZGVyQ2xhc3NOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zd2l0Y2hTZWFyY2hNb2RlLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8R3JpZFF1ZXJ5QnVpbGRlclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtidWlsZGVyQ2xhc3NOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycz17dGhpcy5fX2ZpbHRlcnN9XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVyPXt0aGlzLl9fZGlzcGF0Y2hlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcj17cHJvcHMub3B0aW9ucy5xdWVyeS5maWx0ZXJ9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid3JhcHBlci1ncmlkXCI+XG4gICAgICAgICAgICAgICAgeyBzaG93LnNlYXJjaCA/XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZC1zZWFyY2ggcm93IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8R3JpZFNlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c2VhcmNoQ2xhc3NOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM9e3Byb3BzLmNvbHVtbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hlcj17dGhpcy5fX2Rpc3BhdGNoZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFNlYXJjaD17cHJvcHMub3B0aW9ucy5xdWVyeS5zZWFyY2h9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge1F1ZXJ5QnVpbGRlcn1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+IDogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPFRhYmxlTG9hZGVyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk9e3RoaXMuc3RhdGUuaXNGZXRjaGluZ31cbiAgICAgICAgICAgICAgICAgICAgaWNvblN0eWxlPXt7dG9wOiB0aGlzLnN0YXRlLmxvYWRlck9mZnNldCArICdweCd9fVxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3NOYW1lPVwidGllY29ucyB0aWVjb25zLWxvYWRpbmcgdGllY29ucy1yb3RhdGUgZm9udC00MFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8dGFibGUgcmVmPVwidGFibGVcIiBjbGFzc05hbWU9XCJncmlkXCIgc3R5bGU9e3t3aWR0aDogJzEwMCUnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1ucz17cHJvcHMuY29sdW1uc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5PXtpc0VtcHR5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyQnk9e3RoaXMuc3RhdGUub3JkZXJCeX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlckJ5Q2FsbGJhY2s9e3RoaXMuaGFuZGxlT3JkZXJCeS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyQnlDbGFzc05hbWU9e3RhYmxlT3B0aW9ucy5vcmRlckJ5Q2xhc3NOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzY0NsYXNzTmFtZT17dGFibGVPcHRpb25zLmFzY0NsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjQ2xhc3NOYW1lPXt0YWJsZU9wdGlvbnMuZGVzY0NsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4udGFibGVPcHRpb25zLmhlYWRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IGlzRW1wdHkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxOb0RhdGFSb3cgY29sU3Bhbj17cHJvcHMuY29sdW1ucy5sZW5ndGh9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXy5tYXAodGhpcy5zdGF0ZS5kYXRhLCAoZWwsIGkpPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VW5zYWZlUm93IGtleT17aX0gY29sdW1ucz17cHJvcHMuY29sdW1uc30gZGF0YT17ZWx9IC8+KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICA8L1RhYmxlTG9hZGVyPlxuICAgICAgICAgICAgICAgIHsgc2hvdy5wYWdpbmF0aW9uICYmIHRoaXMuc3RhdGUubWF4UGFnZXMgPiAxID9cbiAgICAgICAgICAgICAgICAgICAgPFBhZ2luYXRlQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlja0NhbGxiYWNrPXt0aGlzLmhhbmRsZVBhZ2VDbGljay5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFNlbGVjdGVkPXt0aGlzLnN0YXRlLnBhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZVNlbGVjdGVkPXt0aGlzLnN0YXRlLnBhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlTnVtPXt0aGlzLnN0YXRlLm1heFBhZ2VzfVxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLnBhZ2luYXRlT3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgLz4gOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm9wZXJ0eSB0eXBlc1xuICovXG5pZihERVZFTE9QTUVOVCl7XG4gICAgR3JpZENvbnRhaW5lci5wcm9wVHlwZXMgPSB7XG4gICAgICAgIGRpc3BhdGNoZXI6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QsXG4gICAgICAgIHN0b3JlOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICBjb2x1bW5zOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXksXG4gICAgICAgIGluaXRpYWxPcmRlckJ5OiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nXG4gICAgfTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9MaWJyYXJpZXMvR3JpZC9jb21wb25lbnRzL0dyaWRDb250YWluZXIuanN4IiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7Ozs7Ozs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFPQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQWRBO0FBdUJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FEQ0E7QUFDQTtBQ0NBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUkE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBUEE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUhBO0FBWEE7QUFMQTtBQXlCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUF0Q0E7QUFnREE7Ozs7QUF4TEE7QUFDQTtBQTBMQTs7Ozs7QUEzTEE7QUE4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 481:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TableLoader = function TableLoader(props) {\n    return _react2.default.createElement(\n        'div',\n        { className: 'box-table-body', style: { position: 'relative' } },\n        _react2.default.createElement(\n            'div',\n            { className: 'text-center',\n                style: {\n                    width: '100%',\n                    height: '100%',\n                    zIndex: '10',\n                    position: 'absolute',\n                    backgroundColor: 'rgba(204, 204, 204, 0.5)',\n                    display: props.display ? '' : 'none'\n                } },\n            _react2.default.createElement('i', { className: props.iconClassName,\n                style: props.iconStyle })\n        ),\n        props.children\n    );\n};\n\nexports.default = TableLoader;\n\n\nif (true) {\n    TableLoader.propTypes = {\n        iconClassName: _react2.default.PropTypes.string,\n        iconStyle: _react2.default.PropTypes.object,\n        display: _react2.default.PropTypes.bool\n    };\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDgxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9UYWJsZUxvYWRlci5qc3g/MjBhNiIsIndlYnBhY2s6Ly8vP2Q0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5jb25zdCBUYWJsZUxvYWRlciA9IChwcm9wcyk9PntcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJveC10YWJsZS1ib2R5XCIgc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScgfX0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHpJbmRleDogJzEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMDQsIDIwNCwgMjA0LCAwLjUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHByb3BzLmRpc3BsYXkgPyAnJyA6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICAgfX0+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPXtwcm9wcy5pY29uQ2xhc3NOYW1lfSBcbiAgICAgICAgICAgICAgICAgICBzdHlsZT17cHJvcHMuaWNvblN0eWxlfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUYWJsZUxvYWRlcjtcblxuaWYoREVWRUxPUE1FTlQpe1xuICAgIFRhYmxlTG9hZGVyLnByb3BUeXBlcyA9IHtcbiAgICAgICAgaWNvbkNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgaWNvblN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICBkaXNwbGF5OiBSZWFjdC5Qcm9wVHlwZXMuYm9vbFxuICAgIH07XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9UYWJsZUxvYWRlci5qc3giLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUNDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQVZBO0FBWUE7QUFiQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FEQUE7QUNDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 482:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by fisa on 6/28/16.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar NoDataRow = function NoDataRow(props) {\n    return _react2.default.createElement(\n        'tr',\n        null,\n        _react2.default.createElement(\n            'td',\n            { colSpan: props.colSpan },\n            _react2.default.createElement(\n                'div',\n                { className: 'row' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'span-none-padding-xlarge-24 margin-auto' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'span-none-xlarge-10 margin-top-20' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'info-empty-form' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'row' },\n                                _react2.default.createElement('i', { className: 'trinity-info' })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'row' },\n                                _react2.default.createElement(\n                                    'h2',\n                                    { className: 'warning' },\n                                    'NO DATA'\n                                )\n                            )\n                        )\n                    )\n                )\n            )\n        )\n    );\n};\n\n/**\n * Property types\n */\nif (true) {\n    NoDataRow.propTypes = {\n        colSpan: _react2.default.PropTypes.number\n    };\n}\n\nexports.default = NoDataRow;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDgyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9Ob0RhdGFSb3cuanN4PzAyN2UiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBmaXNhIG9uIDYvMjgvMTYuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuY29uc3QgTm9EYXRhUm93ID0gKHByb3BzKT0+e1xuICAgIHJldHVybiAoXG4gICAgICAgIDx0cj5cbiAgICAgICAgICAgIDx0ZCBjb2xTcGFuPXtwcm9wcy5jb2xTcGFufT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYW4tbm9uZS1wYWRkaW5nLXhsYXJnZS0yNCBtYXJnaW4tYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFuLW5vbmUteGxhcmdlLTEwIG1hcmdpbi10b3AtMjBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImluZm8tZW1wdHktZm9ybVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPjxpIGNsYXNzTmFtZT1cInRyaW5pdHktaW5mb1wiLz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj48aDIgY2xhc3NOYW1lPVwid2FybmluZ1wiPk5PIERBVEE8L2gyPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8ZGl2IGNsYXNzTmFtZT1cInJvdyBzcGFuLW5vbmUteGxhcmdlLTEwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgPHA+VGhpcyBsb2cgZG9lcyBub3QgY29udGFpbiBhbnkgZGF0YSB5ZXQuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgKTtcbn07XG5cbi8qKlxuICogUHJvcGVydHkgdHlwZXNcbiAqL1xuaWYoREVWRUxPUE1FTlQpe1xuICAgIE5vRGF0YVJvdy5wcm9wVHlwZXMgPSB7XG4gICAgICAgIGNvbFNwYW46IFJlYWN0LlByb3BUeXBlcy5udW1iZXJcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBOb0RhdGFSb3c7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9Ob0RhdGFSb3cuanN4IiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6IkFBQUE7OztBQUdBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQ0NBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBREE7QUFEQTtBQURBO0FBREE7QUFvQkE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 483:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Simple Row\n */\nvar UnsafeRow = function UnsafeRow(props) {\n    var data = _lodash2.default.map(props.columns, function (col, i) {\n        var colProps = {\n            key: i,\n            style: col.hidden ? { 'display': 'none' } : {},\n            className: col.className,\n            dangerouslySetInnerHTML: { __html: props.data[col.name] }\n        };\n        return _react2.default.createElement('td', colProps);\n    });\n    return _react2.default.createElement(\n        'tr',\n        null,\n        data,\n        props.children\n    );\n};\n\n/**\n * Property types\n */\nUnsafeRow.propTypes = {\n    template: _react2.default.PropTypes.array,\n    data: _react2.default.PropTypes.object\n};\n\nexports.default = UnsafeRow;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDgzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9VbnNhZmVSb3cuanN4P2FkZGUiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbi8qKlxuICogU2ltcGxlIFJvd1xuICovXG5jb25zdCBVbnNhZmVSb3cgPSAocHJvcHMpPT57XG4gICAgICAgIGxldCBkYXRhID0gXy5tYXAocHJvcHMuY29sdW1ucywgKGNvbCwgaSk9PntcbiAgICAgICAgICAgIGxldCBjb2xQcm9wcyA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IGksXG4gICAgICAgICAgICAgICAgc3R5bGU6IGNvbC5oaWRkZW4gPyB7J2Rpc3BsYXknOidub25lJ306e30sXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjb2wuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogcHJvcHMuZGF0YVtjb2wubmFtZV0gfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiA8dGQgey4uLmNvbFByb3BzfSAvPjtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAge2RhdGF9XG4gICAgICAgICAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgKTtcbn07XG5cbi8qKlxuICogUHJvcGVydHkgdHlwZXNcbiAqL1xuVW5zYWZlUm93LnByb3BUeXBlcyA9IHtcbiAgICB0ZW1wbGF0ZTogUmVhY3QuUHJvcFR5cGVzLmFycmF5LFxuICAgIGRhdGE6IFJlYWN0LlByb3BUeXBlcy5vYmplY3Rcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFVuc2FmZVJvdztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9MaWJyYXJpZXMvR3JpZC9jb21wb25lbnRzL1Vuc2FmZVJvdy5qc3giLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7OztBQUdBO0FDQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 484:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ORDER_BY_SPIT_RX = /:(?=ASC$|DESC$)/;\n\n/**\n * Table Header component\n */\nvar Header = function Header(props) {\n    var column = null,\n        order = null;\n    if (props.orderBy) {\n        var _props$orderBy$split = props.orderBy.split(ORDER_BY_SPIT_RX);\n\n        var _props$orderBy$split2 = _slicedToArray(_props$orderBy$split, 2);\n\n        column = _props$orderBy$split2[0];\n        order = _props$orderBy$split2[1];\n    }\n\n    // Header Columns\n    var headerColumns = _lodash2.default.map(props.columns, function (col, i) {\n        var className = [col.headerClassName || false, props.columnClassName || false],\n            useOrderBy = col.allowOrder && !props.isEmpty;\n\n        if (useOrderBy) {\n            className.push(props.orderByClassName || false);\n            if (column && col.name === column) {\n                className.push(!order || order === 'ASC' ? props.ascClassName : props.descClassName);\n            }\n        }\n        var attributes = {\n            key: i,\n            style: col.hidden ? { 'display': 'none' } : {},\n            onClick: useOrderBy ? props.orderByCallback.bind(null, col) : false,\n            className: _lodash2.default.filter(className, function (c) {\n                return !!c;\n            }).join(' ')\n        };\n\n        return _react2.default.createElement(\n            'th',\n            attributes,\n            col.label\n        );\n    });\n\n    return _react2.default.createElement(\n        'thead',\n        { className: props.className },\n        _react2.default.createElement(\n            'tr',\n            { className: props.rowClassName },\n            headerColumns,\n            props.children\n        )\n    );\n};\n\n/**\n * Property types\n */\nif (true) {\n    Header.propTypes = {\n        orderBy: _react2.default.PropTypes.string,\n        columns: _react2.default.PropTypes.array,\n        orderByCallback: _react2.default.PropTypes.func,\n        /** ClassNames **/\n        className: _react2.default.PropTypes.string,\n        rowClassName: _react2.default.PropTypes.string,\n        columnCLassName: _react2.default.PropTypes.string,\n        orderByCLassName: _react2.default.PropTypes.string,\n        ascClassName: _react2.default.PropTypes.string,\n        descClassName: _react2.default.PropTypes.string\n    };\n}\n\nexports.default = Header;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9IZWFkZXIuanN4PzgwOTYiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IE9SREVSX0JZX1NQSVRfUlggPSAvOig/PUFTQyR8REVTQyQpLztcblxuLyoqXG4gKiBUYWJsZSBIZWFkZXIgY29tcG9uZW50XG4gKi9cbmNvbnN0IEhlYWRlciA9IChwcm9wcyk9PntcbiAgICBsZXQgY29sdW1uID0gbnVsbCxcbiAgICAgICAgb3JkZXIgPSBudWxsO1xuICAgIGlmKHByb3BzLm9yZGVyQnkpe1xuICAgICAgICBbY29sdW1uLCBvcmRlcl0gPSBwcm9wcy5vcmRlckJ5LnNwbGl0KE9SREVSX0JZX1NQSVRfUlgpO1xuICAgIH1cblxuICAgIC8vIEhlYWRlciBDb2x1bW5zXG4gICAgbGV0IGhlYWRlckNvbHVtbnMgPSBfLm1hcChwcm9wcy5jb2x1bW5zLCAoY29sLCBpKT0+e1xuICAgICAgICBsZXQgY2xhc3NOYW1lID0gW2NvbC5oZWFkZXJDbGFzc05hbWUgfHwgZmFsc2UsIHByb3BzLmNvbHVtbkNsYXNzTmFtZSB8fCBmYWxzZV0sXG4gICAgICAgICAgICB1c2VPcmRlckJ5ID0gY29sLmFsbG93T3JkZXIgJiYgIXByb3BzLmlzRW1wdHk7XG4gICAgICAgIFxuICAgICAgICBpZih1c2VPcmRlckJ5KXtcbiAgICAgICAgICAgIGNsYXNzTmFtZS5wdXNoKHByb3BzLm9yZGVyQnlDbGFzc05hbWUgfHwgZmFsc2UpO1xuICAgICAgICAgICAgaWYoY29sdW1uICYmIGNvbC5uYW1lID09PSBjb2x1bW4gKXtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUucHVzaCgoIW9yZGVyIHx8IG9yZGVyID09PSAnQVNDJykgP1xuICAgICAgICAgICAgICAgICAgICBwcm9wcy5hc2NDbGFzc05hbWUgOiBwcm9wcy5kZXNjQ2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGxldCBhdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAga2V5OiBpLFxuICAgICAgICAgICAgc3R5bGU6IGNvbC5oaWRkZW4gPyB7J2Rpc3BsYXknOidub25lJ306IHt9LFxuICAgICAgICAgICAgb25DbGljazogdXNlT3JkZXJCeSA/IHByb3BzLm9yZGVyQnlDYWxsYmFjay5iaW5kKG51bGwsIGNvbCkgOiBmYWxzZSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXy5maWx0ZXIoY2xhc3NOYW1lLCBjID0+ICEhYykuam9pbignICcpXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIDx0aCB7Li4uYXR0cmlidXRlc30+e2NvbC5sYWJlbH08L3RoPjtcbiAgICB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDx0aGVhZCBjbGFzc05hbWU9e3Byb3BzLmNsYXNzTmFtZX0+XG4gICAgICAgICAgICA8dHIgY2xhc3NOYW1lPXtwcm9wcy5yb3dDbGFzc05hbWV9PntoZWFkZXJDb2x1bW5zfXtwcm9wcy5jaGlsZHJlbn08L3RyPlxuICAgICAgICA8L3RoZWFkPlxuICAgICk7XG59O1xuXG4vKipcbiAqIFByb3BlcnR5IHR5cGVzXG4gKi9cbmlmKERFVkVMT1BNRU5UKXtcbiAgICBIZWFkZXIucHJvcFR5cGVzID0ge1xuICAgICAgICBvcmRlckJ5OiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBjb2x1bW5zOiBSZWFjdC5Qcm9wVHlwZXMuYXJyYXksXG4gICAgICAgIG9yZGVyQnlDYWxsYmFjazogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIC8qKiBDbGFzc05hbWVzICoqL1xuICAgICAgICBjbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIHJvd0NsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgY29sdW1uQ0xhc3NOYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBvcmRlckJ5Q0xhc3NOYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBhc2NDbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGRlc2NDbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmdcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBIZWFkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9IZWFkZXIuanN4IiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQ0NBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUREQTtBQUNBO0FBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFKQTtBQUNBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUlBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 485:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Grid search form\n */\nvar GridSearch = function (_React$Component) {\n    _inherits(GridSearch, _React$Component);\n\n    function GridSearch(props) {\n        _classCallCheck(this, GridSearch);\n\n        var _this = _possibleConstructorReturn(this, (GridSearch.__proto__ || Object.getPrototypeOf(GridSearch)).call(this, props));\n\n        _this.__timerID = null;\n        _this.__initialSearch = props.initialSearch;\n        return _this;\n    }\n\n    _createClass(GridSearch, [{\n        key: 'handleChange',\n        value: function handleChange() {\n            var _this2 = this;\n\n            if (this.__timerID) {\n                clearTimeout(this.__timerID);\n            }\n            var val = this.refs['search'].value;\n            if (val.length === 0) {\n                this.props.dispatcher.dispatch({\n                    action: 'search',\n                    search: this.refs['search'].value\n                });\n            } else {\n                this.__timerID = setTimeout(function () {\n                    // Clear\n                    clearTimeout(_this2.__timerID);\n                    _this2.__timerID = null;\n\n                    _this2.props.dispatcher.dispatch({\n                        action: 'search',\n                        search: _this2.refs['search'].value\n                    });\n                }, this.props.timeout || 500);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            var className = 'display-inline-block ' + this.props.className;\n            return _react2.default.createElement(\n                'form',\n                { className: className },\n                _react2.default.createElement('input', { ref: 'search',\n                    type: 'text',\n                    placeholder: 'Search in table...',\n                    onChange: this.handleChange.bind(this),\n                    defaultValue: this.__initialSearch\n                }),\n                _react2.default.createElement(\n                    'button',\n                    { type: 'submit', onClick: function onClick(e) {\n                            e.preventDefault();\n                            _this3.handleChange();\n                            return false;\n                        } },\n                    _react2.default.createElement('i', { className: 'trinity trinity-search' })\n                )\n            );\n        }\n    }]);\n\n    return GridSearch;\n}(_react2.default.Component);\n\n/**\n * Property types\n */\n\n\nexports.default = GridSearch;\nif (true) {\n    GridSearch.propTypes = {\n        className: _react2.default.PropTypes.string\n    };\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9HcmlkU2VhcmNoLmpzeD9kOTAzIiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbi8qKlxuICogR3JpZCBzZWFyY2ggZm9ybVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmlkU2VhcmNoIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcyl7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5fX3RpbWVySUQgPSBudWxsO1xuICAgICAgICB0aGlzLl9faW5pdGlhbFNlYXJjaCA9IHByb3BzLmluaXRpYWxTZWFyY2g7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2hhbmdlKCl7XG4gICAgICAgIGlmKHRoaXMuX190aW1lcklEKXtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9fdGltZXJJRCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHZhbCA9IHRoaXMucmVmc1snc2VhcmNoJ10udmFsdWU7XG4gICAgICAgIGlmKHZhbC5sZW5ndGggPT09IDApe1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdzZWFyY2gnLFxuICAgICAgICAgICAgICAgIHNlYXJjaDogdGhpcy5yZWZzWydzZWFyY2gnXS52YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fdGltZXJJRCA9IHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICAvLyBDbGVhclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9fdGltZXJJRCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3RpbWVySUQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiB0aGlzLnJlZnNbJ3NlYXJjaCddLnZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCB0aGlzLnByb3BzLnRpbWVvdXQgfHwgNTAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpe1xuICAgICAgICBsZXQgY2xhc3NOYW1lID0gJ2Rpc3BsYXktaW5saW5lLWJsb2NrICcgKyB0aGlzLnByb3BzLmNsYXNzTmFtZTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxmb3JtIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgICAgICAgICA8aW5wdXQgcmVmPVwic2VhcmNoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlYXJjaCBpbiB0YWJsZS4uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3RoaXMuX19pbml0aWFsU2VhcmNofVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgb25DbGljaz17KGUpPT57XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJ0cmluaXR5IHRyaW5pdHktc2VhcmNoXCIgLz5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvcGVydHkgdHlwZXNcbiAqL1xuaWYoREVWRUxPUE1FTlQpe1xuICAgIEdyaWRTZWFyY2gucHJvcFR5cGVzID0ge1xuICAgICAgICBjbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmdcbiAgICB9O1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvdmVuaWNlLWpzL0xpYnJhcmllcy9HcmlkL2NvbXBvbmVudHMvR3JpZFNlYXJjaC5qc3giLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7O0FBR0E7OztBQUNBO0FDQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFJQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFQQTtBQWdCQTs7OztBQWxEQTtBQUNBO0FBb0RBOzs7OztBQXJEQTtBRHdEQTtBQ0NBO0FBQ0E7QUFEQTtBQUdBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 486:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\n/**\n * http://querybuilder.js.org/\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\n__webpack_require__(487);\n\nvar _react = __webpack_require__(181);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Events = __webpack_require__(462);\n\nvar _Events2 = _interopRequireDefault(_Events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n// import '../../../lib/query-builder.css';\n\n\nvar NUMBER_MAP = {\n    'equal': '= ${value}',\n    'not_equal': '!= ${value}',\n    'less': '< ${value}',\n    'less_or_equal': '<= ${value}',\n    'greater': '> ${value}',\n    'greater_or_equal': '>= ${value}'\n};\n\nvar EXPRESSION_RX = /^([^\\s(<>=!]+)\\s*((?:[<>!]?=|[<>])|LIKE)\\s*(\\\"[^\\.\")]+\\\"|[^\\s)]+)/;\nvar AND_CONDITION_RX = /\\s+AND\\s+/;\nvar OR_CONDITION_RX = /\\s+OR\\s+/;\nvar IS_WRAPPED_RX = /^\\(.*\\)$/;\nvar REMOVE_QUOTES_RX = /[^\"']+/;\nvar REMOVE_LIKE_SIGN_RX = /[^%]+/;\n\nvar VALUE_MAP = {\n    'integer': NUMBER_MAP,\n    'double': NUMBER_MAP,\n    'string': {\n        'equal': '= \\\"${value}\\\"',\n        'not_equal': '!= \\\"${value}\\\"',\n        'contains': 'LIKE \\\"%${value}%\\\"',\n        'begins_with': 'LIKE \\\"${value}%\\\"',\n        'ends_with': 'LIKE \\\"%${value}\\\"'\n    },\n    'date': NUMBER_MAP\n};\n\nvar QB_OPERATOR_MAP = {\n    '=': 'equal',\n    '!=': 'not_equal',\n    '<': 'less',\n    '<=': 'less_or_equal',\n    '>': 'greater',\n    '>=': 'greater_or_equal'\n};\n\nfunction createFilter(filterObj) {\n    return _lodash2.default.map(filterObj.rules, function (rule) {\n        if (rule.condition) {\n            return '(' + createFilter(rule) + ')';\n        }\n        var val = VALUE_MAP[rule.type][rule.operator].replace('${value}', rule.value);\n        return [rule.id, val].join(' ');\n    }).join(' ' + filterObj.condition + ' ');\n}\n\nfunction parseFilter(filterStr) {\n    var counter = 0,\n        deepRules = [],\n        startIndex = null,\n        rules = null,\n        rulesObj = {\n        condition: '',\n        rules: null\n    };\n\n    var parsed = _lodash2.default.map(filterStr, function (c, i) {\n        if (c === '(') {\n            counter++;\n            if (_lodash2.default.isNull(startIndex)) {\n                startIndex = i;\n                return c;\n            }\n        } else if (c === ')') {\n            counter--;\n            if (counter === 0) {\n                deepRules.push(parseFilter(filterStr.substring(startIndex + 1, i)));\n                startIndex = null;\n                return c;\n            }\n        }\n        return counter > 0 ? '*' : c;\n    }).join('');\n\n    if (AND_CONDITION_RX.test(parsed) || !OR_CONDITION_RX.test(parsed)) {\n        rules = parsed.split(AND_CONDITION_RX);\n        rulesObj.condition = 'AND';\n    } else {\n        rules = parsed.split(OR_CONDITION_RX);\n        rulesObj.condition = 'OR';\n    }\n\n    counter = 0;\n    rulesObj.rules = _lodash2.default.map(rules, function (cond) {\n        if (IS_WRAPPED_RX.test(cond)) {\n            return deepRules[counter++];\n        } else {\n            var exp = cond.match(EXPRESSION_RX);\n            var id = exp[1],\n                operator = exp[2],\n                value = exp[3].match(REMOVE_QUOTES_RX)[0];\n\n            if (operator === 'LIKE') {\n                var index = value.indexOf('%');\n                if (index === -1) {\n                    operator = 'contains';\n                } else {\n                    operator = 'begins_with';\n                    if (index === 0) {\n                        operator = 'ends_with';\n                        if (value[value.length - 1] === '%') {\n                            operator = 'contains';\n                        }\n                    }\n                }\n                value = value.match(REMOVE_LIKE_SIGN_RX)[0];\n            } else {\n                operator = QB_OPERATOR_MAP[operator];\n            }\n\n            return { id: id, operator: operator, value: value };\n        }\n    });\n    return rulesObj;\n}\n\nvar GridQueryBuilder = function (_React$Component) {\n    _inherits(GridQueryBuilder, _React$Component);\n\n    function GridQueryBuilder(props) {\n        _classCallCheck(this, GridQueryBuilder);\n\n        return _possibleConstructorReturn(this, (GridQueryBuilder.__proto__ || Object.getPrototypeOf(GridQueryBuilder)).call(this, props));\n    }\n\n    _createClass(GridQueryBuilder, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            // if(_.isEmpty(this.__filters))\n            var builder = this.refs['builder'],\n                filter = this.props.filter ? parseFilter(this.props.filter) : undefined;\n\n            builder.innerHTML = '';\n            (0, _jquery2.default)(builder).queryBuilder({\n                filters: this.props.filters,\n                rules: filter\n            });\n\n            this.builder = builder;\n            this.unlistenSearch = _Events2.default.listen(this.refs['search'], 'click', function () {\n                var rules = (0, _jquery2.default)(builder).queryBuilder('getRules');\n                if (rules) {\n                    var _filter = createFilter(rules);\n                    _this2.props.dispatcher.dispatch({\n                        action: 'filter',\n                        filter: _filter\n                    });\n                }\n            });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.unlistenSearch();\n            (0, _jquery2.default)(this.builder).queryBuilder('destroy');\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                'div',\n                { className: this.props.className, style: this.props.style },\n                _react2.default.createElement(\n                    'div',\n                    { ref: 'builder', style: { textAlign: 'initial' } },\n                    'loading...'\n                ),\n                _react2.default.createElement(\n                    'button',\n                    { ref: 'search' },\n                    'Search'\n                )\n            );\n        }\n    }]);\n\n    return GridQueryBuilder;\n}(_react2.default.Component);\n\nexports.default = GridQueryBuilder;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0dyaWQvY29tcG9uZW50cy9HcmlkUXVlcnlCdWlsZGVyLmpzeD8zZTJiIiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogaHR0cDovL3F1ZXJ5YnVpbGRlci5qcy5vcmcvXG4gKi9cblxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgJy4uLy4uLy4uL2xpYi9xdWVyeS1idWlsZGVyJztcbi8vIGltcG9ydCAnLi4vLi4vLi4vbGliL3F1ZXJ5LWJ1aWxkZXIuY3NzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgRXZlbnRzIGZyb20gJ3RyaW5pdHkvdXRpbHMvRXZlbnRzJztcblxuY29uc3QgTlVNQkVSX01BUCA9IHtcbiAgICAnZXF1YWwnOiAnPSAke3ZhbHVlfScsXG4gICAgJ25vdF9lcXVhbCc6ICchPSAke3ZhbHVlfScsXG4gICAgJ2xlc3MnOiAnPCAke3ZhbHVlfScsXG4gICAgJ2xlc3Nfb3JfZXF1YWwnOiAnPD0gJHt2YWx1ZX0nLFxuICAgICdncmVhdGVyJzogJz4gJHt2YWx1ZX0nLFxuICAgICdncmVhdGVyX29yX2VxdWFsJzogJz49ICR7dmFsdWV9J1xufTtcblxuY29uc3QgRVhQUkVTU0lPTl9SWCA9IC9eKFteXFxzKDw+PSFdKylcXHMqKCg/Ols8PiFdPz18Wzw+XSl8TElLRSlcXHMqKFxcXCJbXlxcLlwiKV0rXFxcInxbXlxccyldKykvO1xuY29uc3QgQU5EX0NPTkRJVElPTl9SWCA9IC9cXHMrQU5EXFxzKy87XG5jb25zdCBPUl9DT05ESVRJT05fUlggPSAvXFxzK09SXFxzKy87XG5jb25zdCBJU19XUkFQUEVEX1JYID0gL15cXCguKlxcKSQvO1xuY29uc3QgUkVNT1ZFX1FVT1RFU19SWCA9IC9bXlwiJ10rLztcbmNvbnN0IFJFTU9WRV9MSUtFX1NJR05fUlggPSAvW14lXSsvO1xuXG5cbmNvbnN0IFZBTFVFX01BUCA9IHtcbiAgICAnaW50ZWdlcic6TlVNQkVSX01BUCxcbiAgICAnZG91YmxlJzpOVU1CRVJfTUFQLFxuICAgICdzdHJpbmcnIDoge1xuICAgICAgICAnZXF1YWwnOiAnPSBcXFwiJHt2YWx1ZX1cXFwiJyxcbiAgICAgICAgJ25vdF9lcXVhbCc6ICchPSBcXFwiJHt2YWx1ZX1cXFwiJyxcbiAgICAgICAgJ2NvbnRhaW5zJzogJ0xJS0UgXFxcIiUke3ZhbHVlfSVcXFwiJyxcbiAgICAgICAgJ2JlZ2luc193aXRoJzogJ0xJS0UgXFxcIiR7dmFsdWV9JVxcXCInLFxuICAgICAgICAnZW5kc193aXRoJzogJ0xJS0UgXFxcIiUke3ZhbHVlfVxcXCInXG4gICAgfSxcbiAgICAnZGF0ZSc6IE5VTUJFUl9NQVBcbn07XG5cblxuY29uc3QgUUJfT1BFUkFUT1JfTUFQID0ge1xuICAgICc9JzonZXF1YWwnLFxuICAgICchPSc6J25vdF9lcXVhbCcsXG4gICAgJzwnOidsZXNzJyxcbiAgICAnPD0nOidsZXNzX29yX2VxdWFsJyxcbiAgICAnPic6J2dyZWF0ZXInLFxuICAgICc+PSc6J2dyZWF0ZXJfb3JfZXF1YWwnXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVGaWx0ZXIoZmlsdGVyT2JqKXtcbiAgICByZXR1cm4gXy5tYXAoZmlsdGVyT2JqLnJ1bGVzLCAocnVsZSk9PntcbiAgICAgICAgaWYocnVsZS5jb25kaXRpb24pe1xuICAgICAgICAgICAgcmV0dXJuICcoJyArIGNyZWF0ZUZpbHRlcihydWxlKSArICcpJztcbiAgICAgICAgfVxuICAgICAgICBsZXQgdmFsID0gVkFMVUVfTUFQW3J1bGUudHlwZV1bcnVsZS5vcGVyYXRvcl0ucmVwbGFjZSgnJHt2YWx1ZX0nLCBydWxlLnZhbHVlKTtcbiAgICAgICAgcmV0dXJuIFtydWxlLmlkLCB2YWxdLmpvaW4oJyAnKTtcbiAgICB9KS5qb2luKCcgJyArIGZpbHRlck9iai5jb25kaXRpb24gKyAnICcpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUZpbHRlcihmaWx0ZXJTdHIpe1xuICAgIGxldCBjb3VudGVyID0gMCxcbiAgICAgICAgZGVlcFJ1bGVzID0gW10sXG4gICAgICAgIHN0YXJ0SW5kZXggPSBudWxsLFxuICAgICAgICBydWxlcyA9IG51bGwsXG4gICAgICAgIHJ1bGVzT2JqID0ge1xuICAgICAgICAgICAgY29uZGl0aW9uOiAnJyxcbiAgICAgICAgICAgIHJ1bGVzOiBudWxsXG4gICAgICAgIH07XG5cbiAgICBsZXQgcGFyc2VkID0gXy5tYXAoZmlsdGVyU3RyLChjLCBpKT0+e1xuICAgICAgICBpZihjID09PSAnKCcpe1xuICAgICAgICAgICAgY291bnRlcisrO1xuICAgICAgICAgICAgaWYoXy5pc051bGwoc3RhcnRJbmRleCkpe1xuICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYoYyA9PT0gJyknKXtcbiAgICAgICAgICAgIGNvdW50ZXItLTtcbiAgICAgICAgICAgIGlmKGNvdW50ZXIgPT09IDApe1xuICAgICAgICAgICAgICAgIGRlZXBSdWxlcy5wdXNoKHBhcnNlRmlsdGVyKGZpbHRlclN0ci5zdWJzdHJpbmcoc3RhcnRJbmRleCsxLCBpKSkpO1xuICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3VudGVyID4gMCA/ICcqJyA6IGM7XG4gICAgfSkuam9pbignJyk7XG5cbiAgICBpZihBTkRfQ09ORElUSU9OX1JYLnRlc3QocGFyc2VkKSB8fCAhT1JfQ09ORElUSU9OX1JYLnRlc3QocGFyc2VkKSl7XG4gICAgICAgIHJ1bGVzID0gcGFyc2VkLnNwbGl0KEFORF9DT05ESVRJT05fUlgpO1xuICAgICAgICBydWxlc09iai5jb25kaXRpb24gPSAnQU5EJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBydWxlcyA9IHBhcnNlZC5zcGxpdChPUl9DT05ESVRJT05fUlgpO1xuICAgICAgICBydWxlc09iai5jb25kaXRpb24gPSAnT1InO1xuICAgIH1cblxuICAgIGNvdW50ZXIgPSAwO1xuICAgIHJ1bGVzT2JqLnJ1bGVzID0gXy5tYXAocnVsZXMsIChjb25kKT0+e1xuICAgICAgICBpZihJU19XUkFQUEVEX1JYLnRlc3QoY29uZCkpe1xuICAgICAgICAgICAgcmV0dXJuIGRlZXBSdWxlc1tjb3VudGVyKytdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGV4cCA9IGNvbmQubWF0Y2goRVhQUkVTU0lPTl9SWCk7XG4gICAgICAgICAgICBsZXQgaWQgPSBleHBbMV0sXG4gICAgICAgICAgICAgICAgb3BlcmF0b3IgPSBleHBbMl0sXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBleHBbM10ubWF0Y2goUkVNT1ZFX1FVT1RFU19SWClbMF07XG5cbiAgICAgICAgICAgIGlmKG9wZXJhdG9yID09PSAnTElLRScpe1xuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHZhbHVlLmluZGV4T2YoJyUnKTtcbiAgICAgICAgICAgICAgICBpZihpbmRleCA9PT0gLTEpe1xuICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9ICdjb250YWlucydcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9ICdiZWdpbnNfd2l0aCc7XG4gICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yID0gJ2VuZHNfd2l0aCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZVt2YWx1ZS5sZW5ndGgtMV0gPT09ICclJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3IgPSAnY29udGFpbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5tYXRjaChSRU1PVkVfTElLRV9TSUdOX1JYKVswXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3BlcmF0b3IgPSBRQl9PUEVSQVRPUl9NQVBbb3BlcmF0b3JdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geyBpZCwgb3BlcmF0b3IsIHZhbHVlIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBydWxlc09iajtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JpZFF1ZXJ5QnVpbGRlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCl7XG4gICAgICAgIC8vIGlmKF8uaXNFbXB0eSh0aGlzLl9fZmlsdGVycykpXG4gICAgICAgIGxldCBidWlsZGVyID0gdGhpcy5yZWZzWydidWlsZGVyJ10sXG4gICAgICAgICAgICBmaWx0ZXIgPSB0aGlzLnByb3BzLmZpbHRlciA/IHBhcnNlRmlsdGVyKHRoaXMucHJvcHMuZmlsdGVyKTp1bmRlZmluZWQ7XG5cbiAgICAgICAgYnVpbGRlci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgJChidWlsZGVyKS5xdWVyeUJ1aWxkZXIoe1xuICAgICAgICAgICAgZmlsdGVyczogdGhpcy5wcm9wcy5maWx0ZXJzLFxuICAgICAgICAgICAgcnVsZXM6IGZpbHRlclxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmJ1aWxkZXIgPSBidWlsZGVyO1xuICAgICAgICB0aGlzLnVubGlzdGVuU2VhcmNoID1cbiAgICAgICAgICAgIEV2ZW50cy5saXN0ZW4odGhpcy5yZWZzWydzZWFyY2gnXSwgJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgICAgICBsZXQgcnVsZXMgPSAkKGJ1aWxkZXIpLnF1ZXJ5QnVpbGRlcignZ2V0UnVsZXMnKTtcbiAgICAgICAgICAgICAgICBpZihydWxlcyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSBjcmVhdGVGaWx0ZXIocnVsZXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xuICAgICAgICB0aGlzLnVubGlzdGVuU2VhcmNoKCk7XG4gICAgICAgICQodGhpcy5idWlsZGVyKS5xdWVyeUJ1aWxkZXIoJ2Rlc3Ryb3knKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKXtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX0gc3R5bGU9e3RoaXMucHJvcHMuc3R5bGV9PlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPVwiYnVpbGRlclwiIHN0eWxlPXt7dGV4dEFsaWduOiAnaW5pdGlhbCd9fSA+XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmcuLi5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIHJlZj1cInNlYXJjaFwiPlNlYXJjaDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvdmVuaWNlLWpzL0xpYnJhcmllcy9HcmlkL2NvbXBvbmVudHMvR3JpZFF1ZXJ5QnVpbGRlci5qc3giLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFJQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7OztBQUhBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FDQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBRENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQVZBO0FBQ0E7QUFhQTtBQ0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTs7O0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSkE7QUFPQTs7OztBQTNDQTtBQUNBO0FBREEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 487:
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * jQuery.extendext 0.1.1\n *\n * Copyright 2014 Damien \"Mistic\" Sorel (http://www.strangeplanet.fr)\n * Licensed under MIT (http://opensource.org/licenses/MIT)\n * \n * Based on jQuery.extend by jQuery Foundation, Inc. and other contributors\n */\n\n// // Imported by Fisa\nvar $ = __webpack_require__(24);\n\n\n/**\n * EXTEDN DEXT FOR JQUERY\n */\n(function(root, factory) {\n    factory($); // MODIFIED\n    // if (typeof define === 'function' && define.amd) {\n    //     define('jQuery.extendext', ['jquery'], factory);\n    // }\n    // else {\n    //     factory(root.jQuery);\n    // }\n}(this, function($) {\n  \"use strict\";\n\n  $.extendext = function() {\n    var options, name, src, copy, copyIsArray, clone,\n      target = arguments[0] || {},\n      i = 1,\n      length = arguments.length,\n      deep = false,\n      arrayMode = 'default';\n\n    // Handle a deep copy situation\n    if ( typeof target === \"boolean\" ) {\n      deep = target;\n\n      // Skip the boolean and the target\n      target = arguments[ i++ ] || {};\n    }\n\n    // Handle array mode parameter\n    if ( typeof target === \"string\" ) {\n      // arrayMode = $([target.toLowerCase(), 'default']).filter(['default','concat','replace','extend'])[0];\n      arrayMode = $([target.toLowerCase(), 'default']).filter(function(key, val){\n          return ['default','concat','replace','extend'].indexOf(val) > -1;\n      })[0];\n\n\n      // Skip the string param\n      target = arguments[ i++ ] || {};\n    }\n\n    // Handle case when target is a string or something (possible in deep copy)\n    if ( typeof target !== \"object\" && !$.isFunction(target) ) {\n      target = {};\n    }\n\n    // Extend jQuery itself if only one argument is passed\n    if ( i === length ) {\n      target = this;\n      i--;\n    }\n\n    for ( ; i < length; i++ ) {\n      // Only deal with non-null/undefined values\n      if ( (options = arguments[ i ]) !== null ) {\n        // Special operations for arrays\n        if ($.isArray(options) && arrayMode !== 'default') {\n          clone = target && $.isArray(target) ? target : [];\n          switch (arrayMode) {\n          case 'concat':\n            target = clone.concat( $.extend( deep, [], options ) );\n            break;\n\n          case 'replace':\n            target = $.extend( deep, [], options );\n            break;\n\n          case 'extend':\n            options.forEach(function(e, i) {\n              if (typeof e === 'object') {\n                var type = $.isArray(e) ? [] : {};\n                clone[i] = $.extendext( deep, arrayMode, clone[i] || type, e );\n\n              } else if (clone.indexOf(e) === -1) {\n                clone.push(e);\n              }\n            });\n\n            target = clone;\n            break;\n          }\n        } else {\n          // Extend the base object\n          for ( name in options ) {\n            src = target[ name ];\n            copy = options[ name ];\n\n            // Prevent never-ending loop\n            if ( target === copy ) {\n              continue;\n            }\n\n            // Recurse if we're merging plain objects or arrays\n            if ( deep && copy && ( $.isPlainObject(copy) ||\n              (copyIsArray = $.isArray(copy)) ) ) {\n\n              if ( copyIsArray ) {\n                copyIsArray = false;\n                clone = src && $.isArray(src) ? src : [];\n\n              } else {\n                clone = src && $.isPlainObject(src) ? src : {};\n              }\n\n              // Never move original objects, clone them\n              target[ name ] = $.extendext( deep, arrayMode, clone, copy );\n\n            // Don't bring in undefined values\n            } else if ( copy !== undefined ) {\n              target[ name ] = copy;\n            }\n          }\n        }\n      }\n    }\n\n    // Return the modified object\n    return target;\n  };\n}));\n\n/**\n * doT JS\n */\n// doT.js\n// 2011-2014, Laura Doktorova, https://github.com/olado/doT\n// Licensed under the MIT license.\nvar GLOBALS = {\n    jQuery: $\n};\n(function() {\n\t\"use strict\";\n\n    var doT = {\n\t\tversion: \"1.0.3\",\n\t\ttemplateSettings: {\n\t\t\tevaluate:    /\\{\\{([\\s\\S]+?(\\}?)+)\\}\\}/g,\n\t\t\tinterpolate: /\\{\\{=([\\s\\S]+?)\\}\\}/g,\n\t\t\tencode:      /\\{\\{!([\\s\\S]+?)\\}\\}/g,\n\t\t\tuse:         /\\{\\{#([\\s\\S]+?)\\}\\}/g,\n\t\t\tuseParams:   /(^|[^\\w$])def(?:\\.|\\[[\\'\\\"])([\\w$\\.]+)(?:[\\'\\\"]\\])?\\s*\\:\\s*([\\w$\\.]+|\\\"[^\\\"]+\\\"|\\'[^\\']+\\'|\\{[^\\}]+\\})/g,\n\t\t\tdefine:      /\\{\\{##\\s*([\\w\\.$]+)\\s*(\\:|=)([\\s\\S]+?)#\\}\\}/g,\n\t\t\tdefineParams:/^\\s*([\\w$]+):([\\s\\S]+)/,\n\t\t\tconditional: /\\{\\{\\?(\\?)?\\s*([\\s\\S]*?)\\s*\\}\\}/g,\n\t\t\titerate:     /\\{\\{~\\s*(?:\\}\\}|([\\s\\S]+?)\\s*\\:\\s*([\\w$]+)\\s*(?:\\:\\s*([\\w$]+))?\\s*\\}\\})/g,\n\t\t\tvarname:\t\"it\",\n\t\t\tstrip:\t\ttrue,\n\t\t\tappend:\t\ttrue,\n\t\t\tselfcontained: false,\n\t\t\tdoNotSkipEncoded: false\n\t\t},\n\t\ttemplate: undefined, //fn, compile template\n\t\tcompile:  undefined  //fn, for express\n\t};\n    var _globals;\n\n\tdoT.encodeHTMLSource = function(doNotSkipEncoded) {\n\t\tvar encodeHTMLRules = { \"&\": \"&#38;\", \"<\": \"&#60;\", \">\": \"&#62;\", '\"': \"&#34;\", \"'\": \"&#39;\", \"/\": \"&#47;\" },\n\t\t\tmatchHTML = doNotSkipEncoded ? /[&<>\"'\\/]/g : /&(?!#?\\w+;)|<|>|\"|'|\\//g;\n\t\treturn function(code) {\n\t\t\treturn code ? code.toString().replace(matchHTML, function(m) {return encodeHTMLRules[m] || m;}) : \"\";\n\t\t};\n\t};\n\n\t_globals = (function(){ return this || (0,eval)(\"this\"); }());\n\n\tif (typeof module !== \"undefined\" && module.exports) {\n\t\tmodule.exports = doT;\n\t} else if (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function(){return doT;}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {\n\t\t_globals.doT = doT;\n\t}\n\n\tvar startend = {\n\t\tappend: { start: \"'+(\",      end: \")+'\",      startencode: \"'+encodeHTML(\" },\n\t\tsplit:  { start: \"';out+=(\", end: \");out+='\", startencode: \"';out+=encodeHTML(\" }\n\t}, skip = /$^/;\n\n\tfunction resolveDefs(c, block, def) {\n\t\treturn ((typeof block === \"string\") ? block : block.toString())\n\t\t.replace(c.define || skip, function(m, code, assign, value) {\n\t\t\tif (code.indexOf(\"def.\") === 0) {\n\t\t\t\tcode = code.substring(4);\n\t\t\t}\n\t\t\tif (!(code in def)) {\n\t\t\t\tif (assign === \":\") {\n\t\t\t\t\tif (c.defineParams) value.replace(c.defineParams, function(m, param, v) {\n\t\t\t\t\t\tdef[code] = {arg: param, text: v};\n\t\t\t\t\t});\n\t\t\t\t\tif (!(code in def)) def[code]= value;\n\t\t\t\t} else {\n\t\t\t\t\tnew Function(\"def\", \"def['\"+code+\"']=\" + value)(def);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"\";\n\t\t})\n\t\t.replace(c.use || skip, function(m, code) {\n\t\t\tif (c.useParams) code = code.replace(c.useParams, function(m, s, d, param) {\n\t\t\t\tif (def[d] && def[d].arg && param) {\n\t\t\t\t\tvar rw = (d+\":\"+param).replace(/'|\\\\/g, \"_\");\n\t\t\t\t\tdef.__exp = def.__exp || {};\n\t\t\t\t\tdef.__exp[rw] = def[d].text.replace(new RegExp(\"(^|[^\\\\w$])\" + def[d].arg + \"([^\\\\w$])\", \"g\"), \"$1\" + param + \"$2\");\n\t\t\t\t\treturn s + \"def.__exp['\"+rw+\"']\";\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar v = new Function(\"def\", \"return \" + code)(def);\n\t\t\treturn v ? resolveDefs(c, v, def) : v;\n\t\t});\n\t}\n\n\tfunction unescape(code) {\n\t\treturn code.replace(/\\\\('|\\\\)/g, \"$1\").replace(/[\\r\\t\\n]/g, \" \");\n\t}\n\n\tdoT.template = function(tmpl, c, def) {\n\t\tc = c || doT.templateSettings;\n\t\tvar cse = c.append ? startend.append : startend.split, needhtmlencode, sid = 0, indv,\n\t\t\tstr  = (c.use || c.define) ? resolveDefs(c, tmpl, def || {}) : tmpl;\n\n\t\tstr = (\"var out='\" + (c.strip ? str.replace(/(^|\\r|\\n)\\t* +| +\\t*(\\r|\\n|$)/g,\" \")\n\t\t\t\t\t.replace(/\\r|\\n|\\t|\\/\\*[\\s\\S]*?\\*\\//g,\"\"): str)\n\t\t\t.replace(/'|\\\\/g, \"\\\\$&\")\n\t\t\t.replace(c.interpolate || skip, function(m, code) {\n\t\t\t\treturn cse.start + unescape(code) + cse.end;\n\t\t\t})\n\t\t\t.replace(c.encode || skip, function(m, code) {\n\t\t\t\tneedhtmlencode = true;\n\t\t\t\treturn cse.startencode + unescape(code) + cse.end;\n\t\t\t})\n\t\t\t.replace(c.conditional || skip, function(m, elsecase, code) {\n\t\t\t\treturn elsecase ?\n\t\t\t\t\t(code ? \"';}else if(\" + unescape(code) + \"){out+='\" : \"';}else{out+='\") :\n\t\t\t\t\t(code ? \"';if(\" + unescape(code) + \"){out+='\" : \"';}out+='\");\n\t\t\t})\n\t\t\t.replace(c.iterate || skip, function(m, iterate, vname, iname) {\n\t\t\t\tif (!iterate) return \"';} } out+='\";\n\t\t\t\tsid+=1; indv=iname || \"i\"+sid; iterate=unescape(iterate);\n\t\t\t\treturn \"';var arr\"+sid+\"=\"+iterate+\";if(arr\"+sid+\"){var \"+vname+\",\"+indv+\"=-1,l\"+sid+\"=arr\"+sid+\".length-1;while(\"+indv+\"<l\"+sid+\"){\"\n\t\t\t\t\t+vname+\"=arr\"+sid+\"[\"+indv+\"+=1];out+='\";\n\t\t\t})\n\t\t\t.replace(c.evaluate || skip, function(m, code) {\n\t\t\t\treturn \"';\" + unescape(code) + \"out+='\";\n\t\t\t})\n\t\t\t+ \"';return out;\")\n\t\t\t.replace(/\\n/g, \"\\\\n\").replace(/\\t/g, '\\\\t').replace(/\\r/g, \"\\\\r\")\n\t\t\t.replace(/(\\s|;|\\}|^|\\{)out\\+='';/g, '$1').replace(/\\+''/g, \"\");\n\t\t\t//.replace(/(\\s|;|\\}|^|\\{)out\\+=''\\+/g,'$1out+=');\n\n\t\tif (needhtmlencode) {\n\t\t\tif (!c.selfcontained && _globals && !_globals._encodeHTML) _globals._encodeHTML = doT.encodeHTMLSource(c.doNotSkipEncoded);\n\t\t\tstr = \"var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : (\"\n\t\t\t\t+ doT.encodeHTMLSource.toString() + \"(\" + (c.doNotSkipEncoded || '') + \"));\"\n\t\t\t\t+ str;\n\t\t}\n\t\ttry {\n\t\t\treturn new Function(c.varname, str);\n\t\t} catch (e) {\n\t\t\tif (typeof console !== \"undefined\") console.log(\"Could not create a template function: \" + str);\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\tdoT.compile = function(tmpl, def) {\n\t\treturn doT.template(tmpl, null, def);\n\t};\n    GLOBALS.doT = doT;\n}());\n\n/*!\n * jQuery QueryBuilder 2.3.3\n * Copyright 2014-2016 Damien \"Mistic\" Sorel (http://www.strangeplanet.fr)\n * Licensed under MIT (http://opensource.org/licenses/MIT)\n */\n\n// Languages: en\n// Plugins: bt-checkbox, bt-selectpicker, bt-tooltip-errors, change-filters, filter-description, invert, mongodb-support, sortable, sql-support, unique-filter\n(function(root, factory) {\n    // if (typeof define == 'function' && define.amd) {\n    //     define('query-builder', ['jquery', 'doT', 'jQuery.extendext'], factory);\n    // }\n    // else {\n        factory(root.jQuery, root.doT);\n    // }\n}(GLOBALS, function($, doT) {\n\"use strict\";\n\n// CLASS DEFINITION\n// ===============================\nvar QueryBuilder = function($el, options) {\n    this.init($el, options);\n};\n\n// EVENTS SYSTEM\n// ===============================\n$.extend(QueryBuilder.prototype, {\n    change: function(type, value) {\n        var event = new $.Event(type + '.queryBuilder.filter', {\n            builder: this,\n            value: value\n        });\n\n        this.$el.triggerHandler(event, Array.prototype.slice.call(arguments, 2));\n\n        return event.value;\n    },\n\n    trigger: function(type) {\n        var event = new $.Event(type + '.queryBuilder', {\n            builder: this\n        });\n\n        this.$el.triggerHandler(event, Array.prototype.slice.call(arguments, 1));\n\n        return event;\n    },\n\n    on: function(type, cb) {\n        this.$el.on(type + '.queryBuilder', cb);\n        return this;\n    },\n\n    off: function(type, cb) {\n        this.$el.off(type + '.queryBuilder', cb);\n        return this;\n    },\n\n    once: function(type, cb) {\n        this.$el.one(type + '.queryBuilder', cb);\n        return this;\n    }\n});\n\n\n// PLUGINS SYSTEM\n// ===============================\nQueryBuilder.plugins = {};\n\n/**\n * Get or extend the default configuration\n * @param options {object,optional} new configuration, leave undefined to get the default config\n * @return {undefined|object} nothing or configuration object (copy)\n */\nQueryBuilder.defaults = function(options) {\n    if (typeof options == 'object') {\n        $.extendext(true, 'replace', QueryBuilder.DEFAULTS, options);\n    }\n    else if (typeof options == 'string') {\n        if (typeof QueryBuilder.DEFAULTS[options] == 'object') {\n            return $.extend(true, {}, QueryBuilder.DEFAULTS[options]);\n        }\n        else {\n            return QueryBuilder.DEFAULTS[options];\n        }\n    }\n    else {\n        return $.extend(true, {}, QueryBuilder.DEFAULTS);\n    }\n};\n\n/**\n * Define a new plugin\n * @param name {string}\n * @param fct {function}\n * @param  def {object,optional} default configuration\n */\nQueryBuilder.define = function(name, fct, def) {\n    QueryBuilder.plugins[name] = {\n        fct: fct,\n        def: def || {}\n    };\n};\n\n/**\n * Add new methods\n * @param {object}\n */\nQueryBuilder.extend = function(methods) {\n    $.extend(QueryBuilder.prototype, methods);\n};\n\n/**\n * Init plugins for an instance\n * @throws ConfigError\n */\nQueryBuilder.prototype.initPlugins = function() {\n    if (!this.plugins) {\n        return;\n    }\n\n    if ($.isArray(this.plugins)) {\n        var tmp = {};\n        this.plugins.forEach(function(plugin) {\n            tmp[plugin] = null;\n        });\n        this.plugins = tmp;\n    }\n\n    Object.keys(this.plugins).forEach(function(plugin) {\n        if (plugin in QueryBuilder.plugins) {\n            this.plugins[plugin] = $.extend(true, {},\n                QueryBuilder.plugins[plugin].def,\n                this.plugins[plugin] || {}\n            );\n\n            QueryBuilder.plugins[plugin].fct.call(this, this.plugins[plugin]);\n        }\n        else {\n            Utils.error('Config', 'Unable to find plugin \"{0}\"', plugin);\n        }\n    }, this);\n};\n\n\n/**\n * Allowed types and their internal representation\n */\nQueryBuilder.types = {\n    'string':   'string',\n    'integer':  'number',\n    'double':   'number',\n    'number':   'number',\n    'date':     'datetime',\n    'time':     'datetime',\n    'datetime': 'datetime',\n    'boolean':  'boolean'\n};\n\n/**\n * Allowed inputs\n */\nQueryBuilder.inputs = [\n    'text',\n    'textarea',\n    'radio',\n    'checkbox',\n    'select'\n];\n\n/**\n * Runtime modifiable options with `setOptions` method\n */\nQueryBuilder.modifiable_options = [\n    'display_errors',\n    'allow_groups',\n    'allow_empty',\n    'default_condition',\n    'default_filter'\n];\n\n/**\n * CSS selectors for common components\n */\nvar Selectors = QueryBuilder.selectors = {\n    group_container:      '.rules-group-container',\n    rule_container:       '.rule-container',\n    filter_container:     '.rule-filter-container',\n    operator_container:   '.rule-operator-container',\n    value_container:      '.rule-value-container',\n    error_container:      '.error-container',\n    condition_container:  '.rules-group-header .group-conditions',\n\n    rule_header:          '.rule-header',\n    group_header:         '.rules-group-header',\n    group_actions:        '.group-actions',\n    rule_actions:         '.rule-actions',\n\n    rules_list:           '.rules-group-body>.rules-list',\n\n    group_condition:      '.rules-group-header [name$=_cond]',\n    rule_filter:          '.rule-filter-container [name$=_filter]',\n    rule_operator:        '.rule-operator-container [name$=_operator]',\n    rule_value:           '.rule-value-container [name*=_value_]',\n\n    add_rule:             '[data-add=rule]',\n    delete_rule:          '[data-delete=rule]',\n    add_group:            '[data-add=group]',\n    delete_group:         '[data-delete=group]'\n};\n\n/**\n * Template strings (see `template.js`)\n */\nQueryBuilder.templates = {};\n\n/**\n * Localized strings (see `i18n/`)\n */\nQueryBuilder.regional = {};\n\n/**\n * Default operators\n */\nQueryBuilder.OPERATORS = {\n    equal:            { type: 'equal',            nb_inputs: 1, multiple: false, apply_to: ['string', 'number', 'datetime', 'boolean'] },\n    not_equal:        { type: 'not_equal',        nb_inputs: 1, multiple: false, apply_to: ['string', 'number', 'datetime', 'boolean'] },\n    in:               { type: 'in',               nb_inputs: 1, multiple: true,  apply_to: ['string', 'number', 'datetime'] },\n    not_in:           { type: 'not_in',           nb_inputs: 1, multiple: true,  apply_to: ['string', 'number', 'datetime'] },\n    less:             { type: 'less',             nb_inputs: 1, multiple: false, apply_to: ['number', 'datetime'] },\n    less_or_equal:    { type: 'less_or_equal',    nb_inputs: 1, multiple: false, apply_to: ['number', 'datetime'] },\n    greater:          { type: 'greater',          nb_inputs: 1, multiple: false, apply_to: ['number', 'datetime'] },\n    greater_or_equal: { type: 'greater_or_equal', nb_inputs: 1, multiple: false, apply_to: ['number', 'datetime'] },\n    between:          { type: 'between',          nb_inputs: 2, multiple: false, apply_to: ['number', 'datetime'] },\n    not_between:      { type: 'not_between',      nb_inputs: 2, multiple: false, apply_to: ['number', 'datetime'] },\n    begins_with:      { type: 'begins_with',      nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    not_begins_with:  { type: 'not_begins_with',  nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    contains:         { type: 'contains',         nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    not_contains:     { type: 'not_contains',     nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    ends_with:        { type: 'ends_with',        nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    not_ends_with:    { type: 'not_ends_with',    nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    is_empty:         { type: 'is_empty',         nb_inputs: 0, multiple: false, apply_to: ['string'] },\n    is_not_empty:     { type: 'is_not_empty',     nb_inputs: 0, multiple: false, apply_to: ['string'] },\n    is_null:          { type: 'is_null',          nb_inputs: 0, multiple: false, apply_to: ['string', 'number', 'datetime', 'boolean'] },\n    is_not_null:      { type: 'is_not_null',      nb_inputs: 0, multiple: false, apply_to: ['string', 'number', 'datetime', 'boolean'] }\n};\n\n/**\n * Default configuration\n */\nQueryBuilder.DEFAULTS = {\n    filters: [],\n    plugins: [],\n\n    sort_filters: false,\n    display_errors: true,\n    allow_groups: -1,\n    allow_empty: false,\n    conditions: ['AND', 'OR'],\n    default_condition: 'AND',\n    inputs_separator: ' , ',\n    select_placeholder: '------',\n    display_empty_filter: true,\n    default_filter: null,\n    optgroups: {},\n\n    default_rule_flags: {\n        filter_readonly: false,\n        operator_readonly: false,\n        value_readonly: false,\n        no_delete: false\n    },\n\n    default_group_flags: {\n        condition_readonly: false,\n        no_delete: false\n    },\n\n    templates: {\n        group: null,\n        rule: null,\n        filterSelect: null,\n        operatorSelect: null\n    },\n\n    lang_code: 'en',\n    lang: {},\n\n    operators: [\n        'equal',\n        'not_equal',\n        'in',\n        'not_in',\n        'less',\n        'less_or_equal',\n        'greater',\n        'greater_or_equal',\n        'between',\n        'not_between',\n        'begins_with',\n        'not_begins_with',\n        'contains',\n        'not_contains',\n        'ends_with',\n        'not_ends_with',\n        'is_empty',\n        'is_not_empty',\n        'is_null',\n        'is_not_null'\n    ],\n\n    icons: {\n        add_group:    'glyphicon glyphicon-plus-sign',\n        add_rule:     'glyphicon glyphicon-plus',\n        remove_group: 'glyphicon glyphicon-remove',\n        remove_rule:  'glyphicon glyphicon-remove',\n        error:        'glyphicon glyphicon-warning-sign'\n    }\n};\n\n\n/**\n * Init the builder\n */\nQueryBuilder.prototype.init = function($el, options) {\n    $el[0].queryBuilder = this;\n    this.$el = $el;\n\n    // PROPERTIES\n    this.settings = $.extendext(true, 'replace', {}, QueryBuilder.DEFAULTS, options);\n    this.model = new Model();\n    this.status = {\n        group_id: 0,\n        rule_id: 0,\n        generated_id: false,\n        has_optgroup: false,\n        has_operator_oprgroup: false,\n        id: null,\n        updating_value: false\n    };\n\n    // \"allow_groups\" can be boolean or int\n    if (this.settings.allow_groups === false) {\n        this.settings.allow_groups = 0;\n    }\n    else if (this.settings.allow_groups === true) {\n        this.settings.allow_groups = -1;\n    }\n\n    // SETTINGS SHORTCUTS\n    this.filters = this.settings.filters;\n    this.icons = this.settings.icons;\n    this.operators = this.settings.operators;\n    this.templates = this.settings.templates;\n    this.plugins = this.settings.plugins;\n\n    // translations : english << 'lang_code' << custom\n    if (QueryBuilder.regional['en'] === undefined) {\n        Utils.error('Config', '\"i18n/en.js\" not loaded.');\n    }\n    this.lang = $.extendext(true, 'replace', {}, QueryBuilder.regional['en'], QueryBuilder.regional[this.settings.lang_code], this.settings.lang);\n\n    // init templates\n    Object.keys(this.templates).forEach(function(tpl) {\n        if (!this.templates[tpl]) {\n            this.templates[tpl] = QueryBuilder.templates[tpl];\n        }\n        if (typeof this.templates[tpl] == 'string') {\n            this.templates[tpl] = doT.template(this.templates[tpl]);\n        }\n    }, this);\n\n    // ensure we have a container id\n    if (!this.$el.attr('id')) {\n        this.$el.attr('id', 'qb_' + Math.floor(Math.random() * 99999));\n        this.status.generated_id = true;\n    }\n    this.status.id = this.$el.attr('id');\n\n    // INIT\n    this.$el.addClass('query-builder form-inline');\n\n    this.filters = this.checkFilters(this.filters);\n    this.operators = this.checkOperators(this.operators);\n    this.bindEvents();\n    this.initPlugins();\n\n    this.trigger('afterInit');\n\n    if (options.rules) {\n        this.setRules(options.rules);\n        delete this.settings.rules;\n    }\n    else {\n        this.setRoot(true);\n    }\n};\n\n/**\n * Checks the configuration of each filter\n * @throws ConfigError\n */\nQueryBuilder.prototype.checkFilters = function(filters) {\n    var definedFilters = [];\n\n    if (!filters || filters.length === 0) {\n        Utils.error('Config', 'Missing filters list');\n    }\n\n    filters.forEach(function(filter, i) {\n        if (!filter.id) {\n            Utils.error('Config', 'Missing filter {0} id', i);\n        }\n        if (definedFilters.indexOf(filter.id) != -1) {\n            Utils.error('Config', 'Filter \"{0}\" already defined', filter.id);\n        }\n        definedFilters.push(filter.id);\n\n        if (!filter.type) {\n            filter.type = 'string';\n        }\n        else if (!QueryBuilder.types[filter.type]) {\n            Utils.error('Config', 'Invalid type \"{0}\"', filter.type);\n        }\n\n        if (!filter.input) {\n            filter.input = 'text';\n        }\n        else if (typeof filter.input != 'function' && QueryBuilder.inputs.indexOf(filter.input) == -1) {\n            Utils.error('Config', 'Invalid input \"{0}\"', filter.input);\n        }\n\n        if (filter.operators) {\n            filter.operators.forEach(function(operator) {\n                if (typeof operator != 'string') {\n                    Utils.error('Config', 'Filter operators must be global operators types (string)');\n                }\n            });\n        }\n\n        if (!filter.field) {\n            filter.field = filter.id;\n        }\n        if (!filter.label) {\n            filter.label = filter.field;\n        }\n\n        if (!filter.optgroup) {\n            filter.optgroup = null;\n        }\n        else {\n            this.status.has_optgroup = true;\n\n            // register optgroup if needed\n            if (!this.settings.optgroups[filter.optgroup]) {\n                this.settings.optgroups[filter.optgroup] = filter.optgroup;\n            }\n        }\n\n        switch (filter.input) {\n            case 'radio': case 'checkbox':\n                if (!filter.values || filter.values.length < 1) {\n                    Utils.error('Config', 'Missing filter \"{0}\" values', filter.id);\n                }\n                break;\n\n            case 'select':\n                if (filter.placeholder) {\n                    if (filter.placeholder_value === undefined) {\n                        filter.placeholder_value = -1;\n                    }\n                    Utils.iterateOptions(filter.values, function(key) {\n                        if (key == filter.placeholder_value) {\n                            Utils.error('Config', 'Placeholder of filter \"{0}\" overlaps with one of its values', filter.id);\n                        }\n                    });\n                }\n                break;\n        }\n    }, this);\n\n    if (this.settings.sort_filters) {\n        if (typeof this.settings.sort_filters == 'function') {\n            filters.sort(this.settings.sort_filters);\n        }\n        else {\n            var self = this;\n            filters.sort(function(a, b) {\n                return self.translateLabel(a.label).localeCompare(self.translateLabel(b.label));\n            });\n        }\n    }\n\n    if (this.status.has_optgroup) {\n        filters = Utils.groupSort(filters, 'optgroup');\n    }\n\n    return filters;\n};\n\n/**\n * Checks the configuration of each operator\n * @throws ConfigError\n */\nQueryBuilder.prototype.checkOperators = function(operators) {\n    var definedOperators = [];\n\n    operators.forEach(function(operator, i) {\n        if (typeof operator == 'string') {\n            if (!QueryBuilder.OPERATORS[operator]) {\n                Utils.error('Config', 'Unknown operator \"{0}\"', operator);\n            }\n\n            operators[i] = operator = $.extendext(true, 'replace', {}, QueryBuilder.OPERATORS[operator]);\n        }\n        else {\n            if (!operator.type) {\n                Utils.error('Config', 'Missing \"type\" for operator {0}', i);\n            }\n\n            if (QueryBuilder.OPERATORS[operator.type]) {\n                operators[i] = operator = $.extendext(true, 'replace', {}, QueryBuilder.OPERATORS[operator.type], operator);\n            }\n\n            if (operator.nb_inputs === undefined || operator.apply_to === undefined) {\n                Utils.error('Config', 'Missing \"nb_inputs\" and/or \"apply_to\" for operator \"{0}\"', operator.type);\n            }\n        }\n\n        if (definedOperators.indexOf(operator.type) != -1) {\n            Utils.error('Config', 'Operator \"{0}\" already defined', operator.type);\n        }\n        definedOperators.push(operator.type);\n\n        if (!operator.optgroup) {\n            operator.optgroup = null;\n        }\n        else {\n            this.status.has_operator_optgroup = true;\n\n            // register optgroup if needed\n            if (!this.settings.optgroups[operator.optgroup]) {\n                this.settings.optgroups[operator.optgroup] = operator.optgroup;\n            }\n        }\n    }, this);\n\n    if (this.status.has_operator_optgroup) {\n        operators = Utils.groupSort(operators, 'optgroup');\n    }\n\n    return operators;\n};\n\n/**\n * Add all events listeners\n */\nQueryBuilder.prototype.bindEvents = function() {\n    var self = this;\n\n    // group condition change\n    this.$el.on('change.queryBuilder', Selectors.group_condition, function() {\n        if ($(this).is(':checked')) {\n            var $group = $(this).closest(Selectors.group_container);\n            Model($group).condition = $(this).val();\n        }\n    });\n\n    // rule filter change\n    this.$el.on('change.queryBuilder', Selectors.rule_filter, function() {\n        var $rule = $(this).closest(Selectors.rule_container);\n        Model($rule).filter = self.getFilterById($(this).val());\n    });\n\n    // rule operator change\n    this.$el.on('change.queryBuilder', Selectors.rule_operator, function() {\n        var $rule = $(this).closest(Selectors.rule_container);\n        Model($rule).operator = self.getOperatorByType($(this).val());\n    });\n\n    // add rule button\n    this.$el.on('click.queryBuilder', Selectors.add_rule, function() {\n        var $group = $(this).closest(Selectors.group_container);\n        self.addRule(Model($group));\n    });\n\n    // delete rule button\n    this.$el.on('click.queryBuilder', Selectors.delete_rule, function() {\n        var $rule = $(this).closest(Selectors.rule_container);\n        self.deleteRule(Model($rule));\n    });\n\n    if (this.settings.allow_groups !== 0) {\n        // add group button\n        this.$el.on('click.queryBuilder', Selectors.add_group, function() {\n            var $group = $(this).closest(Selectors.group_container);\n            self.addGroup(Model($group));\n        });\n\n        // delete group button\n        this.$el.on('click.queryBuilder', Selectors.delete_group, function() {\n            var $group = $(this).closest(Selectors.group_container);\n            self.deleteGroup(Model($group));\n        });\n    }\n\n    // model events\n    this.model.on({\n        'drop': function(e, node) {\n            node.$el.remove();\n            self.refreshGroupsConditions();\n        },\n        'add': function(e, node, index) {\n            if (index === 0) {\n                node.$el.prependTo(node.parent.$el.find('>' + Selectors.rules_list));\n            }\n            else {\n                node.$el.insertAfter(node.parent.rules[index - 1].$el);\n            }\n            self.refreshGroupsConditions();\n        },\n        'move': function(e, node, group, index) {\n            node.$el.detach();\n\n            if (index === 0) {\n                node.$el.prependTo(group.$el.find('>' + Selectors.rules_list));\n            }\n            else {\n                node.$el.insertAfter(group.rules[index - 1].$el);\n            }\n            self.refreshGroupsConditions();\n        },\n        'update': function(e, node, field, value, oldValue) {\n            if (node instanceof Rule) {\n                switch (field) {\n                    case 'error':\n                        self.displayError(node);\n                        break;\n\n                    case 'flags':\n                        self.applyRuleFlags(node);\n                        break;\n\n                    case 'filter':\n                        self.updateRuleFilter(node);\n                        break;\n\n                    case 'operator':\n                        self.updateRuleOperator(node, oldValue);\n                        break;\n\n                    case 'value':\n                        self.updateRuleValue(node);\n                        break;\n                }\n            }\n            else {\n                switch (field) {\n                    case 'error':\n                        self.displayError(node);\n                        break;\n\n                    case 'flags':\n                        self.applyGroupFlags(node);\n                        break;\n\n                    case 'condition':\n                        self.updateGroupCondition(node);\n                        break;\n                }\n            }\n        }\n    });\n};\n\n/**\n * Create the root group\n * @param addRule {bool,optional} add a default empty rule\n * @param data {mixed,optional} group custom data\n * @param flags {object,optional} flags to apply to the group\n * @return group {Root}\n */\nQueryBuilder.prototype.setRoot = function(addRule, data, flags) {\n    addRule = (addRule === undefined || addRule === true);\n\n    var group_id = this.nextGroupId();\n    var $group = $(this.getGroupTemplate(group_id, 1));\n\n    this.$el.append($group);\n    this.model.root = new Group(null, $group);\n    this.model.root.model = this.model;\n\n    this.model.root.data = data;\n    this.model.root.flags = $.extend({}, this.settings.default_group_flags, flags);\n\n    this.trigger('afterAddGroup', this.model.root);\n\n    this.model.root.condition = this.settings.default_condition;\n\n    if (addRule) {\n        this.addRule(this.model.root);\n    }\n\n    return this.model.root;\n};\n\n/**\n * Add a new group\n * @param parent {Group}\n * @param addRule {bool,optional} add a default empty rule\n * @param data {mixed,optional} group custom data\n * @param flags {object,optional} flags to apply to the group\n * @return group {Group}\n */\nQueryBuilder.prototype.addGroup = function(parent, addRule, data, flags) {\n    addRule = (addRule === undefined || addRule === true);\n\n    var level = parent.level + 1;\n\n    var e = this.trigger('beforeAddGroup', parent, addRule, level);\n    if (e.isDefaultPrevented()) {\n        return null;\n    }\n\n    var group_id = this.nextGroupId();\n    var $group = $(this.getGroupTemplate(group_id, level));\n    var model = parent.addGroup($group);\n\n    model.data = data;\n    model.flags = $.extend({}, this.settings.default_group_flags, flags);\n\n    this.trigger('afterAddGroup', model);\n\n    model.condition = this.settings.default_condition;\n\n    if (addRule) {\n        this.addRule(model);\n    }\n\n    return model;\n};\n\n/**\n * Tries to delete a group. The group is not deleted if at least one rule is no_delete.\n * @param group {Group}\n * @return {boolean} true if the group has been deleted\n */\nQueryBuilder.prototype.deleteGroup = function(group) {\n    if (group.isRoot()) {\n        return false;\n    }\n\n    var e = this.trigger('beforeDeleteGroup', group);\n    if (e.isDefaultPrevented()) {\n        return false;\n    }\n\n    var del = true;\n\n    group.each('reverse', function(rule) {\n        del&= this.deleteRule(rule);\n    }, function(group) {\n        del&= this.deleteGroup(group);\n    }, this);\n\n    if (del) {\n        group.drop();\n        this.trigger('afterDeleteGroup');\n    }\n\n    return del;\n};\n\n/**\n * Changes the condition of a group\n * @param group {Group}\n */\nQueryBuilder.prototype.updateGroupCondition = function(group) {\n    group.$el.find('>' + Selectors.group_condition).each(function() {\n        var $this = $(this);\n        $this.prop('checked', $this.val() === group.condition);\n        $this.parent().toggleClass('active', $this.val() === group.condition);\n    });\n\n    this.trigger('afterUpdateGroupCondition', group);\n};\n\n/**\n * Update visibility of conditions based on number of rules inside each group\n */\nQueryBuilder.prototype.refreshGroupsConditions = function() {\n    (function walk(group) {\n        if (!group.flags || (group.flags && !group.flags.condition_readonly)) {\n            group.$el.find('>' + Selectors.group_condition).prop('disabled', group.rules.length <= 1)\n                .parent().toggleClass('disabled', group.rules.length <= 1);\n        }\n\n        group.each(function(rule) {}, function(group) {\n            walk(group);\n        }, this);\n    }(this.model.root));\n};\n\n/**\n * Add a new rule\n * @param parent {Group}\n * @param data {mixed,optional} rule custom data\n * @param flags {object,optional} flags to apply to the rule\n * @return rule {Rule}\n */\nQueryBuilder.prototype.addRule = function(parent, data, flags) {\n    var e = this.trigger('beforeAddRule', parent);\n    if (e.isDefaultPrevented()) {\n        return null;\n    }\n\n    var rule_id = this.nextRuleId();\n    var $rule = $(this.getRuleTemplate(rule_id));\n    var model = parent.addRule($rule);\n\n    if (data !== undefined) {\n        model.data = data;\n    }\n\n    model.flags = $.extend({}, this.settings.default_rule_flags, flags);\n\n    this.trigger('afterAddRule', model);\n\n    this.createRuleFilters(model);\n\n    if (this.settings.default_filter || !this.settings.display_empty_filter) {\n        model.filter = this.getFilterById(this.settings.default_filter || this.filters[0].id);\n    }\n\n    return model;\n};\n\n/**\n * Delete a rule.\n * @param rule {Rule}\n * @return {boolean} true if the rule has been deleted\n */\nQueryBuilder.prototype.deleteRule = function(rule) {\n    if (rule.flags.no_delete) {\n        return false;\n    }\n\n    var e = this.trigger('beforeDeleteRule', rule);\n    if (e.isDefaultPrevented()) {\n        return false;\n    }\n\n    rule.drop();\n\n    this.trigger('afterDeleteRule');\n\n    return true;\n};\n\n/**\n * Create the filters <select> for a rule\n * @param rule {Rule}\n */\nQueryBuilder.prototype.createRuleFilters = function(rule) {\n    var filters = this.change('getRuleFilters', this.filters, rule);\n    var $filterSelect = $(this.getRuleFilterSelect(rule, filters));\n\n    rule.$el.find(Selectors.filter_container).html($filterSelect);\n\n    this.trigger('afterCreateRuleFilters', rule);\n};\n\n/**\n * Create the operators <select> for a rule and init the rule operator\n * @param rule {Rule}\n */\nQueryBuilder.prototype.createRuleOperators = function(rule) {\n    var $operatorContainer = rule.$el.find(Selectors.operator_container).empty();\n\n    if (!rule.filter) {\n        return;\n    }\n\n    var operators = this.getOperators(rule.filter);\n    var $operatorSelect = $(this.getRuleOperatorSelect(rule, operators));\n\n    $operatorContainer.html($operatorSelect);\n\n    // set the operator without triggering update event\n    rule.__.operator = operators[0];\n\n    this.trigger('afterCreateRuleOperators', rule, operators);\n};\n\n/**\n * Create the main input for a rule\n * @param rule {Rule}\n */\nQueryBuilder.prototype.createRuleInput = function(rule) {\n    var $valueContainer = rule.$el.find(Selectors.value_container).empty();\n\n    rule.__.value = undefined;\n\n    if (!rule.filter || !rule.operator || rule.operator.nb_inputs === 0) {\n        return;\n    }\n\n    var self = this;\n    var $inputs = $();\n    var filter = rule.filter;\n\n    for (var i = 0; i < rule.operator.nb_inputs; i++) {\n        var $ruleInput = $(this.getRuleInput(rule, i));\n        if (i > 0) $valueContainer.append(this.settings.inputs_separator);\n        $valueContainer.append($ruleInput);\n        $inputs = $inputs.add($ruleInput);\n    }\n\n    $valueContainer.show();\n\n    $inputs.on('change ' + (filter.input_event || ''), function() {\n        self.status.updating_value = true;\n        rule.value = self.getRuleValue(rule);\n        self.status.updating_value = false;\n    });\n\n    if (filter.plugin) {\n        $inputs[filter.plugin](filter.plugin_config || {});\n    }\n\n    this.trigger('afterCreateRuleInput', rule);\n\n    if (filter.default_value !== undefined) {\n        rule.value = filter.default_value;\n    }\n    else {\n        self.status.updating_value = true;\n        rule.value = self.getRuleValue(rule);\n        self.status.updating_value = false;\n    }\n};\n\n/**\n * Perform action when rule's filter is changed\n * @param rule {Rule}\n */\nQueryBuilder.prototype.updateRuleFilter = function(rule) {\n    this.createRuleOperators(rule);\n    this.createRuleInput(rule);\n\n    rule.$el.find(Selectors.rule_filter).val(rule.filter ? rule.filter.id : '-1');\n\n    this.trigger('afterUpdateRuleFilter', rule);\n};\n\n/**\n * Update main <input> visibility when rule operator changes\n * @param rule {Rule}\n * @param previousOperator {object}\n */\nQueryBuilder.prototype.updateRuleOperator = function(rule, previousOperator) {\n    var $valueContainer = rule.$el.find(Selectors.value_container);\n\n    if (!rule.operator || rule.operator.nb_inputs === 0) {\n        $valueContainer.hide();\n\n        rule.__.value = undefined;\n    }\n    else {\n        $valueContainer.show();\n\n        if ($valueContainer.is(':empty') || rule.operator.nb_inputs !== previousOperator.nb_inputs) {\n            this.createRuleInput(rule);\n        }\n    }\n\n    if (rule.operator) {\n        rule.$el.find(Selectors.rule_operator).val(rule.operator.type);\n    }\n\n    this.trigger('afterUpdateRuleOperator', rule);\n};\n\n/**\n * Perform action when rule's value is changed\n * @param rule {Rule}\n */\nQueryBuilder.prototype.updateRuleValue = function(rule) {\n    if (!this.status.updating_value) {\n        this.setRuleValue(rule, rule.value);\n    }\n\n    this.trigger('afterUpdateRuleValue', rule);\n};\n\n/**\n * Change rules properties depending on flags.\n * @param rule {Rule}\n */\nQueryBuilder.prototype.applyRuleFlags = function(rule) {\n    var flags = rule.flags;\n\n    if (flags.filter_readonly) {\n        rule.$el.find(Selectors.rule_filter).prop('disabled', true);\n    }\n    if (flags.operator_readonly) {\n        rule.$el.find(Selectors.rule_operator).prop('disabled', true);\n    }\n    if (flags.value_readonly) {\n        rule.$el.find(Selectors.rule_value).prop('disabled', true);\n    }\n    if (flags.no_delete) {\n        rule.$el.find(Selectors.delete_rule).remove();\n    }\n\n    this.trigger('afterApplyRuleFlags', rule);\n};\n\n/**\n * Change group properties depending on flags.\n * @param group {Group}\n */\nQueryBuilder.prototype.applyGroupFlags = function(group) {\n    var flags = group.flags;\n\n    if (flags.condition_readonly) {\n        group.$el.find('>' + Selectors.group_condition).prop('disabled', true)\n            .parent().addClass('readonly');\n    }\n    if (flags.no_delete) {\n        group.$el.find(Selectors.delete_group).remove();\n    }\n\n    this.trigger('afterApplyGroupFlags', group);\n};\n\n/**\n * Clear all errors markers\n * @param node {Node,optional} default is root Group\n */\nQueryBuilder.prototype.clearErrors = function(node) {\n    node = node || this.model.root;\n\n    if (!node) {\n        return;\n    }\n\n    node.error = null;\n\n    if (node instanceof Group) {\n        node.each(function(rule) {\n            rule.error = null;\n        }, function(group) {\n            this.clearErrors(group);\n        }, this);\n    }\n};\n\n/**\n * Add/Remove class .has-error and update error title\n * @param node {Node}\n */\nQueryBuilder.prototype.displayError = function(node) {\n    if (this.settings.display_errors) {\n        if (node.error === null) {\n            node.$el.removeClass('has-error');\n        }\n        else {\n            // translate the text without modifying event array\n            var error = $.extend([], node.error, [\n                this.lang.errors[node.error[0]] || node.error[0]\n            ]);\n\n            node.$el.addClass('has-error')\n              .find(Selectors.error_container).eq(0)\n                .attr('title', Utils.fmt.apply(null, error));\n        }\n    }\n};\n\n/**\n * Trigger a validation error event\n * @param node {Node}\n * @param error {array}\n * @param value {mixed}\n */\nQueryBuilder.prototype.triggerValidationError = function(node, error, value) {\n    if (!$.isArray(error)) {\n        error = [error];\n    }\n\n    var e = this.trigger('validationError', node, error, value);\n    if (!e.isDefaultPrevented()) {\n        node.error = error;\n    }\n};\n\n\n/**\n * Destroy the plugin\n */\nQueryBuilder.prototype.destroy = function() {\n    this.trigger('beforeDestroy');\n\n    if (this.status.generated_id) {\n        this.$el.removeAttr('id');\n    }\n\n    this.clear();\n    this.model = null;\n\n    this.$el\n        .off('.queryBuilder')\n        .removeClass('query-builder')\n        .removeData('queryBuilder');\n\n    delete this.$el[0].queryBuilder;\n};\n\n/**\n * Reset the plugin\n */\nQueryBuilder.prototype.reset = function() {\n    this.status.group_id = 1;\n    this.status.rule_id = 0;\n\n    this.model.root.empty();\n\n    this.addRule(this.model.root);\n\n    this.trigger('afterReset');\n};\n\n/**\n * Clear the plugin\n */\nQueryBuilder.prototype.clear = function() {\n    this.status.group_id = 0;\n    this.status.rule_id = 0;\n\n    if (this.model.root) {\n        this.model.root.drop();\n        this.model.root = null;\n    }\n\n    this.trigger('afterClear');\n};\n\n/**\n * Modify the builder configuration\n * Only options defined in QueryBuilder.modifiable_options are modifiable\n * @param {object}\n */\nQueryBuilder.prototype.setOptions = function(options) {\n    // use jQuery utils to filter options keys\n    $.makeArray($(Object.keys(options)).filter(QueryBuilder.modifiable_options))\n        .forEach(function(opt) {\n            this.settings[opt] = options[opt];\n        }, this);\n};\n\n/**\n * Return the model associated to a DOM object, or root model\n * @param {jQuery,optional}\n * @return {Node}\n */\nQueryBuilder.prototype.getModel = function(target) {\n    return !target ? this.model.root : Model(target);\n};\n\n/**\n * Validate the whole builder\n * @return {boolean}\n */\nQueryBuilder.prototype.validate = function() {\n    this.clearErrors();\n\n    var self = this;\n\n    var valid = (function parse(group) {\n        var done = 0;\n        var errors = 0;\n\n        group.each(function(rule) {\n            if (!rule.filter) {\n                self.triggerValidationError(rule, 'no_filter', null);\n                errors++;\n                return;\n            }\n\n            if (rule.operator.nb_inputs !== 0) {\n                var valid = self.validateValue(rule, rule.value);\n\n                if (valid !== true) {\n                    self.triggerValidationError(rule, valid, rule.value);\n                    errors++;\n                    return;\n                }\n            }\n\n            done++;\n\n        }, function(group) {\n            if (parse(group)) {\n                done++;\n            }\n            else {\n                errors++;\n            }\n        });\n\n        if (errors > 0) {\n            return false;\n        }\n        else if (done === 0 && (!self.settings.allow_empty || !group.isRoot())) {\n            self.triggerValidationError(group, 'empty_group', null);\n            return false;\n        }\n\n        return true;\n\n    }(this.model.root));\n\n    return this.change('validate', valid);\n};\n\n/**\n * Get an object representing current rules\n * @param {object} options\n *      - get_flags: false[default] | true(only changes from default flags) | 'all'\n * @return {object}\n */\nQueryBuilder.prototype.getRules = function(options) {\n    options = $.extend({\n        get_flags: false\n    }, options);\n\n    if (!this.validate()) {\n        return {};\n    }\n\n    var self = this;\n\n    var out = (function parse(group) {\n        var data = {\n            condition: group.condition,\n            rules: []\n        };\n\n        if (group.data) {\n            data.data = $.extendext(true, 'replace', {}, group.data);\n        }\n\n        if (options.get_flags) {\n            var flags = self.getGroupFlags(group.flags, options.get_flags === 'all');\n            if (!$.isEmptyObject(flags)) {\n                data.flags = flags;\n            }\n        }\n\n        group.each(function(model) {\n            var value = null;\n            if (model.operator.nb_inputs !== 0) {\n                value = model.value;\n            }\n\n            var rule = {\n                id: model.filter.id,\n                field: model.filter.field,\n                type: model.filter.type,\n                input: model.filter.input,\n                operator: model.operator.type,\n                value: value\n            };\n\n            if (model.filter.data || model.data) {\n                rule.data = $.extendext(true, 'replace', {}, model.filter.data, model.data);\n            }\n\n            if (options.get_flags) {\n                var flags = self.getRuleFlags(model.flags, options.get_flags === 'all');\n                if (!$.isEmptyObject(flags)) {\n                    rule.flags = flags;\n                }\n            }\n\n            data.rules.push(rule);\n\n        }, function(model) {\n            data.rules.push(parse(model));\n        });\n\n        return data;\n\n    }(this.model.root));\n\n    return this.change('getRules', out);\n};\n\n/**\n * Set rules from object\n * @throws RulesError, UndefinedConditionError\n * @param data {object}\n */\nQueryBuilder.prototype.setRules = function(data) {\n    if ($.isArray(data)) {\n        data = {\n            condition: this.settings.default_condition,\n            rules: data\n        };\n    }\n\n    if (!data || !data.rules || (data.rules.length === 0 && !this.settings.allow_empty)) {\n        Utils.error('RulesParse', 'Incorrect data object passed');\n    }\n\n    this.clear();\n    this.setRoot(false, data.data, this.parseGroupFlags(data));\n\n    data = this.change('setRules', data);\n\n    var self = this;\n\n    (function add(data, group) {\n        if (group === null) {\n            return;\n        }\n\n        if (data.condition === undefined) {\n            data.condition = self.settings.default_condition;\n        }\n        else if (self.settings.conditions.indexOf(data.condition) == -1) {\n            Utils.error('UndefinedCondition', 'Invalid condition \"{0}\"', data.condition);\n        }\n\n        group.condition = data.condition;\n\n        data.rules.forEach(function(item) {\n            var model;\n            if (item.rules && item.rules.length > 0) {\n                if (self.settings.allow_groups !== -1 && self.settings.allow_groups < group.level) {\n                    self.reset();\n                    Utils.error('RulesParse', 'No more than {0} groups are allowed', self.settings.allow_groups);\n                }\n                else {\n                    model = self.addGroup(group, false, item.data, self.parseGroupFlags(item));\n                    if (model === null) {\n                        return;\n                    }\n\n                    add(item, model);\n                }\n            }\n            else {\n                if (item.id === undefined) {\n                    Utils.error('RulesParse', 'Missing rule field id');\n                }\n                if (item.operator === undefined) {\n                    item.operator = 'equal';\n                }\n\n                model = self.addRule(group, item.data);\n                if (model === null) {\n                    return;\n                }\n\n                model.filter = self.getFilterById(item.id);\n                model.operator = self.getOperatorByType(item.operator);\n                model.flags = self.parseRuleFlags(item);\n\n                if (model.operator.nb_inputs !== 0 && item.value !== undefined) {\n                    model.value = item.value;\n                }\n            }\n        });\n\n    }(data, this.model.root));\n};\n\n\n/**\n * Check if a value is correct for a filter\n * @param rule {Rule}\n * @param value {string|string[]|undefined}\n * @return {array|true}\n */\nQueryBuilder.prototype.validateValue = function(rule, value) {\n    var validation = rule.filter.validation || {};\n    var result = true;\n\n    if (validation.callback) {\n        result = validation.callback.call(this, value, rule);\n    }\n    else {\n        result = this.validateValueInternal(rule, value);\n    }\n\n    return this.change('validateValue', result, value, rule);\n};\n\n/**\n * Default validation function\n * @throws ConfigError\n * @param rule {Rule}\n * @param value {string|string[]|undefined}\n * @return {array|true}\n */\nQueryBuilder.prototype.validateValueInternal = function(rule, value) {\n    var filter = rule.filter;\n    var operator = rule.operator;\n    var validation = filter.validation || {};\n    var result = true;\n    var tmp;\n\n    if (rule.operator.nb_inputs === 1) {\n        value = [value];\n    }\n    else {\n        value = value;\n    }\n\n    for (var i = 0; i < operator.nb_inputs; i++) {\n        switch (filter.input) {\n            case 'radio':\n                if (value[i] === undefined) {\n                    result = ['radio_empty'];\n                    break;\n                }\n                break;\n\n            case 'checkbox':\n                if (value[i] === undefined || value[i].length === 0) {\n                    result = ['checkbox_empty'];\n                    break;\n                }\n                else if (!operator.multiple && value[i].length > 1) {\n                    result = ['operator_not_multiple', operator.type];\n                    break;\n                }\n                break;\n\n            case 'select':\n                if (filter.multiple) {\n                    if (value[i] === undefined || value[i].length === 0 || (filter.placeholder && value[i] == filter.placeholder_value)) {\n                        result = ['select_empty'];\n                        break;\n                    }\n                    else if (!operator.multiple && value[i].length > 1) {\n                        result = ['operator_not_multiple', operator.type];\n                        break;\n                    }\n                }\n                else {\n                    if (value[i] === undefined || (filter.placeholder && value[i] == filter.placeholder_value)) {\n                        result = ['select_empty'];\n                        break;\n                    }\n                }\n                break;\n\n            default:\n                switch (QueryBuilder.types[filter.type]) {\n                    case 'string':\n                        if (value[i] === undefined || value[i].length === 0) {\n                            result = ['string_empty'];\n                            break;\n                        }\n                        if (validation.min !== undefined) {\n                            if (value[i].length < parseInt(validation.min)) {\n                                result = ['string_exceed_min_length', validation.min];\n                                break;\n                            }\n                        }\n                        if (validation.max !== undefined) {\n                            if (value[i].length > parseInt(validation.max)) {\n                                result = ['string_exceed_max_length', validation.max];\n                                break;\n                            }\n                        }\n                        if (validation.format) {\n                            if (typeof validation.format == 'string') {\n                                validation.format = new RegExp(validation.format);\n                            }\n                            if (!validation.format.test(value[i])) {\n                                result = ['string_invalid_format', validation.format];\n                                break;\n                            }\n                        }\n                        break;\n\n                    case 'number':\n                        if (value[i] === undefined || isNaN(value[i])) {\n                            result = ['number_nan'];\n                            break;\n                        }\n                        if (filter.type == 'integer') {\n                            if (parseInt(value[i]) != value[i]) {\n                                result = ['number_not_integer'];\n                                break;\n                            }\n                        }\n                        else {\n                            if (parseFloat(value[i]) != value[i]) {\n                                result = ['number_not_double'];\n                                break;\n                            }\n                        }\n                        if (validation.min !== undefined) {\n                            if (value[i] < parseFloat(validation.min)) {\n                                result = ['number_exceed_min', validation.min];\n                                break;\n                            }\n                        }\n                        if (validation.max !== undefined) {\n                            if (value[i] > parseFloat(validation.max)) {\n                                result = ['number_exceed_max', validation.max];\n                                break;\n                            }\n                        }\n                        if (validation.step !== undefined && validation.step !== 'any') {\n                            var v = (value[i] / validation.step).toPrecision(14);\n                            if (parseInt(v) != v) {\n                                result = ['number_wrong_step', validation.step];\n                                break;\n                            }\n                        }\n                        break;\n\n                    case 'datetime':\n                        if (value[i] === undefined || value[i].length === 0) {\n                            result = ['datetime_empty'];\n                            break;\n                        }\n\n                        // we need MomentJS\n                        if (validation.format) {\n                            if (!('moment' in window)) {\n                                Utils.error('MissingLibrary', 'MomentJS is required for Date/Time validation. Get it here http://momentjs.com');\n                            }\n\n                            var datetime = moment(value[i], validation.format);\n                            if (!datetime.isValid()) {\n                                result = ['datetime_invalid', validation.format];\n                                break;\n                            }\n                            else {\n                                if (validation.min) {\n                                    if (datetime < moment(validation.min, validation.format)) {\n                                        result = ['datetime_exceed_min', validation.min];\n                                        break;\n                                    }\n                                }\n                                if (validation.max) {\n                                    if (datetime > moment(validation.max, validation.format)) {\n                                        result = ['datetime_exceed_max', validation.max];\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        break;\n\n                    case 'boolean':\n                        tmp = value[i].trim().toLowerCase();\n                        if (tmp !== 'true' && tmp !== 'false' && tmp !== '1' && tmp !== '0' && value[i] !== 1 && value[i] !== 0) {\n                            result = ['boolean_not_valid'];\n                            break;\n                        }\n                }\n        }\n\n        if (result !== true) {\n            break;\n        }\n    }\n\n    return result;\n};\n\n/**\n * Returns an incremented group ID\n * @return {string}\n */\nQueryBuilder.prototype.nextGroupId = function() {\n    return this.status.id + '_group_' + (this.status.group_id++);\n};\n\n/**\n * Returns an incremented rule ID\n * @return {string}\n */\nQueryBuilder.prototype.nextRuleId = function() {\n    return this.status.id + '_rule_' + (this.status.rule_id++);\n};\n\n/**\n * Returns the operators for a filter\n * @param filter {string|object} (filter id name or filter object)\n * @return {object[]}\n */\nQueryBuilder.prototype.getOperators = function(filter) {\n    if (typeof filter == 'string') {\n        filter = this.getFilterById(filter);\n    }\n\n    var result = [];\n\n    for (var i = 0, l = this.operators.length; i < l; i++) {\n        // filter operators check\n        if (filter.operators) {\n            if (filter.operators.indexOf(this.operators[i].type) == -1) {\n                continue;\n            }\n        }\n        // type check\n        else if (this.operators[i].apply_to.indexOf(QueryBuilder.types[filter.type]) == -1) {\n            continue;\n        }\n\n        result.push(this.operators[i]);\n    }\n\n    // keep sort order defined for the filter\n    if (filter.operators) {\n        result.sort(function(a, b) {\n            return filter.operators.indexOf(a.type) - filter.operators.indexOf(b.type);\n        });\n    }\n\n    return this.change('getOperators', result, filter);\n};\n\n/**\n * Returns a particular filter by its id\n * @throws UndefinedFilterError\n * @param filterId {string}\n * @return {object|null}\n */\nQueryBuilder.prototype.getFilterById = function(id) {\n    if (id == '-1') {\n        return null;\n    }\n\n    for (var i = 0, l = this.filters.length; i < l; i++) {\n        if (this.filters[i].id == id) {\n            return this.filters[i];\n        }\n    }\n\n    Utils.error('UndefinedFilter', 'Undefined filter \"{0}\"', id);\n};\n\n/**\n * Return a particular operator by its type\n * @throws UndefinedOperatorError\n * @param type {string}\n * @return {object|null}\n */\nQueryBuilder.prototype.getOperatorByType = function(type) {\n    if (type == '-1') {\n        return null;\n    }\n\n    for (var i = 0, l = this.operators.length; i < l; i++) {\n        if (this.operators[i].type == type) {\n            return this.operators[i];\n        }\n    }\n\n    Utils.error('UndefinedOperator', 'Undefined operator \"{0}\"', type);\n};\n\n/**\n * Returns rule value\n * @param rule {Rule}\n * @return {mixed}\n */\nQueryBuilder.prototype.getRuleValue = function(rule) {\n    var filter = rule.filter;\n    var operator = rule.operator;\n    var value = [];\n\n    if (filter.valueGetter) {\n        value = filter.valueGetter.call(this, rule);\n    }\n    else {\n        var $value = rule.$el.find(Selectors.value_container);\n\n        for (var i = 0; i < operator.nb_inputs; i++) {\n            var name = Utils.escapeElementId(rule.id + '_value_' + i);\n            var tmp;\n\n            switch (filter.input) {\n                case 'radio':\n                    value.push($value.find('[name=' + name + ']:checked').val());\n                    break;\n\n                case 'checkbox':\n                    tmp = [];\n                    $value.find('[name=' + name + ']:checked').each(function() {\n                        tmp.push($(this).val());\n                    });\n                    value.push(tmp);\n                    break;\n\n                case 'select':\n                    if (filter.multiple) {\n                        tmp = [];\n                        $value.find('[name=' + name + '] option:selected').each(function() {\n                            tmp.push($(this).val());\n                        });\n                        value.push(tmp);\n                    }\n                    else {\n                        value.push($value.find('[name=' + name + '] option:selected').val());\n                    }\n                    break;\n\n                default:\n                    value.push($value.find('[name=' + name + ']').val());\n            }\n        }\n\n        if (operator.nb_inputs === 1) {\n            value = value[0];\n        }\n\n        // @deprecated\n        if (filter.valueParser) {\n            value = filter.valueParser.call(this, rule, value);\n        }\n    }\n\n    return this.change('getRuleValue', value, rule);\n};\n\n/**\n * Sets the value of a rule.\n * @param rule {Rule}\n * @param value {mixed}\n */\nQueryBuilder.prototype.setRuleValue = function(rule, value) {\n    var filter = rule.filter;\n    var operator = rule.operator;\n\n    if (filter.valueSetter) {\n        filter.valueSetter.call(this, rule, value);\n    }\n    else {\n        var $value = rule.$el.find(Selectors.value_container);\n\n        if (operator.nb_inputs == 1) {\n            value = [value];\n        }\n        else {\n            value = value;\n        }\n\n        for (var i = 0; i < operator.nb_inputs; i++) {\n            var name = Utils.escapeElementId(rule.id + '_value_' + i);\n\n            switch (filter.input) {\n                case 'radio':\n                    $value.find('[name=' + name + '][value=\"' + value[i] + '\"]').prop('checked', true).trigger('change');\n                    break;\n\n                case 'checkbox':\n                    if (!$.isArray(value[i])) {\n                        value[i] = [value[i]];\n                    }\n                    value[i].forEach(function(value) {\n                        $value.find('[name=' + name + '][value=\"' + value + '\"]').prop('checked', true).trigger('change');\n                    });\n                    break;\n\n                default:\n                    $value.find('[name=' + name + ']').val(value[i]).trigger('change');\n                    break;\n            }\n        }\n    }\n};\n\n/**\n * Clean rule flags.\n * @param rule {object}\n * @return {object}\n */\nQueryBuilder.prototype.parseRuleFlags = function(rule) {\n    var flags = $.extend({}, this.settings.default_rule_flags);\n\n    if (rule.readonly) {\n        $.extend(flags, {\n            filter_readonly: true,\n            operator_readonly: true,\n            value_readonly: true,\n            no_delete: true\n        });\n    }\n\n    if (rule.flags) {\n        $.extend(flags, rule.flags);\n    }\n\n    return this.change('parseRuleFlags', flags, rule);\n};\n\n/**\n * Get a copy of flags of a rule.\n * @param {object} flags\n * @param {boolean} all - true to return all flags, false to return only changes from default\n * @returns {object}\n */\nQueryBuilder.prototype.getRuleFlags = function(flags, all) {\n    if (all) {\n        return $.extend({}, flags);\n    }\n    else {\n        var ret = {};\n        $.each(this.settings.default_rule_flags, function(key, value) {\n            if (flags[key] !== value) {\n                ret[key] = flags[key];\n            }\n        });\n        return ret;\n    }\n};\n\n/**\n * Clean group flags.\n * @param group {object}\n * @return {object}\n */\nQueryBuilder.prototype.parseGroupFlags = function(group) {\n    var flags = $.extend({}, this.settings.default_group_flags);\n\n    if (group.readonly) {\n        $.extend(flags, {\n            condition_readonly: true,\n            no_delete: true\n        });\n    }\n\n    if (group.flags) {\n        $.extend(flags, group.flags);\n    }\n\n    return this.change('parseGroupFlags', flags, group);\n};\n\n/**\n * Get a copy of flags of a group.\n * @param {object} flags\n * @param {boolean} all - true to return all flags, false to return only changes from default\n * @returns {object}\n */\nQueryBuilder.prototype.getGroupFlags = function(flags, all) {\n    if (all) {\n        return $.extend({}, flags);\n    }\n    else {\n        var ret = {};\n        $.each(this.settings.default_group_flags, function(key, value) {\n            if (flags[key] !== value) {\n                ret[key] = flags[key];\n            }\n        });\n        return ret;\n    }\n};\n\n/**\n * Translate a label\n * @param label {string|object}\n * @return string\n */\nQueryBuilder.prototype.translateLabel = function(label) {\n    return typeof label == 'object' ? (label[this.settings.lang_code] || label['en']) : label;\n};\n\n\nQueryBuilder.templates.group = '\\\n<dl id=\"{{= it.group_id }}\" class=\"rules-group-container\"> \\\n  <dt class=\"rules-group-header\"> \\\n    <div class=\"btn-group pull-right group-actions\"> \\\n      <button type=\"button\" class=\"btn btn-xs btn-success\" data-add=\"rule\"> \\\n        <i class=\"{{= it.icons.add_rule }}\"></i> {{= it.lang.add_rule }} \\\n      </button> \\\n      {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }} \\\n        <button type=\"button\" class=\"btn btn-xs btn-success\" data-add=\"group\"> \\\n          <i class=\"{{= it.icons.add_group }}\"></i> {{= it.lang.add_group }} \\\n        </button> \\\n      {{?}} \\\n      {{? it.level>1 }} \\\n        <button type=\"button\" class=\"btn btn-xs btn-danger\" data-delete=\"group\"> \\\n          <i class=\"{{= it.icons.remove_group }}\"></i> {{= it.lang.delete_group }} \\\n        </button> \\\n      {{?}} \\\n    </div> \\\n    <div class=\"btn-group group-conditions\"> \\\n      {{~ it.conditions: condition }} \\\n        <label class=\"btn btn-xs btn-primary\"> \\\n          <input type=\"radio\" name=\"{{= it.group_id }}_cond\" value=\"{{= condition }}\"> {{= it.lang.conditions[condition] || condition }} \\\n        </label> \\\n      {{~}} \\\n    </div> \\\n    {{? it.settings.display_errors }} \\\n      <div class=\"error-container\"><i class=\"{{= it.icons.error }}\"></i></div> \\\n    {{?}} \\\n  </dt> \\\n  <dd class=rules-group-body> \\\n    <ul class=rules-list></ul> \\\n  </dd> \\\n</dl>';\n\nQueryBuilder.templates.rule = '\\\n<li id=\"{{= it.rule_id }}\" class=\"rule-container\"> \\\n  <div class=\"rule-header\"> \\\n    <div class=\"btn-group pull-right rule-actions\"> \\\n      <button type=\"button\" class=\"btn btn-xs btn-danger\" data-delete=\"rule\"> \\\n        <i class=\"{{= it.icons.remove_rule }}\"></i> {{= it.lang.delete_rule }} \\\n      </button> \\\n    </div> \\\n  </div> \\\n  {{? it.settings.display_errors }} \\\n    <div class=\"error-container\"><i class=\"{{= it.icons.error }}\"></i></div> \\\n  {{?}} \\\n  <div class=\"rule-filter-container\"></div> \\\n  <div class=\"rule-operator-container\"></div> \\\n  <div class=\"rule-value-container\"></div> \\\n</li>';\n\nQueryBuilder.templates.filterSelect = '\\\n{{ var optgroup = null; }} \\\n<select class=\"form-control\" name=\"{{= it.rule.id }}_filter\"> \\\n  {{? it.settings.display_empty_filter }} \\\n    <option value=\"-1\">{{= it.settings.select_placeholder }}</option> \\\n  {{?}} \\\n  {{~ it.filters: filter }} \\\n    {{? optgroup !== filter.optgroup }} \\\n      {{? optgroup !== null }}</optgroup>{{?}} \\\n      {{? (optgroup = filter.optgroup) !== null }} \\\n        <optgroup label=\"{{= it.translate(it.settings.optgroups[optgroup]) }}\"> \\\n      {{?}} \\\n    {{?}} \\\n    <option value=\"{{= filter.id }}\">{{= it.translate(filter.label) }}</option> \\\n  {{~}} \\\n  {{? optgroup !== null }}</optgroup>{{?}} \\\n</select>';\n\nQueryBuilder.templates.operatorSelect = '\\\n{{ var optgroup = null; }} \\\n<select class=\"form-control\" name=\"{{= it.rule.id }}_operator\"> \\\n  {{~ it.operators: operator }} \\\n    {{? optgroup !== operator.optgroup }} \\\n      {{? optgroup !== null }}</optgroup>{{?}} \\\n      {{? (optgroup = operator.optgroup) !== null }} \\\n        <optgroup label=\"{{= it.translate(it.settings.optgroups[optgroup]) }}\"> \\\n      {{?}} \\\n    {{?}} \\\n    <option value=\"{{= operator.type }}\">{{= it.lang.operators[operator.type] || operator.type }}</option> \\\n  {{~}} \\\n  {{? optgroup !== null }}</optgroup>{{?}} \\\n</select>';\n\n/**\n * Returns group HTML\n * @param group_id {string}\n * @param level {int}\n * @return {string}\n */\nQueryBuilder.prototype.getGroupTemplate = function(group_id, level) {\n    var h = this.templates.group({\n        builder: this,\n        group_id: group_id,\n        level: level,\n        conditions: this.settings.conditions,\n        icons: this.icons,\n        lang: this.lang,\n        settings: this.settings\n    });\n\n    return this.change('getGroupTemplate', h, level);\n};\n\n/**\n * Returns rule HTML\n * @param rule_id {string}\n * @return {string}\n */\nQueryBuilder.prototype.getRuleTemplate = function(rule_id) {\n    var h = this.templates.rule({\n        builder: this,\n        rule_id: rule_id,\n        icons: this.icons,\n        lang: this.lang,\n        settings: this.settings\n    });\n\n    return this.change('getRuleTemplate', h);\n};\n\n/**\n * Returns rule filter <select> HTML\n * @param rule {Rule}\n * @param filters {array}\n * @return {string}\n */\nQueryBuilder.prototype.getRuleFilterSelect = function(rule, filters) {\n    var h = this.templates.filterSelect({\n        builder: this,\n        rule: rule,\n        filters: filters,\n        icons: this.icons,\n        lang: this.lang,\n        settings: this.settings,\n        translate: this.translateLabel\n    });\n\n    return this.change('getRuleFilterSelect', h, rule);\n};\n\n/**\n * Returns rule operator <select> HTML\n * @param rule {Rule}\n * @param operators {object}\n * @return {string}\n */\nQueryBuilder.prototype.getRuleOperatorSelect = function(rule, operators) {\n    var h = this.templates.operatorSelect({\n        builder: this,\n        rule: rule,\n        operators: operators,\n        icons: this.icons,\n        lang: this.lang,\n        settings: this.settings,\n        translate: this.translateLabel\n    });\n\n    return this.change('getRuleOperatorSelect', h, rule);\n};\n\n/**\n * Return the rule value HTML\n * @param rule {Rule}\n * @param filter {object}\n * @param value_id {int}\n * @return {string}\n */\nQueryBuilder.prototype.getRuleInput = function(rule, value_id) {\n    var filter = rule.filter;\n    var validation = rule.filter.validation || {};\n    var name = rule.id + '_value_' + value_id;\n    var c = filter.vertical ? ' class=block' : '';\n    var h = '';\n\n    if (typeof filter.input == 'function') {\n        h = filter.input.call(this, rule, name);\n    }\n    else {\n        switch (filter.input) {\n            case 'radio': case 'checkbox':\n                Utils.iterateOptions(filter.values, function(key, val) {\n                    h+= '<label' + c + '><input type=\"' + filter.input + '\" name=\"' + name + '\" value=\"' + key + '\"> ' + val + '</label> ';\n                });\n                break;\n\n            case 'select':\n                h+= '<select class=\"form-control\" name=\"' + name + '\"' + (filter.multiple ? ' multiple' : '') + '>';\n                if (filter.placeholder) {\n                    h+= '<option value=\"' + filter.placeholder_value + '\" disabled selected>' + filter.placeholder + '</option>';\n                }\n                Utils.iterateOptions(filter.values, function(key, val) {\n                    h+= '<option value=\"' + key + '\">' + val + '</option> ';\n                });\n                h+= '</select>';\n                break;\n\n            case 'textarea':\n                h+= '<textarea class=\"form-control\" name=\"' + name + '\"';\n                if (filter.size) h+= ' cols=\"' + filter.size + '\"';\n                if (filter.rows) h+= ' rows=\"' + filter.rows + '\"';\n                if (validation.min !== undefined) h+= ' minlength=\"' + validation.min + '\"';\n                if (validation.max !== undefined) h+= ' maxlength=\"' + validation.max + '\"';\n                if (filter.placeholder) h+= ' placeholder=\"' + filter.placeholder + '\"';\n                h+= '></textarea>';\n                break;\n\n            default:\n                switch (QueryBuilder.types[filter.type]) {\n                    case 'number':\n                        h+= '<input class=\"form-control\" type=\"number\" name=\"' + name + '\"';\n                        if (validation.step !== undefined) h+= ' step=\"' + validation.step + '\"';\n                        if (validation.min !== undefined) h+= ' min=\"' + validation.min + '\"';\n                        if (validation.max !== undefined) h+= ' max=\"' + validation.max + '\"';\n                        if (filter.placeholder) h+= ' placeholder=\"' + filter.placeholder + '\"';\n                        if (filter.size) h+= ' size=\"' + filter.size + '\"';\n                        h+= '>';\n                        break;\n\n                    default:\n                        h+= '<input class=\"form-control\" type=\"text\" name=\"' + name + '\"';\n                        if (filter.placeholder) h+= ' placeholder=\"' + filter.placeholder + '\"';\n                        if (filter.type === 'string' && validation.min !== undefined) h+= ' minlength=\"' + validation.min + '\"';\n                        if (filter.type === 'string' && validation.max !== undefined) h+= ' maxlength=\"' + validation.max + '\"';\n                        if (filter.size) h+= ' size=\"' + filter.size + '\"';\n                        h+= '>';\n                }\n        }\n    }\n\n    return this.change('getRuleInput', h, rule, name);\n};\n\n\n// Model CLASS\n// ===============================\n/**\n * Main object storing data model and emitting events\n * ---------\n * Access Node object stored in jQuery objects\n * @param el {jQuery|Node}\n * @return {Node}\n */\nfunction Model(el) {\n    if (!(this instanceof Model)) {\n        return Model.getModel(el);\n    }\n\n    this.root = null;\n    this.$ = $(this);\n}\n\n$.extend(Model.prototype, {\n    trigger: function(type) {\n        this.$.triggerHandler(type, Array.prototype.slice.call(arguments, 1));\n        return this;\n    },\n\n    on: function() {\n        this.$.on.apply(this.$, Array.prototype.slice.call(arguments));\n        return this;\n    },\n\n    off: function() {\n        this.$.off.apply(this.$, Array.prototype.slice.call(arguments));\n        return this;\n    },\n\n    once: function() {\n        this.$.one.apply(this.$, Array.prototype.slice.call(arguments));\n        return this;\n    }\n});\n\n/**\n * Access Node object stored in jQuery objects\n * @param el {jQuery|Node}\n * @return {Node}\n */\nModel.getModel = function(el) {\n    if (!el) {\n        return null;\n    }\n    else if (el instanceof Node) {\n        return el;\n    }\n    else {\n        return $(el).data('queryBuilderModel');\n    }\n};\n\n/*\n * Define Node properties with getter and setter\n * Update events are emitted in the setter through root Model (if any)\n */\nfunction defineModelProperties(obj, fields) {\n    fields.forEach(function(field) {\n        Object.defineProperty(obj.prototype, field, {\n            enumerable: true,\n            get: function() {\n                return this.__[field];\n            },\n            set: function(value) {\n                var oldValue = (this.__[field] !== null && typeof this.__[field] == 'object') ?\n                  $.extend({}, this.__[field]) :\n                  this.__[field];\n\n                this.__[field] = value;\n\n                if (this.model !== null) {\n                    this.model.trigger('update', this, field, value, oldValue);\n                }\n            }\n        });\n    });\n}\n\n\n// Node abstract CLASS\n// ===============================\n/**\n * @param {Node}\n * @param {jQuery}\n */\nvar Node = function(parent, $el) {\n    if (!(this instanceof Node)) {\n        return new Node();\n    }\n\n    Object.defineProperty(this, '__', { value: {} });\n\n    $el.data('queryBuilderModel', this);\n\n    this.__.level = 1;\n    this.__.error = null;\n    this.__.data = undefined;\n    this.$el = $el;\n    this.id = $el[0].id;\n    this.model = null;\n    this.parent = parent;\n};\n\ndefineModelProperties(Node, ['level', 'error', 'data', 'flags']);\n\nObject.defineProperty(Node.prototype, 'parent', {\n    enumerable: true,\n    get: function() {\n        return this.__.parent;\n    },\n    set: function(value) {\n        this.__.parent = value;\n        this.level = value === null ? 1 : value.level + 1;\n        this.model = value === null ? null : value.model;\n    }\n});\n\n/**\n * Check if this Node is the root\n * @return {boolean}\n */\nNode.prototype.isRoot = function() {\n    return (this.level === 1);\n};\n\n/**\n * Return node position inside parent\n * @return {int}\n */\nNode.prototype.getPos = function() {\n    if (this.isRoot()) {\n        return -1;\n    }\n    else {\n        return this.parent.getNodePos(this);\n    }\n};\n\n/**\n * Delete self\n */\nNode.prototype.drop = function() {\n    var model = this.model;\n\n    if (!this.isRoot()) {\n        this.parent._removeNode(this);\n    }\n\n    if (model !== null) {\n        model.trigger('drop', this);\n    }\n};\n\n/**\n * Move itself after another Node\n * @param {Node}\n * @return {Node} self\n */\nNode.prototype.moveAfter = function(node) {\n    if (this.isRoot()) return;\n\n    this._move(node.parent, node.getPos() + 1);\n\n    return this;\n};\n\n/**\n * Move itself at the beginning of parent or another Group\n * @param {Group,optional}\n * @return {Node} self\n */\nNode.prototype.moveAtBegin = function(target) {\n    if (this.isRoot()) return;\n\n    if (target === undefined) {\n        target = this.parent;\n    }\n\n    this._move(target, 0);\n\n    return this;\n};\n\n/**\n * Move itself at the end of parent or another Group\n * @param {Group,optional}\n * @return {Node} self\n */\nNode.prototype.moveAtEnd = function(target) {\n    if (this.isRoot()) return;\n\n    if (target === undefined) {\n        target = this.parent;\n    }\n\n    this._move(target, target.length() - 1);\n\n    return this;\n};\n\n/**\n * Move itself at specific position of Group\n * @param {Group}\n * @param {int}\n */\nNode.prototype._move = function(group, index) {\n    this.parent._removeNode(this);\n    group._appendNode(this, index, false);\n\n    if (this.model !== null) {\n        this.model.trigger('move', this, group, index);\n    }\n};\n\n\n// GROUP CLASS\n// ===============================\n/**\n * @param {Group}\n * @param {jQuery}\n */\nvar Group = function(parent, $el) {\n    if (!(this instanceof Group)) {\n        return new Group(parent, $el);\n    }\n\n    Node.call(this, parent, $el);\n\n    this.rules = [];\n    this.__.condition = null;\n};\n\nGroup.prototype = Object.create(Node.prototype);\nGroup.prototype.constructor = Group;\n\ndefineModelProperties(Group, ['condition']);\n\n/**\n * Empty the Group\n */\nGroup.prototype.empty = function() {\n    this.each('reverse', function(rule) {\n        rule.drop();\n    }, function(group) {\n        group.drop();\n    });\n};\n\n/**\n * Delete self\n */\nGroup.prototype.drop = function() {\n    this.empty();\n    Node.prototype.drop.call(this);\n};\n\n/**\n * Return the number of children\n * @return {int}\n */\nGroup.prototype.length = function() {\n    return this.rules.length;\n};\n\n/**\n * Add a Node at specified index\n * @param {Node}\n * @param {int,optional}\n * @param {boolean,optional}\n * @return {Node} the inserted node\n */\nGroup.prototype._appendNode = function(node, index, trigger) {\n    if (index === undefined) {\n        index = this.length();\n    }\n\n    this.rules.splice(index, 0, node);\n    node.parent = this;\n\n    if (trigger && this.model !== null) {\n        this.model.trigger('add', node, index);\n    }\n\n    return node;\n};\n\n/**\n * Add a Group by jQuery element at specified index\n * @param {jQuery}\n * @param {int,optional}\n * @return {Group} the inserted group\n */\nGroup.prototype.addGroup = function($el, index) {\n    return this._appendNode(new Group(this, $el), index, true);\n};\n\n/**\n * Add a Rule by jQuery element at specified index\n * @param {jQuery}\n * @param {int,optional}\n * @return {Rule} the inserted rule\n */\nGroup.prototype.addRule = function($el, index) {\n    return this._appendNode(new Rule(this, $el), index, true);\n};\n\n/**\n * Delete a specific Node\n * @param {Node}\n * @return {Group} self\n */\nGroup.prototype._removeNode = function(node) {\n    var index = this.getNodePos(node);\n    if (index !== -1) {\n        node.parent = null;\n        this.rules.splice(index, 1);\n    }\n\n    return this;\n};\n\n/**\n * Return position of a child Node\n * @param {Node}\n * @return {int}\n */\nGroup.prototype.getNodePos = function(node) {\n    return this.rules.indexOf(node);\n};\n\n/**\n * Iterate over all Nodes\n * @param {boolean,optional} iterate in reverse order, required if you delete nodes\n * @param {function} callback for Rules\n * @param {function,optional} callback for Groups\n * @return {boolean}\n */\nGroup.prototype.each = function(reverse, cbRule, cbGroup, context) {\n    if (typeof reverse == 'function') {\n        context = cbGroup;\n        cbGroup = cbRule;\n        cbRule = reverse;\n        reverse = false;\n    }\n    context = context === undefined ? null : context;\n\n    var i = reverse ? this.rules.length - 1 : 0;\n    var l = reverse ? 0 : this.rules.length - 1;\n    var c = reverse ? -1 : 1;\n    var next = function() { return reverse ? i >= l : i <= l; };\n    var stop = false;\n\n    for (; next(); i+= c) {\n        if (this.rules[i] instanceof Group) {\n            if (cbGroup !== undefined) {\n                stop = cbGroup.call(context, this.rules[i]) === false;\n            }\n        }\n        else {\n            stop = cbRule.call(context, this.rules[i]) === false;\n        }\n\n        if (stop) {\n            break;\n        }\n    }\n\n    return !stop;\n};\n\n/**\n * Return true if the group contains a particular Node\n * @param {Node}\n * @param {boolean,optional} recursive search\n * @return {boolean}\n */\nGroup.prototype.contains = function(node, deep) {\n    if (this.getNodePos(node) !== -1) {\n        return true;\n    }\n    else if (!deep) {\n        return false;\n    }\n    else {\n        // the loop will return with false as soon as the Node is found\n        return !this.each(function(rule) {\n            return true;\n        }, function(group) {\n            return !group.contains(node, true);\n        });\n    }\n};\n\n\n// RULE CLASS\n// ===============================\n/**\n * @param {Group}\n * @param {jQuery}\n */\nvar Rule = function(parent, $el) {\n    if (!(this instanceof Rule)) {\n        return new Rule(parent, $el);\n    }\n\n    Node.call(this, parent, $el);\n\n    this.__.filter = null;\n    this.__.operator = null;\n    this.__.flags = {};\n    this.__.value = undefined;\n};\n\nRule.prototype = Object.create(Node.prototype);\nRule.prototype.constructor = Rule;\n\ndefineModelProperties(Rule, ['filter', 'operator', 'value']);\n\n\n// EXPORT\n// ===============================\nQueryBuilder.Group = Group;\nQueryBuilder.Rule = Rule;\n\n\nvar Utils = QueryBuilder.utils = {};\n\n/**\n * Utility to iterate over radio/checkbox/selection options.\n * it accept three formats: array of values, map, array of 1-element maps\n *\n * @param options {object|array}\n * @param tpl {callable} (takes key and text)\n */\nUtils.iterateOptions = function(options, tpl) {\n    if (options) {\n        if ($.isArray(options)) {\n            options.forEach(function(entry) {\n                // array of one-element maps\n                if ($.isPlainObject(entry)) {\n                    $.each(entry, function(key, val) {\n                        tpl(key, val);\n                        return false; // break after first entry\n                    });\n                }\n                // array of values\n                else {\n                    tpl(entry, entry);\n                }\n            });\n        }\n        // unordered map\n        else {\n            $.each(options, function(key, val) {\n                tpl(key, val);\n            });\n        }\n    }\n};\n\n/**\n * Replaces {0}, {1}, ... in a string\n * @param str {string}\n * @param args,... {mixed}\n * @return {string}\n */\nUtils.fmt = function(str/*, args*/) {\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    return str.replace(/{([0-9]+)}/g, function(m, i) {\n        return args[parseInt(i)];\n    });\n};\n\n/**\n * Throw an Error object with custom name\n * @param type {string}\n * @param message {string}\n * @param args,... {mixed}\n */\nUtils.error = function(type, message/*, args*/) {\n    var err = new Error(Utils.fmt.apply(null, Array.prototype.slice.call(arguments, 1)));\n    err.name = type + 'Error';\n    err.args = Array.prototype.slice.call(arguments, 2);\n    throw err;\n};\n\n/**\n * Change type of a value to int or float\n * @param value {mixed}\n * @param type {string} 'integer', 'double' or anything else\n * @param boolAsInt {boolean} return 0 or 1 for booleans\n * @return {mixed}\n */\nUtils.changeType = function(value, type, boolAsInt) {\n    switch (type) {\n        case 'integer': return parseInt(value);\n        case 'double': return parseFloat(value);\n        case 'boolean':\n            var bool = value.trim().toLowerCase() === 'true' || value.trim() === '1' || value === 1;\n            return boolAsInt ? (bool ? 1 : 0) : bool;\n        default: return value;\n    }\n};\n\n/**\n * Escape string like mysql_real_escape_string\n * @param value {string}\n * @return {string}\n */\nUtils.escapeString = function(value) {\n    if (typeof value != 'string') {\n        return value;\n    }\n\n    return value\n      .replace(/[\\0\\n\\r\\b\\\\\\'\\\"]/g, function(s) {\n          switch (s) {\n              case '\\0': return '\\\\0';\n              case '\\n': return '\\\\n';\n              case '\\r': return '\\\\r';\n              case '\\b': return '\\\\b';\n              default:   return '\\\\' + s;\n          }\n      })\n      // uglify compliant\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\x1a/g, '\\\\Z');\n};\n\n/**\n * Escape value for use in regex\n * @param value {string}\n * @return {string}\n */\nUtils.escapeRegExp = function(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n};\n\n/**\n * Escape HTML element id\n * @param value {string}\n * @return {string}\n */\nUtils.escapeElementId = function(str) {\n    // Regex based on that suggested by:\n    // https://learn.jquery.com/using-jquery-core/faq/how-do-i-select-an-element-by-an-id-that-has-characters-used-in-css-notation/\n    // - escapes : . [ ] ,\n    // - avoids escaping already escaped values\n    return (str) ? str.replace(/(\\\\)?([:.\\[\\],])/g,\n            function( $0, $1, $2 ) { return $1 ? $0 : '\\\\' + $2; }) : str;\n};\n\n/**\n * Sort objects by grouping them by {key}, preserving initial order when possible\n * @param {object[]} items\n * @param {string} key\n * @returns {object[]}\n */\nUtils.groupSort = function(items, key) {\n    var optgroups = [];\n    var newItems = [];\n\n    items.forEach(function(item) {\n        var idx;\n\n        if (item[key]) {\n            idx = optgroups.lastIndexOf(item[key]);\n\n            if (idx == -1) {\n                idx = optgroups.length;\n            }\n            else {\n                idx++;\n            }\n        }\n        else {\n            idx = optgroups.length;\n        }\n\n        optgroups.splice(idx, 0, item[key]);\n        newItems.splice(idx, 0, item);\n    });\n\n    return newItems;\n};\n\n\n$.fn.queryBuilder = function(option) {\n    if (this.length > 1) {\n        Utils.error('Config', 'Unable to initialize on multiple target');\n    }\n\n    var data = this.data('queryBuilder');\n    var options = (typeof option == 'object' && option) || {};\n\n    if (!data && option == 'destroy') {\n        return this;\n    }\n    if (!data) {\n        this.data('queryBuilder', new QueryBuilder(this, options));\n    }\n    if (typeof option == 'string') {\n        return data[option].apply(data, Array.prototype.slice.call(arguments, 1));\n    }\n\n    return this;\n};\n\n$.fn.queryBuilder.constructor = QueryBuilder;\n$.fn.queryBuilder.defaults = QueryBuilder.defaults;\n$.fn.queryBuilder.extend = QueryBuilder.extend;\n$.fn.queryBuilder.define = QueryBuilder.define;\n$.fn.queryBuilder.regional = QueryBuilder.regional;\n\n\n/*!\n * jQuery QueryBuilder Awesome Bootstrap Checkbox\n * Applies Awesome Bootstrap Checkbox for checkbox and radio inputs.\n */\n\nQueryBuilder.define('bt-checkbox', function(options) {\n    if (options.font == 'glyphicons') {\n        var injectCSS = document.createElement('style');\n        injectCSS.innerHTML = '\\\n.checkbox input[type=checkbox]:checked + label:after { \\\n    font-family: \"Glyphicons Halflings\"; \\\n    content: \"\\\\e013\"; \\\n} \\\n.checkbox label:after { \\\n    padding-left: 4px; \\\n    padding-top: 2px; \\\n    font-size: 9px; \\\n}';\n        document.body.appendChild(injectCSS);\n    }\n\n    this.on('getRuleInput.filter', function(h, rule, name) {\n        var filter = rule.filter;\n\n        if ((filter.input === 'radio' || filter.input === 'checkbox') && !filter.plugin) {\n            h.value = '';\n\n            if (!filter.colors) {\n                filter.colors = {};\n            }\n            if (filter.color) {\n                filter.colors._def_ = filter.color;\n            }\n\n            var style = filter.vertical ? ' style=\"display:block\"' : '';\n            var i = 0;\n\n            Utils.iterateOptions(filter.values, function(key, val) {\n                var color = filter.colors[key] || filter.colors._def_ || options.color;\n                var id = name + '_' + (i++);\n\n                h.value+= '\\\n<div' + style + ' class=\"' + filter.input + ' ' + filter.input + '-' + color + '\"> \\\n  <input type=\"' + filter.input + '\" name=\"' + name + '\" id=\"' + id + '\" value=\"' + key + '\"> \\\n  <label for=\"' + id + '\">' + val + '</label> \\\n</div>';\n            });\n        }\n    });\n}, {\n    font: 'glyphicons',\n    color: 'default'\n});\n\n\n/*!\n * jQuery QueryBuilder Bootstrap Selectpicker\n * Applies Bootstrap Select on filters and operators combo-boxes.\n */\n\n/**\n * @throws ConfigError\n */\nQueryBuilder.define('bt-selectpicker', function(options) {\n    if (!$.fn.selectpicker || !$.fn.selectpicker.Constructor) {\n        Utils.error('MissingLibrary', 'Bootstrap Select is required to use \"bt-selectpicker\" plugin. Get it here: http://silviomoreto.github.io/bootstrap-select');\n    }\n\n    // init selectpicker\n    this.on('afterCreateRuleFilters', function(e, rule) {\n        rule.$el.find(Selectors.rule_filter).removeClass('form-control').selectpicker(options);\n    });\n\n    this.on('afterCreateRuleOperators', function(e, rule) {\n        rule.$el.find(Selectors.rule_operator).removeClass('form-control').selectpicker(options);\n    });\n\n    // update selectpicker on change\n    this.on('afterUpdateRuleFilter', function(e, rule) {\n        rule.$el.find(Selectors.rule_filter).selectpicker('render');\n    });\n\n    this.on('afterUpdateRuleOperator', function(e, rule) {\n        rule.$el.find(Selectors.rule_operator).selectpicker('render');\n    });\n}, {\n    container: 'body',\n    style: 'btn-inverse btn-xs',\n    width: 'auto',\n    showIcon: false\n});\n\n\n/*!\n * jQuery QueryBuilder Bootstrap Tooltip errors\n * Applies Bootstrap Tooltips on validation error messages.\n */\n\n/**\n * @throws ConfigError\n */\nQueryBuilder.define('bt-tooltip-errors', function(options) {\n    if (!$.fn.tooltip || !$.fn.tooltip.Constructor || !$.fn.tooltip.Constructor.prototype.fixTitle) {\n        Utils.error('MissingLibrary', 'Bootstrap Tooltip is required to use \"bt-tooltip-errors\" plugin. Get it here: http://getbootstrap.com');\n    }\n\n    var self = this;\n\n    // add BT Tooltip data\n    this.on('getRuleTemplate.filter getGroupTemplate.filter', function(h) {\n        var $h = $(h.value);\n        $h.find(Selectors.error_container).attr('data-toggle', 'tooltip');\n        h.value = $h.prop('outerHTML');\n    });\n\n    // init/refresh tooltip when title changes\n    this.model.on('update', function(e, node, field) {\n        if (field == 'error' && self.settings.display_errors) {\n            node.$el.find(Selectors.error_container).eq(0)\n              .tooltip(options)\n              .tooltip('hide')\n              .tooltip('fixTitle');\n        }\n    });\n}, {\n    placement: 'right'\n});\n\n\n/*!\n * jQuery QueryBuilder Change Filters\n * Allows to change available filters after plugin initialization.\n */\n\nQueryBuilder.extend({\n    /**\n     * Change the filters of the builder\n     * @throws ChangeFilterError\n     * @param {boolean,optional} delete rules using old filters\n     * @param {object[]} new filters\n     */\n    setFilters: function(delete_orphans, filters) {\n        var self = this;\n\n        if (filters === undefined) {\n            filters = delete_orphans;\n            delete_orphans = false;\n        }\n\n        filters = this.checkFilters(filters);\n        filters = this.change('setFilters', filters);\n\n        var filtersIds = filters.map(function(filter) {\n            return filter.id;\n        });\n\n        // check for orphans\n        if (!delete_orphans) {\n            (function checkOrphans(node) {\n                node.each(\n                    function(rule) {\n                        if (rule.filter && filtersIds.indexOf(rule.filter.id) === -1) {\n                            Utils.error('ChangeFilter', 'A rule is using filter \"{0}\"', rule.filter.id);\n                        }\n                    },\n                    checkOrphans\n                );\n            }(this.model.root));\n        }\n\n        // replace filters\n        this.filters = filters;\n\n        // apply on existing DOM\n        (function updateBuilder(node) {\n            node.each(true,\n              function(rule) {\n                  if (rule.filter && filtersIds.indexOf(rule.filter.id) === -1) {\n                      rule.drop();\n                  }\n                  else {\n                      self.createRuleFilters(rule);\n\n                      rule.$el.find(Selectors.rule_filter).val(rule.filter ? rule.filter.id : '-1');\n                  }\n              },\n              updateBuilder\n            );\n        }(this.model.root));\n\n        // update plugins\n        if (this.settings.plugins) {\n            if (this.settings.plugins['unique-filter']) {\n                this.updateDisabledFilters();\n            }\n            if (this.settings.plugins['bt-selectpicker']) {\n                this.$el.find(Selectors.rule_filter).selectpicker('render');\n            }\n        }\n\n        // reset the default_filter if does not exist anymore\n        if (this.settings.default_filter) {\n            try {\n                this.getFilterById(this.settings.default_filter);\n            }\n            catch (e) {\n                this.settings.default_filter = null;\n            }\n        }\n\n        this.trigger('afterSetFilters', filters);\n    },\n\n    /**\n     * Adds a new filter to the builder\n     * @param {object|object[]} the new filter\n     * @param {mixed,optional} numeric index or '#start' or '#end'\n     */\n    addFilter: function(new_filters, position) {\n        if (position === undefined || position == '#end') {\n            position = this.filters.length;\n        }\n        else if (position == '#start') {\n            position = 0;\n        }\n\n        if (!$.isArray(new_filters)) {\n            new_filters = [new_filters];\n        }\n\n        var filters = $.extend(true, [], this.filters);\n\n        // numeric position\n        if (parseInt(position) == position) {\n            Array.prototype.splice.apply(filters, [position, 0].concat(new_filters));\n        }\n        else {\n            // after filter by its id\n            if (this.filters.some(function(filter, index) {\n                if (filter.id == position) {\n                    position = index + 1;\n                    return true;\n                }\n            })) {\n                Array.prototype.splice.apply(filters, [position, 0].concat(new_filters));\n            }\n            // defaults to end of list\n            else {\n                Array.prototype.push.apply(filters, new_filters);\n            }\n        }\n\n        this.setFilters(filters);\n    },\n\n    /**\n     * Removes a filter from the builder\n     * @param {string|string[]} the filter id\n     * @param {boolean,optional} delete rules using old filters\n     */\n    removeFilter: function(filter_ids, delete_orphans) {\n        var filters = $.extend(true, [], this.filters);\n        if (typeof filter_ids === 'string') {\n            filter_ids = [filter_ids];\n        }\n\n        filters = filters.filter(function(filter) {\n            return filter_ids.indexOf(filter.id) === -1;\n        });\n\n        this.setFilters(delete_orphans, filters);\n    }\n});\n\n\n/*!\n * jQuery QueryBuilder Filter Description\n * Provides three ways to display a description about a filter: inline, Bootsrap Popover or Bootbox.\n */\n\n/**\n * @throws ConfigError\n */\nQueryBuilder.define('filter-description', function(options) {\n    /**\n     * INLINE\n     */\n    if (options.mode === 'inline') {\n        this.on('afterUpdateRuleFilter', function(e, rule) {\n            var $p = rule.$el.find('p.filter-description');\n\n            if (!rule.filter || !rule.filter.description) {\n                $p.hide();\n            }\n            else {\n                if ($p.length === 0) {\n                    $p = $('<p class=\"filter-description\"></p>');\n                    $p.appendTo(rule.$el);\n                }\n                else {\n                    $p.show();\n                }\n\n                $p.html('<i class=\"' + options.icon + '\"></i> ' + rule.filter.description);\n            }\n        });\n    }\n    /**\n     * POPOVER\n     */\n    else if (options.mode === 'popover') {\n        if (!$.fn.popover || !$.fn.popover.Constructor || !$.fn.popover.Constructor.prototype.fixTitle) {\n            Utils.error('MissingLibrary', 'Bootstrap Popover is required to use \"filter-description\" plugin. Get it here: http://getbootstrap.com');\n        }\n\n        this.on('afterUpdateRuleFilter', function(e, rule) {\n            var $b = rule.$el.find('button.filter-description');\n\n            if (!rule.filter || !rule.filter.description) {\n                $b.hide();\n\n                if ($b.data('bs.popover')) {\n                    $b.popover('hide');\n                }\n            }\n            else {\n                if ($b.length === 0) {\n                    $b = $('<button type=\"button\" class=\"btn btn-xs btn-info filter-description\" data-toggle=\"popover\"><i class=\"' + options.icon + '\"></i></button>');\n                    $b.prependTo(rule.$el.find(Selectors.rule_actions));\n\n                    $b.popover({\n                        placement: 'left',\n                        container: 'body',\n                        html: true\n                    });\n\n                    $b.on('mouseout', function() {\n                        $b.popover('hide');\n                    });\n                }\n                else {\n                    $b.show();\n                }\n\n                $b.data('bs.popover').options.content = rule.filter.description;\n\n                if ($b.attr('aria-describedby')) {\n                    $b.popover('show');\n                }\n            }\n        });\n    }\n    /**\n     * BOOTBOX\n     */\n    else if (options.mode === 'bootbox') {\n        if (!('bootbox' in window)) {\n            Utils.error('MissingLibrary', 'Bootbox is required to use \"filter-description\" plugin. Get it here: http://bootboxjs.com');\n        }\n\n        this.on('afterUpdateRuleFilter', function(e, rule) {\n            var $b = rule.$el.find('button.filter-description');\n\n            if (!rule.filter || !rule.filter.description) {\n                $b.hide();\n            }\n            else {\n                if ($b.length === 0) {\n                    $b = $('<button type=\"button\" class=\"btn btn-xs btn-info filter-description\" data-toggle=\"bootbox\"><i class=\"' + options.icon + '\"></i></button>');\n                    $b.prependTo(rule.$el.find(Selectors.rule_actions));\n\n                    $b.on('click', function() {\n                        bootbox.alert($b.data('description'));\n                    });\n                }\n\n                $b.data('description', rule.filter.description);\n            }\n        });\n    }\n}, {\n    icon: 'glyphicon glyphicon-info-sign',\n    mode: 'popover'\n});\n\n\n/*!\n * jQuery QueryBuilder Invert\n * Allows to invert a rule operator, a group condition or the entire builder.\n */\n\nQueryBuilder.defaults({\n    operatorOpposites: {\n        'equal':            'not_equal',\n        'not_equal':        'equal',\n        'in':               'not_in',\n        'not_in':           'in',\n        'less':             'greater_or_equal',\n        'less_or_equal':    'greater',\n        'greater':          'less_or_equal',\n        'greater_or_equal': 'less',\n        'between':          'not_between',\n        'not_between':      'between',\n        'begins_with':      'not_begins_with',\n        'not_begins_with':  'begins_with',\n        'contains':         'not_contains',\n        'not_contains':     'contains',\n        'ends_with':        'not_ends_with',\n        'not_ends_with':    'ends_with',\n        'is_empty':         'is_not_empty',\n        'is_not_empty':     'is_empty',\n        'is_null':          'is_not_null',\n        'is_not_null':      'is_null'\n    },\n\n    conditionOpposites: {\n        'AND': 'OR',\n        'OR': 'AND'\n    }\n});\n\nQueryBuilder.define('invert', function(options) {\n    var self = this;\n\n    /**\n     * Bind events\n     */\n    this.on('afterInit', function() {\n        self.$el.on('click.queryBuilder', '[data-invert=group]', function() {\n            var $group = $(this).closest(Selectors.group_container);\n            self.invert(Model($group), options);\n        });\n\n        if (options.display_rules_button && options.invert_rules) {\n            self.$el.on('click.queryBuilder', '[data-invert=rule]', function() {\n                var $rule = $(this).closest(Selectors.rule_container);\n                self.invert(Model($rule), options);\n            });\n        }\n    });\n\n    /**\n     * Modify templates\n     */\n    this.on('getGroupTemplate.filter', function(h, level) {\n        var $h = $(h.value);\n        $h.find(Selectors.condition_container).after('<button type=\"button\" class=\"btn btn-xs btn-default\" data-invert=\"group\"><i class=\"' + options.icon + '\"></i> ' + self.lang.invert + '</button>');\n        h.value = $h.prop('outerHTML');\n    });\n\n    if (options.display_rules_button && options.invert_rules) {\n        this.on('getRuleTemplate.filter', function(h) {\n            var $h = $(h.value);\n            $h.find(Selectors.rule_actions).prepend('<button type=\"button\" class=\"btn btn-xs btn-default\" data-invert=\"rule\"><i class=\"' + options.icon + '\"></i> ' + self.lang.invert + '</button>');\n            h.value = $h.prop('outerHTML');\n        });\n    }\n}, {\n    icon: 'glyphicon glyphicon-random',\n    recursive: true,\n    invert_rules: true,\n    display_rules_button: false,\n    silent_fail: false\n});\n\nQueryBuilder.extend({\n    /**\n     * Invert a Group, a Rule or the whole builder\n     * @throws InvertConditionError, InvertOperatorError\n     * @param {Node,optional}\n     * @param {object,optional}\n     */\n    invert: function(node, options) {\n        if (!(node instanceof Node)) {\n            if (!this.model.root) return;\n            options = node;\n            node = this.model.root;\n        }\n\n        if (typeof options != 'object') options = {};\n        if (options.recursive === undefined) options.recursive = true;\n        if (options.invert_rules === undefined) options.invert_rules = true;\n        if (options.silent_fail === undefined) options.silent_fail = false;\n        if (options.trigger === undefined) options.trigger = true;\n\n        if (node instanceof Group) {\n            // invert group condition\n            if (this.settings.conditionOpposites[node.condition]) {\n                node.condition = this.settings.conditionOpposites[node.condition];\n            }\n            else if (!options.silent_fail) {\n                Utils.error('InvertCondition', 'Unknown inverse of condition \"{0}\"', node.condition);\n            }\n\n            // recursive call\n            if (options.recursive) {\n                var tempOpts = $.extend({}, options, { trigger: false });\n                node.each(function(rule) {\n                    if (options.invert_rules) {\n                        this.invert(rule, tempOpts);\n                    }\n                }, function(group) {\n                    this.invert(group, tempOpts);\n                }, this);\n            }\n        }\n        else if (node instanceof Rule) {\n            if (node.operator && !node.filter.no_invert) {\n                // invert rule operator\n                if (this.settings.operatorOpposites[node.operator.type]) {\n                    var invert = this.settings.operatorOpposites[node.operator.type];\n                    // check if the invert is \"authorized\"\n                    if (!node.filter.operators || node.filter.operators.indexOf(invert) != -1) {\n                        node.operator = this.getOperatorByType(invert);\n                    }\n                }\n                else if (!options.silent_fail) {\n                    Utils.error('InvertOperator', 'Unknown inverse of operator \"{0}\"', node.operator.type);\n                }\n            }\n        }\n\n        if (options.trigger) {\n            this.trigger('afterInvert', node, options);\n        }\n    }\n});\n\n\n/*!\n * jQuery QueryBuilder MongoDB Support\n * Allows to export rules as a MongoDB find object as well as populating the builder from a MongoDB object.\n */\n\n// DEFAULT CONFIG\n// ===============================\nQueryBuilder.defaults({\n    mongoOperators: {\n        equal:            function(v) { return v[0]; },\n        not_equal:        function(v) { return { '$ne': v[0] }; },\n        in:               function(v) { return { '$in': v }; },\n        not_in:           function(v) { return { '$nin': v }; },\n        less:             function(v) { return { '$lt': v[0] }; },\n        less_or_equal:    function(v) { return { '$lte': v[0] }; },\n        greater:          function(v) { return { '$gt': v[0] }; },\n        greater_or_equal: function(v) { return { '$gte': v[0] }; },\n        between:          function(v) { return { '$gte': v[0], '$lte': v[1] }; },\n        not_between:      function(v) { return { '$lt': v[0], '$gt': v[1] }; },\n        begins_with:      function(v) { return { '$regex': '^' + Utils.escapeRegExp(v[0]) }; },\n        not_begins_with:  function(v) { return { '$regex': '^(?!' + Utils.escapeRegExp(v[0]) + ')' }; },\n        contains:         function(v) { return { '$regex': Utils.escapeRegExp(v[0]) }; },\n        not_contains:     function(v) { return { '$regex': '^((?!' + Utils.escapeRegExp(v[0]) + ').)*$', '$options': 's' }; },\n        ends_with:        function(v) { return { '$regex': Utils.escapeRegExp(v[0]) + '$' }; },\n        not_ends_with:    function(v) { return { '$regex': '(?<!' + Utils.escapeRegExp(v[0]) + ')$' }; },\n        is_empty:         function(v) { return ''; },\n        is_not_empty:     function(v) { return { '$ne': '' }; },\n        is_null:          function(v) { return null; },\n        is_not_null:      function(v) { return { '$ne': null }; }\n    },\n\n    mongoRuleOperators: {\n        $ne: function(v) {\n            v = v.$ne;\n            return {\n                'val': v,\n                'op': v === null ? 'is_not_null' : (v === '' ? 'is_not_empty' : 'not_equal')\n            };\n        },\n        eq: function(v) {\n            return {\n                'val': v,\n                'op': v === null ? 'is_null' : (v === '' ? 'is_empty' : 'equal')\n            };\n        },\n        $regex: function(v) {\n            v = v.$regex;\n            if (v.slice(0, 4) == '^(?!' && v.slice(-1) == ')') {\n                return { 'val': v.slice(4, -1), 'op': 'not_begins_with' };\n            }\n            else if (v.slice(0, 5) == '^((?!' && v.slice(-5) == ').)*$') {\n                return { 'val': v.slice(5, -5), 'op': 'not_contains' };\n            }\n            else if (v.slice(0, 4) == '(?<!' && v.slice(-2) == ')$') {\n                return { 'val': v.slice(4, -2), 'op': 'not_ends_with' };\n            }\n            else if (v.slice(-1) == '$') {\n                return { 'val': v.slice(0, -1), 'op': 'ends_with' };\n            }\n            else if (v.slice(0, 1) == '^') {\n                return { 'val': v.slice(1), 'op': 'begins_with' };\n            }\n            else {\n                return { 'val': v, 'op': 'contains' };\n            }\n        },\n        between:     function(v) { return { 'val': [v.$gte, v.$lte], 'op': 'between' }; },\n        not_between: function(v) { return { 'val': [v.$lt, v.$gt], 'op': 'not_between' }; },\n        $in:  function(v) { return { 'val': v.$in, 'op': 'in' }; },\n        $nin: function(v) { return { 'val': v.$nin, 'op': 'not_in' }; },\n        $lt:  function(v) { return { 'val': v.$lt, 'op': 'less' }; },\n        $lte: function(v) { return { 'val': v.$lte, 'op': 'less_or_equal' }; },\n        $gt:  function(v) { return { 'val': v.$gt, 'op': 'greater' }; },\n        $gte: function(v) { return { 'val': v.$gte, 'op': 'greater_or_equal' }; }\n    }\n});\n\n\n// PUBLIC METHODS\n// ===============================\nQueryBuilder.extend({\n    /**\n     * Get rules as MongoDB query\n     * @throws UndefinedMongoConditionError, UndefinedMongoOperatorError\n     * @param data {object} (optional) rules\n     * @return {object}\n     */\n    getMongo: function(data) {\n        data = (data === undefined) ? this.getRules() : data;\n\n        var self = this;\n\n        return (function parse(data) {\n            if (!data.condition) {\n                data.condition = self.settings.default_condition;\n            }\n            if (['AND', 'OR'].indexOf(data.condition.toUpperCase()) === -1) {\n                Utils.error('UndefinedMongoCondition', 'Unable to build MongoDB query with condition \"{0}\"', data.condition);\n            }\n\n            if (!data.rules) {\n                return {};\n            }\n\n            var parts = [];\n\n            data.rules.forEach(function(rule) {\n                if (rule.rules && rule.rules.length > 0) {\n                    parts.push(parse(rule));\n                }\n                else {\n                    var mdb = self.settings.mongoOperators[rule.operator];\n                    var ope = self.getOperatorByType(rule.operator);\n                    var values = [];\n\n                    if (mdb === undefined) {\n                        Utils.error('UndefinedMongoOperator', 'Unknown MongoDB operation for operator \"{0}\"', rule.operator);\n                    }\n\n                    if (ope.nb_inputs !== 0) {\n                        if (!(rule.value instanceof Array)) {\n                            rule.value = [rule.value];\n                        }\n\n                        rule.value.forEach(function(v) {\n                            values.push(Utils.changeType(v, rule.type, false));\n                        });\n                    }\n\n                    var part = {};\n                    part[rule.field] = mdb.call(self, values);\n                    parts.push(part);\n                }\n            });\n\n            var res = {};\n            if (parts.length > 0) {\n                res['$' + data.condition.toLowerCase()] = parts;\n            }\n            return res;\n        }(data));\n    },\n\n    /**\n     * Convert MongoDB object to rules\n     * @throws MongoParseError, UndefinedMongoConditionError, UndefinedMongoOperatorError\n     * @param data {object} query object\n     * @return {object}\n     */\n    getRulesFromMongo: function(data) {\n        if (data === undefined || data === null) {\n            return null;\n        }\n\n        var self = this;\n        var conditions = {\n            '$and': 'AND',\n            '$or': 'OR'\n        };\n\n        return (function parse(data) {\n            var topKeys = Object.keys(data);\n\n            if (topKeys.length > 1) {\n                Utils.error('MongoParse', 'Invalid MongoDB query format');\n            }\n            if (!conditions[topKeys[0].toLowerCase()]) {\n                Utils.error('UndefinedMongoCondition', 'Unable to build MongoDB query with condition \"{0}\"', topKeys[0]);\n            }\n\n            var rules = data[topKeys[0]];\n            var parts = [];\n\n            rules.forEach(function(rule) {\n                var keys = Object.keys(rule);\n\n                if (conditions[keys[0].toLowerCase()]) {\n                    parts.push(parse(rule));\n                }\n                else {\n                    var field = keys[0];\n                    var value = rule[field];\n\n                    var operator = determineMongoOperator(value, field);\n                    if (operator === undefined) {\n                        Utils.error('MongoParse', 'Invalid MongoDB query format');\n                    }\n\n                    var mdbrl = self.settings.mongoRuleOperators[operator];\n                    if (mdbrl === undefined) {\n                        Utils.error('UndefinedMongoOperator', 'JSON Rule operation unknown for operator \"{0}\"', operator);\n                    }\n\n                    var opVal = mdbrl.call(self, value);\n                    parts.push({\n                        id: self.change('getMongoDBFieldID', field, value),\n                        field: field,\n                        operator: opVal.op,\n                        value: opVal.val\n                    });\n                }\n            });\n\n            var res = {};\n            if (parts.length > 0) {\n                res.condition = conditions[topKeys[0].toLowerCase()];\n                res.rules = parts;\n            }\n            return res;\n        }(data));\n    },\n\n    /**\n     * Set rules from MongoDB object\n     * @param data {object}\n     */\n    setRulesFromMongo: function(data) {\n        this.setRules(this.getRulesFromMongo(data));\n    }\n});\n\n/**\n * Find which operator is used in a MongoDB sub-object\n * @param {mixed} value\n * @param {string} field\n * @return {string|undefined}\n */\nfunction determineMongoOperator(value, field) {\n    if (value !== null && typeof value == 'object') {\n        var subkeys = Object.keys(value);\n\n        if (subkeys.length === 1) {\n            return subkeys[0];\n        }\n        else {\n            if (value.$gte !== undefined && value.$lte !== undefined) {\n                return 'between';\n            }\n            if (value.$lt !== undefined && value.$gt !== undefined) {\n                return 'not_between';\n            }\n            else if (value.$regex !== undefined) { // optional $options\n                return '$regex';\n            }\n            else {\n                return;\n            }\n        }\n    }\n    else {\n        return 'eq';\n    }\n}\n\n\n/*!\n * jQuery QueryBuilder Sortable\n * Enables drag & drop sort of rules.\n */\n\nSelectors.rule_and_group_containers = Selectors.rule_container + ', ' + Selectors.group_container;\n\nQueryBuilder.define('sortable', function(options) {\n    /**\n     * Init HTML5 drag and drop\n     */\n    this.on('afterInit', function(e) {\n        // configure jQuery to use dataTransfer\n        $.event.props.push('dataTransfer');\n\n        var placeholder;\n        var src;\n        var self = e.builder;\n\n        // only add \"draggable\" attribute when hovering drag handle\n        // preventing text select bug in Firefox\n        self.$el.on('mouseover.queryBuilder', '.drag-handle', function() {\n            self.$el.find(Selectors.rule_and_group_containers).attr('draggable', true);\n        });\n        self.$el.on('mouseout.queryBuilder', '.drag-handle', function() {\n            self.$el.find(Selectors.rule_and_group_containers).removeAttr('draggable');\n        });\n\n        // dragstart: create placeholder and hide current element\n        self.$el.on('dragstart.queryBuilder', '[draggable]', function(e) {\n            e.stopPropagation();\n\n            // notify drag and drop (only dummy text)\n            e.dataTransfer.setData('text', 'drag');\n\n            src = Model(e.target);\n\n            // Chrome glitchs\n            // - helper invisible if hidden immediately\n            // - \"dragend\" is called immediately if we modify the DOM directly\n            setTimeout(function() {\n                var ph = $('<div class=\"rule-placeholder\">&nbsp;</div>');\n                ph.css('min-height', src.$el.height());\n\n                placeholder = src.parent.addRule(ph, src.getPos());\n\n                src.$el.hide();\n            }, 0);\n        });\n\n        // dragenter: move the placeholder\n        self.$el.on('dragenter.queryBuilder', '[draggable]', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (placeholder) {\n                moveSortableToTarget(placeholder, $(e.target));\n            }\n        });\n\n        // dragover: prevent glitches\n        self.$el.on('dragover.queryBuilder', '[draggable]', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n        });\n\n        // drop: move current element\n        self.$el.on('drop.queryBuilder', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            moveSortableToTarget(src, $(e.target));\n        });\n\n        // dragend: show current element and delete placeholder\n        self.$el.on('dragend.queryBuilder', '[draggable]', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            src.$el.show();\n            placeholder.drop();\n\n            self.$el.find(Selectors.rule_and_group_containers).removeAttr('draggable');\n\n            self.trigger('afterMove', src);\n\n            src = placeholder = null;\n        });\n    });\n\n    /**\n     * Remove drag handle from non-sortable rules\n     */\n    this.on('parseRuleFlags.filter', function(flags) {\n        if (flags.value.no_sortable === undefined) {\n            flags.value.no_sortable = options.default_no_sortable;\n        }\n    });\n\n    this.on('afterApplyRuleFlags', function(e, rule) {\n        if (rule.flags.no_sortable) {\n            rule.$el.find('.drag-handle').remove();\n        }\n    });\n\n    /**\n     * Remove drag handle from non-sortable groups\n     */\n    this.on('parseGroupFlags.filter', function(flags) {\n        if (flags.value.no_sortable === undefined) {\n            flags.value.no_sortable = options.default_no_sortable;\n        }\n    });\n\n    this.on('afterApplyGroupFlags', function(e, group) {\n        if (group.flags.no_sortable) {\n            group.$el.find('.drag-handle').remove();\n        }\n    });\n\n    /**\n     * Modify templates\n     */\n    this.on('getGroupTemplate.filter', function(h, level) {\n        if (level > 1) {\n            var $h = $(h.value);\n            $h.find(Selectors.condition_container).after('<div class=\"drag-handle\"><i class=\"' + options.icon + '\"></i></div>');\n            h.value = $h.prop('outerHTML');\n        }\n    });\n\n    this.on('getRuleTemplate.filter', function(h) {\n        var $h = $(h.value);\n        $h.find(Selectors.rule_header).after('<div class=\"drag-handle\"><i class=\"' + options.icon + '\"></i></div>');\n        h.value = $h.prop('outerHTML');\n    });\n}, {\n    default_no_sortable: false,\n    icon: 'glyphicon glyphicon-sort'\n});\n\n/**\n * Move an element (placeholder or actual object) depending on active target\n * @param {Node}\n * @param {jQuery}\n */\nfunction moveSortableToTarget(element, target) {\n    var parent;\n\n    // on rule\n    parent = target.closest(Selectors.rule_container);\n    if (parent.length) {\n        element.moveAfter(Model(parent));\n        return;\n    }\n\n    // on group header\n    parent = target.closest(Selectors.group_header);\n    if (parent.length) {\n        parent = target.closest(Selectors.group_container);\n        element.moveAtBegin(Model(parent));\n        return;\n    }\n\n    // on group\n    parent = target.closest(Selectors.group_container);\n    if (parent.length) {\n        element.moveAtEnd(Model(parent));\n        return;\n    }\n}\n\n\n/*!\n * jQuery QueryBuilder SQL Support\n * Allows to export rules as a SQL WHERE statement as well as populating the builder from an SQL query.\n */\n\n// DEFAULT CONFIG\n// ===============================\nQueryBuilder.defaults({\n    /* operators for internal -> SQL conversion */\n    sqlOperators: {\n        equal:            { op: '= ?' },\n        not_equal:        { op: '!= ?' },\n        in:               { op: 'IN(?)',          sep: ', ' },\n        not_in:           { op: 'NOT IN(?)',      sep: ', ' },\n        less:             { op: '< ?' },\n        less_or_equal:    { op: '<= ?' },\n        greater:          { op: '> ?' },\n        greater_or_equal: { op: '>= ?' },\n        between:          { op: 'BETWEEN ?',      sep: ' AND ' },\n        not_between:      { op: 'NOT BETWEEN ?',  sep: ' AND ' },\n        begins_with:      { op: 'LIKE(?)',        mod: '{0}%' },\n        not_begins_with:  { op: 'NOT LIKE(?)',    mod: '{0}%' },\n        contains:         { op: 'LIKE(?)',        mod: '%{0}%' },\n        not_contains:     { op: 'NOT LIKE(?)',    mod: '%{0}%' },\n        ends_with:        { op: 'LIKE(?)',        mod: '%{0}' },\n        not_ends_with:    { op: 'NOT LIKE(?)',    mod: '%{0}' },\n        is_empty:         { op: '= \\'\\'' },\n        is_not_empty:     { op: '!= \\'\\'' },\n        is_null:          { op: 'IS NULL' },\n        is_not_null:      { op: 'IS NOT NULL' }\n    },\n\n    /* operators for SQL -> internal conversion */\n    sqlRuleOperator: {\n        '=': function(v) {\n            return {\n                val: v,\n                op: v === '' ? 'is_empty' : 'equal'\n            };\n        },\n        '!=': function(v) {\n            return {\n                val: v,\n                op: v === '' ? 'is_not_empty' : 'not_equal'\n            };\n        },\n        'LIKE': function(v) {\n            if (v.slice(0, 1) == '%' && v.slice(-1) == '%') {\n                return {\n                    val: v.slice(1, -1),\n                    op: 'contains'\n                };\n            }\n            else if (v.slice(0, 1) == '%') {\n                return {\n                    val: v.slice(1),\n                    op: 'ends_with'\n                };\n            }\n            else if (v.slice(-1) == '%') {\n                return {\n                    val: v.slice(0, -1),\n                    op: 'begins_with'\n                };\n            }\n            else {\n                Utils.error('SQLParse', 'Invalid value for LIKE operator \"{0}\"', v);\n            }\n        },\n        'IN':           function(v) { return { val: v, op: 'in' }; },\n        'NOT IN':       function(v) { return { val: v, op: 'not_in' }; },\n        '<':            function(v) { return { val: v, op: 'less' }; },\n        '<=':           function(v) { return { val: v, op: 'less_or_equal' }; },\n        '>':            function(v) { return { val: v, op: 'greater' }; },\n        '>=':           function(v) { return { val: v, op: 'greater_or_equal' }; },\n        'BETWEEN':      function(v) { return { val: v, op: 'between' }; },\n        'NOT BETWEEN':  function(v) { return { val: v, op: 'not_between' }; },\n        'IS': function(v) {\n            if (v !== null) {\n                Utils.error('SQLParse', 'Invalid value for IS operator');\n            }\n            return { val: null, op: 'is_null' };\n        },\n        'IS NOT': function(v) {\n            if (v !== null) {\n                Utils.error('SQLParse', 'Invalid value for IS operator');\n            }\n            return { val: null, op: 'is_not_null' };\n        }\n    },\n\n    /* statements for internal -> SQL conversion */\n    sqlStatements: {\n        'question_mark': function() {\n            var params = [];\n            return {\n                add: function(rule, value) {\n                    params.push(value);\n                    return '?';\n                },\n                run: function() {\n                    return params;\n                }\n            };\n        },\n\n        'numbered': function(char) {\n            if (!char || char.length > 1) char = '$';\n            var index = 0;\n            var params = [];\n            return {\n                add: function(rule, value) {\n                    params.push(value);\n                    index++;\n                    return char + index;\n                },\n                run: function() {\n                    return params;\n                }\n            };\n        },\n\n        'named': function(char) {\n            if (!char || char.length > 1) char = ':';\n            var indexes = {};\n            var params = {};\n            return {\n                add: function(rule, value) {\n                    if (!indexes[rule.field]) indexes[rule.field] = 1;\n                    var key = rule.field + '_' + (indexes[rule.field]++);\n                    params[key] = value;\n                    return char + key;\n                },\n                run: function() {\n                    return params;\n                }\n            };\n        }\n    },\n\n    /* statements for SQL -> internal conversion */\n    sqlRuleStatement: {\n        'question_mark': function(values) {\n            var index = 0;\n            return {\n                parse: function(v) {\n                    return v == '?' ? values[index++] : v;\n                },\n                esc: function(sql) {\n                    return sql.replace(/\\?/g, '\\'?\\'');\n                }\n            };\n        },\n\n        'numbered': function(values, char) {\n            if (!char || char.length > 1) char = '$';\n            var regex1 = new RegExp('^\\\\' + char + '[0-9]+$');\n            var regex2 = new RegExp('\\\\' + char + '([0-9]+)', 'g');\n            return {\n                parse: function(v) {\n                    return regex1.test(v) ? values[v.slice(1) - 1] : v;\n                },\n                esc: function(sql) {\n                    return sql.replace(regex2, '\\'' + (char == '$' ? '$$' : char) + '$1\\'');\n                }\n            };\n        },\n\n        'named': function(values, char) {\n            if (!char || char.length > 1) char = ':';\n            var regex1 = new RegExp('^\\\\' + char);\n            var regex2 = new RegExp('\\\\' + char + '(' + Object.keys(values).join('|') + ')', 'g');\n            return {\n                parse: function(v) {\n                    return regex1.test(v) ? values[v.slice(1)] : v;\n                },\n                esc: function(sql) {\n                    return sql.replace(regex2, '\\'' + (char == '$' ? '$$' : char) + '$1\\'');\n                }\n            };\n        }\n    }\n});\n\n\n// PUBLIC METHODS\n// ===============================\nQueryBuilder.extend({\n    /**\n     * Get rules as SQL query\n     * @throws UndefinedSQLConditionError, UndefinedSQLOperatorError\n     * @param stmt {boolean|string} use prepared statements - false, 'question_mark', 'numbered', 'numbered(@)', 'named', 'named(@)'\n     * @param nl {bool} output with new lines\n     * @param data {object} (optional) rules\n     * @return {object}\n     */\n    getSQL: function(stmt, nl, data) {\n        data = (data === undefined) ? this.getRules() : data;\n        nl = (nl === true) ? '\\n' : ' ';\n\n        if (stmt === true) stmt = 'question_mark';\n        if (typeof stmt == 'string') {\n            var config = getStmtConfig(stmt);\n            stmt = this.settings.sqlStatements[config[1]](config[2]);\n        }\n\n        var self = this;\n\n        var sql = (function parse(data) {\n            if (!data.condition) {\n                data.condition = self.settings.default_condition;\n            }\n            if (['AND', 'OR'].indexOf(data.condition.toUpperCase()) === -1) {\n                Utils.error('UndefinedSQLCondition', 'Unable to build SQL query with condition \"{0}\"', data.condition);\n            }\n\n            if (!data.rules) {\n                return '';\n            }\n\n            var parts = [];\n\n            data.rules.forEach(function(rule) {\n                if (rule.rules && rule.rules.length > 0) {\n                    parts.push('(' + nl + parse(rule) + nl + ')' + nl);\n                }\n                else {\n                    var sql = self.settings.sqlOperators[rule.operator];\n                    var ope = self.getOperatorByType(rule.operator);\n                    var value = '';\n\n                    if (sql === undefined) {\n                        Utils.error('UndefinedSQLOperator', 'Unknown SQL operation for operator \"{0}\"', rule.operator);\n                    }\n\n                    if (ope.nb_inputs !== 0) {\n                        if (!(rule.value instanceof Array)) {\n                            rule.value = [rule.value];\n                        }\n\n                        rule.value.forEach(function(v, i) {\n                            if (i > 0) {\n                                value+= sql.sep;\n                            }\n\n                            if (rule.type == 'integer' || rule.type == 'double' || rule.type == 'boolean') {\n                                v = Utils.changeType(v, rule.type, true);\n                            }\n                            else if (!stmt) {\n                                v = Utils.escapeString(v);\n                            }\n\n                            if (sql.mod) {\n                                v = Utils.fmt(sql.mod, v);\n                            }\n\n                            if (stmt) {\n                                value+= stmt.add(rule, v);\n                            }\n                            else {\n                                if (typeof v == 'string') {\n                                    v = '\\'' + v + '\\'';\n                                }\n\n                                value+= v;\n                            }\n                        });\n                    }\n\n                    parts.push(rule.field + ' ' + sql.op.replace(/\\?/, value));\n                }\n            });\n\n            return parts.join(' ' + data.condition + nl);\n        }(data));\n\n        if (stmt) {\n            return {\n                sql: sql,\n                params: stmt.run()\n            };\n        }\n        else {\n            return {\n                sql: sql\n            };\n        }\n    },\n\n    /**\n     * Convert SQL to rules\n     * @throws ConfigError, SQLParseError, UndefinedSQLOperatorError\n     * @param data {object} query object\n     * @param stmt {boolean|string} use prepared statements - false, 'question_mark', 'numbered', 'numbered(@)', 'named', 'named(@)'\n     * @return {object}\n     */\n    getRulesFromSQL: function(data, stmt) {\n        if (!('SQLParser' in window)) {\n            Utils.error('MissingLibrary', 'SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser');\n        }\n\n        var self = this;\n\n        if (typeof data == 'string') {\n            data = { sql: data };\n        }\n\n        if (stmt === true) stmt = 'question_mark';\n        if (typeof stmt == 'string') {\n            var config = getStmtConfig(stmt);\n            stmt = this.settings.sqlRuleStatement[config[1]](data.params, config[2]);\n        }\n\n        if (stmt) {\n            data.sql = stmt.esc(data.sql);\n        }\n\n        if (data.sql.toUpperCase().indexOf('SELECT') !== 0) {\n            data.sql = 'SELECT * FROM table WHERE ' + data.sql;\n        }\n\n        var parsed = SQLParser.parse(data.sql);\n\n        if (!parsed.where) {\n            Utils.error('SQLParse', 'No WHERE clause found');\n        }\n\n        var out = {\n            condition: this.settings.default_condition,\n            rules: []\n        };\n        var curr = out;\n\n        (function flatten(data, i) {\n            // it's a node\n            if (['AND', 'OR'].indexOf(data.operation.toUpperCase()) !== -1) {\n                // create a sub-group if the condition is not the same and it's not the first level\n                if (i > 0 && curr.condition != data.operation.toUpperCase()) {\n                    curr.rules.push({\n                        condition: self.settings.default_condition,\n                        rules: []\n                    });\n\n                    curr = curr.rules[curr.rules.length - 1];\n                }\n\n                curr.condition = data.operation.toUpperCase();\n                i++;\n\n                // some magic !\n                var next = curr;\n                flatten(data.left, i);\n\n                curr = next;\n                flatten(data.right, i);\n            }\n            // it's a leaf\n            else {\n                if (data.left.value === undefined || data.right.value === undefined) {\n                    Utils.error('SQLParse', 'Missing field and/or value');\n                }\n\n                if ($.isPlainObject(data.right.value)) {\n                    Utils.error('SQLParse', 'Value format not supported for {0}.', data.left.value);\n                }\n\n                // convert array\n                var value;\n                if ($.isArray(data.right.value)) {\n                    value = data.right.value.map(function(v) {\n                        return v.value;\n                    });\n                }\n                else {\n                    value = data.right.value;\n                }\n\n                // get actual values\n                if (stmt) {\n                    if ($.isArray(value)) {\n                        value = value.map(stmt.parse);\n                    }\n                    else {\n                        value = stmt.parse(value);\n                    }\n                }\n\n                // convert operator\n                var operator = data.operation.toUpperCase();\n                if (operator == '<>') operator = '!=';\n\n                var sqlrl;\n                if (operator == 'NOT LIKE') {\n                    sqlrl = self.settings.sqlRuleOperator['LIKE'];\n                }\n                else {\n                    sqlrl = self.settings.sqlRuleOperator[operator];\n                }\n\n                if (sqlrl === undefined) {\n                    Utils.error('UndefinedSQLOperator', 'Invalid SQL operation \"{0}\".', data.operation);\n                }\n\n                var opVal = sqlrl.call(this, value, data.operation);\n                if (operator == 'NOT LIKE') opVal.op = 'not_' + opVal.op;\n\n                var left_value = data.left.values.join('.');\n\n                curr.rules.push({\n                    id: self.change('getSQLFieldID', left_value, value),\n                    field: left_value,\n                    operator: opVal.op,\n                    value: opVal.val\n                });\n            }\n        }(parsed.where.conditions, 0));\n\n        return out;\n    },\n\n    /**\n     * Set rules from SQL\n     * @param data {object}\n     */\n    setRulesFromSQL: function(data, stmt) {\n        this.setRules(this.getRulesFromSQL(data, stmt));\n    }\n});\n\nfunction getStmtConfig(stmt) {\n    var config = stmt.match(/(question_mark|numbered|named)(?:\\((.)\\))?/);\n    if (!config) config = [null, 'question_mark', undefined];\n    return config;\n}\n\n\n/*!\n * jQuery QueryBuilder Unique Filter\n * Allows to define some filters as \"unique\": ie which can be used for only one rule, globally or in the same group.\n */\n\nQueryBuilder.define('unique-filter', function() {\n    this.status.used_filters = {};\n\n    this.on('afterUpdateRuleFilter', this.updateDisabledFilters);\n    this.on('afterDeleteRule', this.updateDisabledFilters);\n    this.on('afterCreateRuleFilters', this.applyDisabledFilters);\n    this.on('afterReset', this.clearDisabledFilters);\n    this.on('afterClear', this.clearDisabledFilters);\n});\n\nQueryBuilder.extend({\n    updateDisabledFilters: function(e) {\n        var self = e ? e.builder : this;\n\n        self.status.used_filters = {};\n\n        if (!self.model) {\n            return;\n        }\n\n        // get used filters\n        (function walk(group) {\n            group.each(function(rule) {\n                if (rule.filter && rule.filter.unique) {\n                    if (!self.status.used_filters[rule.filter.id]) {\n                        self.status.used_filters[rule.filter.id] = [];\n                    }\n                    if (rule.filter.unique == 'group') {\n                        self.status.used_filters[rule.filter.id].push(rule.parent);\n                    }\n                }\n            }, function(group) {\n                walk(group);\n            });\n        }(self.model.root));\n\n        self.applyDisabledFilters(e);\n    },\n\n    clearDisabledFilters: function(e) {\n        var self = e ? e.builder : this;\n\n        self.status.used_filters = {};\n\n        self.applyDisabledFilters(e);\n    },\n\n    applyDisabledFilters: function(e) {\n        var self = e ? e.builder : this;\n\n        // re-enable everything\n        self.$el.find(Selectors.filter_container + ' option').prop('disabled', false);\n\n        // disable some\n        $.each(self.status.used_filters, function(filterId, groups) {\n            if (groups.length === 0) {\n                self.$el.find(Selectors.filter_container + ' option[value=\"' + filterId + '\"]:not(:selected)').prop('disabled', true);\n            }\n            else {\n                groups.forEach(function(group) {\n                    group.each(function(rule) {\n                        rule.$el.find(Selectors.filter_container + ' option[value=\"' + filterId + '\"]:not(:selected)').prop('disabled', true);\n                    });\n                });\n            }\n        });\n\n        // update Selectpicker\n        if (self.settings.plugins && self.settings.plugins['bt-selectpicker']) {\n            self.$el.find(Selectors.rule_filter).selectpicker('render');\n        }\n    }\n});\n\n\n/*!\n * jQuery QueryBuilder 2.3.3\n * Locale: English (en)\n * Author: Damien \"Mistic\" Sorel, http://www.strangeplanet.fr\n * Licensed under MIT (http://opensource.org/licenses/MIT)\n */\n\nQueryBuilder.regional['en'] = {\n  \"__locale\": \"English (en)\",\n  \"__author\": \"Damien \\\"Mistic\\\" Sorel, http://www.strangeplanet.fr\",\n  \"add_rule\": \"Add rule\",\n  \"add_group\": \"Add group\",\n  \"delete_rule\": \"Delete\",\n  \"delete_group\": \"Delete\",\n  \"conditions\": {\n    \"AND\": \"AND\",\n    \"OR\": \"OR\"\n  },\n  \"operators\": {\n    \"equal\": \"equal\",\n    \"not_equal\": \"not equal\",\n    \"in\": \"in\",\n    \"not_in\": \"not in\",\n    \"less\": \"less\",\n    \"less_or_equal\": \"less or equal\",\n    \"greater\": \"greater\",\n    \"greater_or_equal\": \"greater or equal\",\n    \"between\": \"between\",\n    \"not_between\": \"not between\",\n    \"begins_with\": \"begins with\",\n    \"not_begins_with\": \"doesn't begin with\",\n    \"contains\": \"contains\",\n    \"not_contains\": \"doesn't contain\",\n    \"ends_with\": \"ends with\",\n    \"not_ends_with\": \"doesn't end with\",\n    \"is_empty\": \"is empty\",\n    \"is_not_empty\": \"is not empty\",\n    \"is_null\": \"is null\",\n    \"is_not_null\": \"is not null\"\n  },\n  \"errors\": {\n    \"no_filter\": \"No filter selected\",\n    \"empty_group\": \"The group is empty\",\n    \"radio_empty\": \"No value selected\",\n    \"checkbox_empty\": \"No value selected\",\n    \"select_empty\": \"No value selected\",\n    \"string_empty\": \"Empty value\",\n    \"string_exceed_min_length\": \"Must contain at least {0} characters\",\n    \"string_exceed_max_length\": \"Must not contain more than {0} characters\",\n    \"string_invalid_format\": \"Invalid format ({0})\",\n    \"number_nan\": \"Not a number\",\n    \"number_not_integer\": \"Not an integer\",\n    \"number_not_double\": \"Not a real number\",\n    \"number_exceed_min\": \"Must be greater than {0}\",\n    \"number_exceed_max\": \"Must be lower than {0}\",\n    \"number_wrong_step\": \"Must be a multiple of {0}\",\n    \"datetime_empty\": \"Empty value\",\n    \"datetime_invalid\": \"Invalid date format ({0})\",\n    \"datetime_exceed_min\": \"Must be after {0}\",\n    \"datetime_exceed_max\": \"Must be before {0}\",\n    \"boolean_not_valid\": \"Not a boolean\",\n    \"operator_not_multiple\": \"Operator {0} cannot accept multiple values\"\n  },\n  \"invert\": \"Invert\"\n};\n\nQueryBuilder.defaults({ lang_code: 'en' });\n}));//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi92ZW5pY2UtanMvbGliL3F1ZXJ5LWJ1aWxkZXIuanM/ZTVkNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGpRdWVyeS5leHRlbmRleHQgMC4xLjFcbiAqXG4gKiBDb3B5cmlnaHQgMjAxNCBEYW1pZW4gXCJNaXN0aWNcIiBTb3JlbCAoaHR0cDovL3d3dy5zdHJhbmdlcGxhbmV0LmZyKVxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUKVxuICogXG4gKiBCYXNlZCBvbiBqUXVlcnkuZXh0ZW5kIGJ5IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqL1xuXG4vLyAvLyBJbXBvcnRlZCBieSBGaXNhXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xuXG5cbi8qKlxuICogRVhURUROIERFWFQgRk9SIEpRVUVSWVxuICovXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICAgIGZhY3RvcnkoJCk7IC8vIE1PRElGSUVEXG4gICAgLy8gaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vICAgICBkZWZpbmUoJ2pRdWVyeS5leHRlbmRleHQnLCBbJ2pxdWVyeSddLCBmYWN0b3J5KTtcbiAgICAvLyB9XG4gICAgLy8gZWxzZSB7XG4gICAgLy8gICAgIGZhY3Rvcnkocm9vdC5qUXVlcnkpO1xuICAgIC8vIH1cbn0odGhpcywgZnVuY3Rpb24oJCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAkLmV4dGVuZGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcbiAgICAgIHRhcmdldCA9IGFyZ3VtZW50c1swXSB8fCB7fSxcbiAgICAgIGkgPSAxLFxuICAgICAgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgIGRlZXAgPSBmYWxzZSxcbiAgICAgIGFycmF5TW9kZSA9ICdkZWZhdWx0JztcblxuICAgIC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cbiAgICBpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuICAgICAgZGVlcCA9IHRhcmdldDtcblxuICAgICAgLy8gU2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuICAgICAgdGFyZ2V0ID0gYXJndW1lbnRzWyBpKysgXSB8fCB7fTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYXJyYXkgbW9kZSBwYXJhbWV0ZXJcbiAgICBpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAvLyBhcnJheU1vZGUgPSAkKFt0YXJnZXQudG9Mb3dlckNhc2UoKSwgJ2RlZmF1bHQnXSkuZmlsdGVyKFsnZGVmYXVsdCcsJ2NvbmNhdCcsJ3JlcGxhY2UnLCdleHRlbmQnXSlbMF07XG4gICAgICBhcnJheU1vZGUgPSAkKFt0YXJnZXQudG9Mb3dlckNhc2UoKSwgJ2RlZmF1bHQnXSkuZmlsdGVyKGZ1bmN0aW9uKGtleSwgdmFsKXtcbiAgICAgICAgICByZXR1cm4gWydkZWZhdWx0JywnY29uY2F0JywncmVwbGFjZScsJ2V4dGVuZCddLmluZGV4T2YodmFsKSA+IC0xO1xuICAgICAgfSlbMF07XG5cblxuICAgICAgLy8gU2tpcCB0aGUgc3RyaW5nIHBhcmFtXG4gICAgICB0YXJnZXQgPSBhcmd1bWVudHNbIGkrKyBdIHx8IHt9O1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KVxuICAgIGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhJC5pc0Z1bmN0aW9uKHRhcmdldCkgKSB7XG4gICAgICB0YXJnZXQgPSB7fTtcbiAgICB9XG5cbiAgICAvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcbiAgICBpZiAoIGkgPT09IGxlbmd0aCApIHtcbiAgICAgIHRhcmdldCA9IHRoaXM7XG4gICAgICBpLS07XG4gICAgfVxuXG4gICAgZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG4gICAgICBpZiAoIChvcHRpb25zID0gYXJndW1lbnRzWyBpIF0pICE9PSBudWxsICkge1xuICAgICAgICAvLyBTcGVjaWFsIG9wZXJhdGlvbnMgZm9yIGFycmF5c1xuICAgICAgICBpZiAoJC5pc0FycmF5KG9wdGlvbnMpICYmIGFycmF5TW9kZSAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgY2xvbmUgPSB0YXJnZXQgJiYgJC5pc0FycmF5KHRhcmdldCkgPyB0YXJnZXQgOiBbXTtcbiAgICAgICAgICBzd2l0Y2ggKGFycmF5TW9kZSkge1xuICAgICAgICAgIGNhc2UgJ2NvbmNhdCc6XG4gICAgICAgICAgICB0YXJnZXQgPSBjbG9uZS5jb25jYXQoICQuZXh0ZW5kKCBkZWVwLCBbXSwgb3B0aW9ucyApICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3JlcGxhY2UnOlxuICAgICAgICAgICAgdGFyZ2V0ID0gJC5leHRlbmQoIGRlZXAsIFtdLCBvcHRpb25zICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2V4dGVuZCc6XG4gICAgICAgICAgICBvcHRpb25zLmZvckVhY2goZnVuY3Rpb24oZSwgaSkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAkLmlzQXJyYXkoZSkgPyBbXSA6IHt9O1xuICAgICAgICAgICAgICAgIGNsb25lW2ldID0gJC5leHRlbmRleHQoIGRlZXAsIGFycmF5TW9kZSwgY2xvbmVbaV0gfHwgdHlwZSwgZSApO1xuXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xvbmUuaW5kZXhPZihlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjbG9uZS5wdXNoKGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGFyZ2V0ID0gY2xvbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuICAgICAgICAgIGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcbiAgICAgICAgICAgIHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuICAgICAgICAgICAgY29weSA9IG9wdGlvbnNbIG5hbWUgXTtcblxuICAgICAgICAgICAgLy8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxuICAgICAgICAgICAgaWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcbiAgICAgICAgICAgIGlmICggZGVlcCAmJiBjb3B5ICYmICggJC5pc1BsYWluT2JqZWN0KGNvcHkpIHx8XG4gICAgICAgICAgICAgIChjb3B5SXNBcnJheSA9ICQuaXNBcnJheShjb3B5KSkgKSApIHtcblxuICAgICAgICAgICAgICBpZiAoIGNvcHlJc0FycmF5ICkge1xuICAgICAgICAgICAgICAgIGNvcHlJc0FycmF5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2xvbmUgPSBzcmMgJiYgJC5pc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsb25lID0gc3JjICYmICQuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cbiAgICAgICAgICAgICAgdGFyZ2V0WyBuYW1lIF0gPSAkLmV4dGVuZGV4dCggZGVlcCwgYXJyYXlNb2RlLCBjbG9uZSwgY29weSApO1xuXG4gICAgICAgICAgICAvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgIHRhcmdldFsgbmFtZSBdID0gY29weTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG59KSk7XG5cbi8qKlxuICogZG9UIEpTXG4gKi9cbi8vIGRvVC5qc1xuLy8gMjAxMS0yMDE0LCBMYXVyYSBEb2t0b3JvdmEsIGh0dHBzOi8vZ2l0aHViLmNvbS9vbGFkby9kb1Rcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBHTE9CQUxTID0ge1xuICAgIGpRdWVyeTogJFxufTtcbihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgZG9UID0ge1xuXHRcdHZlcnNpb246IFwiMS4wLjNcIixcblx0XHR0ZW1wbGF0ZVNldHRpbmdzOiB7XG5cdFx0XHRldmFsdWF0ZTogICAgL1xce1xceyhbXFxzXFxTXSs/KFxcfT8pKylcXH1cXH0vZyxcblx0XHRcdGludGVycG9sYXRlOiAvXFx7XFx7PShbXFxzXFxTXSs/KVxcfVxcfS9nLFxuXHRcdFx0ZW5jb2RlOiAgICAgIC9cXHtcXHshKFtcXHNcXFNdKz8pXFx9XFx9L2csXG5cdFx0XHR1c2U6ICAgICAgICAgL1xce1xceyMoW1xcc1xcU10rPylcXH1cXH0vZyxcblx0XHRcdHVzZVBhcmFtczogICAvKF58W15cXHckXSlkZWYoPzpcXC58XFxbW1xcJ1xcXCJdKShbXFx3JFxcLl0rKSg/OltcXCdcXFwiXVxcXSk/XFxzKlxcOlxccyooW1xcdyRcXC5dK3xcXFwiW15cXFwiXStcXFwifFxcJ1teXFwnXStcXCd8XFx7W15cXH1dK1xcfSkvZyxcblx0XHRcdGRlZmluZTogICAgICAvXFx7XFx7IyNcXHMqKFtcXHdcXC4kXSspXFxzKihcXDp8PSkoW1xcc1xcU10rPykjXFx9XFx9L2csXG5cdFx0XHRkZWZpbmVQYXJhbXM6L15cXHMqKFtcXHckXSspOihbXFxzXFxTXSspLyxcblx0XHRcdGNvbmRpdGlvbmFsOiAvXFx7XFx7XFw/KFxcPyk/XFxzKihbXFxzXFxTXSo/KVxccypcXH1cXH0vZyxcblx0XHRcdGl0ZXJhdGU6ICAgICAvXFx7XFx7flxccyooPzpcXH1cXH18KFtcXHNcXFNdKz8pXFxzKlxcOlxccyooW1xcdyRdKylcXHMqKD86XFw6XFxzKihbXFx3JF0rKSk/XFxzKlxcfVxcfSkvZyxcblx0XHRcdHZhcm5hbWU6XHRcIml0XCIsXG5cdFx0XHRzdHJpcDpcdFx0dHJ1ZSxcblx0XHRcdGFwcGVuZDpcdFx0dHJ1ZSxcblx0XHRcdHNlbGZjb250YWluZWQ6IGZhbHNlLFxuXHRcdFx0ZG9Ob3RTa2lwRW5jb2RlZDogZmFsc2Vcblx0XHR9LFxuXHRcdHRlbXBsYXRlOiB1bmRlZmluZWQsIC8vZm4sIGNvbXBpbGUgdGVtcGxhdGVcblx0XHRjb21waWxlOiAgdW5kZWZpbmVkICAvL2ZuLCBmb3IgZXhwcmVzc1xuXHR9O1xuICAgIHZhciBfZ2xvYmFscztcblxuXHRkb1QuZW5jb2RlSFRNTFNvdXJjZSA9IGZ1bmN0aW9uKGRvTm90U2tpcEVuY29kZWQpIHtcblx0XHR2YXIgZW5jb2RlSFRNTFJ1bGVzID0geyBcIiZcIjogXCImIzM4O1wiLCBcIjxcIjogXCImIzYwO1wiLCBcIj5cIjogXCImIzYyO1wiLCAnXCInOiBcIiYjMzQ7XCIsIFwiJ1wiOiBcIiYjMzk7XCIsIFwiL1wiOiBcIiYjNDc7XCIgfSxcblx0XHRcdG1hdGNoSFRNTCA9IGRvTm90U2tpcEVuY29kZWQgPyAvWyY8PlwiJ1xcL10vZyA6IC8mKD8hIz9cXHcrOyl8PHw+fFwifCd8XFwvL2c7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGNvZGUpIHtcblx0XHRcdHJldHVybiBjb2RlID8gY29kZS50b1N0cmluZygpLnJlcGxhY2UobWF0Y2hIVE1MLCBmdW5jdGlvbihtKSB7cmV0dXJuIGVuY29kZUhUTUxSdWxlc1ttXSB8fCBtO30pIDogXCJcIjtcblx0XHR9O1xuXHR9O1xuXG5cdF9nbG9iYWxzID0gKGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzIHx8ICgwLGV2YWwpKFwidGhpc1wiKTsgfSgpKTtcblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZG9UO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKCdkb1QnLCBmdW5jdGlvbigpe3JldHVybiBkb1Q7fSk7XG5cdH0gZWxzZSB7XG5cdFx0X2dsb2JhbHMuZG9UID0gZG9UO1xuXHR9XG5cblx0dmFyIHN0YXJ0ZW5kID0ge1xuXHRcdGFwcGVuZDogeyBzdGFydDogXCInKyhcIiwgICAgICBlbmQ6IFwiKSsnXCIsICAgICAgc3RhcnRlbmNvZGU6IFwiJytlbmNvZGVIVE1MKFwiIH0sXG5cdFx0c3BsaXQ6ICB7IHN0YXJ0OiBcIic7b3V0Kz0oXCIsIGVuZDogXCIpO291dCs9J1wiLCBzdGFydGVuY29kZTogXCInO291dCs9ZW5jb2RlSFRNTChcIiB9XG5cdH0sIHNraXAgPSAvJF4vO1xuXG5cdGZ1bmN0aW9uIHJlc29sdmVEZWZzKGMsIGJsb2NrLCBkZWYpIHtcblx0XHRyZXR1cm4gKCh0eXBlb2YgYmxvY2sgPT09IFwic3RyaW5nXCIpID8gYmxvY2sgOiBibG9jay50b1N0cmluZygpKVxuXHRcdC5yZXBsYWNlKGMuZGVmaW5lIHx8IHNraXAsIGZ1bmN0aW9uKG0sIGNvZGUsIGFzc2lnbiwgdmFsdWUpIHtcblx0XHRcdGlmIChjb2RlLmluZGV4T2YoXCJkZWYuXCIpID09PSAwKSB7XG5cdFx0XHRcdGNvZGUgPSBjb2RlLnN1YnN0cmluZyg0KTtcblx0XHRcdH1cblx0XHRcdGlmICghKGNvZGUgaW4gZGVmKSkge1xuXHRcdFx0XHRpZiAoYXNzaWduID09PSBcIjpcIikge1xuXHRcdFx0XHRcdGlmIChjLmRlZmluZVBhcmFtcykgdmFsdWUucmVwbGFjZShjLmRlZmluZVBhcmFtcywgZnVuY3Rpb24obSwgcGFyYW0sIHYpIHtcblx0XHRcdFx0XHRcdGRlZltjb2RlXSA9IHthcmc6IHBhcmFtLCB0ZXh0OiB2fTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoIShjb2RlIGluIGRlZikpIGRlZltjb2RlXT0gdmFsdWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3IEZ1bmN0aW9uKFwiZGVmXCIsIFwiZGVmWydcIitjb2RlK1wiJ109XCIgKyB2YWx1ZSkoZGVmKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0fSlcblx0XHQucmVwbGFjZShjLnVzZSB8fCBza2lwLCBmdW5jdGlvbihtLCBjb2RlKSB7XG5cdFx0XHRpZiAoYy51c2VQYXJhbXMpIGNvZGUgPSBjb2RlLnJlcGxhY2UoYy51c2VQYXJhbXMsIGZ1bmN0aW9uKG0sIHMsIGQsIHBhcmFtKSB7XG5cdFx0XHRcdGlmIChkZWZbZF0gJiYgZGVmW2RdLmFyZyAmJiBwYXJhbSkge1xuXHRcdFx0XHRcdHZhciBydyA9IChkK1wiOlwiK3BhcmFtKS5yZXBsYWNlKC8nfFxcXFwvZywgXCJfXCIpO1xuXHRcdFx0XHRcdGRlZi5fX2V4cCA9IGRlZi5fX2V4cCB8fCB7fTtcblx0XHRcdFx0XHRkZWYuX19leHBbcnddID0gZGVmW2RdLnRleHQucmVwbGFjZShuZXcgUmVnRXhwKFwiKF58W15cXFxcdyRdKVwiICsgZGVmW2RdLmFyZyArIFwiKFteXFxcXHckXSlcIiwgXCJnXCIpLCBcIiQxXCIgKyBwYXJhbSArIFwiJDJcIik7XG5cdFx0XHRcdFx0cmV0dXJuIHMgKyBcImRlZi5fX2V4cFsnXCIrcncrXCInXVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHZhciB2ID0gbmV3IEZ1bmN0aW9uKFwiZGVmXCIsIFwicmV0dXJuIFwiICsgY29kZSkoZGVmKTtcblx0XHRcdHJldHVybiB2ID8gcmVzb2x2ZURlZnMoYywgdiwgZGVmKSA6IHY7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiB1bmVzY2FwZShjb2RlKSB7XG5cdFx0cmV0dXJuIGNvZGUucmVwbGFjZSgvXFxcXCgnfFxcXFwpL2csIFwiJDFcIikucmVwbGFjZSgvW1xcclxcdFxcbl0vZywgXCIgXCIpO1xuXHR9XG5cblx0ZG9ULnRlbXBsYXRlID0gZnVuY3Rpb24odG1wbCwgYywgZGVmKSB7XG5cdFx0YyA9IGMgfHwgZG9ULnRlbXBsYXRlU2V0dGluZ3M7XG5cdFx0dmFyIGNzZSA9IGMuYXBwZW5kID8gc3RhcnRlbmQuYXBwZW5kIDogc3RhcnRlbmQuc3BsaXQsIG5lZWRodG1sZW5jb2RlLCBzaWQgPSAwLCBpbmR2LFxuXHRcdFx0c3RyICA9IChjLnVzZSB8fCBjLmRlZmluZSkgPyByZXNvbHZlRGVmcyhjLCB0bXBsLCBkZWYgfHwge30pIDogdG1wbDtcblxuXHRcdHN0ciA9IChcInZhciBvdXQ9J1wiICsgKGMuc3RyaXAgPyBzdHIucmVwbGFjZSgvKF58XFxyfFxcbilcXHQqICt8ICtcXHQqKFxccnxcXG58JCkvZyxcIiBcIilcblx0XHRcdFx0XHQucmVwbGFjZSgvXFxyfFxcbnxcXHR8XFwvXFwqW1xcc1xcU10qP1xcKlxcLy9nLFwiXCIpOiBzdHIpXG5cdFx0XHQucmVwbGFjZSgvJ3xcXFxcL2csIFwiXFxcXCQmXCIpXG5cdFx0XHQucmVwbGFjZShjLmludGVycG9sYXRlIHx8IHNraXAsIGZ1bmN0aW9uKG0sIGNvZGUpIHtcblx0XHRcdFx0cmV0dXJuIGNzZS5zdGFydCArIHVuZXNjYXBlKGNvZGUpICsgY3NlLmVuZDtcblx0XHRcdH0pXG5cdFx0XHQucmVwbGFjZShjLmVuY29kZSB8fCBza2lwLCBmdW5jdGlvbihtLCBjb2RlKSB7XG5cdFx0XHRcdG5lZWRodG1sZW5jb2RlID0gdHJ1ZTtcblx0XHRcdFx0cmV0dXJuIGNzZS5zdGFydGVuY29kZSArIHVuZXNjYXBlKGNvZGUpICsgY3NlLmVuZDtcblx0XHRcdH0pXG5cdFx0XHQucmVwbGFjZShjLmNvbmRpdGlvbmFsIHx8IHNraXAsIGZ1bmN0aW9uKG0sIGVsc2VjYXNlLCBjb2RlKSB7XG5cdFx0XHRcdHJldHVybiBlbHNlY2FzZSA/XG5cdFx0XHRcdFx0KGNvZGUgPyBcIic7fWVsc2UgaWYoXCIgKyB1bmVzY2FwZShjb2RlKSArIFwiKXtvdXQrPSdcIiA6IFwiJzt9ZWxzZXtvdXQrPSdcIikgOlxuXHRcdFx0XHRcdChjb2RlID8gXCInO2lmKFwiICsgdW5lc2NhcGUoY29kZSkgKyBcIil7b3V0Kz0nXCIgOiBcIic7fW91dCs9J1wiKTtcblx0XHRcdH0pXG5cdFx0XHQucmVwbGFjZShjLml0ZXJhdGUgfHwgc2tpcCwgZnVuY3Rpb24obSwgaXRlcmF0ZSwgdm5hbWUsIGluYW1lKSB7XG5cdFx0XHRcdGlmICghaXRlcmF0ZSkgcmV0dXJuIFwiJzt9IH0gb3V0Kz0nXCI7XG5cdFx0XHRcdHNpZCs9MTsgaW5kdj1pbmFtZSB8fCBcImlcIitzaWQ7IGl0ZXJhdGU9dW5lc2NhcGUoaXRlcmF0ZSk7XG5cdFx0XHRcdHJldHVybiBcIic7dmFyIGFyclwiK3NpZCtcIj1cIitpdGVyYXRlK1wiO2lmKGFyclwiK3NpZCtcIil7dmFyIFwiK3ZuYW1lK1wiLFwiK2luZHYrXCI9LTEsbFwiK3NpZCtcIj1hcnJcIitzaWQrXCIubGVuZ3RoLTE7d2hpbGUoXCIraW5kditcIjxsXCIrc2lkK1wiKXtcIlxuXHRcdFx0XHRcdCt2bmFtZStcIj1hcnJcIitzaWQrXCJbXCIraW5kditcIis9MV07b3V0Kz0nXCI7XG5cdFx0XHR9KVxuXHRcdFx0LnJlcGxhY2UoYy5ldmFsdWF0ZSB8fCBza2lwLCBmdW5jdGlvbihtLCBjb2RlKSB7XG5cdFx0XHRcdHJldHVybiBcIic7XCIgKyB1bmVzY2FwZShjb2RlKSArIFwib3V0Kz0nXCI7XG5cdFx0XHR9KVxuXHRcdFx0KyBcIic7cmV0dXJuIG91dDtcIilcblx0XHRcdC5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKS5yZXBsYWNlKC9cXHQvZywgJ1xcXFx0JykucmVwbGFjZSgvXFxyL2csIFwiXFxcXHJcIilcblx0XHRcdC5yZXBsYWNlKC8oXFxzfDt8XFx9fF58XFx7KW91dFxcKz0nJzsvZywgJyQxJykucmVwbGFjZSgvXFwrJycvZywgXCJcIik7XG5cdFx0XHQvLy5yZXBsYWNlKC8oXFxzfDt8XFx9fF58XFx7KW91dFxcKz0nJ1xcKy9nLCckMW91dCs9Jyk7XG5cblx0XHRpZiAobmVlZGh0bWxlbmNvZGUpIHtcblx0XHRcdGlmICghYy5zZWxmY29udGFpbmVkICYmIF9nbG9iYWxzICYmICFfZ2xvYmFscy5fZW5jb2RlSFRNTCkgX2dsb2JhbHMuX2VuY29kZUhUTUwgPSBkb1QuZW5jb2RlSFRNTFNvdXJjZShjLmRvTm90U2tpcEVuY29kZWQpO1xuXHRcdFx0c3RyID0gXCJ2YXIgZW5jb2RlSFRNTCA9IHR5cGVvZiBfZW5jb2RlSFRNTCAhPT0gJ3VuZGVmaW5lZCcgPyBfZW5jb2RlSFRNTCA6IChcIlxuXHRcdFx0XHQrIGRvVC5lbmNvZGVIVE1MU291cmNlLnRvU3RyaW5nKCkgKyBcIihcIiArIChjLmRvTm90U2tpcEVuY29kZWQgfHwgJycpICsgXCIpKTtcIlxuXHRcdFx0XHQrIHN0cjtcblx0XHR9XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBuZXcgRnVuY3Rpb24oYy52YXJuYW1lLCBzdHIpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIikgY29uc29sZS5sb2coXCJDb3VsZCBub3QgY3JlYXRlIGEgdGVtcGxhdGUgZnVuY3Rpb246IFwiICsgc3RyKTtcblx0XHRcdHRocm93IGU7XG5cdFx0fVxuXHR9O1xuXG5cdGRvVC5jb21waWxlID0gZnVuY3Rpb24odG1wbCwgZGVmKSB7XG5cdFx0cmV0dXJuIGRvVC50ZW1wbGF0ZSh0bXBsLCBudWxsLCBkZWYpO1xuXHR9O1xuICAgIEdMT0JBTFMuZG9UID0gZG9UO1xufSgpKTtcblxuLyohXG4gKiBqUXVlcnkgUXVlcnlCdWlsZGVyIDIuMy4zXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE2IERhbWllbiBcIk1pc3RpY1wiIFNvcmVsIChodHRwOi8vd3d3LnN0cmFuZ2VwbGFuZXQuZnIpXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQpXG4gKi9cblxuLy8gTGFuZ3VhZ2VzOiBlblxuLy8gUGx1Z2luczogYnQtY2hlY2tib3gsIGJ0LXNlbGVjdHBpY2tlciwgYnQtdG9vbHRpcC1lcnJvcnMsIGNoYW5nZS1maWx0ZXJzLCBmaWx0ZXItZGVzY3JpcHRpb24sIGludmVydCwgbW9uZ29kYi1zdXBwb3J0LCBzb3J0YWJsZSwgc3FsLXN1cHBvcnQsIHVuaXF1ZS1maWx0ZXJcbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gICAgLy8gaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gICAgIGRlZmluZSgncXVlcnktYnVpbGRlcicsIFsnanF1ZXJ5JywgJ2RvVCcsICdqUXVlcnkuZXh0ZW5kZXh0J10sIGZhY3RvcnkpO1xuICAgIC8vIH1cbiAgICAvLyBlbHNlIHtcbiAgICAgICAgZmFjdG9yeShyb290LmpRdWVyeSwgcm9vdC5kb1QpO1xuICAgIC8vIH1cbn0oR0xPQkFMUywgZnVuY3Rpb24oJCwgZG9UKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuLy8gQ0xBU1MgREVGSU5JVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxudmFyIFF1ZXJ5QnVpbGRlciA9IGZ1bmN0aW9uKCRlbCwgb3B0aW9ucykge1xuICAgIHRoaXMuaW5pdCgkZWwsIG9wdGlvbnMpO1xufTtcblxuLy8gRVZFTlRTIFNZU1RFTVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuJC5leHRlbmQoUXVlcnlCdWlsZGVyLnByb3RvdHlwZSwge1xuICAgIGNoYW5nZTogZnVuY3Rpb24odHlwZSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gbmV3ICQuRXZlbnQodHlwZSArICcucXVlcnlCdWlsZGVyLmZpbHRlcicsIHtcbiAgICAgICAgICAgIGJ1aWxkZXI6IHRoaXMsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kZWwudHJpZ2dlckhhbmRsZXIoZXZlbnQsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMikpO1xuXG4gICAgICAgIHJldHVybiBldmVudC52YWx1ZTtcbiAgICB9LFxuXG4gICAgdHJpZ2dlcjogZnVuY3Rpb24odHlwZSkge1xuICAgICAgICB2YXIgZXZlbnQgPSBuZXcgJC5FdmVudCh0eXBlICsgJy5xdWVyeUJ1aWxkZXInLCB7XG4gICAgICAgICAgICBidWlsZGVyOiB0aGlzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuJGVsLnRyaWdnZXJIYW5kbGVyKGV2ZW50LCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcblxuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfSxcblxuICAgIG9uOiBmdW5jdGlvbih0eXBlLCBjYikge1xuICAgICAgICB0aGlzLiRlbC5vbih0eXBlICsgJy5xdWVyeUJ1aWxkZXInLCBjYik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBvZmY6IGZ1bmN0aW9uKHR5cGUsIGNiKSB7XG4gICAgICAgIHRoaXMuJGVsLm9mZih0eXBlICsgJy5xdWVyeUJ1aWxkZXInLCBjYik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBvbmNlOiBmdW5jdGlvbih0eXBlLCBjYikge1xuICAgICAgICB0aGlzLiRlbC5vbmUodHlwZSArICcucXVlcnlCdWlsZGVyJywgY2IpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59KTtcblxuXG4vLyBQTFVHSU5TIFNZU1RFTVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUXVlcnlCdWlsZGVyLnBsdWdpbnMgPSB7fTtcblxuLyoqXG4gKiBHZXQgb3IgZXh0ZW5kIHRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSBvcHRpb25zIHtvYmplY3Qsb3B0aW9uYWx9IG5ldyBjb25maWd1cmF0aW9uLCBsZWF2ZSB1bmRlZmluZWQgdG8gZ2V0IHRoZSBkZWZhdWx0IGNvbmZpZ1xuICogQHJldHVybiB7dW5kZWZpbmVkfG9iamVjdH0gbm90aGluZyBvciBjb25maWd1cmF0aW9uIG9iamVjdCAoY29weSlcbiAqL1xuUXVlcnlCdWlsZGVyLmRlZmF1bHRzID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PSAnb2JqZWN0Jykge1xuICAgICAgICAkLmV4dGVuZGV4dCh0cnVlLCAncmVwbGFjZScsIFF1ZXJ5QnVpbGRlci5ERUZBVUxUUywgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgUXVlcnlCdWlsZGVyLkRFRkFVTFRTW29wdGlvbnNdID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5leHRlbmQodHJ1ZSwge30sIFF1ZXJ5QnVpbGRlci5ERUZBVUxUU1tvcHRpb25zXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUXVlcnlCdWlsZGVyLkRFRkFVTFRTW29wdGlvbnNdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJC5leHRlbmQodHJ1ZSwge30sIFF1ZXJ5QnVpbGRlci5ERUZBVUxUUyk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBEZWZpbmUgYSBuZXcgcGx1Z2luXG4gKiBAcGFyYW0gbmFtZSB7c3RyaW5nfVxuICogQHBhcmFtIGZjdCB7ZnVuY3Rpb259XG4gKiBAcGFyYW0gIGRlZiB7b2JqZWN0LG9wdGlvbmFsfSBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cbiAqL1xuUXVlcnlCdWlsZGVyLmRlZmluZSA9IGZ1bmN0aW9uKG5hbWUsIGZjdCwgZGVmKSB7XG4gICAgUXVlcnlCdWlsZGVyLnBsdWdpbnNbbmFtZV0gPSB7XG4gICAgICAgIGZjdDogZmN0LFxuICAgICAgICBkZWY6IGRlZiB8fCB7fVxuICAgIH07XG59O1xuXG4vKipcbiAqIEFkZCBuZXcgbWV0aG9kc1xuICogQHBhcmFtIHtvYmplY3R9XG4gKi9cblF1ZXJ5QnVpbGRlci5leHRlbmQgPSBmdW5jdGlvbihtZXRob2RzKSB7XG4gICAgJC5leHRlbmQoUXVlcnlCdWlsZGVyLnByb3RvdHlwZSwgbWV0aG9kcyk7XG59O1xuXG4vKipcbiAqIEluaXQgcGx1Z2lucyBmb3IgYW4gaW5zdGFuY2VcbiAqIEB0aHJvd3MgQ29uZmlnRXJyb3JcbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5pbml0UGx1Z2lucyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5wbHVnaW5zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoJC5pc0FycmF5KHRoaXMucGx1Z2lucykpIHtcbiAgICAgICAgdmFyIHRtcCA9IHt9O1xuICAgICAgICB0aGlzLnBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbihwbHVnaW4pIHtcbiAgICAgICAgICAgIHRtcFtwbHVnaW5dID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IHRtcDtcbiAgICB9XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLnBsdWdpbnMpLmZvckVhY2goZnVuY3Rpb24ocGx1Z2luKSB7XG4gICAgICAgIGlmIChwbHVnaW4gaW4gUXVlcnlCdWlsZGVyLnBsdWdpbnMpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luc1twbHVnaW5dID0gJC5leHRlbmQodHJ1ZSwge30sXG4gICAgICAgICAgICAgICAgUXVlcnlCdWlsZGVyLnBsdWdpbnNbcGx1Z2luXS5kZWYsXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW5zW3BsdWdpbl0gfHwge31cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIFF1ZXJ5QnVpbGRlci5wbHVnaW5zW3BsdWdpbl0uZmN0LmNhbGwodGhpcywgdGhpcy5wbHVnaW5zW3BsdWdpbl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ0NvbmZpZycsICdVbmFibGUgdG8gZmluZCBwbHVnaW4gXCJ7MH1cIicsIHBsdWdpbik7XG4gICAgICAgIH1cbiAgICB9LCB0aGlzKTtcbn07XG5cblxuLyoqXG4gKiBBbGxvd2VkIHR5cGVzIGFuZCB0aGVpciBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICovXG5RdWVyeUJ1aWxkZXIudHlwZXMgPSB7XG4gICAgJ3N0cmluZyc6ICAgJ3N0cmluZycsXG4gICAgJ2ludGVnZXInOiAgJ251bWJlcicsXG4gICAgJ2RvdWJsZSc6ICAgJ251bWJlcicsXG4gICAgJ251bWJlcic6ICAgJ251bWJlcicsXG4gICAgJ2RhdGUnOiAgICAgJ2RhdGV0aW1lJyxcbiAgICAndGltZSc6ICAgICAnZGF0ZXRpbWUnLFxuICAgICdkYXRldGltZSc6ICdkYXRldGltZScsXG4gICAgJ2Jvb2xlYW4nOiAgJ2Jvb2xlYW4nXG59O1xuXG4vKipcbiAqIEFsbG93ZWQgaW5wdXRzXG4gKi9cblF1ZXJ5QnVpbGRlci5pbnB1dHMgPSBbXG4gICAgJ3RleHQnLFxuICAgICd0ZXh0YXJlYScsXG4gICAgJ3JhZGlvJyxcbiAgICAnY2hlY2tib3gnLFxuICAgICdzZWxlY3QnXG5dO1xuXG4vKipcbiAqIFJ1bnRpbWUgbW9kaWZpYWJsZSBvcHRpb25zIHdpdGggYHNldE9wdGlvbnNgIG1ldGhvZFxuICovXG5RdWVyeUJ1aWxkZXIubW9kaWZpYWJsZV9vcHRpb25zID0gW1xuICAgICdkaXNwbGF5X2Vycm9ycycsXG4gICAgJ2FsbG93X2dyb3VwcycsXG4gICAgJ2FsbG93X2VtcHR5JyxcbiAgICAnZGVmYXVsdF9jb25kaXRpb24nLFxuICAgICdkZWZhdWx0X2ZpbHRlcidcbl07XG5cbi8qKlxuICogQ1NTIHNlbGVjdG9ycyBmb3IgY29tbW9uIGNvbXBvbmVudHNcbiAqL1xudmFyIFNlbGVjdG9ycyA9IFF1ZXJ5QnVpbGRlci5zZWxlY3RvcnMgPSB7XG4gICAgZ3JvdXBfY29udGFpbmVyOiAgICAgICcucnVsZXMtZ3JvdXAtY29udGFpbmVyJyxcbiAgICBydWxlX2NvbnRhaW5lcjogICAgICAgJy5ydWxlLWNvbnRhaW5lcicsXG4gICAgZmlsdGVyX2NvbnRhaW5lcjogICAgICcucnVsZS1maWx0ZXItY29udGFpbmVyJyxcbiAgICBvcGVyYXRvcl9jb250YWluZXI6ICAgJy5ydWxlLW9wZXJhdG9yLWNvbnRhaW5lcicsXG4gICAgdmFsdWVfY29udGFpbmVyOiAgICAgICcucnVsZS12YWx1ZS1jb250YWluZXInLFxuICAgIGVycm9yX2NvbnRhaW5lcjogICAgICAnLmVycm9yLWNvbnRhaW5lcicsXG4gICAgY29uZGl0aW9uX2NvbnRhaW5lcjogICcucnVsZXMtZ3JvdXAtaGVhZGVyIC5ncm91cC1jb25kaXRpb25zJyxcblxuICAgIHJ1bGVfaGVhZGVyOiAgICAgICAgICAnLnJ1bGUtaGVhZGVyJyxcbiAgICBncm91cF9oZWFkZXI6ICAgICAgICAgJy5ydWxlcy1ncm91cC1oZWFkZXInLFxuICAgIGdyb3VwX2FjdGlvbnM6ICAgICAgICAnLmdyb3VwLWFjdGlvbnMnLFxuICAgIHJ1bGVfYWN0aW9uczogICAgICAgICAnLnJ1bGUtYWN0aW9ucycsXG5cbiAgICBydWxlc19saXN0OiAgICAgICAgICAgJy5ydWxlcy1ncm91cC1ib2R5Pi5ydWxlcy1saXN0JyxcblxuICAgIGdyb3VwX2NvbmRpdGlvbjogICAgICAnLnJ1bGVzLWdyb3VwLWhlYWRlciBbbmFtZSQ9X2NvbmRdJyxcbiAgICBydWxlX2ZpbHRlcjogICAgICAgICAgJy5ydWxlLWZpbHRlci1jb250YWluZXIgW25hbWUkPV9maWx0ZXJdJyxcbiAgICBydWxlX29wZXJhdG9yOiAgICAgICAgJy5ydWxlLW9wZXJhdG9yLWNvbnRhaW5lciBbbmFtZSQ9X29wZXJhdG9yXScsXG4gICAgcnVsZV92YWx1ZTogICAgICAgICAgICcucnVsZS12YWx1ZS1jb250YWluZXIgW25hbWUqPV92YWx1ZV9dJyxcblxuICAgIGFkZF9ydWxlOiAgICAgICAgICAgICAnW2RhdGEtYWRkPXJ1bGVdJyxcbiAgICBkZWxldGVfcnVsZTogICAgICAgICAgJ1tkYXRhLWRlbGV0ZT1ydWxlXScsXG4gICAgYWRkX2dyb3VwOiAgICAgICAgICAgICdbZGF0YS1hZGQ9Z3JvdXBdJyxcbiAgICBkZWxldGVfZ3JvdXA6ICAgICAgICAgJ1tkYXRhLWRlbGV0ZT1ncm91cF0nXG59O1xuXG4vKipcbiAqIFRlbXBsYXRlIHN0cmluZ3MgKHNlZSBgdGVtcGxhdGUuanNgKVxuICovXG5RdWVyeUJ1aWxkZXIudGVtcGxhdGVzID0ge307XG5cbi8qKlxuICogTG9jYWxpemVkIHN0cmluZ3MgKHNlZSBgaTE4bi9gKVxuICovXG5RdWVyeUJ1aWxkZXIucmVnaW9uYWwgPSB7fTtcblxuLyoqXG4gKiBEZWZhdWx0IG9wZXJhdG9yc1xuICovXG5RdWVyeUJ1aWxkZXIuT1BFUkFUT1JTID0ge1xuICAgIGVxdWFsOiAgICAgICAgICAgIHsgdHlwZTogJ2VxdWFsJywgICAgICAgICAgICBuYl9pbnB1dHM6IDEsIG11bHRpcGxlOiBmYWxzZSwgYXBwbHlfdG86IFsnc3RyaW5nJywgJ251bWJlcicsICdkYXRldGltZScsICdib29sZWFuJ10gfSxcbiAgICBub3RfZXF1YWw6ICAgICAgICB7IHR5cGU6ICdub3RfZXF1YWwnLCAgICAgICAgbmJfaW5wdXRzOiAxLCBtdWx0aXBsZTogZmFsc2UsIGFwcGx5X3RvOiBbJ3N0cmluZycsICdudW1iZXInLCAnZGF0ZXRpbWUnLCAnYm9vbGVhbiddIH0sXG4gICAgaW46ICAgICAgICAgICAgICAgeyB0eXBlOiAnaW4nLCAgICAgICAgICAgICAgIG5iX2lucHV0czogMSwgbXVsdGlwbGU6IHRydWUsICBhcHBseV90bzogWydzdHJpbmcnLCAnbnVtYmVyJywgJ2RhdGV0aW1lJ10gfSxcbiAgICBub3RfaW46ICAgICAgICAgICB7IHR5cGU6ICdub3RfaW4nLCAgICAgICAgICAgbmJfaW5wdXRzOiAxLCBtdWx0aXBsZTogdHJ1ZSwgIGFwcGx5X3RvOiBbJ3N0cmluZycsICdudW1iZXInLCAnZGF0ZXRpbWUnXSB9LFxuICAgIGxlc3M6ICAgICAgICAgICAgIHsgdHlwZTogJ2xlc3MnLCAgICAgICAgICAgICBuYl9pbnB1dHM6IDEsIG11bHRpcGxlOiBmYWxzZSwgYXBwbHlfdG86IFsnbnVtYmVyJywgJ2RhdGV0aW1lJ10gfSxcbiAgICBsZXNzX29yX2VxdWFsOiAgICB7IHR5cGU6ICdsZXNzX29yX2VxdWFsJywgICAgbmJfaW5wdXRzOiAxLCBtdWx0aXBsZTogZmFsc2UsIGFwcGx5X3RvOiBbJ251bWJlcicsICdkYXRldGltZSddIH0sXG4gICAgZ3JlYXRlcjogICAgICAgICAgeyB0eXBlOiAnZ3JlYXRlcicsICAgICAgICAgIG5iX2lucHV0czogMSwgbXVsdGlwbGU6IGZhbHNlLCBhcHBseV90bzogWydudW1iZXInLCAnZGF0ZXRpbWUnXSB9LFxuICAgIGdyZWF0ZXJfb3JfZXF1YWw6IHsgdHlwZTogJ2dyZWF0ZXJfb3JfZXF1YWwnLCBuYl9pbnB1dHM6IDEsIG11bHRpcGxlOiBmYWxzZSwgYXBwbHlfdG86IFsnbnVtYmVyJywgJ2RhdGV0aW1lJ10gfSxcbiAgICBiZXR3ZWVuOiAgICAgICAgICB7IHR5cGU6ICdiZXR3ZWVuJywgICAgICAgICAgbmJfaW5wdXRzOiAyLCBtdWx0aXBsZTogZmFsc2UsIGFwcGx5X3RvOiBbJ251bWJlcicsICdkYXRldGltZSddIH0sXG4gICAgbm90X2JldHdlZW46ICAgICAgeyB0eXBlOiAnbm90X2JldHdlZW4nLCAgICAgIG5iX2lucHV0czogMiwgbXVsdGlwbGU6IGZhbHNlLCBhcHBseV90bzogWydudW1iZXInLCAnZGF0ZXRpbWUnXSB9LFxuICAgIGJlZ2luc193aXRoOiAgICAgIHsgdHlwZTogJ2JlZ2luc193aXRoJywgICAgICBuYl9pbnB1dHM6IDEsIG11bHRpcGxlOiBmYWxzZSwgYXBwbHlfdG86IFsnc3RyaW5nJ10gfSxcbiAgICBub3RfYmVnaW5zX3dpdGg6ICB7IHR5cGU6ICdub3RfYmVnaW5zX3dpdGgnLCAgbmJfaW5wdXRzOiAxLCBtdWx0aXBsZTogZmFsc2UsIGFwcGx5X3RvOiBbJ3N0cmluZyddIH0sXG4gICAgY29udGFpbnM6ICAgICAgICAgeyB0eXBlOiAnY29udGFpbnMnLCAgICAgICAgIG5iX2lucHV0czogMSwgbXVsdGlwbGU6IGZhbHNlLCBhcHBseV90bzogWydzdHJpbmcnXSB9LFxuICAgIG5vdF9jb250YWluczogICAgIHsgdHlwZTogJ25vdF9jb250YWlucycsICAgICBuYl9pbnB1dHM6IDEsIG11bHRpcGxlOiBmYWxzZSwgYXBwbHlfdG86IFsnc3RyaW5nJ10gfSxcbiAgICBlbmRzX3dpdGg6ICAgICAgICB7IHR5cGU6ICdlbmRzX3dpdGgnLCAgICAgICAgbmJfaW5wdXRzOiAxLCBtdWx0aXBsZTogZmFsc2UsIGFwcGx5X3RvOiBbJ3N0cmluZyddIH0sXG4gICAgbm90X2VuZHNfd2l0aDogICAgeyB0eXBlOiAnbm90X2VuZHNfd2l0aCcsICAgIG5iX2lucHV0czogMSwgbXVsdGlwbGU6IGZhbHNlLCBhcHBseV90bzogWydzdHJpbmcnXSB9LFxuICAgIGlzX2VtcHR5OiAgICAgICAgIHsgdHlwZTogJ2lzX2VtcHR5JywgICAgICAgICBuYl9pbnB1dHM6IDAsIG11bHRpcGxlOiBmYWxzZSwgYXBwbHlfdG86IFsnc3RyaW5nJ10gfSxcbiAgICBpc19ub3RfZW1wdHk6ICAgICB7IHR5cGU6ICdpc19ub3RfZW1wdHknLCAgICAgbmJfaW5wdXRzOiAwLCBtdWx0aXBsZTogZmFsc2UsIGFwcGx5X3RvOiBbJ3N0cmluZyddIH0sXG4gICAgaXNfbnVsbDogICAgICAgICAgeyB0eXBlOiAnaXNfbnVsbCcsICAgICAgICAgIG5iX2lucHV0czogMCwgbXVsdGlwbGU6IGZhbHNlLCBhcHBseV90bzogWydzdHJpbmcnLCAnbnVtYmVyJywgJ2RhdGV0aW1lJywgJ2Jvb2xlYW4nXSB9LFxuICAgIGlzX25vdF9udWxsOiAgICAgIHsgdHlwZTogJ2lzX25vdF9udWxsJywgICAgICBuYl9pbnB1dHM6IDAsIG11bHRpcGxlOiBmYWxzZSwgYXBwbHlfdG86IFsnc3RyaW5nJywgJ251bWJlcicsICdkYXRldGltZScsICdib29sZWFuJ10gfVxufTtcblxuLyoqXG4gKiBEZWZhdWx0IGNvbmZpZ3VyYXRpb25cbiAqL1xuUXVlcnlCdWlsZGVyLkRFRkFVTFRTID0ge1xuICAgIGZpbHRlcnM6IFtdLFxuICAgIHBsdWdpbnM6IFtdLFxuXG4gICAgc29ydF9maWx0ZXJzOiBmYWxzZSxcbiAgICBkaXNwbGF5X2Vycm9yczogdHJ1ZSxcbiAgICBhbGxvd19ncm91cHM6IC0xLFxuICAgIGFsbG93X2VtcHR5OiBmYWxzZSxcbiAgICBjb25kaXRpb25zOiBbJ0FORCcsICdPUiddLFxuICAgIGRlZmF1bHRfY29uZGl0aW9uOiAnQU5EJyxcbiAgICBpbnB1dHNfc2VwYXJhdG9yOiAnICwgJyxcbiAgICBzZWxlY3RfcGxhY2Vob2xkZXI6ICctLS0tLS0nLFxuICAgIGRpc3BsYXlfZW1wdHlfZmlsdGVyOiB0cnVlLFxuICAgIGRlZmF1bHRfZmlsdGVyOiBudWxsLFxuICAgIG9wdGdyb3Vwczoge30sXG5cbiAgICBkZWZhdWx0X3J1bGVfZmxhZ3M6IHtcbiAgICAgICAgZmlsdGVyX3JlYWRvbmx5OiBmYWxzZSxcbiAgICAgICAgb3BlcmF0b3JfcmVhZG9ubHk6IGZhbHNlLFxuICAgICAgICB2YWx1ZV9yZWFkb25seTogZmFsc2UsXG4gICAgICAgIG5vX2RlbGV0ZTogZmFsc2VcbiAgICB9LFxuXG4gICAgZGVmYXVsdF9ncm91cF9mbGFnczoge1xuICAgICAgICBjb25kaXRpb25fcmVhZG9ubHk6IGZhbHNlLFxuICAgICAgICBub19kZWxldGU6IGZhbHNlXG4gICAgfSxcblxuICAgIHRlbXBsYXRlczoge1xuICAgICAgICBncm91cDogbnVsbCxcbiAgICAgICAgcnVsZTogbnVsbCxcbiAgICAgICAgZmlsdGVyU2VsZWN0OiBudWxsLFxuICAgICAgICBvcGVyYXRvclNlbGVjdDogbnVsbFxuICAgIH0sXG5cbiAgICBsYW5nX2NvZGU6ICdlbicsXG4gICAgbGFuZzoge30sXG5cbiAgICBvcGVyYXRvcnM6IFtcbiAgICAgICAgJ2VxdWFsJyxcbiAgICAgICAgJ25vdF9lcXVhbCcsXG4gICAgICAgICdpbicsXG4gICAgICAgICdub3RfaW4nLFxuICAgICAgICAnbGVzcycsXG4gICAgICAgICdsZXNzX29yX2VxdWFsJyxcbiAgICAgICAgJ2dyZWF0ZXInLFxuICAgICAgICAnZ3JlYXRlcl9vcl9lcXVhbCcsXG4gICAgICAgICdiZXR3ZWVuJyxcbiAgICAgICAgJ25vdF9iZXR3ZWVuJyxcbiAgICAgICAgJ2JlZ2luc193aXRoJyxcbiAgICAgICAgJ25vdF9iZWdpbnNfd2l0aCcsXG4gICAgICAgICdjb250YWlucycsXG4gICAgICAgICdub3RfY29udGFpbnMnLFxuICAgICAgICAnZW5kc193aXRoJyxcbiAgICAgICAgJ25vdF9lbmRzX3dpdGgnLFxuICAgICAgICAnaXNfZW1wdHknLFxuICAgICAgICAnaXNfbm90X2VtcHR5JyxcbiAgICAgICAgJ2lzX251bGwnLFxuICAgICAgICAnaXNfbm90X251bGwnXG4gICAgXSxcblxuICAgIGljb25zOiB7XG4gICAgICAgIGFkZF9ncm91cDogICAgJ2dseXBoaWNvbiBnbHlwaGljb24tcGx1cy1zaWduJyxcbiAgICAgICAgYWRkX3J1bGU6ICAgICAnZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzJyxcbiAgICAgICAgcmVtb3ZlX2dyb3VwOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmUnLFxuICAgICAgICByZW1vdmVfcnVsZTogICdnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZScsXG4gICAgICAgIGVycm9yOiAgICAgICAgJ2dseXBoaWNvbiBnbHlwaGljb24td2FybmluZy1zaWduJ1xuICAgIH1cbn07XG5cblxuLyoqXG4gKiBJbml0IHRoZSBidWlsZGVyXG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCRlbCwgb3B0aW9ucykge1xuICAgICRlbFswXS5xdWVyeUJ1aWxkZXIgPSB0aGlzO1xuICAgIHRoaXMuJGVsID0gJGVsO1xuXG4gICAgLy8gUFJPUEVSVElFU1xuICAgIHRoaXMuc2V0dGluZ3MgPSAkLmV4dGVuZGV4dCh0cnVlLCAncmVwbGFjZScsIHt9LCBRdWVyeUJ1aWxkZXIuREVGQVVMVFMsIG9wdGlvbnMpO1xuICAgIHRoaXMubW9kZWwgPSBuZXcgTW9kZWwoKTtcbiAgICB0aGlzLnN0YXR1cyA9IHtcbiAgICAgICAgZ3JvdXBfaWQ6IDAsXG4gICAgICAgIHJ1bGVfaWQ6IDAsXG4gICAgICAgIGdlbmVyYXRlZF9pZDogZmFsc2UsXG4gICAgICAgIGhhc19vcHRncm91cDogZmFsc2UsXG4gICAgICAgIGhhc19vcGVyYXRvcl9vcHJncm91cDogZmFsc2UsXG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICB1cGRhdGluZ192YWx1ZTogZmFsc2VcbiAgICB9O1xuXG4gICAgLy8gXCJhbGxvd19ncm91cHNcIiBjYW4gYmUgYm9vbGVhbiBvciBpbnRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5hbGxvd19ncm91cHMgPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuYWxsb3dfZ3JvdXBzID0gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5zZXR0aW5ncy5hbGxvd19ncm91cHMgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5hbGxvd19ncm91cHMgPSAtMTtcbiAgICB9XG5cbiAgICAvLyBTRVRUSU5HUyBTSE9SVENVVFNcbiAgICB0aGlzLmZpbHRlcnMgPSB0aGlzLnNldHRpbmdzLmZpbHRlcnM7XG4gICAgdGhpcy5pY29ucyA9IHRoaXMuc2V0dGluZ3MuaWNvbnM7XG4gICAgdGhpcy5vcGVyYXRvcnMgPSB0aGlzLnNldHRpbmdzLm9wZXJhdG9ycztcbiAgICB0aGlzLnRlbXBsYXRlcyA9IHRoaXMuc2V0dGluZ3MudGVtcGxhdGVzO1xuICAgIHRoaXMucGx1Z2lucyA9IHRoaXMuc2V0dGluZ3MucGx1Z2lucztcblxuICAgIC8vIHRyYW5zbGF0aW9ucyA6IGVuZ2xpc2ggPDwgJ2xhbmdfY29kZScgPDwgY3VzdG9tXG4gICAgaWYgKFF1ZXJ5QnVpbGRlci5yZWdpb25hbFsnZW4nXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIFV0aWxzLmVycm9yKCdDb25maWcnLCAnXCJpMThuL2VuLmpzXCIgbm90IGxvYWRlZC4nKTtcbiAgICB9XG4gICAgdGhpcy5sYW5nID0gJC5leHRlbmRleHQodHJ1ZSwgJ3JlcGxhY2UnLCB7fSwgUXVlcnlCdWlsZGVyLnJlZ2lvbmFsWydlbiddLCBRdWVyeUJ1aWxkZXIucmVnaW9uYWxbdGhpcy5zZXR0aW5ncy5sYW5nX2NvZGVdLCB0aGlzLnNldHRpbmdzLmxhbmcpO1xuXG4gICAgLy8gaW5pdCB0ZW1wbGF0ZXNcbiAgICBPYmplY3Qua2V5cyh0aGlzLnRlbXBsYXRlcykuZm9yRWFjaChmdW5jdGlvbih0cGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRlbXBsYXRlc1t0cGxdKSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlc1t0cGxdID0gUXVlcnlCdWlsZGVyLnRlbXBsYXRlc1t0cGxdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy50ZW1wbGF0ZXNbdHBsXSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZXNbdHBsXSA9IGRvVC50ZW1wbGF0ZSh0aGlzLnRlbXBsYXRlc1t0cGxdKTtcbiAgICAgICAgfVxuICAgIH0sIHRoaXMpO1xuXG4gICAgLy8gZW5zdXJlIHdlIGhhdmUgYSBjb250YWluZXIgaWRcbiAgICBpZiAoIXRoaXMuJGVsLmF0dHIoJ2lkJykpIHtcbiAgICAgICAgdGhpcy4kZWwuYXR0cignaWQnLCAncWJfJyArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5OTk5KSk7XG4gICAgICAgIHRoaXMuc3RhdHVzLmdlbmVyYXRlZF9pZCA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuc3RhdHVzLmlkID0gdGhpcy4kZWwuYXR0cignaWQnKTtcblxuICAgIC8vIElOSVRcbiAgICB0aGlzLiRlbC5hZGRDbGFzcygncXVlcnktYnVpbGRlciBmb3JtLWlubGluZScpO1xuXG4gICAgdGhpcy5maWx0ZXJzID0gdGhpcy5jaGVja0ZpbHRlcnModGhpcy5maWx0ZXJzKTtcbiAgICB0aGlzLm9wZXJhdG9ycyA9IHRoaXMuY2hlY2tPcGVyYXRvcnModGhpcy5vcGVyYXRvcnMpO1xuICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgIHRoaXMuaW5pdFBsdWdpbnMoKTtcblxuICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJJbml0Jyk7XG5cbiAgICBpZiAob3B0aW9ucy5ydWxlcykge1xuICAgICAgICB0aGlzLnNldFJ1bGVzKG9wdGlvbnMucnVsZXMpO1xuICAgICAgICBkZWxldGUgdGhpcy5zZXR0aW5ncy5ydWxlcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0Um9vdCh0cnVlKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIENoZWNrcyB0aGUgY29uZmlndXJhdGlvbiBvZiBlYWNoIGZpbHRlclxuICogQHRocm93cyBDb25maWdFcnJvclxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLmNoZWNrRmlsdGVycyA9IGZ1bmN0aW9uKGZpbHRlcnMpIHtcbiAgICB2YXIgZGVmaW5lZEZpbHRlcnMgPSBbXTtcblxuICAgIGlmICghZmlsdGVycyB8fCBmaWx0ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBVdGlscy5lcnJvcignQ29uZmlnJywgJ01pc3NpbmcgZmlsdGVycyBsaXN0Jyk7XG4gICAgfVxuXG4gICAgZmlsdGVycy5mb3JFYWNoKGZ1bmN0aW9uKGZpbHRlciwgaSkge1xuICAgICAgICBpZiAoIWZpbHRlci5pZCkge1xuICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ0NvbmZpZycsICdNaXNzaW5nIGZpbHRlciB7MH0gaWQnLCBpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmaW5lZEZpbHRlcnMuaW5kZXhPZihmaWx0ZXIuaWQpICE9IC0xKSB7XG4gICAgICAgICAgICBVdGlscy5lcnJvcignQ29uZmlnJywgJ0ZpbHRlciBcInswfVwiIGFscmVhZHkgZGVmaW5lZCcsIGZpbHRlci5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmaW5lZEZpbHRlcnMucHVzaChmaWx0ZXIuaWQpO1xuXG4gICAgICAgIGlmICghZmlsdGVyLnR5cGUpIHtcbiAgICAgICAgICAgIGZpbHRlci50eXBlID0gJ3N0cmluZyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIVF1ZXJ5QnVpbGRlci50eXBlc1tmaWx0ZXIudHlwZV0pIHtcbiAgICAgICAgICAgIFV0aWxzLmVycm9yKCdDb25maWcnLCAnSW52YWxpZCB0eXBlIFwiezB9XCInLCBmaWx0ZXIudHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZpbHRlci5pbnB1dCkge1xuICAgICAgICAgICAgZmlsdGVyLmlucHV0ID0gJ3RleHQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBmaWx0ZXIuaW5wdXQgIT0gJ2Z1bmN0aW9uJyAmJiBRdWVyeUJ1aWxkZXIuaW5wdXRzLmluZGV4T2YoZmlsdGVyLmlucHV0KSA9PSAtMSkge1xuICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ0NvbmZpZycsICdJbnZhbGlkIGlucHV0IFwiezB9XCInLCBmaWx0ZXIuaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbHRlci5vcGVyYXRvcnMpIHtcbiAgICAgICAgICAgIGZpbHRlci5vcGVyYXRvcnMuZm9yRWFjaChmdW5jdGlvbihvcGVyYXRvcikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3BlcmF0b3IgIT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ0NvbmZpZycsICdGaWx0ZXIgb3BlcmF0b3JzIG11c3QgYmUgZ2xvYmFsIG9wZXJhdG9ycyB0eXBlcyAoc3RyaW5nKScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFmaWx0ZXIuZmllbGQpIHtcbiAgICAgICAgICAgIGZpbHRlci5maWVsZCA9IGZpbHRlci5pZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpbHRlci5sYWJlbCkge1xuICAgICAgICAgICAgZmlsdGVyLmxhYmVsID0gZmlsdGVyLmZpZWxkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFmaWx0ZXIub3B0Z3JvdXApIHtcbiAgICAgICAgICAgIGZpbHRlci5vcHRncm91cCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cy5oYXNfb3B0Z3JvdXAgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyByZWdpc3RlciBvcHRncm91cCBpZiBuZWVkZWRcbiAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5vcHRncm91cHNbZmlsdGVyLm9wdGdyb3VwXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mub3B0Z3JvdXBzW2ZpbHRlci5vcHRncm91cF0gPSBmaWx0ZXIub3B0Z3JvdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGZpbHRlci5pbnB1dCkge1xuICAgICAgICAgICAgY2FzZSAncmFkaW8nOiBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIudmFsdWVzIHx8IGZpbHRlci52YWx1ZXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignQ29uZmlnJywgJ01pc3NpbmcgZmlsdGVyIFwiezB9XCIgdmFsdWVzJywgZmlsdGVyLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5wbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBsYWNlaG9sZGVyX3ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5wbGFjZWhvbGRlcl92YWx1ZSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLml0ZXJhdGVPcHRpb25zKGZpbHRlci52YWx1ZXMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBmaWx0ZXIucGxhY2Vob2xkZXJfdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignQ29uZmlnJywgJ1BsYWNlaG9sZGVyIG9mIGZpbHRlciBcInswfVwiIG92ZXJsYXBzIHdpdGggb25lIG9mIGl0cyB2YWx1ZXMnLCBmaWx0ZXIuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9LCB0aGlzKTtcblxuICAgIGlmICh0aGlzLnNldHRpbmdzLnNvcnRfZmlsdGVycykge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuc2V0dGluZ3Muc29ydF9maWx0ZXJzID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGZpbHRlcnMuc29ydCh0aGlzLnNldHRpbmdzLnNvcnRfZmlsdGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBmaWx0ZXJzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnRyYW5zbGF0ZUxhYmVsKGEubGFiZWwpLmxvY2FsZUNvbXBhcmUoc2VsZi50cmFuc2xhdGVMYWJlbChiLmxhYmVsKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1cy5oYXNfb3B0Z3JvdXApIHtcbiAgICAgICAgZmlsdGVycyA9IFV0aWxzLmdyb3VwU29ydChmaWx0ZXJzLCAnb3B0Z3JvdXAnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsdGVycztcbn07XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBjb25maWd1cmF0aW9uIG9mIGVhY2ggb3BlcmF0b3JcbiAqIEB0aHJvd3MgQ29uZmlnRXJyb3JcbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5jaGVja09wZXJhdG9ycyA9IGZ1bmN0aW9uKG9wZXJhdG9ycykge1xuICAgIHZhciBkZWZpbmVkT3BlcmF0b3JzID0gW107XG5cbiAgICBvcGVyYXRvcnMuZm9yRWFjaChmdW5jdGlvbihvcGVyYXRvciwgaSkge1xuICAgICAgICBpZiAodHlwZW9mIG9wZXJhdG9yID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoIVF1ZXJ5QnVpbGRlci5PUEVSQVRPUlNbb3BlcmF0b3JdKSB7XG4gICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ0NvbmZpZycsICdVbmtub3duIG9wZXJhdG9yIFwiezB9XCInLCBvcGVyYXRvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9wZXJhdG9yc1tpXSA9IG9wZXJhdG9yID0gJC5leHRlbmRleHQodHJ1ZSwgJ3JlcGxhY2UnLCB7fSwgUXVlcnlCdWlsZGVyLk9QRVJBVE9SU1tvcGVyYXRvcl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFvcGVyYXRvci50eXBlKSB7XG4gICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ0NvbmZpZycsICdNaXNzaW5nIFwidHlwZVwiIGZvciBvcGVyYXRvciB7MH0nLCBpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFF1ZXJ5QnVpbGRlci5PUEVSQVRPUlNbb3BlcmF0b3IudHlwZV0pIHtcbiAgICAgICAgICAgICAgICBvcGVyYXRvcnNbaV0gPSBvcGVyYXRvciA9ICQuZXh0ZW5kZXh0KHRydWUsICdyZXBsYWNlJywge30sIFF1ZXJ5QnVpbGRlci5PUEVSQVRPUlNbb3BlcmF0b3IudHlwZV0sIG9wZXJhdG9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wZXJhdG9yLm5iX2lucHV0cyA9PT0gdW5kZWZpbmVkIHx8IG9wZXJhdG9yLmFwcGx5X3RvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignQ29uZmlnJywgJ01pc3NpbmcgXCJuYl9pbnB1dHNcIiBhbmQvb3IgXCJhcHBseV90b1wiIGZvciBvcGVyYXRvciBcInswfVwiJywgb3BlcmF0b3IudHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVmaW5lZE9wZXJhdG9ycy5pbmRleE9mKG9wZXJhdG9yLnR5cGUpICE9IC0xKSB7XG4gICAgICAgICAgICBVdGlscy5lcnJvcignQ29uZmlnJywgJ09wZXJhdG9yIFwiezB9XCIgYWxyZWFkeSBkZWZpbmVkJywgb3BlcmF0b3IudHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmaW5lZE9wZXJhdG9ycy5wdXNoKG9wZXJhdG9yLnR5cGUpO1xuXG4gICAgICAgIGlmICghb3BlcmF0b3Iub3B0Z3JvdXApIHtcbiAgICAgICAgICAgIG9wZXJhdG9yLm9wdGdyb3VwID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzLmhhc19vcGVyYXRvcl9vcHRncm91cCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIHJlZ2lzdGVyIG9wdGdyb3VwIGlmIG5lZWRlZFxuICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLm9wdGdyb3Vwc1tvcGVyYXRvci5vcHRncm91cF0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLm9wdGdyb3Vwc1tvcGVyYXRvci5vcHRncm91cF0gPSBvcGVyYXRvci5vcHRncm91cDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHRoaXMpO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzLmhhc19vcGVyYXRvcl9vcHRncm91cCkge1xuICAgICAgICBvcGVyYXRvcnMgPSBVdGlscy5ncm91cFNvcnQob3BlcmF0b3JzLCAnb3B0Z3JvdXAnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3BlcmF0b3JzO1xufTtcblxuLyoqXG4gKiBBZGQgYWxsIGV2ZW50cyBsaXN0ZW5lcnNcbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5iaW5kRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gZ3JvdXAgY29uZGl0aW9uIGNoYW5nZVxuICAgIHRoaXMuJGVsLm9uKCdjaGFuZ2UucXVlcnlCdWlsZGVyJywgU2VsZWN0b3JzLmdyb3VwX2NvbmRpdGlvbiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgICAgICB2YXIgJGdyb3VwID0gJCh0aGlzKS5jbG9zZXN0KFNlbGVjdG9ycy5ncm91cF9jb250YWluZXIpO1xuICAgICAgICAgICAgTW9kZWwoJGdyb3VwKS5jb25kaXRpb24gPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBydWxlIGZpbHRlciBjaGFuZ2VcbiAgICB0aGlzLiRlbC5vbignY2hhbmdlLnF1ZXJ5QnVpbGRlcicsIFNlbGVjdG9ycy5ydWxlX2ZpbHRlciwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkcnVsZSA9ICQodGhpcykuY2xvc2VzdChTZWxlY3RvcnMucnVsZV9jb250YWluZXIpO1xuICAgICAgICBNb2RlbCgkcnVsZSkuZmlsdGVyID0gc2VsZi5nZXRGaWx0ZXJCeUlkKCQodGhpcykudmFsKCkpO1xuICAgIH0pO1xuXG4gICAgLy8gcnVsZSBvcGVyYXRvciBjaGFuZ2VcbiAgICB0aGlzLiRlbC5vbignY2hhbmdlLnF1ZXJ5QnVpbGRlcicsIFNlbGVjdG9ycy5ydWxlX29wZXJhdG9yLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICRydWxlID0gJCh0aGlzKS5jbG9zZXN0KFNlbGVjdG9ycy5ydWxlX2NvbnRhaW5lcik7XG4gICAgICAgIE1vZGVsKCRydWxlKS5vcGVyYXRvciA9IHNlbGYuZ2V0T3BlcmF0b3JCeVR5cGUoJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgcnVsZSBidXR0b25cbiAgICB0aGlzLiRlbC5vbignY2xpY2sucXVlcnlCdWlsZGVyJywgU2VsZWN0b3JzLmFkZF9ydWxlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICRncm91cCA9ICQodGhpcykuY2xvc2VzdChTZWxlY3RvcnMuZ3JvdXBfY29udGFpbmVyKTtcbiAgICAgICAgc2VsZi5hZGRSdWxlKE1vZGVsKCRncm91cCkpO1xuICAgIH0pO1xuXG4gICAgLy8gZGVsZXRlIHJ1bGUgYnV0dG9uXG4gICAgdGhpcy4kZWwub24oJ2NsaWNrLnF1ZXJ5QnVpbGRlcicsIFNlbGVjdG9ycy5kZWxldGVfcnVsZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkcnVsZSA9ICQodGhpcykuY2xvc2VzdChTZWxlY3RvcnMucnVsZV9jb250YWluZXIpO1xuICAgICAgICBzZWxmLmRlbGV0ZVJ1bGUoTW9kZWwoJHJ1bGUpKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmFsbG93X2dyb3VwcyAhPT0gMCkge1xuICAgICAgICAvLyBhZGQgZ3JvdXAgYnV0dG9uXG4gICAgICAgIHRoaXMuJGVsLm9uKCdjbGljay5xdWVyeUJ1aWxkZXInLCBTZWxlY3RvcnMuYWRkX2dyb3VwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkZ3JvdXAgPSAkKHRoaXMpLmNsb3Nlc3QoU2VsZWN0b3JzLmdyb3VwX2NvbnRhaW5lcik7XG4gICAgICAgICAgICBzZWxmLmFkZEdyb3VwKE1vZGVsKCRncm91cCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBkZWxldGUgZ3JvdXAgYnV0dG9uXG4gICAgICAgIHRoaXMuJGVsLm9uKCdjbGljay5xdWVyeUJ1aWxkZXInLCBTZWxlY3RvcnMuZGVsZXRlX2dyb3VwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkZ3JvdXAgPSAkKHRoaXMpLmNsb3Nlc3QoU2VsZWN0b3JzLmdyb3VwX2NvbnRhaW5lcik7XG4gICAgICAgICAgICBzZWxmLmRlbGV0ZUdyb3VwKE1vZGVsKCRncm91cCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBtb2RlbCBldmVudHNcbiAgICB0aGlzLm1vZGVsLm9uKHtcbiAgICAgICAgJ2Ryb3AnOiBmdW5jdGlvbihlLCBub2RlKSB7XG4gICAgICAgICAgICBub2RlLiRlbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHNlbGYucmVmcmVzaEdyb3Vwc0NvbmRpdGlvbnMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgJ2FkZCc6IGZ1bmN0aW9uKGUsIG5vZGUsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICBub2RlLiRlbC5wcmVwZW5kVG8obm9kZS5wYXJlbnQuJGVsLmZpbmQoJz4nICsgU2VsZWN0b3JzLnJ1bGVzX2xpc3QpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUuJGVsLmluc2VydEFmdGVyKG5vZGUucGFyZW50LnJ1bGVzW2luZGV4IC0gMV0uJGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYucmVmcmVzaEdyb3Vwc0NvbmRpdGlvbnMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgJ21vdmUnOiBmdW5jdGlvbihlLCBub2RlLCBncm91cCwgaW5kZXgpIHtcbiAgICAgICAgICAgIG5vZGUuJGVsLmRldGFjaCgpO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICBub2RlLiRlbC5wcmVwZW5kVG8oZ3JvdXAuJGVsLmZpbmQoJz4nICsgU2VsZWN0b3JzLnJ1bGVzX2xpc3QpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUuJGVsLmluc2VydEFmdGVyKGdyb3VwLnJ1bGVzW2luZGV4IC0gMV0uJGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYucmVmcmVzaEdyb3Vwc0NvbmRpdGlvbnMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgJ3VwZGF0ZSc6IGZ1bmN0aW9uKGUsIG5vZGUsIGZpZWxkLCB2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgUnVsZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXNwbGF5RXJyb3Iobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdmbGFncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFwcGx5UnVsZUZsYWdzKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmlsdGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlUnVsZUZpbHRlcihub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ29wZXJhdG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlUnVsZU9wZXJhdG9yKG5vZGUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlUnVsZVZhbHVlKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpc3BsYXlFcnJvcihub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZsYWdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXBwbHlHcm91cEZsYWdzKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29uZGl0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlR3JvdXBDb25kaXRpb24obm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIHRoZSByb290IGdyb3VwXG4gKiBAcGFyYW0gYWRkUnVsZSB7Ym9vbCxvcHRpb25hbH0gYWRkIGEgZGVmYXVsdCBlbXB0eSBydWxlXG4gKiBAcGFyYW0gZGF0YSB7bWl4ZWQsb3B0aW9uYWx9IGdyb3VwIGN1c3RvbSBkYXRhXG4gKiBAcGFyYW0gZmxhZ3Mge29iamVjdCxvcHRpb25hbH0gZmxhZ3MgdG8gYXBwbHkgdG8gdGhlIGdyb3VwXG4gKiBAcmV0dXJuIGdyb3VwIHtSb290fVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLnNldFJvb3QgPSBmdW5jdGlvbihhZGRSdWxlLCBkYXRhLCBmbGFncykge1xuICAgIGFkZFJ1bGUgPSAoYWRkUnVsZSA9PT0gdW5kZWZpbmVkIHx8IGFkZFJ1bGUgPT09IHRydWUpO1xuXG4gICAgdmFyIGdyb3VwX2lkID0gdGhpcy5uZXh0R3JvdXBJZCgpO1xuICAgIHZhciAkZ3JvdXAgPSAkKHRoaXMuZ2V0R3JvdXBUZW1wbGF0ZShncm91cF9pZCwgMSkpO1xuXG4gICAgdGhpcy4kZWwuYXBwZW5kKCRncm91cCk7XG4gICAgdGhpcy5tb2RlbC5yb290ID0gbmV3IEdyb3VwKG51bGwsICRncm91cCk7XG4gICAgdGhpcy5tb2RlbC5yb290Lm1vZGVsID0gdGhpcy5tb2RlbDtcblxuICAgIHRoaXMubW9kZWwucm9vdC5kYXRhID0gZGF0YTtcbiAgICB0aGlzLm1vZGVsLnJvb3QuZmxhZ3MgPSAkLmV4dGVuZCh7fSwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0X2dyb3VwX2ZsYWdzLCBmbGFncyk7XG5cbiAgICB0aGlzLnRyaWdnZXIoJ2FmdGVyQWRkR3JvdXAnLCB0aGlzLm1vZGVsLnJvb3QpO1xuXG4gICAgdGhpcy5tb2RlbC5yb290LmNvbmRpdGlvbiA9IHRoaXMuc2V0dGluZ3MuZGVmYXVsdF9jb25kaXRpb247XG5cbiAgICBpZiAoYWRkUnVsZSkge1xuICAgICAgICB0aGlzLmFkZFJ1bGUodGhpcy5tb2RlbC5yb290KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tb2RlbC5yb290O1xufTtcblxuLyoqXG4gKiBBZGQgYSBuZXcgZ3JvdXBcbiAqIEBwYXJhbSBwYXJlbnQge0dyb3VwfVxuICogQHBhcmFtIGFkZFJ1bGUge2Jvb2wsb3B0aW9uYWx9IGFkZCBhIGRlZmF1bHQgZW1wdHkgcnVsZVxuICogQHBhcmFtIGRhdGEge21peGVkLG9wdGlvbmFsfSBncm91cCBjdXN0b20gZGF0YVxuICogQHBhcmFtIGZsYWdzIHtvYmplY3Qsb3B0aW9uYWx9IGZsYWdzIHRvIGFwcGx5IHRvIHRoZSBncm91cFxuICogQHJldHVybiBncm91cCB7R3JvdXB9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuYWRkR3JvdXAgPSBmdW5jdGlvbihwYXJlbnQsIGFkZFJ1bGUsIGRhdGEsIGZsYWdzKSB7XG4gICAgYWRkUnVsZSA9IChhZGRSdWxlID09PSB1bmRlZmluZWQgfHwgYWRkUnVsZSA9PT0gdHJ1ZSk7XG5cbiAgICB2YXIgbGV2ZWwgPSBwYXJlbnQubGV2ZWwgKyAxO1xuXG4gICAgdmFyIGUgPSB0aGlzLnRyaWdnZXIoJ2JlZm9yZUFkZEdyb3VwJywgcGFyZW50LCBhZGRSdWxlLCBsZXZlbCk7XG4gICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGdyb3VwX2lkID0gdGhpcy5uZXh0R3JvdXBJZCgpO1xuICAgIHZhciAkZ3JvdXAgPSAkKHRoaXMuZ2V0R3JvdXBUZW1wbGF0ZShncm91cF9pZCwgbGV2ZWwpKTtcbiAgICB2YXIgbW9kZWwgPSBwYXJlbnQuYWRkR3JvdXAoJGdyb3VwKTtcblxuICAgIG1vZGVsLmRhdGEgPSBkYXRhO1xuICAgIG1vZGVsLmZsYWdzID0gJC5leHRlbmQoe30sIHRoaXMuc2V0dGluZ3MuZGVmYXVsdF9ncm91cF9mbGFncywgZmxhZ3MpO1xuXG4gICAgdGhpcy50cmlnZ2VyKCdhZnRlckFkZEdyb3VwJywgbW9kZWwpO1xuXG4gICAgbW9kZWwuY29uZGl0aW9uID0gdGhpcy5zZXR0aW5ncy5kZWZhdWx0X2NvbmRpdGlvbjtcblxuICAgIGlmIChhZGRSdWxlKSB7XG4gICAgICAgIHRoaXMuYWRkUnVsZShtb2RlbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vZGVsO1xufTtcblxuLyoqXG4gKiBUcmllcyB0byBkZWxldGUgYSBncm91cC4gVGhlIGdyb3VwIGlzIG5vdCBkZWxldGVkIGlmIGF0IGxlYXN0IG9uZSBydWxlIGlzIG5vX2RlbGV0ZS5cbiAqIEBwYXJhbSBncm91cCB7R3JvdXB9XG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBncm91cCBoYXMgYmVlbiBkZWxldGVkXG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuZGVsZXRlR3JvdXAgPSBmdW5jdGlvbihncm91cCkge1xuICAgIGlmIChncm91cC5pc1Jvb3QoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGUgPSB0aGlzLnRyaWdnZXIoJ2JlZm9yZURlbGV0ZUdyb3VwJywgZ3JvdXApO1xuICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZGVsID0gdHJ1ZTtcblxuICAgIGdyb3VwLmVhY2goJ3JldmVyc2UnLCBmdW5jdGlvbihydWxlKSB7XG4gICAgICAgIGRlbCY9IHRoaXMuZGVsZXRlUnVsZShydWxlKTtcbiAgICB9LCBmdW5jdGlvbihncm91cCkge1xuICAgICAgICBkZWwmPSB0aGlzLmRlbGV0ZUdyb3VwKGdyb3VwKTtcbiAgICB9LCB0aGlzKTtcblxuICAgIGlmIChkZWwpIHtcbiAgICAgICAgZ3JvdXAuZHJvcCgpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2FmdGVyRGVsZXRlR3JvdXAnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVsO1xufTtcblxuLyoqXG4gKiBDaGFuZ2VzIHRoZSBjb25kaXRpb24gb2YgYSBncm91cFxuICogQHBhcmFtIGdyb3VwIHtHcm91cH1cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS51cGRhdGVHcm91cENvbmRpdGlvbiA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgZ3JvdXAuJGVsLmZpbmQoJz4nICsgU2VsZWN0b3JzLmdyb3VwX2NvbmRpdGlvbikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgJHRoaXMucHJvcCgnY2hlY2tlZCcsICR0aGlzLnZhbCgpID09PSBncm91cC5jb25kaXRpb24pO1xuICAgICAgICAkdGhpcy5wYXJlbnQoKS50b2dnbGVDbGFzcygnYWN0aXZlJywgJHRoaXMudmFsKCkgPT09IGdyb3VwLmNvbmRpdGlvbik7XG4gICAgfSk7XG5cbiAgICB0aGlzLnRyaWdnZXIoJ2FmdGVyVXBkYXRlR3JvdXBDb25kaXRpb24nLCBncm91cCk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSB2aXNpYmlsaXR5IG9mIGNvbmRpdGlvbnMgYmFzZWQgb24gbnVtYmVyIG9mIHJ1bGVzIGluc2lkZSBlYWNoIGdyb3VwXG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUucmVmcmVzaEdyb3Vwc0NvbmRpdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAoZnVuY3Rpb24gd2Fsayhncm91cCkge1xuICAgICAgICBpZiAoIWdyb3VwLmZsYWdzIHx8IChncm91cC5mbGFncyAmJiAhZ3JvdXAuZmxhZ3MuY29uZGl0aW9uX3JlYWRvbmx5KSkge1xuICAgICAgICAgICAgZ3JvdXAuJGVsLmZpbmQoJz4nICsgU2VsZWN0b3JzLmdyb3VwX2NvbmRpdGlvbikucHJvcCgnZGlzYWJsZWQnLCBncm91cC5ydWxlcy5sZW5ndGggPD0gMSlcbiAgICAgICAgICAgICAgICAucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJywgZ3JvdXAucnVsZXMubGVuZ3RoIDw9IDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3JvdXAuZWFjaChmdW5jdGlvbihydWxlKSB7fSwgZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgICAgIHdhbGsoZ3JvdXApO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9KHRoaXMubW9kZWwucm9vdCkpO1xufTtcblxuLyoqXG4gKiBBZGQgYSBuZXcgcnVsZVxuICogQHBhcmFtIHBhcmVudCB7R3JvdXB9XG4gKiBAcGFyYW0gZGF0YSB7bWl4ZWQsb3B0aW9uYWx9IHJ1bGUgY3VzdG9tIGRhdGFcbiAqIEBwYXJhbSBmbGFncyB7b2JqZWN0LG9wdGlvbmFsfSBmbGFncyB0byBhcHBseSB0byB0aGUgcnVsZVxuICogQHJldHVybiBydWxlIHtSdWxlfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLmFkZFJ1bGUgPSBmdW5jdGlvbihwYXJlbnQsIGRhdGEsIGZsYWdzKSB7XG4gICAgdmFyIGUgPSB0aGlzLnRyaWdnZXIoJ2JlZm9yZUFkZFJ1bGUnLCBwYXJlbnQpO1xuICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBydWxlX2lkID0gdGhpcy5uZXh0UnVsZUlkKCk7XG4gICAgdmFyICRydWxlID0gJCh0aGlzLmdldFJ1bGVUZW1wbGF0ZShydWxlX2lkKSk7XG4gICAgdmFyIG1vZGVsID0gcGFyZW50LmFkZFJ1bGUoJHJ1bGUpO1xuXG4gICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtb2RlbC5kYXRhID0gZGF0YTtcbiAgICB9XG5cbiAgICBtb2RlbC5mbGFncyA9ICQuZXh0ZW5kKHt9LCB0aGlzLnNldHRpbmdzLmRlZmF1bHRfcnVsZV9mbGFncywgZmxhZ3MpO1xuXG4gICAgdGhpcy50cmlnZ2VyKCdhZnRlckFkZFJ1bGUnLCBtb2RlbCk7XG5cbiAgICB0aGlzLmNyZWF0ZVJ1bGVGaWx0ZXJzKG1vZGVsKTtcblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlZmF1bHRfZmlsdGVyIHx8ICF0aGlzLnNldHRpbmdzLmRpc3BsYXlfZW1wdHlfZmlsdGVyKSB7XG4gICAgICAgIG1vZGVsLmZpbHRlciA9IHRoaXMuZ2V0RmlsdGVyQnlJZCh0aGlzLnNldHRpbmdzLmRlZmF1bHRfZmlsdGVyIHx8IHRoaXMuZmlsdGVyc1swXS5pZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vZGVsO1xufTtcblxuLyoqXG4gKiBEZWxldGUgYSBydWxlLlxuICogQHBhcmFtIHJ1bGUge1J1bGV9XG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBydWxlIGhhcyBiZWVuIGRlbGV0ZWRcbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5kZWxldGVSdWxlID0gZnVuY3Rpb24ocnVsZSkge1xuICAgIGlmIChydWxlLmZsYWdzLm5vX2RlbGV0ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGUgPSB0aGlzLnRyaWdnZXIoJ2JlZm9yZURlbGV0ZVJ1bGUnLCBydWxlKTtcbiAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcnVsZS5kcm9wKCk7XG5cbiAgICB0aGlzLnRyaWdnZXIoJ2FmdGVyRGVsZXRlUnVsZScpO1xuXG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIENyZWF0ZSB0aGUgZmlsdGVycyA8c2VsZWN0PiBmb3IgYSBydWxlXG4gKiBAcGFyYW0gcnVsZSB7UnVsZX1cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVSdWxlRmlsdGVycyA9IGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICB2YXIgZmlsdGVycyA9IHRoaXMuY2hhbmdlKCdnZXRSdWxlRmlsdGVycycsIHRoaXMuZmlsdGVycywgcnVsZSk7XG4gICAgdmFyICRmaWx0ZXJTZWxlY3QgPSAkKHRoaXMuZ2V0UnVsZUZpbHRlclNlbGVjdChydWxlLCBmaWx0ZXJzKSk7XG5cbiAgICBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy5maWx0ZXJfY29udGFpbmVyKS5odG1sKCRmaWx0ZXJTZWxlY3QpO1xuXG4gICAgdGhpcy50cmlnZ2VyKCdhZnRlckNyZWF0ZVJ1bGVGaWx0ZXJzJywgcnVsZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSB0aGUgb3BlcmF0b3JzIDxzZWxlY3Q+IGZvciBhIHJ1bGUgYW5kIGluaXQgdGhlIHJ1bGUgb3BlcmF0b3JcbiAqIEBwYXJhbSBydWxlIHtSdWxlfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLmNyZWF0ZVJ1bGVPcGVyYXRvcnMgPSBmdW5jdGlvbihydWxlKSB7XG4gICAgdmFyICRvcGVyYXRvckNvbnRhaW5lciA9IHJ1bGUuJGVsLmZpbmQoU2VsZWN0b3JzLm9wZXJhdG9yX2NvbnRhaW5lcikuZW1wdHkoKTtcblxuICAgIGlmICghcnVsZS5maWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBvcGVyYXRvcnMgPSB0aGlzLmdldE9wZXJhdG9ycyhydWxlLmZpbHRlcik7XG4gICAgdmFyICRvcGVyYXRvclNlbGVjdCA9ICQodGhpcy5nZXRSdWxlT3BlcmF0b3JTZWxlY3QocnVsZSwgb3BlcmF0b3JzKSk7XG5cbiAgICAkb3BlcmF0b3JDb250YWluZXIuaHRtbCgkb3BlcmF0b3JTZWxlY3QpO1xuXG4gICAgLy8gc2V0IHRoZSBvcGVyYXRvciB3aXRob3V0IHRyaWdnZXJpbmcgdXBkYXRlIGV2ZW50XG4gICAgcnVsZS5fXy5vcGVyYXRvciA9IG9wZXJhdG9yc1swXTtcblxuICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJDcmVhdGVSdWxlT3BlcmF0b3JzJywgcnVsZSwgb3BlcmF0b3JzKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIHRoZSBtYWluIGlucHV0IGZvciBhIHJ1bGVcbiAqIEBwYXJhbSBydWxlIHtSdWxlfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLmNyZWF0ZVJ1bGVJbnB1dCA9IGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICB2YXIgJHZhbHVlQ29udGFpbmVyID0gcnVsZS4kZWwuZmluZChTZWxlY3RvcnMudmFsdWVfY29udGFpbmVyKS5lbXB0eSgpO1xuXG4gICAgcnVsZS5fXy52YWx1ZSA9IHVuZGVmaW5lZDtcblxuICAgIGlmICghcnVsZS5maWx0ZXIgfHwgIXJ1bGUub3BlcmF0b3IgfHwgcnVsZS5vcGVyYXRvci5uYl9pbnB1dHMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgJGlucHV0cyA9ICQoKTtcbiAgICB2YXIgZmlsdGVyID0gcnVsZS5maWx0ZXI7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGUub3BlcmF0b3IubmJfaW5wdXRzOyBpKyspIHtcbiAgICAgICAgdmFyICRydWxlSW5wdXQgPSAkKHRoaXMuZ2V0UnVsZUlucHV0KHJ1bGUsIGkpKTtcbiAgICAgICAgaWYgKGkgPiAwKSAkdmFsdWVDb250YWluZXIuYXBwZW5kKHRoaXMuc2V0dGluZ3MuaW5wdXRzX3NlcGFyYXRvcik7XG4gICAgICAgICR2YWx1ZUNvbnRhaW5lci5hcHBlbmQoJHJ1bGVJbnB1dCk7XG4gICAgICAgICRpbnB1dHMgPSAkaW5wdXRzLmFkZCgkcnVsZUlucHV0KTtcbiAgICB9XG5cbiAgICAkdmFsdWVDb250YWluZXIuc2hvdygpO1xuXG4gICAgJGlucHV0cy5vbignY2hhbmdlICcgKyAoZmlsdGVyLmlucHV0X2V2ZW50IHx8ICcnKSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGYuc3RhdHVzLnVwZGF0aW5nX3ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgcnVsZS52YWx1ZSA9IHNlbGYuZ2V0UnVsZVZhbHVlKHJ1bGUpO1xuICAgICAgICBzZWxmLnN0YXR1cy51cGRhdGluZ192YWx1ZSA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgaWYgKGZpbHRlci5wbHVnaW4pIHtcbiAgICAgICAgJGlucHV0c1tmaWx0ZXIucGx1Z2luXShmaWx0ZXIucGx1Z2luX2NvbmZpZyB8fCB7fSk7XG4gICAgfVxuXG4gICAgdGhpcy50cmlnZ2VyKCdhZnRlckNyZWF0ZVJ1bGVJbnB1dCcsIHJ1bGUpO1xuXG4gICAgaWYgKGZpbHRlci5kZWZhdWx0X3ZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcnVsZS52YWx1ZSA9IGZpbHRlci5kZWZhdWx0X3ZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5zdGF0dXMudXBkYXRpbmdfdmFsdWUgPSB0cnVlO1xuICAgICAgICBydWxlLnZhbHVlID0gc2VsZi5nZXRSdWxlVmFsdWUocnVsZSk7XG4gICAgICAgIHNlbGYuc3RhdHVzLnVwZGF0aW5nX3ZhbHVlID0gZmFsc2U7XG4gICAgfVxufTtcblxuLyoqXG4gKiBQZXJmb3JtIGFjdGlvbiB3aGVuIHJ1bGUncyBmaWx0ZXIgaXMgY2hhbmdlZFxuICogQHBhcmFtIHJ1bGUge1J1bGV9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUudXBkYXRlUnVsZUZpbHRlciA9IGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICB0aGlzLmNyZWF0ZVJ1bGVPcGVyYXRvcnMocnVsZSk7XG4gICAgdGhpcy5jcmVhdGVSdWxlSW5wdXQocnVsZSk7XG5cbiAgICBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX2ZpbHRlcikudmFsKHJ1bGUuZmlsdGVyID8gcnVsZS5maWx0ZXIuaWQgOiAnLTEnKTtcblxuICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJVcGRhdGVSdWxlRmlsdGVyJywgcnVsZSk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBtYWluIDxpbnB1dD4gdmlzaWJpbGl0eSB3aGVuIHJ1bGUgb3BlcmF0b3IgY2hhbmdlc1xuICogQHBhcmFtIHJ1bGUge1J1bGV9XG4gKiBAcGFyYW0gcHJldmlvdXNPcGVyYXRvciB7b2JqZWN0fVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLnVwZGF0ZVJ1bGVPcGVyYXRvciA9IGZ1bmN0aW9uKHJ1bGUsIHByZXZpb3VzT3BlcmF0b3IpIHtcbiAgICB2YXIgJHZhbHVlQ29udGFpbmVyID0gcnVsZS4kZWwuZmluZChTZWxlY3RvcnMudmFsdWVfY29udGFpbmVyKTtcblxuICAgIGlmICghcnVsZS5vcGVyYXRvciB8fCBydWxlLm9wZXJhdG9yLm5iX2lucHV0cyA9PT0gMCkge1xuICAgICAgICAkdmFsdWVDb250YWluZXIuaGlkZSgpO1xuXG4gICAgICAgIHJ1bGUuX18udmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkdmFsdWVDb250YWluZXIuc2hvdygpO1xuXG4gICAgICAgIGlmICgkdmFsdWVDb250YWluZXIuaXMoJzplbXB0eScpIHx8IHJ1bGUub3BlcmF0b3IubmJfaW5wdXRzICE9PSBwcmV2aW91c09wZXJhdG9yLm5iX2lucHV0cykge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVSdWxlSW5wdXQocnVsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocnVsZS5vcGVyYXRvcikge1xuICAgICAgICBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX29wZXJhdG9yKS52YWwocnVsZS5vcGVyYXRvci50eXBlKTtcbiAgICB9XG5cbiAgICB0aGlzLnRyaWdnZXIoJ2FmdGVyVXBkYXRlUnVsZU9wZXJhdG9yJywgcnVsZSk7XG59O1xuXG4vKipcbiAqIFBlcmZvcm0gYWN0aW9uIHdoZW4gcnVsZSdzIHZhbHVlIGlzIGNoYW5nZWRcbiAqIEBwYXJhbSBydWxlIHtSdWxlfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLnVwZGF0ZVJ1bGVWYWx1ZSA9IGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdHVzLnVwZGF0aW5nX3ZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0UnVsZVZhbHVlKHJ1bGUsIHJ1bGUudmFsdWUpO1xuICAgIH1cblxuICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJVcGRhdGVSdWxlVmFsdWUnLCBydWxlKTtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHJ1bGVzIHByb3BlcnRpZXMgZGVwZW5kaW5nIG9uIGZsYWdzLlxuICogQHBhcmFtIHJ1bGUge1J1bGV9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuYXBwbHlSdWxlRmxhZ3MgPSBmdW5jdGlvbihydWxlKSB7XG4gICAgdmFyIGZsYWdzID0gcnVsZS5mbGFncztcblxuICAgIGlmIChmbGFncy5maWx0ZXJfcmVhZG9ubHkpIHtcbiAgICAgICAgcnVsZS4kZWwuZmluZChTZWxlY3RvcnMucnVsZV9maWx0ZXIpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChmbGFncy5vcGVyYXRvcl9yZWFkb25seSkge1xuICAgICAgICBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX29wZXJhdG9yKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3MudmFsdWVfcmVhZG9ubHkpIHtcbiAgICAgICAgcnVsZS4kZWwuZmluZChTZWxlY3RvcnMucnVsZV92YWx1ZSkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKGZsYWdzLm5vX2RlbGV0ZSkge1xuICAgICAgICBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy5kZWxldGVfcnVsZSkucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy50cmlnZ2VyKCdhZnRlckFwcGx5UnVsZUZsYWdzJywgcnVsZSk7XG59O1xuXG4vKipcbiAqIENoYW5nZSBncm91cCBwcm9wZXJ0aWVzIGRlcGVuZGluZyBvbiBmbGFncy5cbiAqIEBwYXJhbSBncm91cCB7R3JvdXB9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuYXBwbHlHcm91cEZsYWdzID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICB2YXIgZmxhZ3MgPSBncm91cC5mbGFncztcblxuICAgIGlmIChmbGFncy5jb25kaXRpb25fcmVhZG9ubHkpIHtcbiAgICAgICAgZ3JvdXAuJGVsLmZpbmQoJz4nICsgU2VsZWN0b3JzLmdyb3VwX2NvbmRpdGlvbikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICAgICAgLnBhcmVudCgpLmFkZENsYXNzKCdyZWFkb25seScpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3Mubm9fZGVsZXRlKSB7XG4gICAgICAgIGdyb3VwLiRlbC5maW5kKFNlbGVjdG9ycy5kZWxldGVfZ3JvdXApLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJBcHBseUdyb3VwRmxhZ3MnLCBncm91cCk7XG59O1xuXG4vKipcbiAqIENsZWFyIGFsbCBlcnJvcnMgbWFya2Vyc1xuICogQHBhcmFtIG5vZGUge05vZGUsb3B0aW9uYWx9IGRlZmF1bHQgaXMgcm9vdCBHcm91cFxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLmNsZWFyRXJyb3JzID0gZnVuY3Rpb24obm9kZSkge1xuICAgIG5vZGUgPSBub2RlIHx8IHRoaXMubW9kZWwucm9vdDtcblxuICAgIGlmICghbm9kZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbm9kZS5lcnJvciA9IG51bGw7XG5cbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEdyb3VwKSB7XG4gICAgICAgIG5vZGUuZWFjaChmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgICBydWxlLmVycm9yID0gbnVsbDtcbiAgICAgICAgfSwgZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJFcnJvcnMoZ3JvdXApO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEFkZC9SZW1vdmUgY2xhc3MgLmhhcy1lcnJvciBhbmQgdXBkYXRlIGVycm9yIHRpdGxlXG4gKiBAcGFyYW0gbm9kZSB7Tm9kZX1cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5kaXNwbGF5RXJyb3IgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGlzcGxheV9lcnJvcnMpIHtcbiAgICAgICAgaWYgKG5vZGUuZXJyb3IgPT09IG51bGwpIHtcbiAgICAgICAgICAgIG5vZGUuJGVsLnJlbW92ZUNsYXNzKCdoYXMtZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSB0aGUgdGV4dCB3aXRob3V0IG1vZGlmeWluZyBldmVudCBhcnJheVxuICAgICAgICAgICAgdmFyIGVycm9yID0gJC5leHRlbmQoW10sIG5vZGUuZXJyb3IsIFtcbiAgICAgICAgICAgICAgICB0aGlzLmxhbmcuZXJyb3JzW25vZGUuZXJyb3JbMF1dIHx8IG5vZGUuZXJyb3JbMF1cbiAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICBub2RlLiRlbC5hZGRDbGFzcygnaGFzLWVycm9yJylcbiAgICAgICAgICAgICAgLmZpbmQoU2VsZWN0b3JzLmVycm9yX2NvbnRhaW5lcikuZXEoMClcbiAgICAgICAgICAgICAgICAuYXR0cigndGl0bGUnLCBVdGlscy5mbXQuYXBwbHkobnVsbCwgZXJyb3IpKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogVHJpZ2dlciBhIHZhbGlkYXRpb24gZXJyb3IgZXZlbnRcbiAqIEBwYXJhbSBub2RlIHtOb2RlfVxuICogQHBhcmFtIGVycm9yIHthcnJheX1cbiAqIEBwYXJhbSB2YWx1ZSB7bWl4ZWR9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUudHJpZ2dlclZhbGlkYXRpb25FcnJvciA9IGZ1bmN0aW9uKG5vZGUsIGVycm9yLCB2YWx1ZSkge1xuICAgIGlmICghJC5pc0FycmF5KGVycm9yKSkge1xuICAgICAgICBlcnJvciA9IFtlcnJvcl07XG4gICAgfVxuXG4gICAgdmFyIGUgPSB0aGlzLnRyaWdnZXIoJ3ZhbGlkYXRpb25FcnJvcicsIG5vZGUsIGVycm9yLCB2YWx1ZSk7XG4gICAgaWYgKCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIG5vZGUuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59O1xuXG5cbi8qKlxuICogRGVzdHJveSB0aGUgcGx1Z2luXG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudHJpZ2dlcignYmVmb3JlRGVzdHJveScpO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzLmdlbmVyYXRlZF9pZCkge1xuICAgICAgICB0aGlzLiRlbC5yZW1vdmVBdHRyKCdpZCcpO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXIoKTtcbiAgICB0aGlzLm1vZGVsID0gbnVsbDtcblxuICAgIHRoaXMuJGVsXG4gICAgICAgIC5vZmYoJy5xdWVyeUJ1aWxkZXInKVxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ3F1ZXJ5LWJ1aWxkZXInKVxuICAgICAgICAucmVtb3ZlRGF0YSgncXVlcnlCdWlsZGVyJyk7XG5cbiAgICBkZWxldGUgdGhpcy4kZWxbMF0ucXVlcnlCdWlsZGVyO1xufTtcblxuLyoqXG4gKiBSZXNldCB0aGUgcGx1Z2luXG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXR1cy5ncm91cF9pZCA9IDE7XG4gICAgdGhpcy5zdGF0dXMucnVsZV9pZCA9IDA7XG5cbiAgICB0aGlzLm1vZGVsLnJvb3QuZW1wdHkoKTtcblxuICAgIHRoaXMuYWRkUnVsZSh0aGlzLm1vZGVsLnJvb3QpO1xuXG4gICAgdGhpcy50cmlnZ2VyKCdhZnRlclJlc2V0Jyk7XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSBwbHVnaW5cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3RhdHVzLmdyb3VwX2lkID0gMDtcbiAgICB0aGlzLnN0YXR1cy5ydWxlX2lkID0gMDtcblxuICAgIGlmICh0aGlzLm1vZGVsLnJvb3QpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5yb290LmRyb3AoKTtcbiAgICAgICAgdGhpcy5tb2RlbC5yb290ID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLnRyaWdnZXIoJ2FmdGVyQ2xlYXInKTtcbn07XG5cbi8qKlxuICogTW9kaWZ5IHRoZSBidWlsZGVyIGNvbmZpZ3VyYXRpb25cbiAqIE9ubHkgb3B0aW9ucyBkZWZpbmVkIGluIFF1ZXJ5QnVpbGRlci5tb2RpZmlhYmxlX29wdGlvbnMgYXJlIG1vZGlmaWFibGVcbiAqIEBwYXJhbSB7b2JqZWN0fVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gdXNlIGpRdWVyeSB1dGlscyB0byBmaWx0ZXIgb3B0aW9ucyBrZXlzXG4gICAgJC5tYWtlQXJyYXkoJChPYmplY3Qua2V5cyhvcHRpb25zKSkuZmlsdGVyKFF1ZXJ5QnVpbGRlci5tb2RpZmlhYmxlX29wdGlvbnMpKVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihvcHQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Nbb3B0XSA9IG9wdGlvbnNbb3B0XTtcbiAgICAgICAgfSwgdGhpcyk7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbW9kZWwgYXNzb2NpYXRlZCB0byBhIERPTSBvYmplY3QsIG9yIHJvb3QgbW9kZWxcbiAqIEBwYXJhbSB7alF1ZXJ5LG9wdGlvbmFsfVxuICogQHJldHVybiB7Tm9kZX1cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5nZXRNb2RlbCA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgIHJldHVybiAhdGFyZ2V0ID8gdGhpcy5tb2RlbC5yb290IDogTW9kZWwodGFyZ2V0KTtcbn07XG5cbi8qKlxuICogVmFsaWRhdGUgdGhlIHdob2xlIGJ1aWxkZXJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsZWFyRXJyb3JzKCk7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgdmFsaWQgPSAoZnVuY3Rpb24gcGFyc2UoZ3JvdXApIHtcbiAgICAgICAgdmFyIGRvbmUgPSAwO1xuICAgICAgICB2YXIgZXJyb3JzID0gMDtcblxuICAgICAgICBncm91cC5lYWNoKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICAgICAgICAgIGlmICghcnVsZS5maWx0ZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXJWYWxpZGF0aW9uRXJyb3IocnVsZSwgJ25vX2ZpbHRlcicsIG51bGwpO1xuICAgICAgICAgICAgICAgIGVycm9ycysrO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJ1bGUub3BlcmF0b3IubmJfaW5wdXRzICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gc2VsZi52YWxpZGF0ZVZhbHVlKHJ1bGUsIHJ1bGUudmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbGlkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlclZhbGlkYXRpb25FcnJvcihydWxlLCB2YWxpZCwgcnVsZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycysrO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb25lKys7XG5cbiAgICAgICAgfSwgZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgICAgIGlmIChwYXJzZShncm91cCkpIHtcbiAgICAgICAgICAgICAgICBkb25lKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGVycm9ycyA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkb25lID09PSAwICYmICghc2VsZi5zZXR0aW5ncy5hbGxvd19lbXB0eSB8fCAhZ3JvdXAuaXNSb290KCkpKSB7XG4gICAgICAgICAgICBzZWxmLnRyaWdnZXJWYWxpZGF0aW9uRXJyb3IoZ3JvdXAsICdlbXB0eV9ncm91cCcsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICB9KHRoaXMubW9kZWwucm9vdCkpO1xuXG4gICAgcmV0dXJuIHRoaXMuY2hhbmdlKCd2YWxpZGF0ZScsIHZhbGlkKTtcbn07XG5cbi8qKlxuICogR2V0IGFuIG9iamVjdCByZXByZXNlbnRpbmcgY3VycmVudCBydWxlc1xuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqICAgICAgLSBnZXRfZmxhZ3M6IGZhbHNlW2RlZmF1bHRdIHwgdHJ1ZShvbmx5IGNoYW5nZXMgZnJvbSBkZWZhdWx0IGZsYWdzKSB8ICdhbGwnXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuZ2V0UnVsZXMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHtcbiAgICAgICAgZ2V0X2ZsYWdzOiBmYWxzZVxuICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgaWYgKCF0aGlzLnZhbGlkYXRlKCkpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBvdXQgPSAoZnVuY3Rpb24gcGFyc2UoZ3JvdXApIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBjb25kaXRpb246IGdyb3VwLmNvbmRpdGlvbixcbiAgICAgICAgICAgIHJ1bGVzOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChncm91cC5kYXRhKSB7XG4gICAgICAgICAgICBkYXRhLmRhdGEgPSAkLmV4dGVuZGV4dCh0cnVlLCAncmVwbGFjZScsIHt9LCBncm91cC5kYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmdldF9mbGFncykge1xuICAgICAgICAgICAgdmFyIGZsYWdzID0gc2VsZi5nZXRHcm91cEZsYWdzKGdyb3VwLmZsYWdzLCBvcHRpb25zLmdldF9mbGFncyA9PT0gJ2FsbCcpO1xuICAgICAgICAgICAgaWYgKCEkLmlzRW1wdHlPYmplY3QoZmxhZ3MpKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5mbGFncyA9IGZsYWdzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZ3JvdXAuZWFjaChmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChtb2RlbC5vcGVyYXRvci5uYl9pbnB1dHMgIT09IDApIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG1vZGVsLnZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcnVsZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogbW9kZWwuZmlsdGVyLmlkLFxuICAgICAgICAgICAgICAgIGZpZWxkOiBtb2RlbC5maWx0ZXIuZmllbGQsXG4gICAgICAgICAgICAgICAgdHlwZTogbW9kZWwuZmlsdGVyLnR5cGUsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IG1vZGVsLmZpbHRlci5pbnB1dCxcbiAgICAgICAgICAgICAgICBvcGVyYXRvcjogbW9kZWwub3BlcmF0b3IudHlwZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChtb2RlbC5maWx0ZXIuZGF0YSB8fCBtb2RlbC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgcnVsZS5kYXRhID0gJC5leHRlbmRleHQodHJ1ZSwgJ3JlcGxhY2UnLCB7fSwgbW9kZWwuZmlsdGVyLmRhdGEsIG1vZGVsLmRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5nZXRfZmxhZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmxhZ3MgPSBzZWxmLmdldFJ1bGVGbGFncyhtb2RlbC5mbGFncywgb3B0aW9ucy5nZXRfZmxhZ3MgPT09ICdhbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChmbGFncykpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5mbGFncyA9IGZsYWdzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGF0YS5ydWxlcy5wdXNoKHJ1bGUpO1xuXG4gICAgICAgIH0sIGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgICAgICBkYXRhLnJ1bGVzLnB1c2gocGFyc2UobW9kZWwpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9KHRoaXMubW9kZWwucm9vdCkpO1xuXG4gICAgcmV0dXJuIHRoaXMuY2hhbmdlKCdnZXRSdWxlcycsIG91dCk7XG59O1xuXG4vKipcbiAqIFNldCBydWxlcyBmcm9tIG9iamVjdFxuICogQHRocm93cyBSdWxlc0Vycm9yLCBVbmRlZmluZWRDb25kaXRpb25FcnJvclxuICogQHBhcmFtIGRhdGEge29iamVjdH1cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5zZXRSdWxlcyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBpZiAoJC5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICBjb25kaXRpb246IHRoaXMuc2V0dGluZ3MuZGVmYXVsdF9jb25kaXRpb24sXG4gICAgICAgICAgICBydWxlczogZGF0YVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmICghZGF0YSB8fCAhZGF0YS5ydWxlcyB8fCAoZGF0YS5ydWxlcy5sZW5ndGggPT09IDAgJiYgIXRoaXMuc2V0dGluZ3MuYWxsb3dfZW1wdHkpKSB7XG4gICAgICAgIFV0aWxzLmVycm9yKCdSdWxlc1BhcnNlJywgJ0luY29ycmVjdCBkYXRhIG9iamVjdCBwYXNzZWQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgdGhpcy5zZXRSb290KGZhbHNlLCBkYXRhLmRhdGEsIHRoaXMucGFyc2VHcm91cEZsYWdzKGRhdGEpKTtcblxuICAgIGRhdGEgPSB0aGlzLmNoYW5nZSgnc2V0UnVsZXMnLCBkYXRhKTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIChmdW5jdGlvbiBhZGQoZGF0YSwgZ3JvdXApIHtcbiAgICAgICAgaWYgKGdyb3VwID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5jb25kaXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YS5jb25kaXRpb24gPSBzZWxmLnNldHRpbmdzLmRlZmF1bHRfY29uZGl0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuc2V0dGluZ3MuY29uZGl0aW9ucy5pbmRleE9mKGRhdGEuY29uZGl0aW9uKSA9PSAtMSkge1xuICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ1VuZGVmaW5lZENvbmRpdGlvbicsICdJbnZhbGlkIGNvbmRpdGlvbiBcInswfVwiJywgZGF0YS5jb25kaXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3JvdXAuY29uZGl0aW9uID0gZGF0YS5jb25kaXRpb247XG5cbiAgICAgICAgZGF0YS5ydWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBtb2RlbDtcbiAgICAgICAgICAgIGlmIChpdGVtLnJ1bGVzICYmIGl0ZW0ucnVsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnNldHRpbmdzLmFsbG93X2dyb3VwcyAhPT0gLTEgJiYgc2VsZi5zZXR0aW5ncy5hbGxvd19ncm91cHMgPCBncm91cC5sZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLmVycm9yKCdSdWxlc1BhcnNlJywgJ05vIG1vcmUgdGhhbiB7MH0gZ3JvdXBzIGFyZSBhbGxvd2VkJywgc2VsZi5zZXR0aW5ncy5hbGxvd19ncm91cHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBzZWxmLmFkZEdyb3VwKGdyb3VwLCBmYWxzZSwgaXRlbS5kYXRhLCBzZWxmLnBhcnNlR3JvdXBGbGFncyhpdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkKGl0ZW0sIG1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLmVycm9yKCdSdWxlc1BhcnNlJywgJ01pc3NpbmcgcnVsZSBmaWVsZCBpZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5vcGVyYXRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ub3BlcmF0b3IgPSAnZXF1YWwnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1vZGVsID0gc2VsZi5hZGRSdWxlKGdyb3VwLCBpdGVtLmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbW9kZWwuZmlsdGVyID0gc2VsZi5nZXRGaWx0ZXJCeUlkKGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgIG1vZGVsLm9wZXJhdG9yID0gc2VsZi5nZXRPcGVyYXRvckJ5VHlwZShpdGVtLm9wZXJhdG9yKTtcbiAgICAgICAgICAgICAgICBtb2RlbC5mbGFncyA9IHNlbGYucGFyc2VSdWxlRmxhZ3MoaXRlbSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobW9kZWwub3BlcmF0b3IubmJfaW5wdXRzICE9PSAwICYmIGl0ZW0udmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC52YWx1ZSA9IGl0ZW0udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0oZGF0YSwgdGhpcy5tb2RlbC5yb290KSk7XG59O1xuXG5cbi8qKlxuICogQ2hlY2sgaWYgYSB2YWx1ZSBpcyBjb3JyZWN0IGZvciBhIGZpbHRlclxuICogQHBhcmFtIHJ1bGUge1J1bGV9XG4gKiBAcGFyYW0gdmFsdWUge3N0cmluZ3xzdHJpbmdbXXx1bmRlZmluZWR9XG4gKiBAcmV0dXJuIHthcnJheXx0cnVlfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLnZhbGlkYXRlVmFsdWUgPSBmdW5jdGlvbihydWxlLCB2YWx1ZSkge1xuICAgIHZhciB2YWxpZGF0aW9uID0gcnVsZS5maWx0ZXIudmFsaWRhdGlvbiB8fCB7fTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblxuICAgIGlmICh2YWxpZGF0aW9uLmNhbGxiYWNrKSB7XG4gICAgICAgIHJlc3VsdCA9IHZhbGlkYXRpb24uY2FsbGJhY2suY2FsbCh0aGlzLCB2YWx1ZSwgcnVsZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXN1bHQgPSB0aGlzLnZhbGlkYXRlVmFsdWVJbnRlcm5hbChydWxlLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY2hhbmdlKCd2YWxpZGF0ZVZhbHVlJywgcmVzdWx0LCB2YWx1ZSwgcnVsZSk7XG59O1xuXG4vKipcbiAqIERlZmF1bHQgdmFsaWRhdGlvbiBmdW5jdGlvblxuICogQHRocm93cyBDb25maWdFcnJvclxuICogQHBhcmFtIHJ1bGUge1J1bGV9XG4gKiBAcGFyYW0gdmFsdWUge3N0cmluZ3xzdHJpbmdbXXx1bmRlZmluZWR9XG4gKiBAcmV0dXJuIHthcnJheXx0cnVlfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLnZhbGlkYXRlVmFsdWVJbnRlcm5hbCA9IGZ1bmN0aW9uKHJ1bGUsIHZhbHVlKSB7XG4gICAgdmFyIGZpbHRlciA9IHJ1bGUuZmlsdGVyO1xuICAgIHZhciBvcGVyYXRvciA9IHJ1bGUub3BlcmF0b3I7XG4gICAgdmFyIHZhbGlkYXRpb24gPSBmaWx0ZXIudmFsaWRhdGlvbiB8fCB7fTtcbiAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICB2YXIgdG1wO1xuXG4gICAgaWYgKHJ1bGUub3BlcmF0b3IubmJfaW5wdXRzID09PSAxKSB7XG4gICAgICAgIHZhbHVlID0gW3ZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcGVyYXRvci5uYl9pbnB1dHM7IGkrKykge1xuICAgICAgICBzd2l0Y2ggKGZpbHRlci5pbnB1dCkge1xuICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVtpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsncmFkaW9fZW1wdHknXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlW2ldID09PSB1bmRlZmluZWQgfHwgdmFsdWVbaV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnY2hlY2tib3hfZW1wdHknXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFvcGVyYXRvci5tdWx0aXBsZSAmJiB2YWx1ZVtpXS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnb3BlcmF0b3Jfbm90X211bHRpcGxlJywgb3BlcmF0b3IudHlwZV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVtpXSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlW2ldLmxlbmd0aCA9PT0gMCB8fCAoZmlsdGVyLnBsYWNlaG9sZGVyICYmIHZhbHVlW2ldID09IGZpbHRlci5wbGFjZWhvbGRlcl92YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnc2VsZWN0X2VtcHR5J107XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghb3BlcmF0b3IubXVsdGlwbGUgJiYgdmFsdWVbaV0ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWydvcGVyYXRvcl9ub3RfbXVsdGlwbGUnLCBvcGVyYXRvci50eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbaV0gPT09IHVuZGVmaW5lZCB8fCAoZmlsdGVyLnBsYWNlaG9sZGVyICYmIHZhbHVlW2ldID09IGZpbHRlci5wbGFjZWhvbGRlcl92YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnc2VsZWN0X2VtcHR5J107XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKFF1ZXJ5QnVpbGRlci50eXBlc1tmaWx0ZXIudHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVtpXSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlW2ldLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnc3RyaW5nX2VtcHR5J107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbi5taW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVtpXS5sZW5ndGggPCBwYXJzZUludCh2YWxpZGF0aW9uLm1pbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWydzdHJpbmdfZXhjZWVkX21pbl9sZW5ndGgnLCB2YWxpZGF0aW9uLm1pbl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlW2ldLmxlbmd0aCA+IHBhcnNlSW50KHZhbGlkYXRpb24ubWF4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ3N0cmluZ19leGNlZWRfbWF4X2xlbmd0aCcsIHZhbGlkYXRpb24ubWF4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRpb24uZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uLmZvcm1hdCA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLmZvcm1hdCA9IG5ldyBSZWdFeHAodmFsaWRhdGlvbi5mb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbGlkYXRpb24uZm9ybWF0LnRlc3QodmFsdWVbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnc3RyaW5nX2ludmFsaWRfZm9ybWF0JywgdmFsaWRhdGlvbi5mb3JtYXRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlW2ldID09PSB1bmRlZmluZWQgfHwgaXNOYU4odmFsdWVbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWydudW1iZXJfbmFuJ107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnR5cGUgPT0gJ2ludGVnZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlW2ldKSAhPSB2YWx1ZVtpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ251bWJlcl9ub3RfaW50ZWdlciddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdCh2YWx1ZVtpXSkgIT0gdmFsdWVbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWydudW1iZXJfbm90X2RvdWJsZSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbi5taW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVtpXSA8IHBhcnNlRmxvYXQodmFsaWRhdGlvbi5taW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnbnVtYmVyX2V4Y2VlZF9taW4nLCB2YWxpZGF0aW9uLm1pbl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlW2ldID4gcGFyc2VGbG9hdCh2YWxpZGF0aW9uLm1heCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWydudW1iZXJfZXhjZWVkX21heCcsIHZhbGlkYXRpb24ubWF4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRpb24uc3RlcCAhPT0gdW5kZWZpbmVkICYmIHZhbGlkYXRpb24uc3RlcCAhPT0gJ2FueScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9ICh2YWx1ZVtpXSAvIHZhbGlkYXRpb24uc3RlcCkudG9QcmVjaXNpb24oMTQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCh2KSAhPSB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnbnVtYmVyX3dyb25nX3N0ZXAnLCB2YWxpZGF0aW9uLnN0ZXBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbaV0gPT09IHVuZGVmaW5lZCB8fCB2YWx1ZVtpXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ2RhdGV0aW1lX2VtcHR5J107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgTW9tZW50SlNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCdtb21lbnQnIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ01pc3NpbmdMaWJyYXJ5JywgJ01vbWVudEpTIGlzIHJlcXVpcmVkIGZvciBEYXRlL1RpbWUgdmFsaWRhdGlvbi4gR2V0IGl0IGhlcmUgaHR0cDovL21vbWVudGpzLmNvbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRldGltZSA9IG1vbWVudCh2YWx1ZVtpXSwgdmFsaWRhdGlvbi5mb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0ZXRpbWUuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnZGF0ZXRpbWVfaW52YWxpZCcsIHZhbGlkYXRpb24uZm9ybWF0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbi5taW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRldGltZSA8IG1vbWVudCh2YWxpZGF0aW9uLm1pbiwgdmFsaWRhdGlvbi5mb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWydkYXRldGltZV9leGNlZWRfbWluJywgdmFsaWRhdGlvbi5taW5dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLm1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGV0aW1lID4gbW9tZW50KHZhbGlkYXRpb24ubWF4LCB2YWxpZGF0aW9uLmZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbJ2RhdGV0aW1lX2V4Y2VlZF9tYXgnLCB2YWxpZGF0aW9uLm1heF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IHZhbHVlW2ldLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcCAhPT0gJ3RydWUnICYmIHRtcCAhPT0gJ2ZhbHNlJyAmJiB0bXAgIT09ICcxJyAmJiB0bXAgIT09ICcwJyAmJiB2YWx1ZVtpXSAhPT0gMSAmJiB2YWx1ZVtpXSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFsnYm9vbGVhbl9ub3RfdmFsaWQnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gaW5jcmVtZW50ZWQgZ3JvdXAgSURcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5uZXh0R3JvdXBJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cy5pZCArICdfZ3JvdXBfJyArICh0aGlzLnN0YXR1cy5ncm91cF9pZCsrKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBpbmNyZW1lbnRlZCBydWxlIElEXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUubmV4dFJ1bGVJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cy5pZCArICdfcnVsZV8nICsgKHRoaXMuc3RhdHVzLnJ1bGVfaWQrKyk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG9wZXJhdG9ycyBmb3IgYSBmaWx0ZXJcbiAqIEBwYXJhbSBmaWx0ZXIge3N0cmluZ3xvYmplY3R9IChmaWx0ZXIgaWQgbmFtZSBvciBmaWx0ZXIgb2JqZWN0KVxuICogQHJldHVybiB7b2JqZWN0W119XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuZ2V0T3BlcmF0b3JzID0gZnVuY3Rpb24oZmlsdGVyKSB7XG4gICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgZmlsdGVyID0gdGhpcy5nZXRGaWx0ZXJCeUlkKGZpbHRlcik7XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLm9wZXJhdG9ycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgLy8gZmlsdGVyIG9wZXJhdG9ycyBjaGVja1xuICAgICAgICBpZiAoZmlsdGVyLm9wZXJhdG9ycykge1xuICAgICAgICAgICAgaWYgKGZpbHRlci5vcGVyYXRvcnMuaW5kZXhPZih0aGlzLm9wZXJhdG9yc1tpXS50eXBlKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHR5cGUgY2hlY2tcbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcGVyYXRvcnNbaV0uYXBwbHlfdG8uaW5kZXhPZihRdWVyeUJ1aWxkZXIudHlwZXNbZmlsdGVyLnR5cGVdKSA9PSAtMSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQucHVzaCh0aGlzLm9wZXJhdG9yc1tpXSk7XG4gICAgfVxuXG4gICAgLy8ga2VlcCBzb3J0IG9yZGVyIGRlZmluZWQgZm9yIHRoZSBmaWx0ZXJcbiAgICBpZiAoZmlsdGVyLm9wZXJhdG9ycykge1xuICAgICAgICByZXN1bHQuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyLm9wZXJhdG9ycy5pbmRleE9mKGEudHlwZSkgLSBmaWx0ZXIub3BlcmF0b3JzLmluZGV4T2YoYi50eXBlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY2hhbmdlKCdnZXRPcGVyYXRvcnMnLCByZXN1bHQsIGZpbHRlcik7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBwYXJ0aWN1bGFyIGZpbHRlciBieSBpdHMgaWRcbiAqIEB0aHJvd3MgVW5kZWZpbmVkRmlsdGVyRXJyb3JcbiAqIEBwYXJhbSBmaWx0ZXJJZCB7c3RyaW5nfVxuICogQHJldHVybiB7b2JqZWN0fG51bGx9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuZ2V0RmlsdGVyQnlJZCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgaWYgKGlkID09ICctMScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcnNbaV0uaWQgPT0gaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnNbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBVdGlscy5lcnJvcignVW5kZWZpbmVkRmlsdGVyJywgJ1VuZGVmaW5lZCBmaWx0ZXIgXCJ7MH1cIicsIGlkKTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGEgcGFydGljdWxhciBvcGVyYXRvciBieSBpdHMgdHlwZVxuICogQHRocm93cyBVbmRlZmluZWRPcGVyYXRvckVycm9yXG4gKiBAcGFyYW0gdHlwZSB7c3RyaW5nfVxuICogQHJldHVybiB7b2JqZWN0fG51bGx9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuZ2V0T3BlcmF0b3JCeVR5cGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgaWYgKHR5cGUgPT0gJy0xJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMub3BlcmF0b3JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5vcGVyYXRvcnNbaV0udHlwZSA9PSB0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRvcnNbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBVdGlscy5lcnJvcignVW5kZWZpbmVkT3BlcmF0b3InLCAnVW5kZWZpbmVkIG9wZXJhdG9yIFwiezB9XCInLCB0eXBlKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBydWxlIHZhbHVlXG4gKiBAcGFyYW0gcnVsZSB7UnVsZX1cbiAqIEByZXR1cm4ge21peGVkfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLmdldFJ1bGVWYWx1ZSA9IGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICB2YXIgZmlsdGVyID0gcnVsZS5maWx0ZXI7XG4gICAgdmFyIG9wZXJhdG9yID0gcnVsZS5vcGVyYXRvcjtcbiAgICB2YXIgdmFsdWUgPSBbXTtcblxuICAgIGlmIChmaWx0ZXIudmFsdWVHZXR0ZXIpIHtcbiAgICAgICAgdmFsdWUgPSBmaWx0ZXIudmFsdWVHZXR0ZXIuY2FsbCh0aGlzLCBydWxlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciAkdmFsdWUgPSBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy52YWx1ZV9jb250YWluZXIpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BlcmF0b3IubmJfaW5wdXRzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gVXRpbHMuZXNjYXBlRWxlbWVudElkKHJ1bGUuaWQgKyAnX3ZhbHVlXycgKyBpKTtcbiAgICAgICAgICAgIHZhciB0bXA7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoZmlsdGVyLmlucHV0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCR2YWx1ZS5maW5kKCdbbmFtZT0nICsgbmFtZSArICddOmNoZWNrZWQnKS52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgICAgICB0bXAgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgJHZhbHVlLmZpbmQoJ1tuYW1lPScgKyBuYW1lICsgJ106Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAucHVzaCgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2godG1wKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR2YWx1ZS5maW5kKCdbbmFtZT0nICsgbmFtZSArICddIG9wdGlvbjpzZWxlY3RlZCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnB1c2goJCh0aGlzKS52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2godG1wKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2goJHZhbHVlLmZpbmQoJ1tuYW1lPScgKyBuYW1lICsgJ10gb3B0aW9uOnNlbGVjdGVkJykudmFsKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgkdmFsdWUuZmluZCgnW25hbWU9JyArIG5hbWUgKyAnXScpLnZhbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcGVyYXRvci5uYl9pbnB1dHMgPT09IDEpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWVbMF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBAZGVwcmVjYXRlZFxuICAgICAgICBpZiAoZmlsdGVyLnZhbHVlUGFyc2VyKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGZpbHRlci52YWx1ZVBhcnNlci5jYWxsKHRoaXMsIHJ1bGUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNoYW5nZSgnZ2V0UnVsZVZhbHVlJywgdmFsdWUsIHJ1bGUpO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSB2YWx1ZSBvZiBhIHJ1bGUuXG4gKiBAcGFyYW0gcnVsZSB7UnVsZX1cbiAqIEBwYXJhbSB2YWx1ZSB7bWl4ZWR9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuc2V0UnVsZVZhbHVlID0gZnVuY3Rpb24ocnVsZSwgdmFsdWUpIHtcbiAgICB2YXIgZmlsdGVyID0gcnVsZS5maWx0ZXI7XG4gICAgdmFyIG9wZXJhdG9yID0gcnVsZS5vcGVyYXRvcjtcblxuICAgIGlmIChmaWx0ZXIudmFsdWVTZXR0ZXIpIHtcbiAgICAgICAgZmlsdGVyLnZhbHVlU2V0dGVyLmNhbGwodGhpcywgcnVsZSwgdmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyICR2YWx1ZSA9IHJ1bGUuJGVsLmZpbmQoU2VsZWN0b3JzLnZhbHVlX2NvbnRhaW5lcik7XG5cbiAgICAgICAgaWYgKG9wZXJhdG9yLm5iX2lucHV0cyA9PSAxKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcGVyYXRvci5uYl9pbnB1dHM7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBVdGlscy5lc2NhcGVFbGVtZW50SWQocnVsZS5pZCArICdfdmFsdWVfJyArIGkpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGZpbHRlci5pbnB1dCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JhZGlvJzpcbiAgICAgICAgICAgICAgICAgICAgJHZhbHVlLmZpbmQoJ1tuYW1lPScgKyBuYW1lICsgJ11bdmFsdWU9XCInICsgdmFsdWVbaV0gKyAnXCJdJykucHJvcCgnY2hlY2tlZCcsIHRydWUpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkLmlzQXJyYXkodmFsdWVbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVtpXSA9IFt2YWx1ZVtpXV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWVbaV0uZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHZhbHVlLmZpbmQoJ1tuYW1lPScgKyBuYW1lICsgJ11bdmFsdWU9XCInICsgdmFsdWUgKyAnXCJdJykucHJvcCgnY2hlY2tlZCcsIHRydWUpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAkdmFsdWUuZmluZCgnW25hbWU9JyArIG5hbWUgKyAnXScpLnZhbCh2YWx1ZVtpXSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBDbGVhbiBydWxlIGZsYWdzLlxuICogQHBhcmFtIHJ1bGUge29iamVjdH1cbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5wYXJzZVJ1bGVGbGFncyA9IGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICB2YXIgZmxhZ3MgPSAkLmV4dGVuZCh7fSwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0X3J1bGVfZmxhZ3MpO1xuXG4gICAgaWYgKHJ1bGUucmVhZG9ubHkpIHtcbiAgICAgICAgJC5leHRlbmQoZmxhZ3MsIHtcbiAgICAgICAgICAgIGZpbHRlcl9yZWFkb25seTogdHJ1ZSxcbiAgICAgICAgICAgIG9wZXJhdG9yX3JlYWRvbmx5OiB0cnVlLFxuICAgICAgICAgICAgdmFsdWVfcmVhZG9ubHk6IHRydWUsXG4gICAgICAgICAgICBub19kZWxldGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHJ1bGUuZmxhZ3MpIHtcbiAgICAgICAgJC5leHRlbmQoZmxhZ3MsIHJ1bGUuZmxhZ3MpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNoYW5nZSgncGFyc2VSdWxlRmxhZ3MnLCBmbGFncywgcnVsZSk7XG59O1xuXG4vKipcbiAqIEdldCBhIGNvcHkgb2YgZmxhZ3Mgb2YgYSBydWxlLlxuICogQHBhcmFtIHtvYmplY3R9IGZsYWdzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFsbCAtIHRydWUgdG8gcmV0dXJuIGFsbCBmbGFncywgZmFsc2UgdG8gcmV0dXJuIG9ubHkgY2hhbmdlcyBmcm9tIGRlZmF1bHRcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuZ2V0UnVsZUZsYWdzID0gZnVuY3Rpb24oZmxhZ3MsIGFsbCkge1xuICAgIGlmIChhbGwpIHtcbiAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHt9LCBmbGFncyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgcmV0ID0ge307XG4gICAgICAgICQuZWFjaCh0aGlzLnNldHRpbmdzLmRlZmF1bHRfcnVsZV9mbGFncywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGZsYWdzW2tleV0gIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSBmbGFnc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG59O1xuXG4vKipcbiAqIENsZWFuIGdyb3VwIGZsYWdzLlxuICogQHBhcmFtIGdyb3VwIHtvYmplY3R9XG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUucGFyc2VHcm91cEZsYWdzID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICB2YXIgZmxhZ3MgPSAkLmV4dGVuZCh7fSwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0X2dyb3VwX2ZsYWdzKTtcblxuICAgIGlmIChncm91cC5yZWFkb25seSkge1xuICAgICAgICAkLmV4dGVuZChmbGFncywge1xuICAgICAgICAgICAgY29uZGl0aW9uX3JlYWRvbmx5OiB0cnVlLFxuICAgICAgICAgICAgbm9fZGVsZXRlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChncm91cC5mbGFncykge1xuICAgICAgICAkLmV4dGVuZChmbGFncywgZ3JvdXAuZmxhZ3MpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNoYW5nZSgncGFyc2VHcm91cEZsYWdzJywgZmxhZ3MsIGdyb3VwKTtcbn07XG5cbi8qKlxuICogR2V0IGEgY29weSBvZiBmbGFncyBvZiBhIGdyb3VwLlxuICogQHBhcmFtIHtvYmplY3R9IGZsYWdzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFsbCAtIHRydWUgdG8gcmV0dXJuIGFsbCBmbGFncywgZmFsc2UgdG8gcmV0dXJuIG9ubHkgY2hhbmdlcyBmcm9tIGRlZmF1bHRcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUuZ2V0R3JvdXBGbGFncyA9IGZ1bmN0aW9uKGZsYWdzLCBhbGwpIHtcbiAgICBpZiAoYWxsKSB7XG4gICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgZmxhZ3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICAkLmVhY2godGhpcy5zZXR0aW5ncy5kZWZhdWx0X2dyb3VwX2ZsYWdzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoZmxhZ3Nba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXRba2V5XSA9IGZsYWdzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbn07XG5cbi8qKlxuICogVHJhbnNsYXRlIGEgbGFiZWxcbiAqIEBwYXJhbSBsYWJlbCB7c3RyaW5nfG9iamVjdH1cbiAqIEByZXR1cm4gc3RyaW5nXG4gKi9cblF1ZXJ5QnVpbGRlci5wcm90b3R5cGUudHJhbnNsYXRlTGFiZWwgPSBmdW5jdGlvbihsYWJlbCkge1xuICAgIHJldHVybiB0eXBlb2YgbGFiZWwgPT0gJ29iamVjdCcgPyAobGFiZWxbdGhpcy5zZXR0aW5ncy5sYW5nX2NvZGVdIHx8IGxhYmVsWydlbiddKSA6IGxhYmVsO1xufTtcblxuXG5RdWVyeUJ1aWxkZXIudGVtcGxhdGVzLmdyb3VwID0gJ1xcXG48ZGwgaWQ9XCJ7ez0gaXQuZ3JvdXBfaWQgfX1cIiBjbGFzcz1cInJ1bGVzLWdyb3VwLWNvbnRhaW5lclwiPiBcXFxuICA8ZHQgY2xhc3M9XCJydWxlcy1ncm91cC1oZWFkZXJcIj4gXFxcbiAgICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIHB1bGwtcmlnaHQgZ3JvdXAtYWN0aW9uc1wiPiBcXFxuICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIgZGF0YS1hZGQ9XCJydWxlXCI+IFxcXG4gICAgICAgIDxpIGNsYXNzPVwie3s9IGl0Lmljb25zLmFkZF9ydWxlIH19XCI+PC9pPiB7ez0gaXQubGFuZy5hZGRfcnVsZSB9fSBcXFxuICAgICAgPC9idXR0b24+IFxcXG4gICAgICB7ez8gaXQuc2V0dGluZ3MuYWxsb3dfZ3JvdXBzPT09LTEgfHwgaXQuc2V0dGluZ3MuYWxsb3dfZ3JvdXBzPj1pdC5sZXZlbCB9fSBcXFxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiBkYXRhLWFkZD1cImdyb3VwXCI+IFxcXG4gICAgICAgICAgPGkgY2xhc3M9XCJ7ez0gaXQuaWNvbnMuYWRkX2dyb3VwIH19XCI+PC9pPiB7ez0gaXQubGFuZy5hZGRfZ3JvdXAgfX0gXFxcbiAgICAgICAgPC9idXR0b24+IFxcXG4gICAgICB7ez99fSBcXFxuICAgICAge3s/IGl0LmxldmVsPjEgfX0gXFxcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1kYW5nZXJcIiBkYXRhLWRlbGV0ZT1cImdyb3VwXCI+IFxcXG4gICAgICAgICAgPGkgY2xhc3M9XCJ7ez0gaXQuaWNvbnMucmVtb3ZlX2dyb3VwIH19XCI+PC9pPiB7ez0gaXQubGFuZy5kZWxldGVfZ3JvdXAgfX0gXFxcbiAgICAgICAgPC9idXR0b24+IFxcXG4gICAgICB7ez99fSBcXFxuICAgIDwvZGl2PiBcXFxuICAgIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXAgZ3JvdXAtY29uZGl0aW9uc1wiPiBcXFxuICAgICAge3t+IGl0LmNvbmRpdGlvbnM6IGNvbmRpdGlvbiB9fSBcXFxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1wcmltYXJ5XCI+IFxcXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJ7ez0gaXQuZ3JvdXBfaWQgfX1fY29uZFwiIHZhbHVlPVwie3s9IGNvbmRpdGlvbiB9fVwiPiB7ez0gaXQubGFuZy5jb25kaXRpb25zW2NvbmRpdGlvbl0gfHwgY29uZGl0aW9uIH19IFxcXG4gICAgICAgIDwvbGFiZWw+IFxcXG4gICAgICB7e359fSBcXFxuICAgIDwvZGl2PiBcXFxuICAgIHt7PyBpdC5zZXR0aW5ncy5kaXNwbGF5X2Vycm9ycyB9fSBcXFxuICAgICAgPGRpdiBjbGFzcz1cImVycm9yLWNvbnRhaW5lclwiPjxpIGNsYXNzPVwie3s9IGl0Lmljb25zLmVycm9yIH19XCI+PC9pPjwvZGl2PiBcXFxuICAgIHt7P319IFxcXG4gIDwvZHQ+IFxcXG4gIDxkZCBjbGFzcz1ydWxlcy1ncm91cC1ib2R5PiBcXFxuICAgIDx1bCBjbGFzcz1ydWxlcy1saXN0PjwvdWw+IFxcXG4gIDwvZGQ+IFxcXG48L2RsPic7XG5cblF1ZXJ5QnVpbGRlci50ZW1wbGF0ZXMucnVsZSA9ICdcXFxuPGxpIGlkPVwie3s9IGl0LnJ1bGVfaWQgfX1cIiBjbGFzcz1cInJ1bGUtY29udGFpbmVyXCI+IFxcXG4gIDxkaXYgY2xhc3M9XCJydWxlLWhlYWRlclwiPiBcXFxuICAgIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXAgcHVsbC1yaWdodCBydWxlLWFjdGlvbnNcIj4gXFxcbiAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi14cyBidG4tZGFuZ2VyXCIgZGF0YS1kZWxldGU9XCJydWxlXCI+IFxcXG4gICAgICAgIDxpIGNsYXNzPVwie3s9IGl0Lmljb25zLnJlbW92ZV9ydWxlIH19XCI+PC9pPiB7ez0gaXQubGFuZy5kZWxldGVfcnVsZSB9fSBcXFxuICAgICAgPC9idXR0b24+IFxcXG4gICAgPC9kaXY+IFxcXG4gIDwvZGl2PiBcXFxuICB7ez8gaXQuc2V0dGluZ3MuZGlzcGxheV9lcnJvcnMgfX0gXFxcbiAgICA8ZGl2IGNsYXNzPVwiZXJyb3ItY29udGFpbmVyXCI+PGkgY2xhc3M9XCJ7ez0gaXQuaWNvbnMuZXJyb3IgfX1cIj48L2k+PC9kaXY+IFxcXG4gIHt7P319IFxcXG4gIDxkaXYgY2xhc3M9XCJydWxlLWZpbHRlci1jb250YWluZXJcIj48L2Rpdj4gXFxcbiAgPGRpdiBjbGFzcz1cInJ1bGUtb3BlcmF0b3ItY29udGFpbmVyXCI+PC9kaXY+IFxcXG4gIDxkaXYgY2xhc3M9XCJydWxlLXZhbHVlLWNvbnRhaW5lclwiPjwvZGl2PiBcXFxuPC9saT4nO1xuXG5RdWVyeUJ1aWxkZXIudGVtcGxhdGVzLmZpbHRlclNlbGVjdCA9ICdcXFxue3sgdmFyIG9wdGdyb3VwID0gbnVsbDsgfX0gXFxcbjxzZWxlY3QgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwie3s9IGl0LnJ1bGUuaWQgfX1fZmlsdGVyXCI+IFxcXG4gIHt7PyBpdC5zZXR0aW5ncy5kaXNwbGF5X2VtcHR5X2ZpbHRlciB9fSBcXFxuICAgIDxvcHRpb24gdmFsdWU9XCItMVwiPnt7PSBpdC5zZXR0aW5ncy5zZWxlY3RfcGxhY2Vob2xkZXIgfX08L29wdGlvbj4gXFxcbiAge3s/fX0gXFxcbiAge3t+IGl0LmZpbHRlcnM6IGZpbHRlciB9fSBcXFxuICAgIHt7PyBvcHRncm91cCAhPT0gZmlsdGVyLm9wdGdyb3VwIH19IFxcXG4gICAgICB7ez8gb3B0Z3JvdXAgIT09IG51bGwgfX08L29wdGdyb3VwPnt7P319IFxcXG4gICAgICB7ez8gKG9wdGdyb3VwID0gZmlsdGVyLm9wdGdyb3VwKSAhPT0gbnVsbCB9fSBcXFxuICAgICAgICA8b3B0Z3JvdXAgbGFiZWw9XCJ7ez0gaXQudHJhbnNsYXRlKGl0LnNldHRpbmdzLm9wdGdyb3Vwc1tvcHRncm91cF0pIH19XCI+IFxcXG4gICAgICB7ez99fSBcXFxuICAgIHt7P319IFxcXG4gICAgPG9wdGlvbiB2YWx1ZT1cInt7PSBmaWx0ZXIuaWQgfX1cIj57ez0gaXQudHJhbnNsYXRlKGZpbHRlci5sYWJlbCkgfX08L29wdGlvbj4gXFxcbiAge3t+fX0gXFxcbiAge3s/IG9wdGdyb3VwICE9PSBudWxsIH19PC9vcHRncm91cD57ez99fSBcXFxuPC9zZWxlY3Q+JztcblxuUXVlcnlCdWlsZGVyLnRlbXBsYXRlcy5vcGVyYXRvclNlbGVjdCA9ICdcXFxue3sgdmFyIG9wdGdyb3VwID0gbnVsbDsgfX0gXFxcbjxzZWxlY3QgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwie3s9IGl0LnJ1bGUuaWQgfX1fb3BlcmF0b3JcIj4gXFxcbiAge3t+IGl0Lm9wZXJhdG9yczogb3BlcmF0b3IgfX0gXFxcbiAgICB7ez8gb3B0Z3JvdXAgIT09IG9wZXJhdG9yLm9wdGdyb3VwIH19IFxcXG4gICAgICB7ez8gb3B0Z3JvdXAgIT09IG51bGwgfX08L29wdGdyb3VwPnt7P319IFxcXG4gICAgICB7ez8gKG9wdGdyb3VwID0gb3BlcmF0b3Iub3B0Z3JvdXApICE9PSBudWxsIH19IFxcXG4gICAgICAgIDxvcHRncm91cCBsYWJlbD1cInt7PSBpdC50cmFuc2xhdGUoaXQuc2V0dGluZ3Mub3B0Z3JvdXBzW29wdGdyb3VwXSkgfX1cIj4gXFxcbiAgICAgIHt7P319IFxcXG4gICAge3s/fX0gXFxcbiAgICA8b3B0aW9uIHZhbHVlPVwie3s9IG9wZXJhdG9yLnR5cGUgfX1cIj57ez0gaXQubGFuZy5vcGVyYXRvcnNbb3BlcmF0b3IudHlwZV0gfHwgb3BlcmF0b3IudHlwZSB9fTwvb3B0aW9uPiBcXFxuICB7e359fSBcXFxuICB7ez8gb3B0Z3JvdXAgIT09IG51bGwgfX08L29wdGdyb3VwPnt7P319IFxcXG48L3NlbGVjdD4nO1xuXG4vKipcbiAqIFJldHVybnMgZ3JvdXAgSFRNTFxuICogQHBhcmFtIGdyb3VwX2lkIHtzdHJpbmd9XG4gKiBAcGFyYW0gbGV2ZWwge2ludH1cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5nZXRHcm91cFRlbXBsYXRlID0gZnVuY3Rpb24oZ3JvdXBfaWQsIGxldmVsKSB7XG4gICAgdmFyIGggPSB0aGlzLnRlbXBsYXRlcy5ncm91cCh7XG4gICAgICAgIGJ1aWxkZXI6IHRoaXMsXG4gICAgICAgIGdyb3VwX2lkOiBncm91cF9pZCxcbiAgICAgICAgbGV2ZWw6IGxldmVsLFxuICAgICAgICBjb25kaXRpb25zOiB0aGlzLnNldHRpbmdzLmNvbmRpdGlvbnMsXG4gICAgICAgIGljb25zOiB0aGlzLmljb25zLFxuICAgICAgICBsYW5nOiB0aGlzLmxhbmcsXG4gICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5jaGFuZ2UoJ2dldEdyb3VwVGVtcGxhdGUnLCBoLCBsZXZlbCk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgcnVsZSBIVE1MXG4gKiBAcGFyYW0gcnVsZV9pZCB7c3RyaW5nfVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLmdldFJ1bGVUZW1wbGF0ZSA9IGZ1bmN0aW9uKHJ1bGVfaWQpIHtcbiAgICB2YXIgaCA9IHRoaXMudGVtcGxhdGVzLnJ1bGUoe1xuICAgICAgICBidWlsZGVyOiB0aGlzLFxuICAgICAgICBydWxlX2lkOiBydWxlX2lkLFxuICAgICAgICBpY29uczogdGhpcy5pY29ucyxcbiAgICAgICAgbGFuZzogdGhpcy5sYW5nLFxuICAgICAgICBzZXR0aW5nczogdGhpcy5zZXR0aW5nc1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY2hhbmdlKCdnZXRSdWxlVGVtcGxhdGUnLCBoKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBydWxlIGZpbHRlciA8c2VsZWN0PiBIVE1MXG4gKiBAcGFyYW0gcnVsZSB7UnVsZX1cbiAqIEBwYXJhbSBmaWx0ZXJzIHthcnJheX1cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5nZXRSdWxlRmlsdGVyU2VsZWN0ID0gZnVuY3Rpb24ocnVsZSwgZmlsdGVycykge1xuICAgIHZhciBoID0gdGhpcy50ZW1wbGF0ZXMuZmlsdGVyU2VsZWN0KHtcbiAgICAgICAgYnVpbGRlcjogdGhpcyxcbiAgICAgICAgcnVsZTogcnVsZSxcbiAgICAgICAgZmlsdGVyczogZmlsdGVycyxcbiAgICAgICAgaWNvbnM6IHRoaXMuaWNvbnMsXG4gICAgICAgIGxhbmc6IHRoaXMubGFuZyxcbiAgICAgICAgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXG4gICAgICAgIHRyYW5zbGF0ZTogdGhpcy50cmFuc2xhdGVMYWJlbFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY2hhbmdlKCdnZXRSdWxlRmlsdGVyU2VsZWN0JywgaCwgcnVsZSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgcnVsZSBvcGVyYXRvciA8c2VsZWN0PiBIVE1MXG4gKiBAcGFyYW0gcnVsZSB7UnVsZX1cbiAqIEBwYXJhbSBvcGVyYXRvcnMge29iamVjdH1cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuUXVlcnlCdWlsZGVyLnByb3RvdHlwZS5nZXRSdWxlT3BlcmF0b3JTZWxlY3QgPSBmdW5jdGlvbihydWxlLCBvcGVyYXRvcnMpIHtcbiAgICB2YXIgaCA9IHRoaXMudGVtcGxhdGVzLm9wZXJhdG9yU2VsZWN0KHtcbiAgICAgICAgYnVpbGRlcjogdGhpcyxcbiAgICAgICAgcnVsZTogcnVsZSxcbiAgICAgICAgb3BlcmF0b3JzOiBvcGVyYXRvcnMsXG4gICAgICAgIGljb25zOiB0aGlzLmljb25zLFxuICAgICAgICBsYW5nOiB0aGlzLmxhbmcsXG4gICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzLFxuICAgICAgICB0cmFuc2xhdGU6IHRoaXMudHJhbnNsYXRlTGFiZWxcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmNoYW5nZSgnZ2V0UnVsZU9wZXJhdG9yU2VsZWN0JywgaCwgcnVsZSk7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgcnVsZSB2YWx1ZSBIVE1MXG4gKiBAcGFyYW0gcnVsZSB7UnVsZX1cbiAqIEBwYXJhbSBmaWx0ZXIge29iamVjdH1cbiAqIEBwYXJhbSB2YWx1ZV9pZCB7aW50fVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5RdWVyeUJ1aWxkZXIucHJvdG90eXBlLmdldFJ1bGVJbnB1dCA9IGZ1bmN0aW9uKHJ1bGUsIHZhbHVlX2lkKSB7XG4gICAgdmFyIGZpbHRlciA9IHJ1bGUuZmlsdGVyO1xuICAgIHZhciB2YWxpZGF0aW9uID0gcnVsZS5maWx0ZXIudmFsaWRhdGlvbiB8fCB7fTtcbiAgICB2YXIgbmFtZSA9IHJ1bGUuaWQgKyAnX3ZhbHVlXycgKyB2YWx1ZV9pZDtcbiAgICB2YXIgYyA9IGZpbHRlci52ZXJ0aWNhbCA/ICcgY2xhc3M9YmxvY2snIDogJyc7XG4gICAgdmFyIGggPSAnJztcblxuICAgIGlmICh0eXBlb2YgZmlsdGVyLmlucHV0ID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaCA9IGZpbHRlci5pbnB1dC5jYWxsKHRoaXMsIHJ1bGUsIG5hbWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3dpdGNoIChmaWx0ZXIuaW5wdXQpIHtcbiAgICAgICAgICAgIGNhc2UgJ3JhZGlvJzogY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgIFV0aWxzLml0ZXJhdGVPcHRpb25zKGZpbHRlci52YWx1ZXMsIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGgrPSAnPGxhYmVsJyArIGMgKyAnPjxpbnB1dCB0eXBlPVwiJyArIGZpbHRlci5pbnB1dCArICdcIiBuYW1lPVwiJyArIG5hbWUgKyAnXCIgdmFsdWU9XCInICsga2V5ICsgJ1wiPiAnICsgdmFsICsgJzwvbGFiZWw+ICc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgICAgICAgICAgaCs9ICc8c2VsZWN0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cIicgKyBuYW1lICsgJ1wiJyArIChmaWx0ZXIubXVsdGlwbGUgPyAnIG11bHRpcGxlJyA6ICcnKSArICc+JztcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGgrPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBmaWx0ZXIucGxhY2Vob2xkZXJfdmFsdWUgKyAnXCIgZGlzYWJsZWQgc2VsZWN0ZWQ+JyArIGZpbHRlci5wbGFjZWhvbGRlciArICc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVdGlscy5pdGVyYXRlT3B0aW9ucyhmaWx0ZXIudmFsdWVzLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBoKz0gJzxvcHRpb24gdmFsdWU9XCInICsga2V5ICsgJ1wiPicgKyB2YWwgKyAnPC9vcHRpb24+ICc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaCs9ICc8L3NlbGVjdD4nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICd0ZXh0YXJlYSc6XG4gICAgICAgICAgICAgICAgaCs9ICc8dGV4dGFyZWEgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwiJyArIG5hbWUgKyAnXCInO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIuc2l6ZSkgaCs9ICcgY29scz1cIicgKyBmaWx0ZXIuc2l6ZSArICdcIic7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5yb3dzKSBoKz0gJyByb3dzPVwiJyArIGZpbHRlci5yb3dzICsgJ1wiJztcbiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbi5taW4gIT09IHVuZGVmaW5lZCkgaCs9ICcgbWlubGVuZ3RoPVwiJyArIHZhbGlkYXRpb24ubWluICsgJ1wiJztcbiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbi5tYXggIT09IHVuZGVmaW5lZCkgaCs9ICcgbWF4bGVuZ3RoPVwiJyArIHZhbGlkYXRpb24ubWF4ICsgJ1wiJztcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBsYWNlaG9sZGVyKSBoKz0gJyBwbGFjZWhvbGRlcj1cIicgKyBmaWx0ZXIucGxhY2Vob2xkZXIgKyAnXCInO1xuICAgICAgICAgICAgICAgIGgrPSAnPjwvdGV4dGFyZWE+JztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKFF1ZXJ5QnVpbGRlci50eXBlc1tmaWx0ZXIudHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGgrPSAnPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cIm51bWJlclwiIG5hbWU9XCInICsgbmFtZSArICdcIic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvbi5zdGVwICE9PSB1bmRlZmluZWQpIGgrPSAnIHN0ZXA9XCInICsgdmFsaWRhdGlvbi5zdGVwICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLm1pbiAhPT0gdW5kZWZpbmVkKSBoKz0gJyBtaW49XCInICsgdmFsaWRhdGlvbi5taW4gKyAnXCInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRpb24ubWF4ICE9PSB1bmRlZmluZWQpIGgrPSAnIG1heD1cIicgKyB2YWxpZGF0aW9uLm1heCArICdcIic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBsYWNlaG9sZGVyKSBoKz0gJyBwbGFjZWhvbGRlcj1cIicgKyBmaWx0ZXIucGxhY2Vob2xkZXIgKyAnXCInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlci5zaXplKSBoKz0gJyBzaXplPVwiJyArIGZpbHRlci5zaXplICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGgrPSAnPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaCs9ICc8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCInICsgbmFtZSArICdcIic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBsYWNlaG9sZGVyKSBoKz0gJyBwbGFjZWhvbGRlcj1cIicgKyBmaWx0ZXIucGxhY2Vob2xkZXIgKyAnXCInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlci50eXBlID09PSAnc3RyaW5nJyAmJiB2YWxpZGF0aW9uLm1pbiAhPT0gdW5kZWZpbmVkKSBoKz0gJyBtaW5sZW5ndGg9XCInICsgdmFsaWRhdGlvbi5taW4gKyAnXCInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlci50eXBlID09PSAnc3RyaW5nJyAmJiB2YWxpZGF0aW9uLm1heCAhPT0gdW5kZWZpbmVkKSBoKz0gJyBtYXhsZW5ndGg9XCInICsgdmFsaWRhdGlvbi5tYXggKyAnXCInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlci5zaXplKSBoKz0gJyBzaXplPVwiJyArIGZpbHRlci5zaXplICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGgrPSAnPic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY2hhbmdlKCdnZXRSdWxlSW5wdXQnLCBoLCBydWxlLCBuYW1lKTtcbn07XG5cblxuLy8gTW9kZWwgQ0xBU1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8qKlxuICogTWFpbiBvYmplY3Qgc3RvcmluZyBkYXRhIG1vZGVsIGFuZCBlbWl0dGluZyBldmVudHNcbiAqIC0tLS0tLS0tLVxuICogQWNjZXNzIE5vZGUgb2JqZWN0IHN0b3JlZCBpbiBqUXVlcnkgb2JqZWN0c1xuICogQHBhcmFtIGVsIHtqUXVlcnl8Tm9kZX1cbiAqIEByZXR1cm4ge05vZGV9XG4gKi9cbmZ1bmN0aW9uIE1vZGVsKGVsKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIE1vZGVsKSkge1xuICAgICAgICByZXR1cm4gTW9kZWwuZ2V0TW9kZWwoZWwpO1xuICAgIH1cblxuICAgIHRoaXMucm9vdCA9IG51bGw7XG4gICAgdGhpcy4kID0gJCh0aGlzKTtcbn1cblxuJC5leHRlbmQoTW9kZWwucHJvdG90eXBlLCB7XG4gICAgdHJpZ2dlcjogZnVuY3Rpb24odHlwZSkge1xuICAgICAgICB0aGlzLiQudHJpZ2dlckhhbmRsZXIodHlwZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuJC5vbi5hcHBseSh0aGlzLiQsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgb2ZmOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy4kLm9mZi5hcHBseSh0aGlzLiQsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgb25jZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuJC5vbmUuYXBwbHkodGhpcy4kLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQWNjZXNzIE5vZGUgb2JqZWN0IHN0b3JlZCBpbiBqUXVlcnkgb2JqZWN0c1xuICogQHBhcmFtIGVsIHtqUXVlcnl8Tm9kZX1cbiAqIEByZXR1cm4ge05vZGV9XG4gKi9cbk1vZGVsLmdldE1vZGVsID0gZnVuY3Rpb24oZWwpIHtcbiAgICBpZiAoIWVsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBlbHNlIGlmIChlbCBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICQoZWwpLmRhdGEoJ3F1ZXJ5QnVpbGRlck1vZGVsJyk7XG4gICAgfVxufTtcblxuLypcbiAqIERlZmluZSBOb2RlIHByb3BlcnRpZXMgd2l0aCBnZXR0ZXIgYW5kIHNldHRlclxuICogVXBkYXRlIGV2ZW50cyBhcmUgZW1pdHRlZCBpbiB0aGUgc2V0dGVyIHRocm91Z2ggcm9vdCBNb2RlbCAoaWYgYW55KVxuICovXG5mdW5jdGlvbiBkZWZpbmVNb2RlbFByb3BlcnRpZXMob2JqLCBmaWVsZHMpIHtcbiAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLnByb3RvdHlwZSwgZmllbGQsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9fW2ZpZWxkXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gKHRoaXMuX19bZmllbGRdICE9PSBudWxsICYmIHR5cGVvZiB0aGlzLl9fW2ZpZWxkXSA9PSAnb2JqZWN0JykgP1xuICAgICAgICAgICAgICAgICAgJC5leHRlbmQoe30sIHRoaXMuX19bZmllbGRdKSA6XG4gICAgICAgICAgICAgICAgICB0aGlzLl9fW2ZpZWxkXTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX19bZmllbGRdID0gdmFsdWU7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnRyaWdnZXIoJ3VwZGF0ZScsIHRoaXMsIGZpZWxkLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblxuLy8gTm9kZSBhYnN0cmFjdCBDTEFTU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLyoqXG4gKiBAcGFyYW0ge05vZGV9XG4gKiBAcGFyYW0ge2pRdWVyeX1cbiAqL1xudmFyIE5vZGUgPSBmdW5jdGlvbihwYXJlbnQsICRlbCkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBOb2RlKSkge1xuICAgICAgICByZXR1cm4gbmV3IE5vZGUoKTtcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19fJywgeyB2YWx1ZToge30gfSk7XG5cbiAgICAkZWwuZGF0YSgncXVlcnlCdWlsZGVyTW9kZWwnLCB0aGlzKTtcblxuICAgIHRoaXMuX18ubGV2ZWwgPSAxO1xuICAgIHRoaXMuX18uZXJyb3IgPSBudWxsO1xuICAgIHRoaXMuX18uZGF0YSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLiRlbCA9ICRlbDtcbiAgICB0aGlzLmlkID0gJGVsWzBdLmlkO1xuICAgIHRoaXMubW9kZWwgPSBudWxsO1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xufTtcblxuZGVmaW5lTW9kZWxQcm9wZXJ0aWVzKE5vZGUsIFsnbGV2ZWwnLCAnZXJyb3InLCAnZGF0YScsICdmbGFncyddKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGUucHJvdG90eXBlLCAncGFyZW50Jywge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX18ucGFyZW50O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLl9fLnBhcmVudCA9IHZhbHVlO1xuICAgICAgICB0aGlzLmxldmVsID0gdmFsdWUgPT09IG51bGwgPyAxIDogdmFsdWUubGV2ZWwgKyAxO1xuICAgICAgICB0aGlzLm1vZGVsID0gdmFsdWUgPT09IG51bGwgPyBudWxsIDogdmFsdWUubW9kZWw7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhpcyBOb2RlIGlzIHRoZSByb290XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5Ob2RlLnByb3RvdHlwZS5pc1Jvb3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMubGV2ZWwgPT09IDEpO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gbm9kZSBwb3NpdGlvbiBpbnNpZGUgcGFyZW50XG4gKiBAcmV0dXJuIHtpbnR9XG4gKi9cbk5vZGUucHJvdG90eXBlLmdldFBvcyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmlzUm9vdCgpKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXROb2RlUG9zKHRoaXMpO1xuICAgIH1cbn07XG5cbi8qKlxuICogRGVsZXRlIHNlbGZcbiAqL1xuTm9kZS5wcm90b3R5cGUuZHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtb2RlbCA9IHRoaXMubW9kZWw7XG5cbiAgICBpZiAoIXRoaXMuaXNSb290KCkpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQuX3JlbW92ZU5vZGUodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKG1vZGVsICE9PSBudWxsKSB7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ2Ryb3AnLCB0aGlzKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIE1vdmUgaXRzZWxmIGFmdGVyIGFub3RoZXIgTm9kZVxuICogQHBhcmFtIHtOb2RlfVxuICogQHJldHVybiB7Tm9kZX0gc2VsZlxuICovXG5Ob2RlLnByb3RvdHlwZS5tb3ZlQWZ0ZXIgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgaWYgKHRoaXMuaXNSb290KCkpIHJldHVybjtcblxuICAgIHRoaXMuX21vdmUobm9kZS5wYXJlbnQsIG5vZGUuZ2V0UG9zKCkgKyAxKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBNb3ZlIGl0c2VsZiBhdCB0aGUgYmVnaW5uaW5nIG9mIHBhcmVudCBvciBhbm90aGVyIEdyb3VwXG4gKiBAcGFyYW0ge0dyb3VwLG9wdGlvbmFsfVxuICogQHJldHVybiB7Tm9kZX0gc2VsZlxuICovXG5Ob2RlLnByb3RvdHlwZS5tb3ZlQXRCZWdpbiA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgIGlmICh0aGlzLmlzUm9vdCgpKSByZXR1cm47XG5cbiAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5wYXJlbnQ7XG4gICAgfVxuXG4gICAgdGhpcy5fbW92ZSh0YXJnZXQsIDApO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE1vdmUgaXRzZWxmIGF0IHRoZSBlbmQgb2YgcGFyZW50IG9yIGFub3RoZXIgR3JvdXBcbiAqIEBwYXJhbSB7R3JvdXAsb3B0aW9uYWx9XG4gKiBAcmV0dXJuIHtOb2RlfSBzZWxmXG4gKi9cbk5vZGUucHJvdG90eXBlLm1vdmVBdEVuZCA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgIGlmICh0aGlzLmlzUm9vdCgpKSByZXR1cm47XG5cbiAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5wYXJlbnQ7XG4gICAgfVxuXG4gICAgdGhpcy5fbW92ZSh0YXJnZXQsIHRhcmdldC5sZW5ndGgoKSAtIDEpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE1vdmUgaXRzZWxmIGF0IHNwZWNpZmljIHBvc2l0aW9uIG9mIEdyb3VwXG4gKiBAcGFyYW0ge0dyb3VwfVxuICogQHBhcmFtIHtpbnR9XG4gKi9cbk5vZGUucHJvdG90eXBlLl9tb3ZlID0gZnVuY3Rpb24oZ3JvdXAsIGluZGV4KSB7XG4gICAgdGhpcy5wYXJlbnQuX3JlbW92ZU5vZGUodGhpcyk7XG4gICAgZ3JvdXAuX2FwcGVuZE5vZGUodGhpcywgaW5kZXgsIGZhbHNlKTtcblxuICAgIGlmICh0aGlzLm1vZGVsICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMubW9kZWwudHJpZ2dlcignbW92ZScsIHRoaXMsIGdyb3VwLCBpbmRleCk7XG4gICAgfVxufTtcblxuXG4vLyBHUk9VUCBDTEFTU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLyoqXG4gKiBAcGFyYW0ge0dyb3VwfVxuICogQHBhcmFtIHtqUXVlcnl9XG4gKi9cbnZhciBHcm91cCA9IGZ1bmN0aW9uKHBhcmVudCwgJGVsKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEdyb3VwKSkge1xuICAgICAgICByZXR1cm4gbmV3IEdyb3VwKHBhcmVudCwgJGVsKTtcbiAgICB9XG5cbiAgICBOb2RlLmNhbGwodGhpcywgcGFyZW50LCAkZWwpO1xuXG4gICAgdGhpcy5ydWxlcyA9IFtdO1xuICAgIHRoaXMuX18uY29uZGl0aW9uID0gbnVsbDtcbn07XG5cbkdyb3VwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTm9kZS5wcm90b3R5cGUpO1xuR3JvdXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3JvdXA7XG5cbmRlZmluZU1vZGVsUHJvcGVydGllcyhHcm91cCwgWydjb25kaXRpb24nXSk7XG5cbi8qKlxuICogRW1wdHkgdGhlIEdyb3VwXG4gKi9cbkdyb3VwLnByb3RvdHlwZS5lbXB0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZWFjaCgncmV2ZXJzZScsIGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICAgICAgcnVsZS5kcm9wKCk7XG4gICAgfSwgZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgZ3JvdXAuZHJvcCgpO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBEZWxldGUgc2VsZlxuICovXG5Hcm91cC5wcm90b3R5cGUuZHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZW1wdHkoKTtcbiAgICBOb2RlLnByb3RvdHlwZS5kcm9wLmNhbGwodGhpcyk7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuXG4gKiBAcmV0dXJuIHtpbnR9XG4gKi9cbkdyb3VwLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5ydWxlcy5sZW5ndGg7XG59O1xuXG4vKipcbiAqIEFkZCBhIE5vZGUgYXQgc3BlY2lmaWVkIGluZGV4XG4gKiBAcGFyYW0ge05vZGV9XG4gKiBAcGFyYW0ge2ludCxvcHRpb25hbH1cbiAqIEBwYXJhbSB7Ym9vbGVhbixvcHRpb25hbH1cbiAqIEByZXR1cm4ge05vZGV9IHRoZSBpbnNlcnRlZCBub2RlXG4gKi9cbkdyb3VwLnByb3RvdHlwZS5fYXBwZW5kTm9kZSA9IGZ1bmN0aW9uKG5vZGUsIGluZGV4LCB0cmlnZ2VyKSB7XG4gICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW5kZXggPSB0aGlzLmxlbmd0aCgpO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXMuc3BsaWNlKGluZGV4LCAwLCBub2RlKTtcbiAgICBub2RlLnBhcmVudCA9IHRoaXM7XG5cbiAgICBpZiAodHJpZ2dlciAmJiB0aGlzLm1vZGVsICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMubW9kZWwudHJpZ2dlcignYWRkJywgbm9kZSwgaW5kZXgpO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlO1xufTtcblxuLyoqXG4gKiBBZGQgYSBHcm91cCBieSBqUXVlcnkgZWxlbWVudCBhdCBzcGVjaWZpZWQgaW5kZXhcbiAqIEBwYXJhbSB7alF1ZXJ5fVxuICogQHBhcmFtIHtpbnQsb3B0aW9uYWx9XG4gKiBAcmV0dXJuIHtHcm91cH0gdGhlIGluc2VydGVkIGdyb3VwXG4gKi9cbkdyb3VwLnByb3RvdHlwZS5hZGRHcm91cCA9IGZ1bmN0aW9uKCRlbCwgaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5fYXBwZW5kTm9kZShuZXcgR3JvdXAodGhpcywgJGVsKSwgaW5kZXgsIHRydWUpO1xufTtcblxuLyoqXG4gKiBBZGQgYSBSdWxlIGJ5IGpRdWVyeSBlbGVtZW50IGF0IHNwZWNpZmllZCBpbmRleFxuICogQHBhcmFtIHtqUXVlcnl9XG4gKiBAcGFyYW0ge2ludCxvcHRpb25hbH1cbiAqIEByZXR1cm4ge1J1bGV9IHRoZSBpbnNlcnRlZCBydWxlXG4gKi9cbkdyb3VwLnByb3RvdHlwZS5hZGRSdWxlID0gZnVuY3Rpb24oJGVsLCBpbmRleCkge1xuICAgIHJldHVybiB0aGlzLl9hcHBlbmROb2RlKG5ldyBSdWxlKHRoaXMsICRlbCksIGluZGV4LCB0cnVlKTtcbn07XG5cbi8qKlxuICogRGVsZXRlIGEgc3BlY2lmaWMgTm9kZVxuICogQHBhcmFtIHtOb2RlfVxuICogQHJldHVybiB7R3JvdXB9IHNlbGZcbiAqL1xuR3JvdXAucHJvdG90eXBlLl9yZW1vdmVOb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0Tm9kZVBvcyhub2RlKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIG5vZGUucGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5ydWxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gcG9zaXRpb24gb2YgYSBjaGlsZCBOb2RlXG4gKiBAcGFyYW0ge05vZGV9XG4gKiBAcmV0dXJuIHtpbnR9XG4gKi9cbkdyb3VwLnByb3RvdHlwZS5nZXROb2RlUG9zID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLmluZGV4T2Yobm9kZSk7XG59O1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbGwgTm9kZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbixvcHRpb25hbH0gaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyLCByZXF1aXJlZCBpZiB5b3UgZGVsZXRlIG5vZGVzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBmb3IgUnVsZXNcbiAqIEBwYXJhbSB7ZnVuY3Rpb24sb3B0aW9uYWx9IGNhbGxiYWNrIGZvciBHcm91cHNcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbkdyb3VwLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24ocmV2ZXJzZSwgY2JSdWxlLCBjYkdyb3VwLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiByZXZlcnNlID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29udGV4dCA9IGNiR3JvdXA7XG4gICAgICAgIGNiR3JvdXAgPSBjYlJ1bGU7XG4gICAgICAgIGNiUnVsZSA9IHJldmVyc2U7XG4gICAgICAgIHJldmVyc2UgPSBmYWxzZTtcbiAgICB9XG4gICAgY29udGV4dCA9IGNvbnRleHQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb250ZXh0O1xuXG4gICAgdmFyIGkgPSByZXZlcnNlID8gdGhpcy5ydWxlcy5sZW5ndGggLSAxIDogMDtcbiAgICB2YXIgbCA9IHJldmVyc2UgPyAwIDogdGhpcy5ydWxlcy5sZW5ndGggLSAxO1xuICAgIHZhciBjID0gcmV2ZXJzZSA/IC0xIDogMTtcbiAgICB2YXIgbmV4dCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gcmV2ZXJzZSA/IGkgPj0gbCA6IGkgPD0gbDsgfTtcbiAgICB2YXIgc3RvcCA9IGZhbHNlO1xuXG4gICAgZm9yICg7IG5leHQoKTsgaSs9IGMpIHtcbiAgICAgICAgaWYgKHRoaXMucnVsZXNbaV0gaW5zdGFuY2VvZiBHcm91cCkge1xuICAgICAgICAgICAgaWYgKGNiR3JvdXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0b3AgPSBjYkdyb3VwLmNhbGwoY29udGV4dCwgdGhpcy5ydWxlc1tpXSkgPT09IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RvcCA9IGNiUnVsZS5jYWxsKGNvbnRleHQsIHRoaXMucnVsZXNbaV0pID09PSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdG9wKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAhc3RvcDtcbn07XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgdGhlIGdyb3VwIGNvbnRhaW5zIGEgcGFydGljdWxhciBOb2RlXG4gKiBAcGFyYW0ge05vZGV9XG4gKiBAcGFyYW0ge2Jvb2xlYW4sb3B0aW9uYWx9IHJlY3Vyc2l2ZSBzZWFyY2hcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbkdyb3VwLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKG5vZGUsIGRlZXApIHtcbiAgICBpZiAodGhpcy5nZXROb2RlUG9zKG5vZGUpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWRlZXApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gdGhlIGxvb3Agd2lsbCByZXR1cm4gd2l0aCBmYWxzZSBhcyBzb29uIGFzIHRoZSBOb2RlIGlzIGZvdW5kXG4gICAgICAgIHJldHVybiAhdGhpcy5lYWNoKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LCBmdW5jdGlvbihncm91cCkge1xuICAgICAgICAgICAgcmV0dXJuICFncm91cC5jb250YWlucyhub2RlLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuXG4vLyBSVUxFIENMQVNTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vKipcbiAqIEBwYXJhbSB7R3JvdXB9XG4gKiBAcGFyYW0ge2pRdWVyeX1cbiAqL1xudmFyIFJ1bGUgPSBmdW5jdGlvbihwYXJlbnQsICRlbCkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSdWxlKSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bGUocGFyZW50LCAkZWwpO1xuICAgIH1cblxuICAgIE5vZGUuY2FsbCh0aGlzLCBwYXJlbnQsICRlbCk7XG5cbiAgICB0aGlzLl9fLmZpbHRlciA9IG51bGw7XG4gICAgdGhpcy5fXy5vcGVyYXRvciA9IG51bGw7XG4gICAgdGhpcy5fXy5mbGFncyA9IHt9O1xuICAgIHRoaXMuX18udmFsdWUgPSB1bmRlZmluZWQ7XG59O1xuXG5SdWxlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTm9kZS5wcm90b3R5cGUpO1xuUnVsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSdWxlO1xuXG5kZWZpbmVNb2RlbFByb3BlcnRpZXMoUnVsZSwgWydmaWx0ZXInLCAnb3BlcmF0b3InLCAndmFsdWUnXSk7XG5cblxuLy8gRVhQT1JUXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5RdWVyeUJ1aWxkZXIuR3JvdXAgPSBHcm91cDtcblF1ZXJ5QnVpbGRlci5SdWxlID0gUnVsZTtcblxuXG52YXIgVXRpbHMgPSBRdWVyeUJ1aWxkZXIudXRpbHMgPSB7fTtcblxuLyoqXG4gKiBVdGlsaXR5IHRvIGl0ZXJhdGUgb3ZlciByYWRpby9jaGVja2JveC9zZWxlY3Rpb24gb3B0aW9ucy5cbiAqIGl0IGFjY2VwdCB0aHJlZSBmb3JtYXRzOiBhcnJheSBvZiB2YWx1ZXMsIG1hcCwgYXJyYXkgb2YgMS1lbGVtZW50IG1hcHNcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyB7b2JqZWN0fGFycmF5fVxuICogQHBhcmFtIHRwbCB7Y2FsbGFibGV9ICh0YWtlcyBrZXkgYW5kIHRleHQpXG4gKi9cblV0aWxzLml0ZXJhdGVPcHRpb25zID0gZnVuY3Rpb24ob3B0aW9ucywgdHBsKSB7XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCQuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgLy8gYXJyYXkgb2Ygb25lLWVsZW1lbnQgbWFwc1xuICAgICAgICAgICAgICAgIGlmICgkLmlzUGxhaW5PYmplY3QoZW50cnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChlbnRyeSwgZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRwbChrZXksIHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGJyZWFrIGFmdGVyIGZpcnN0IGVudHJ5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBhcnJheSBvZiB2YWx1ZXNcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHBsKGVudHJ5LCBlbnRyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdW5vcmRlcmVkIG1hcFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICQuZWFjaChvcHRpb25zLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgIHRwbChrZXksIHZhbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogUmVwbGFjZXMgezB9LCB7MX0sIC4uLiBpbiBhIHN0cmluZ1xuICogQHBhcmFtIHN0ciB7c3RyaW5nfVxuICogQHBhcmFtIGFyZ3MsLi4uIHttaXhlZH1cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuVXRpbHMuZm10ID0gZnVuY3Rpb24oc3RyLyosIGFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgIHJldHVybiBzdHIucmVwbGFjZSgveyhbMC05XSspfS9nLCBmdW5jdGlvbihtLCBpKSB7XG4gICAgICAgIHJldHVybiBhcmdzW3BhcnNlSW50KGkpXTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogVGhyb3cgYW4gRXJyb3Igb2JqZWN0IHdpdGggY3VzdG9tIG5hbWVcbiAqIEBwYXJhbSB0eXBlIHtzdHJpbmd9XG4gKiBAcGFyYW0gbWVzc2FnZSB7c3RyaW5nfVxuICogQHBhcmFtIGFyZ3MsLi4uIHttaXhlZH1cbiAqL1xuVXRpbHMuZXJyb3IgPSBmdW5jdGlvbih0eXBlLCBtZXNzYWdlLyosIGFyZ3MqLykge1xuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoVXRpbHMuZm10LmFwcGx5KG51bGwsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpKTtcbiAgICBlcnIubmFtZSA9IHR5cGUgKyAnRXJyb3InO1xuICAgIGVyci5hcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB0aHJvdyBlcnI7XG59O1xuXG4vKipcbiAqIENoYW5nZSB0eXBlIG9mIGEgdmFsdWUgdG8gaW50IG9yIGZsb2F0XG4gKiBAcGFyYW0gdmFsdWUge21peGVkfVxuICogQHBhcmFtIHR5cGUge3N0cmluZ30gJ2ludGVnZXInLCAnZG91YmxlJyBvciBhbnl0aGluZyBlbHNlXG4gKiBAcGFyYW0gYm9vbEFzSW50IHtib29sZWFufSByZXR1cm4gMCBvciAxIGZvciBib29sZWFuc1xuICogQHJldHVybiB7bWl4ZWR9XG4gKi9cblV0aWxzLmNoYW5nZVR5cGUgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSwgYm9vbEFzSW50KSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2ludGVnZXInOiByZXR1cm4gcGFyc2VJbnQodmFsdWUpO1xuICAgICAgICBjYXNlICdkb3VibGUnOiByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgdmFyIGJvb2wgPSB2YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnIHx8IHZhbHVlLnRyaW0oKSA9PT0gJzEnIHx8IHZhbHVlID09PSAxO1xuICAgICAgICAgICAgcmV0dXJuIGJvb2xBc0ludCA/IChib29sID8gMSA6IDApIDogYm9vbDtcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIHZhbHVlO1xuICAgIH1cbn07XG5cbi8qKlxuICogRXNjYXBlIHN0cmluZyBsaWtlIG15c3FsX3JlYWxfZXNjYXBlX3N0cmluZ1xuICogQHBhcmFtIHZhbHVlIHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cblV0aWxzLmVzY2FwZVN0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlXG4gICAgICAucmVwbGFjZSgvW1xcMFxcblxcclxcYlxcXFxcXCdcXFwiXS9nLCBmdW5jdGlvbihzKSB7XG4gICAgICAgICAgc3dpdGNoIChzKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ1xcMCc6IHJldHVybiAnXFxcXDAnO1xuICAgICAgICAgICAgICBjYXNlICdcXG4nOiByZXR1cm4gJ1xcXFxuJztcbiAgICAgICAgICAgICAgY2FzZSAnXFxyJzogcmV0dXJuICdcXFxccic7XG4gICAgICAgICAgICAgIGNhc2UgJ1xcYic6IHJldHVybiAnXFxcXGInO1xuICAgICAgICAgICAgICBkZWZhdWx0OiAgIHJldHVybiAnXFxcXCcgKyBzO1xuICAgICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAvLyB1Z2xpZnkgY29tcGxpYW50XG4gICAgICAucmVwbGFjZSgvXFx0L2csICdcXFxcdCcpXG4gICAgICAucmVwbGFjZSgvXFx4MWEvZywgJ1xcXFxaJyk7XG59O1xuXG4vKipcbiAqIEVzY2FwZSB2YWx1ZSBmb3IgdXNlIGluIHJlZ2V4XG4gKiBAcGFyYW0gdmFsdWUge3N0cmluZ31cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuVXRpbHMuZXNjYXBlUmVnRXhwID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgJ1xcXFwkJicpO1xufTtcblxuLyoqXG4gKiBFc2NhcGUgSFRNTCBlbGVtZW50IGlkXG4gKiBAcGFyYW0gdmFsdWUge3N0cmluZ31cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuVXRpbHMuZXNjYXBlRWxlbWVudElkID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgLy8gUmVnZXggYmFzZWQgb24gdGhhdCBzdWdnZXN0ZWQgYnk6XG4gICAgLy8gaHR0cHM6Ly9sZWFybi5qcXVlcnkuY29tL3VzaW5nLWpxdWVyeS1jb3JlL2ZhcS9ob3ctZG8taS1zZWxlY3QtYW4tZWxlbWVudC1ieS1hbi1pZC10aGF0LWhhcy1jaGFyYWN0ZXJzLXVzZWQtaW4tY3NzLW5vdGF0aW9uL1xuICAgIC8vIC0gZXNjYXBlcyA6IC4gWyBdICxcbiAgICAvLyAtIGF2b2lkcyBlc2NhcGluZyBhbHJlYWR5IGVzY2FwZWQgdmFsdWVzXG4gICAgcmV0dXJuIChzdHIpID8gc3RyLnJlcGxhY2UoLyhcXFxcKT8oWzouXFxbXFxdLF0pL2csXG4gICAgICAgICAgICBmdW5jdGlvbiggJDAsICQxLCAkMiApIHsgcmV0dXJuICQxID8gJDAgOiAnXFxcXCcgKyAkMjsgfSkgOiBzdHI7XG59O1xuXG4vKipcbiAqIFNvcnQgb2JqZWN0cyBieSBncm91cGluZyB0aGVtIGJ5IHtrZXl9LCBwcmVzZXJ2aW5nIGluaXRpYWwgb3JkZXIgd2hlbiBwb3NzaWJsZVxuICogQHBhcmFtIHtvYmplY3RbXX0gaXRlbXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEByZXR1cm5zIHtvYmplY3RbXX1cbiAqL1xuVXRpbHMuZ3JvdXBTb3J0ID0gZnVuY3Rpb24oaXRlbXMsIGtleSkge1xuICAgIHZhciBvcHRncm91cHMgPSBbXTtcbiAgICB2YXIgbmV3SXRlbXMgPSBbXTtcblxuICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgaWR4O1xuXG4gICAgICAgIGlmIChpdGVtW2tleV0pIHtcbiAgICAgICAgICAgIGlkeCA9IG9wdGdyb3Vwcy5sYXN0SW5kZXhPZihpdGVtW2tleV0pO1xuXG4gICAgICAgICAgICBpZiAoaWR4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gb3B0Z3JvdXBzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlkeCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWR4ID0gb3B0Z3JvdXBzLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGdyb3Vwcy5zcGxpY2UoaWR4LCAwLCBpdGVtW2tleV0pO1xuICAgICAgICBuZXdJdGVtcy5zcGxpY2UoaWR4LCAwLCBpdGVtKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBuZXdJdGVtcztcbn07XG5cblxuJC5mbi5xdWVyeUJ1aWxkZXIgPSBmdW5jdGlvbihvcHRpb24pIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIFV0aWxzLmVycm9yKCdDb25maWcnLCAnVW5hYmxlIHRvIGluaXRpYWxpemUgb24gbXVsdGlwbGUgdGFyZ2V0Jyk7XG4gICAgfVxuXG4gICAgdmFyIGRhdGEgPSB0aGlzLmRhdGEoJ3F1ZXJ5QnVpbGRlcicpO1xuICAgIHZhciBvcHRpb25zID0gKHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uKSB8fCB7fTtcblxuICAgIGlmICghZGF0YSAmJiBvcHRpb24gPT0gJ2Rlc3Ryb3knKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhKCdxdWVyeUJ1aWxkZXInLCBuZXcgUXVlcnlCdWlsZGVyKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGRhdGFbb3B0aW9uXS5hcHBseShkYXRhLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbiQuZm4ucXVlcnlCdWlsZGVyLmNvbnN0cnVjdG9yID0gUXVlcnlCdWlsZGVyO1xuJC5mbi5xdWVyeUJ1aWxkZXIuZGVmYXVsdHMgPSBRdWVyeUJ1aWxkZXIuZGVmYXVsdHM7XG4kLmZuLnF1ZXJ5QnVpbGRlci5leHRlbmQgPSBRdWVyeUJ1aWxkZXIuZXh0ZW5kO1xuJC5mbi5xdWVyeUJ1aWxkZXIuZGVmaW5lID0gUXVlcnlCdWlsZGVyLmRlZmluZTtcbiQuZm4ucXVlcnlCdWlsZGVyLnJlZ2lvbmFsID0gUXVlcnlCdWlsZGVyLnJlZ2lvbmFsO1xuXG5cbi8qIVxuICogalF1ZXJ5IFF1ZXJ5QnVpbGRlciBBd2Vzb21lIEJvb3RzdHJhcCBDaGVja2JveFxuICogQXBwbGllcyBBd2Vzb21lIEJvb3RzdHJhcCBDaGVja2JveCBmb3IgY2hlY2tib3ggYW5kIHJhZGlvIGlucHV0cy5cbiAqL1xuXG5RdWVyeUJ1aWxkZXIuZGVmaW5lKCdidC1jaGVja2JveCcsIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5mb250ID09ICdnbHlwaGljb25zJykge1xuICAgICAgICB2YXIgaW5qZWN0Q1NTID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgaW5qZWN0Q1NTLmlubmVySFRNTCA9ICdcXFxuLmNoZWNrYm94IGlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQgKyBsYWJlbDphZnRlciB7IFxcXG4gICAgZm9udC1mYW1pbHk6IFwiR2x5cGhpY29ucyBIYWxmbGluZ3NcIjsgXFxcbiAgICBjb250ZW50OiBcIlxcXFxlMDEzXCI7IFxcXG59IFxcXG4uY2hlY2tib3ggbGFiZWw6YWZ0ZXIgeyBcXFxuICAgIHBhZGRpbmctbGVmdDogNHB4OyBcXFxuICAgIHBhZGRpbmctdG9wOiAycHg7IFxcXG4gICAgZm9udC1zaXplOiA5cHg7IFxcXG59JztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbmplY3RDU1MpO1xuICAgIH1cblxuICAgIHRoaXMub24oJ2dldFJ1bGVJbnB1dC5maWx0ZXInLCBmdW5jdGlvbihoLCBydWxlLCBuYW1lKSB7XG4gICAgICAgIHZhciBmaWx0ZXIgPSBydWxlLmZpbHRlcjtcblxuICAgICAgICBpZiAoKGZpbHRlci5pbnB1dCA9PT0gJ3JhZGlvJyB8fCBmaWx0ZXIuaW5wdXQgPT09ICdjaGVja2JveCcpICYmICFmaWx0ZXIucGx1Z2luKSB7XG4gICAgICAgICAgICBoLnZhbHVlID0gJyc7XG5cbiAgICAgICAgICAgIGlmICghZmlsdGVyLmNvbG9ycykge1xuICAgICAgICAgICAgICAgIGZpbHRlci5jb2xvcnMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWx0ZXIuY29sb3IpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXIuY29sb3JzLl9kZWZfID0gZmlsdGVyLmNvbG9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBmaWx0ZXIudmVydGljYWwgPyAnIHN0eWxlPVwiZGlzcGxheTpibG9ja1wiJyA6ICcnO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgICAgICBVdGlscy5pdGVyYXRlT3B0aW9ucyhmaWx0ZXIudmFsdWVzLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGZpbHRlci5jb2xvcnNba2V5XSB8fCBmaWx0ZXIuY29sb3JzLl9kZWZfIHx8IG9wdGlvbnMuY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gbmFtZSArICdfJyArIChpKyspO1xuXG4gICAgICAgICAgICAgICAgaC52YWx1ZSs9ICdcXFxuPGRpdicgKyBzdHlsZSArICcgY2xhc3M9XCInICsgZmlsdGVyLmlucHV0ICsgJyAnICsgZmlsdGVyLmlucHV0ICsgJy0nICsgY29sb3IgKyAnXCI+IFxcXG4gIDxpbnB1dCB0eXBlPVwiJyArIGZpbHRlci5pbnB1dCArICdcIiBuYW1lPVwiJyArIG5hbWUgKyAnXCIgaWQ9XCInICsgaWQgKyAnXCIgdmFsdWU9XCInICsga2V5ICsgJ1wiPiBcXFxuICA8bGFiZWwgZm9yPVwiJyArIGlkICsgJ1wiPicgKyB2YWwgKyAnPC9sYWJlbD4gXFxcbjwvZGl2Pic7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufSwge1xuICAgIGZvbnQ6ICdnbHlwaGljb25zJyxcbiAgICBjb2xvcjogJ2RlZmF1bHQnXG59KTtcblxuXG4vKiFcbiAqIGpRdWVyeSBRdWVyeUJ1aWxkZXIgQm9vdHN0cmFwIFNlbGVjdHBpY2tlclxuICogQXBwbGllcyBCb290c3RyYXAgU2VsZWN0IG9uIGZpbHRlcnMgYW5kIG9wZXJhdG9ycyBjb21iby1ib3hlcy5cbiAqL1xuXG4vKipcbiAqIEB0aHJvd3MgQ29uZmlnRXJyb3JcbiAqL1xuUXVlcnlCdWlsZGVyLmRlZmluZSgnYnQtc2VsZWN0cGlja2VyJywgZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmICghJC5mbi5zZWxlY3RwaWNrZXIgfHwgISQuZm4uc2VsZWN0cGlja2VyLkNvbnN0cnVjdG9yKSB7XG4gICAgICAgIFV0aWxzLmVycm9yKCdNaXNzaW5nTGlicmFyeScsICdCb290c3RyYXAgU2VsZWN0IGlzIHJlcXVpcmVkIHRvIHVzZSBcImJ0LXNlbGVjdHBpY2tlclwiIHBsdWdpbi4gR2V0IGl0IGhlcmU6IGh0dHA6Ly9zaWx2aW9tb3JldG8uZ2l0aHViLmlvL2Jvb3RzdHJhcC1zZWxlY3QnKTtcbiAgICB9XG5cbiAgICAvLyBpbml0IHNlbGVjdHBpY2tlclxuICAgIHRoaXMub24oJ2FmdGVyQ3JlYXRlUnVsZUZpbHRlcnMnLCBmdW5jdGlvbihlLCBydWxlKSB7XG4gICAgICAgIHJ1bGUuJGVsLmZpbmQoU2VsZWN0b3JzLnJ1bGVfZmlsdGVyKS5yZW1vdmVDbGFzcygnZm9ybS1jb250cm9sJykuc2VsZWN0cGlja2VyKG9wdGlvbnMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbignYWZ0ZXJDcmVhdGVSdWxlT3BlcmF0b3JzJywgZnVuY3Rpb24oZSwgcnVsZSkge1xuICAgICAgICBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX29wZXJhdG9yKS5yZW1vdmVDbGFzcygnZm9ybS1jb250cm9sJykuc2VsZWN0cGlja2VyKG9wdGlvbnMpO1xuICAgIH0pO1xuXG4gICAgLy8gdXBkYXRlIHNlbGVjdHBpY2tlciBvbiBjaGFuZ2VcbiAgICB0aGlzLm9uKCdhZnRlclVwZGF0ZVJ1bGVGaWx0ZXInLCBmdW5jdGlvbihlLCBydWxlKSB7XG4gICAgICAgIHJ1bGUuJGVsLmZpbmQoU2VsZWN0b3JzLnJ1bGVfZmlsdGVyKS5zZWxlY3RwaWNrZXIoJ3JlbmRlcicpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbignYWZ0ZXJVcGRhdGVSdWxlT3BlcmF0b3InLCBmdW5jdGlvbihlLCBydWxlKSB7XG4gICAgICAgIHJ1bGUuJGVsLmZpbmQoU2VsZWN0b3JzLnJ1bGVfb3BlcmF0b3IpLnNlbGVjdHBpY2tlcigncmVuZGVyJyk7XG4gICAgfSk7XG59LCB7XG4gICAgY29udGFpbmVyOiAnYm9keScsXG4gICAgc3R5bGU6ICdidG4taW52ZXJzZSBidG4teHMnLFxuICAgIHdpZHRoOiAnYXV0bycsXG4gICAgc2hvd0ljb246IGZhbHNlXG59KTtcblxuXG4vKiFcbiAqIGpRdWVyeSBRdWVyeUJ1aWxkZXIgQm9vdHN0cmFwIFRvb2x0aXAgZXJyb3JzXG4gKiBBcHBsaWVzIEJvb3RzdHJhcCBUb29sdGlwcyBvbiB2YWxpZGF0aW9uIGVycm9yIG1lc3NhZ2VzLlxuICovXG5cbi8qKlxuICogQHRocm93cyBDb25maWdFcnJvclxuICovXG5RdWVyeUJ1aWxkZXIuZGVmaW5lKCdidC10b29sdGlwLWVycm9ycycsIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBpZiAoISQuZm4udG9vbHRpcCB8fCAhJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yIHx8ICEkLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlLmZpeFRpdGxlKSB7XG4gICAgICAgIFV0aWxzLmVycm9yKCdNaXNzaW5nTGlicmFyeScsICdCb290c3RyYXAgVG9vbHRpcCBpcyByZXF1aXJlZCB0byB1c2UgXCJidC10b29sdGlwLWVycm9yc1wiIHBsdWdpbi4gR2V0IGl0IGhlcmU6IGh0dHA6Ly9nZXRib290c3RyYXAuY29tJyk7XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gYWRkIEJUIFRvb2x0aXAgZGF0YVxuICAgIHRoaXMub24oJ2dldFJ1bGVUZW1wbGF0ZS5maWx0ZXIgZ2V0R3JvdXBUZW1wbGF0ZS5maWx0ZXInLCBmdW5jdGlvbihoKSB7XG4gICAgICAgIHZhciAkaCA9ICQoaC52YWx1ZSk7XG4gICAgICAgICRoLmZpbmQoU2VsZWN0b3JzLmVycm9yX2NvbnRhaW5lcikuYXR0cignZGF0YS10b2dnbGUnLCAndG9vbHRpcCcpO1xuICAgICAgICBoLnZhbHVlID0gJGgucHJvcCgnb3V0ZXJIVE1MJyk7XG4gICAgfSk7XG5cbiAgICAvLyBpbml0L3JlZnJlc2ggdG9vbHRpcCB3aGVuIHRpdGxlIGNoYW5nZXNcbiAgICB0aGlzLm1vZGVsLm9uKCd1cGRhdGUnLCBmdW5jdGlvbihlLCBub2RlLCBmaWVsZCkge1xuICAgICAgICBpZiAoZmllbGQgPT0gJ2Vycm9yJyAmJiBzZWxmLnNldHRpbmdzLmRpc3BsYXlfZXJyb3JzKSB7XG4gICAgICAgICAgICBub2RlLiRlbC5maW5kKFNlbGVjdG9ycy5lcnJvcl9jb250YWluZXIpLmVxKDApXG4gICAgICAgICAgICAgIC50b29sdGlwKG9wdGlvbnMpXG4gICAgICAgICAgICAgIC50b29sdGlwKCdoaWRlJylcbiAgICAgICAgICAgICAgLnRvb2x0aXAoJ2ZpeFRpdGxlJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0sIHtcbiAgICBwbGFjZW1lbnQ6ICdyaWdodCdcbn0pO1xuXG5cbi8qIVxuICogalF1ZXJ5IFF1ZXJ5QnVpbGRlciBDaGFuZ2UgRmlsdGVyc1xuICogQWxsb3dzIHRvIGNoYW5nZSBhdmFpbGFibGUgZmlsdGVycyBhZnRlciBwbHVnaW4gaW5pdGlhbGl6YXRpb24uXG4gKi9cblxuUXVlcnlCdWlsZGVyLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQ2hhbmdlIHRoZSBmaWx0ZXJzIG9mIHRoZSBidWlsZGVyXG4gICAgICogQHRocm93cyBDaGFuZ2VGaWx0ZXJFcnJvclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbixvcHRpb25hbH0gZGVsZXRlIHJ1bGVzIHVzaW5nIG9sZCBmaWx0ZXJzXG4gICAgICogQHBhcmFtIHtvYmplY3RbXX0gbmV3IGZpbHRlcnNcbiAgICAgKi9cbiAgICBzZXRGaWx0ZXJzOiBmdW5jdGlvbihkZWxldGVfb3JwaGFucywgZmlsdGVycykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGZpbHRlcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZmlsdGVycyA9IGRlbGV0ZV9vcnBoYW5zO1xuICAgICAgICAgICAgZGVsZXRlX29ycGhhbnMgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpbHRlcnMgPSB0aGlzLmNoZWNrRmlsdGVycyhmaWx0ZXJzKTtcbiAgICAgICAgZmlsdGVycyA9IHRoaXMuY2hhbmdlKCdzZXRGaWx0ZXJzJywgZmlsdGVycyk7XG5cbiAgICAgICAgdmFyIGZpbHRlcnNJZHMgPSBmaWx0ZXJzLm1hcChmdW5jdGlvbihmaWx0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXIuaWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNoZWNrIGZvciBvcnBoYW5zXG4gICAgICAgIGlmICghZGVsZXRlX29ycGhhbnMpIHtcbiAgICAgICAgICAgIChmdW5jdGlvbiBjaGVja09ycGhhbnMobm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuZWFjaChcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocnVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUuZmlsdGVyICYmIGZpbHRlcnNJZHMuaW5kZXhPZihydWxlLmZpbHRlci5pZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ0NoYW5nZUZpbHRlcicsICdBIHJ1bGUgaXMgdXNpbmcgZmlsdGVyIFwiezB9XCInLCBydWxlLmZpbHRlci5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrT3JwaGFuc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KHRoaXMubW9kZWwucm9vdCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVwbGFjZSBmaWx0ZXJzXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IGZpbHRlcnM7XG5cbiAgICAgICAgLy8gYXBwbHkgb24gZXhpc3RpbmcgRE9NXG4gICAgICAgIChmdW5jdGlvbiB1cGRhdGVCdWlsZGVyKG5vZGUpIHtcbiAgICAgICAgICAgIG5vZGUuZWFjaCh0cnVlLFxuICAgICAgICAgICAgICBmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgICAgICAgICBpZiAocnVsZS5maWx0ZXIgJiYgZmlsdGVyc0lkcy5pbmRleE9mKHJ1bGUuZmlsdGVyLmlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBydWxlLmRyb3AoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlUnVsZUZpbHRlcnMocnVsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX2ZpbHRlcikudmFsKHJ1bGUuZmlsdGVyID8gcnVsZS5maWx0ZXIuaWQgOiAnLTEnKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdXBkYXRlQnVpbGRlclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSh0aGlzLm1vZGVsLnJvb3QpKTtcblxuICAgICAgICAvLyB1cGRhdGUgcGx1Z2luc1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5wbHVnaW5zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5wbHVnaW5zWyd1bmlxdWUtZmlsdGVyJ10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURpc2FibGVkRmlsdGVycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucGx1Z2luc1snYnQtc2VsZWN0cGlja2VyJ10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX2ZpbHRlcikuc2VsZWN0cGlja2VyKCdyZW5kZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc2V0IHRoZSBkZWZhdWx0X2ZpbHRlciBpZiBkb2VzIG5vdCBleGlzdCBhbnltb3JlXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlZmF1bHRfZmlsdGVyKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsdGVyQnlJZCh0aGlzLnNldHRpbmdzLmRlZmF1bHRfZmlsdGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5kZWZhdWx0X2ZpbHRlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2FmdGVyU2V0RmlsdGVycycsIGZpbHRlcnMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGZpbHRlciB0byB0aGUgYnVpbGRlclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fG9iamVjdFtdfSB0aGUgbmV3IGZpbHRlclxuICAgICAqIEBwYXJhbSB7bWl4ZWQsb3B0aW9uYWx9IG51bWVyaWMgaW5kZXggb3IgJyNzdGFydCcgb3IgJyNlbmQnXG4gICAgICovXG4gICAgYWRkRmlsdGVyOiBmdW5jdGlvbihuZXdfZmlsdGVycywgcG9zaXRpb24pIHtcbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgcG9zaXRpb24gPT0gJyNlbmQnKSB7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IHRoaXMuZmlsdGVycy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocG9zaXRpb24gPT0gJyNzdGFydCcpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghJC5pc0FycmF5KG5ld19maWx0ZXJzKSkge1xuICAgICAgICAgICAgbmV3X2ZpbHRlcnMgPSBbbmV3X2ZpbHRlcnNdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpbHRlcnMgPSAkLmV4dGVuZCh0cnVlLCBbXSwgdGhpcy5maWx0ZXJzKTtcblxuICAgICAgICAvLyBudW1lcmljIHBvc2l0aW9uXG4gICAgICAgIGlmIChwYXJzZUludChwb3NpdGlvbikgPT0gcG9zaXRpb24pIHtcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoZmlsdGVycywgW3Bvc2l0aW9uLCAwXS5jb25jYXQobmV3X2ZpbHRlcnMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFmdGVyIGZpbHRlciBieSBpdHMgaWRcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcnMuc29tZShmdW5jdGlvbihmaWx0ZXIsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5pZCA9PSBwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGZpbHRlcnMsIFtwb3NpdGlvbiwgMF0uY29uY2F0KG5ld19maWx0ZXJzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkZWZhdWx0cyB0byBlbmQgb2YgbGlzdFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZmlsdGVycywgbmV3X2ZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRGaWx0ZXJzKGZpbHRlcnMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZmlsdGVyIGZyb20gdGhlIGJ1aWxkZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdGhlIGZpbHRlciBpZFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbixvcHRpb25hbH0gZGVsZXRlIHJ1bGVzIHVzaW5nIG9sZCBmaWx0ZXJzXG4gICAgICovXG4gICAgcmVtb3ZlRmlsdGVyOiBmdW5jdGlvbihmaWx0ZXJfaWRzLCBkZWxldGVfb3JwaGFucykge1xuICAgICAgICB2YXIgZmlsdGVycyA9ICQuZXh0ZW5kKHRydWUsIFtdLCB0aGlzLmZpbHRlcnMpO1xuICAgICAgICBpZiAodHlwZW9mIGZpbHRlcl9pZHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBmaWx0ZXJfaWRzID0gW2ZpbHRlcl9pZHNdO1xuICAgICAgICB9XG5cbiAgICAgICAgZmlsdGVycyA9IGZpbHRlcnMuZmlsdGVyKGZ1bmN0aW9uKGZpbHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcl9pZHMuaW5kZXhPZihmaWx0ZXIuaWQpID09PSAtMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZXRGaWx0ZXJzKGRlbGV0ZV9vcnBoYW5zLCBmaWx0ZXJzKTtcbiAgICB9XG59KTtcblxuXG4vKiFcbiAqIGpRdWVyeSBRdWVyeUJ1aWxkZXIgRmlsdGVyIERlc2NyaXB0aW9uXG4gKiBQcm92aWRlcyB0aHJlZSB3YXlzIHRvIGRpc3BsYXkgYSBkZXNjcmlwdGlvbiBhYm91dCBhIGZpbHRlcjogaW5saW5lLCBCb290c3JhcCBQb3BvdmVyIG9yIEJvb3Rib3guXG4gKi9cblxuLyoqXG4gKiBAdGhyb3dzIENvbmZpZ0Vycm9yXG4gKi9cblF1ZXJ5QnVpbGRlci5kZWZpbmUoJ2ZpbHRlci1kZXNjcmlwdGlvbicsIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvKipcbiAgICAgKiBJTkxJTkVcbiAgICAgKi9cbiAgICBpZiAob3B0aW9ucy5tb2RlID09PSAnaW5saW5lJykge1xuICAgICAgICB0aGlzLm9uKCdhZnRlclVwZGF0ZVJ1bGVGaWx0ZXInLCBmdW5jdGlvbihlLCBydWxlKSB7XG4gICAgICAgICAgICB2YXIgJHAgPSBydWxlLiRlbC5maW5kKCdwLmZpbHRlci1kZXNjcmlwdGlvbicpO1xuXG4gICAgICAgICAgICBpZiAoIXJ1bGUuZmlsdGVyIHx8ICFydWxlLmZpbHRlci5kZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICRwLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgkcC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJHAgPSAkKCc8cCBjbGFzcz1cImZpbHRlci1kZXNjcmlwdGlvblwiPjwvcD4nKTtcbiAgICAgICAgICAgICAgICAgICAgJHAuYXBwZW5kVG8ocnVsZS4kZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHAuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRwLmh0bWwoJzxpIGNsYXNzPVwiJyArIG9wdGlvbnMuaWNvbiArICdcIj48L2k+ICcgKyBydWxlLmZpbHRlci5kZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQT1BPVkVSXG4gICAgICovXG4gICAgZWxzZSBpZiAob3B0aW9ucy5tb2RlID09PSAncG9wb3ZlcicpIHtcbiAgICAgICAgaWYgKCEkLmZuLnBvcG92ZXIgfHwgISQuZm4ucG9wb3Zlci5Db25zdHJ1Y3RvciB8fCAhJC5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yLnByb3RvdHlwZS5maXhUaXRsZSkge1xuICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ01pc3NpbmdMaWJyYXJ5JywgJ0Jvb3RzdHJhcCBQb3BvdmVyIGlzIHJlcXVpcmVkIHRvIHVzZSBcImZpbHRlci1kZXNjcmlwdGlvblwiIHBsdWdpbi4gR2V0IGl0IGhlcmU6IGh0dHA6Ly9nZXRib290c3RyYXAuY29tJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9uKCdhZnRlclVwZGF0ZVJ1bGVGaWx0ZXInLCBmdW5jdGlvbihlLCBydWxlKSB7XG4gICAgICAgICAgICB2YXIgJGIgPSBydWxlLiRlbC5maW5kKCdidXR0b24uZmlsdGVyLWRlc2NyaXB0aW9uJyk7XG5cbiAgICAgICAgICAgIGlmICghcnVsZS5maWx0ZXIgfHwgIXJ1bGUuZmlsdGVyLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgJGIuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRiLmRhdGEoJ2JzLnBvcG92ZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAkYi5wb3BvdmVyKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCRiLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAkYiA9ICQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi14cyBidG4taW5mbyBmaWx0ZXItZGVzY3JpcHRpb25cIiBkYXRhLXRvZ2dsZT1cInBvcG92ZXJcIj48aSBjbGFzcz1cIicgKyBvcHRpb25zLmljb24gKyAnXCI+PC9pPjwvYnV0dG9uPicpO1xuICAgICAgICAgICAgICAgICAgICAkYi5wcmVwZW5kVG8ocnVsZS4kZWwuZmluZChTZWxlY3RvcnMucnVsZV9hY3Rpb25zKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJGIucG9wb3Zlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6ICdsZWZ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJ2JvZHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkYi5vbignbW91c2VvdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRiLnBvcG92ZXIoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkYi5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJGIuZGF0YSgnYnMucG9wb3ZlcicpLm9wdGlvbnMuY29udGVudCA9IHJ1bGUuZmlsdGVyLmRlc2NyaXB0aW9uO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRiLmF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknKSkge1xuICAgICAgICAgICAgICAgICAgICAkYi5wb3BvdmVyKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQk9PVEJPWFxuICAgICAqL1xuICAgIGVsc2UgaWYgKG9wdGlvbnMubW9kZSA9PT0gJ2Jvb3Rib3gnKSB7XG4gICAgICAgIGlmICghKCdib290Ym94JyBpbiB3aW5kb3cpKSB7XG4gICAgICAgICAgICBVdGlscy5lcnJvcignTWlzc2luZ0xpYnJhcnknLCAnQm9vdGJveCBpcyByZXF1aXJlZCB0byB1c2UgXCJmaWx0ZXItZGVzY3JpcHRpb25cIiBwbHVnaW4uIEdldCBpdCBoZXJlOiBodHRwOi8vYm9vdGJveGpzLmNvbScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbignYWZ0ZXJVcGRhdGVSdWxlRmlsdGVyJywgZnVuY3Rpb24oZSwgcnVsZSkge1xuICAgICAgICAgICAgdmFyICRiID0gcnVsZS4kZWwuZmluZCgnYnV0dG9uLmZpbHRlci1kZXNjcmlwdGlvbicpO1xuXG4gICAgICAgICAgICBpZiAoIXJ1bGUuZmlsdGVyIHx8ICFydWxlLmZpbHRlci5kZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICRiLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgkYi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJGIgPSAkKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4teHMgYnRuLWluZm8gZmlsdGVyLWRlc2NyaXB0aW9uXCIgZGF0YS10b2dnbGU9XCJib290Ym94XCI+PGkgY2xhc3M9XCInICsgb3B0aW9ucy5pY29uICsgJ1wiPjwvaT48L2J1dHRvbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgJGIucHJlcGVuZFRvKHJ1bGUuJGVsLmZpbmQoU2VsZWN0b3JzLnJ1bGVfYWN0aW9ucykpO1xuXG4gICAgICAgICAgICAgICAgICAgICRiLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9vdGJveC5hbGVydCgkYi5kYXRhKCdkZXNjcmlwdGlvbicpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJGIuZGF0YSgnZGVzY3JpcHRpb24nLCBydWxlLmZpbHRlci5kZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0sIHtcbiAgICBpY29uOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1pbmZvLXNpZ24nLFxuICAgIG1vZGU6ICdwb3BvdmVyJ1xufSk7XG5cblxuLyohXG4gKiBqUXVlcnkgUXVlcnlCdWlsZGVyIEludmVydFxuICogQWxsb3dzIHRvIGludmVydCBhIHJ1bGUgb3BlcmF0b3IsIGEgZ3JvdXAgY29uZGl0aW9uIG9yIHRoZSBlbnRpcmUgYnVpbGRlci5cbiAqL1xuXG5RdWVyeUJ1aWxkZXIuZGVmYXVsdHMoe1xuICAgIG9wZXJhdG9yT3Bwb3NpdGVzOiB7XG4gICAgICAgICdlcXVhbCc6ICAgICAgICAgICAgJ25vdF9lcXVhbCcsXG4gICAgICAgICdub3RfZXF1YWwnOiAgICAgICAgJ2VxdWFsJyxcbiAgICAgICAgJ2luJzogICAgICAgICAgICAgICAnbm90X2luJyxcbiAgICAgICAgJ25vdF9pbic6ICAgICAgICAgICAnaW4nLFxuICAgICAgICAnbGVzcyc6ICAgICAgICAgICAgICdncmVhdGVyX29yX2VxdWFsJyxcbiAgICAgICAgJ2xlc3Nfb3JfZXF1YWwnOiAgICAnZ3JlYXRlcicsXG4gICAgICAgICdncmVhdGVyJzogICAgICAgICAgJ2xlc3Nfb3JfZXF1YWwnLFxuICAgICAgICAnZ3JlYXRlcl9vcl9lcXVhbCc6ICdsZXNzJyxcbiAgICAgICAgJ2JldHdlZW4nOiAgICAgICAgICAnbm90X2JldHdlZW4nLFxuICAgICAgICAnbm90X2JldHdlZW4nOiAgICAgICdiZXR3ZWVuJyxcbiAgICAgICAgJ2JlZ2luc193aXRoJzogICAgICAnbm90X2JlZ2luc193aXRoJyxcbiAgICAgICAgJ25vdF9iZWdpbnNfd2l0aCc6ICAnYmVnaW5zX3dpdGgnLFxuICAgICAgICAnY29udGFpbnMnOiAgICAgICAgICdub3RfY29udGFpbnMnLFxuICAgICAgICAnbm90X2NvbnRhaW5zJzogICAgICdjb250YWlucycsXG4gICAgICAgICdlbmRzX3dpdGgnOiAgICAgICAgJ25vdF9lbmRzX3dpdGgnLFxuICAgICAgICAnbm90X2VuZHNfd2l0aCc6ICAgICdlbmRzX3dpdGgnLFxuICAgICAgICAnaXNfZW1wdHknOiAgICAgICAgICdpc19ub3RfZW1wdHknLFxuICAgICAgICAnaXNfbm90X2VtcHR5JzogICAgICdpc19lbXB0eScsXG4gICAgICAgICdpc19udWxsJzogICAgICAgICAgJ2lzX25vdF9udWxsJyxcbiAgICAgICAgJ2lzX25vdF9udWxsJzogICAgICAnaXNfbnVsbCdcbiAgICB9LFxuXG4gICAgY29uZGl0aW9uT3Bwb3NpdGVzOiB7XG4gICAgICAgICdBTkQnOiAnT1InLFxuICAgICAgICAnT1InOiAnQU5EJ1xuICAgIH1cbn0pO1xuXG5RdWVyeUJ1aWxkZXIuZGVmaW5lKCdpbnZlcnQnLCBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLyoqXG4gICAgICogQmluZCBldmVudHNcbiAgICAgKi9cbiAgICB0aGlzLm9uKCdhZnRlckluaXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi4kZWwub24oJ2NsaWNrLnF1ZXJ5QnVpbGRlcicsICdbZGF0YS1pbnZlcnQ9Z3JvdXBdJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJGdyb3VwID0gJCh0aGlzKS5jbG9zZXN0KFNlbGVjdG9ycy5ncm91cF9jb250YWluZXIpO1xuICAgICAgICAgICAgc2VsZi5pbnZlcnQoTW9kZWwoJGdyb3VwKSwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmRpc3BsYXlfcnVsZXNfYnV0dG9uICYmIG9wdGlvbnMuaW52ZXJ0X3J1bGVzKSB7XG4gICAgICAgICAgICBzZWxmLiRlbC5vbignY2xpY2sucXVlcnlCdWlsZGVyJywgJ1tkYXRhLWludmVydD1ydWxlXScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciAkcnVsZSA9ICQodGhpcykuY2xvc2VzdChTZWxlY3RvcnMucnVsZV9jb250YWluZXIpO1xuICAgICAgICAgICAgICAgIHNlbGYuaW52ZXJ0KE1vZGVsKCRydWxlKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTW9kaWZ5IHRlbXBsYXRlc1xuICAgICAqL1xuICAgIHRoaXMub24oJ2dldEdyb3VwVGVtcGxhdGUuZmlsdGVyJywgZnVuY3Rpb24oaCwgbGV2ZWwpIHtcbiAgICAgICAgdmFyICRoID0gJChoLnZhbHVlKTtcbiAgICAgICAgJGguZmluZChTZWxlY3RvcnMuY29uZGl0aW9uX2NvbnRhaW5lcikuYWZ0ZXIoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiIGRhdGEtaW52ZXJ0PVwiZ3JvdXBcIj48aSBjbGFzcz1cIicgKyBvcHRpb25zLmljb24gKyAnXCI+PC9pPiAnICsgc2VsZi5sYW5nLmludmVydCArICc8L2J1dHRvbj4nKTtcbiAgICAgICAgaC52YWx1ZSA9ICRoLnByb3AoJ291dGVySFRNTCcpO1xuICAgIH0pO1xuXG4gICAgaWYgKG9wdGlvbnMuZGlzcGxheV9ydWxlc19idXR0b24gJiYgb3B0aW9ucy5pbnZlcnRfcnVsZXMpIHtcbiAgICAgICAgdGhpcy5vbignZ2V0UnVsZVRlbXBsYXRlLmZpbHRlcicsIGZ1bmN0aW9uKGgpIHtcbiAgICAgICAgICAgIHZhciAkaCA9ICQoaC52YWx1ZSk7XG4gICAgICAgICAgICAkaC5maW5kKFNlbGVjdG9ycy5ydWxlX2FjdGlvbnMpLnByZXBlbmQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiIGRhdGEtaW52ZXJ0PVwicnVsZVwiPjxpIGNsYXNzPVwiJyArIG9wdGlvbnMuaWNvbiArICdcIj48L2k+ICcgKyBzZWxmLmxhbmcuaW52ZXJ0ICsgJzwvYnV0dG9uPicpO1xuICAgICAgICAgICAgaC52YWx1ZSA9ICRoLnByb3AoJ291dGVySFRNTCcpO1xuICAgICAgICB9KTtcbiAgICB9XG59LCB7XG4gICAgaWNvbjogJ2dseXBoaWNvbiBnbHlwaGljb24tcmFuZG9tJyxcbiAgICByZWN1cnNpdmU6IHRydWUsXG4gICAgaW52ZXJ0X3J1bGVzOiB0cnVlLFxuICAgIGRpc3BsYXlfcnVsZXNfYnV0dG9uOiBmYWxzZSxcbiAgICBzaWxlbnRfZmFpbDogZmFsc2Vcbn0pO1xuXG5RdWVyeUJ1aWxkZXIuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBJbnZlcnQgYSBHcm91cCwgYSBSdWxlIG9yIHRoZSB3aG9sZSBidWlsZGVyXG4gICAgICogQHRocm93cyBJbnZlcnRDb25kaXRpb25FcnJvciwgSW52ZXJ0T3BlcmF0b3JFcnJvclxuICAgICAqIEBwYXJhbSB7Tm9kZSxvcHRpb25hbH1cbiAgICAgKiBAcGFyYW0ge29iamVjdCxvcHRpb25hbH1cbiAgICAgKi9cbiAgICBpbnZlcnQ6IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCEobm9kZSBpbnN0YW5jZW9mIE5vZGUpKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubW9kZWwucm9vdCkgcmV0dXJuO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG5vZGU7XG4gICAgICAgICAgICBub2RlID0gdGhpcy5tb2RlbC5yb290O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zICE9ICdvYmplY3QnKSBvcHRpb25zID0ge307XG4gICAgICAgIGlmIChvcHRpb25zLnJlY3Vyc2l2ZSA9PT0gdW5kZWZpbmVkKSBvcHRpb25zLnJlY3Vyc2l2ZSA9IHRydWU7XG4gICAgICAgIGlmIChvcHRpb25zLmludmVydF9ydWxlcyA9PT0gdW5kZWZpbmVkKSBvcHRpb25zLmludmVydF9ydWxlcyA9IHRydWU7XG4gICAgICAgIGlmIChvcHRpb25zLnNpbGVudF9mYWlsID09PSB1bmRlZmluZWQpIG9wdGlvbnMuc2lsZW50X2ZhaWwgPSBmYWxzZTtcbiAgICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlciA9PT0gdW5kZWZpbmVkKSBvcHRpb25zLnRyaWdnZXIgPSB0cnVlO1xuXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgR3JvdXApIHtcbiAgICAgICAgICAgIC8vIGludmVydCBncm91cCBjb25kaXRpb25cbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmNvbmRpdGlvbk9wcG9zaXRlc1tub2RlLmNvbmRpdGlvbl0pIHtcbiAgICAgICAgICAgICAgICBub2RlLmNvbmRpdGlvbiA9IHRoaXMuc2V0dGluZ3MuY29uZGl0aW9uT3Bwb3NpdGVzW25vZGUuY29uZGl0aW9uXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFvcHRpb25zLnNpbGVudF9mYWlsKSB7XG4gICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ0ludmVydENvbmRpdGlvbicsICdVbmtub3duIGludmVyc2Ugb2YgY29uZGl0aW9uIFwiezB9XCInLCBub2RlLmNvbmRpdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZSBjYWxsXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZWN1cnNpdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcE9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucywgeyB0cmlnZ2VyOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICBub2RlLmVhY2goZnVuY3Rpb24ocnVsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbnZlcnRfcnVsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52ZXJ0KHJ1bGUsIHRlbXBPcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW52ZXJ0KGdyb3VwLCB0ZW1wT3B0cyk7XG4gICAgICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIFJ1bGUpIHtcbiAgICAgICAgICAgIGlmIChub2RlLm9wZXJhdG9yICYmICFub2RlLmZpbHRlci5ub19pbnZlcnQpIHtcbiAgICAgICAgICAgICAgICAvLyBpbnZlcnQgcnVsZSBvcGVyYXRvclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm9wZXJhdG9yT3Bwb3NpdGVzW25vZGUub3BlcmF0b3IudHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludmVydCA9IHRoaXMuc2V0dGluZ3Mub3BlcmF0b3JPcHBvc2l0ZXNbbm9kZS5vcGVyYXRvci50eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGludmVydCBpcyBcImF1dGhvcml6ZWRcIlxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUuZmlsdGVyLm9wZXJhdG9ycyB8fCBub2RlLmZpbHRlci5vcGVyYXRvcnMuaW5kZXhPZihpbnZlcnQpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLm9wZXJhdG9yID0gdGhpcy5nZXRPcGVyYXRvckJ5VHlwZShpbnZlcnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFvcHRpb25zLnNpbGVudF9mYWlsKSB7XG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLmVycm9yKCdJbnZlcnRPcGVyYXRvcicsICdVbmtub3duIGludmVyc2Ugb2Ygb3BlcmF0b3IgXCJ7MH1cIicsIG5vZGUub3BlcmF0b3IudHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlcikge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdhZnRlckludmVydCcsIG5vZGUsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuLyohXG4gKiBqUXVlcnkgUXVlcnlCdWlsZGVyIE1vbmdvREIgU3VwcG9ydFxuICogQWxsb3dzIHRvIGV4cG9ydCBydWxlcyBhcyBhIE1vbmdvREIgZmluZCBvYmplY3QgYXMgd2VsbCBhcyBwb3B1bGF0aW5nIHRoZSBidWlsZGVyIGZyb20gYSBNb25nb0RCIG9iamVjdC5cbiAqL1xuXG4vLyBERUZBVUxUIENPTkZJR1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUXVlcnlCdWlsZGVyLmRlZmF1bHRzKHtcbiAgICBtb25nb09wZXJhdG9yczoge1xuICAgICAgICBlcXVhbDogICAgICAgICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB2WzBdOyB9LFxuICAgICAgICBub3RfZXF1YWw6ICAgICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7ICckbmUnOiB2WzBdIH07IH0sXG4gICAgICAgIGluOiAgICAgICAgICAgICAgIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgJyRpbic6IHYgfTsgfSxcbiAgICAgICAgbm90X2luOiAgICAgICAgICAgZnVuY3Rpb24odikgeyByZXR1cm4geyAnJG5pbic6IHYgfTsgfSxcbiAgICAgICAgbGVzczogICAgICAgICAgICAgZnVuY3Rpb24odikgeyByZXR1cm4geyAnJGx0JzogdlswXSB9OyB9LFxuICAgICAgICBsZXNzX29yX2VxdWFsOiAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7ICckbHRlJzogdlswXSB9OyB9LFxuICAgICAgICBncmVhdGVyOiAgICAgICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7ICckZ3QnOiB2WzBdIH07IH0sXG4gICAgICAgIGdyZWF0ZXJfb3JfZXF1YWw6IGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgJyRndGUnOiB2WzBdIH07IH0sXG4gICAgICAgIGJldHdlZW46ICAgICAgICAgIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgJyRndGUnOiB2WzBdLCAnJGx0ZSc6IHZbMV0gfTsgfSxcbiAgICAgICAgbm90X2JldHdlZW46ICAgICAgZnVuY3Rpb24odikgeyByZXR1cm4geyAnJGx0JzogdlswXSwgJyRndCc6IHZbMV0gfTsgfSxcbiAgICAgICAgYmVnaW5zX3dpdGg6ICAgICAgZnVuY3Rpb24odikgeyByZXR1cm4geyAnJHJlZ2V4JzogJ14nICsgVXRpbHMuZXNjYXBlUmVnRXhwKHZbMF0pIH07IH0sXG4gICAgICAgIG5vdF9iZWdpbnNfd2l0aDogIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgJyRyZWdleCc6ICdeKD8hJyArIFV0aWxzLmVzY2FwZVJlZ0V4cCh2WzBdKSArICcpJyB9OyB9LFxuICAgICAgICBjb250YWluczogICAgICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7ICckcmVnZXgnOiBVdGlscy5lc2NhcGVSZWdFeHAodlswXSkgfTsgfSxcbiAgICAgICAgbm90X2NvbnRhaW5zOiAgICAgZnVuY3Rpb24odikgeyByZXR1cm4geyAnJHJlZ2V4JzogJ14oKD8hJyArIFV0aWxzLmVzY2FwZVJlZ0V4cCh2WzBdKSArICcpLikqJCcsICckb3B0aW9ucyc6ICdzJyB9OyB9LFxuICAgICAgICBlbmRzX3dpdGg6ICAgICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7ICckcmVnZXgnOiBVdGlscy5lc2NhcGVSZWdFeHAodlswXSkgKyAnJCcgfTsgfSxcbiAgICAgICAgbm90X2VuZHNfd2l0aDogICAgZnVuY3Rpb24odikgeyByZXR1cm4geyAnJHJlZ2V4JzogJyg/PCEnICsgVXRpbHMuZXNjYXBlUmVnRXhwKHZbMF0pICsgJykkJyB9OyB9LFxuICAgICAgICBpc19lbXB0eTogICAgICAgICBmdW5jdGlvbih2KSB7IHJldHVybiAnJzsgfSxcbiAgICAgICAgaXNfbm90X2VtcHR5OiAgICAgZnVuY3Rpb24odikgeyByZXR1cm4geyAnJG5lJzogJycgfTsgfSxcbiAgICAgICAgaXNfbnVsbDogICAgICAgICAgZnVuY3Rpb24odikgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgICAgaXNfbm90X251bGw6ICAgICAgZnVuY3Rpb24odikgeyByZXR1cm4geyAnJG5lJzogbnVsbCB9OyB9XG4gICAgfSxcblxuICAgIG1vbmdvUnVsZU9wZXJhdG9yczoge1xuICAgICAgICAkbmU6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgIHYgPSB2LiRuZTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ3ZhbCc6IHYsXG4gICAgICAgICAgICAgICAgJ29wJzogdiA9PT0gbnVsbCA/ICdpc19ub3RfbnVsbCcgOiAodiA9PT0gJycgPyAnaXNfbm90X2VtcHR5JyA6ICdub3RfZXF1YWwnKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZXE6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ3ZhbCc6IHYsXG4gICAgICAgICAgICAgICAgJ29wJzogdiA9PT0gbnVsbCA/ICdpc19udWxsJyA6ICh2ID09PSAnJyA/ICdpc19lbXB0eScgOiAnZXF1YWwnKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJHJlZ2V4OiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICB2ID0gdi4kcmVnZXg7XG4gICAgICAgICAgICBpZiAodi5zbGljZSgwLCA0KSA9PSAnXig/IScgJiYgdi5zbGljZSgtMSkgPT0gJyknKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgJ3ZhbCc6IHYuc2xpY2UoNCwgLTEpLCAnb3AnOiAnbm90X2JlZ2luc193aXRoJyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodi5zbGljZSgwLCA1KSA9PSAnXigoPyEnICYmIHYuc2xpY2UoLTUpID09ICcpLikqJCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAndmFsJzogdi5zbGljZSg1LCAtNSksICdvcCc6ICdub3RfY29udGFpbnMnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2LnNsaWNlKDAsIDQpID09ICcoPzwhJyAmJiB2LnNsaWNlKC0yKSA9PSAnKSQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgJ3ZhbCc6IHYuc2xpY2UoNCwgLTIpLCAnb3AnOiAnbm90X2VuZHNfd2l0aCcgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHYuc2xpY2UoLTEpID09ICckJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7ICd2YWwnOiB2LnNsaWNlKDAsIC0xKSwgJ29wJzogJ2VuZHNfd2l0aCcgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHYuc2xpY2UoMCwgMSkgPT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgJ3ZhbCc6IHYuc2xpY2UoMSksICdvcCc6ICdiZWdpbnNfd2l0aCcgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7ICd2YWwnOiB2LCAnb3AnOiAnY29udGFpbnMnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGJldHdlZW46ICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7ICd2YWwnOiBbdi4kZ3RlLCB2LiRsdGVdLCAnb3AnOiAnYmV0d2VlbicgfTsgfSxcbiAgICAgICAgbm90X2JldHdlZW46IGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgJ3ZhbCc6IFt2LiRsdCwgdi4kZ3RdLCAnb3AnOiAnbm90X2JldHdlZW4nIH07IH0sXG4gICAgICAgICRpbjogIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgJ3ZhbCc6IHYuJGluLCAnb3AnOiAnaW4nIH07IH0sXG4gICAgICAgICRuaW46IGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgJ3ZhbCc6IHYuJG5pbiwgJ29wJzogJ25vdF9pbicgfTsgfSxcbiAgICAgICAgJGx0OiAgZnVuY3Rpb24odikgeyByZXR1cm4geyAndmFsJzogdi4kbHQsICdvcCc6ICdsZXNzJyB9OyB9LFxuICAgICAgICAkbHRlOiBmdW5jdGlvbih2KSB7IHJldHVybiB7ICd2YWwnOiB2LiRsdGUsICdvcCc6ICdsZXNzX29yX2VxdWFsJyB9OyB9LFxuICAgICAgICAkZ3Q6ICBmdW5jdGlvbih2KSB7IHJldHVybiB7ICd2YWwnOiB2LiRndCwgJ29wJzogJ2dyZWF0ZXInIH07IH0sXG4gICAgICAgICRndGU6IGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgJ3ZhbCc6IHYuJGd0ZSwgJ29wJzogJ2dyZWF0ZXJfb3JfZXF1YWwnIH07IH1cbiAgICB9XG59KTtcblxuXG4vLyBQVUJMSUMgTUVUSE9EU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuUXVlcnlCdWlsZGVyLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogR2V0IHJ1bGVzIGFzIE1vbmdvREIgcXVlcnlcbiAgICAgKiBAdGhyb3dzIFVuZGVmaW5lZE1vbmdvQ29uZGl0aW9uRXJyb3IsIFVuZGVmaW5lZE1vbmdvT3BlcmF0b3JFcnJvclxuICAgICAqIEBwYXJhbSBkYXRhIHtvYmplY3R9IChvcHRpb25hbCkgcnVsZXNcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgZ2V0TW9uZ286IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgZGF0YSA9IChkYXRhID09PSB1bmRlZmluZWQpID8gdGhpcy5nZXRSdWxlcygpIDogZGF0YTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbiBwYXJzZShkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWRhdGEuY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5jb25kaXRpb24gPSBzZWxmLnNldHRpbmdzLmRlZmF1bHRfY29uZGl0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFsnQU5EJywgJ09SJ10uaW5kZXhPZihkYXRhLmNvbmRpdGlvbi50b1VwcGVyQ2FzZSgpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignVW5kZWZpbmVkTW9uZ29Db25kaXRpb24nLCAnVW5hYmxlIHRvIGJ1aWxkIE1vbmdvREIgcXVlcnkgd2l0aCBjb25kaXRpb24gXCJ7MH1cIicsIGRhdGEuY29uZGl0aW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFkYXRhLnJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgICAgICAgICAgZGF0YS5ydWxlcy5mb3JFYWNoKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocnVsZS5ydWxlcyAmJiBydWxlLnJ1bGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGFydHMucHVzaChwYXJzZShydWxlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWRiID0gc2VsZi5zZXR0aW5ncy5tb25nb09wZXJhdG9yc1tydWxlLm9wZXJhdG9yXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZSA9IHNlbGYuZ2V0T3BlcmF0b3JCeVR5cGUocnVsZS5vcGVyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobWRiID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmVycm9yKCdVbmRlZmluZWRNb25nb09wZXJhdG9yJywgJ1Vua25vd24gTW9uZ29EQiBvcGVyYXRpb24gZm9yIG9wZXJhdG9yIFwiezB9XCInLCBydWxlLm9wZXJhdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGUubmJfaW5wdXRzICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShydWxlLnZhbHVlIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS52YWx1ZSA9IFtydWxlLnZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS52YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChVdGlscy5jaGFuZ2VUeXBlKHYsIHJ1bGUudHlwZSwgZmFsc2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgcGFydFtydWxlLmZpZWxkXSA9IG1kYi5jYWxsKHNlbGYsIHZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRzLnB1c2gocGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciByZXMgPSB7fTtcbiAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzWyckJyArIGRhdGEuY29uZGl0aW9uLnRvTG93ZXJDYXNlKCldID0gcGFydHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KGRhdGEpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCBNb25nb0RCIG9iamVjdCB0byBydWxlc1xuICAgICAqIEB0aHJvd3MgTW9uZ29QYXJzZUVycm9yLCBVbmRlZmluZWRNb25nb0NvbmRpdGlvbkVycm9yLCBVbmRlZmluZWRNb25nb09wZXJhdG9yRXJyb3JcbiAgICAgKiBAcGFyYW0gZGF0YSB7b2JqZWN0fSBxdWVyeSBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgZ2V0UnVsZXNGcm9tTW9uZ286IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEgPT09IHVuZGVmaW5lZCB8fCBkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNvbmRpdGlvbnMgPSB7XG4gICAgICAgICAgICAnJGFuZCc6ICdBTkQnLFxuICAgICAgICAgICAgJyRvcic6ICdPUidcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKGZ1bmN0aW9uIHBhcnNlKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciB0b3BLZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG5cbiAgICAgICAgICAgIGlmICh0b3BLZXlzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignTW9uZ29QYXJzZScsICdJbnZhbGlkIE1vbmdvREIgcXVlcnkgZm9ybWF0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbmRpdGlvbnNbdG9wS2V5c1swXS50b0xvd2VyQ2FzZSgpXSkge1xuICAgICAgICAgICAgICAgIFV0aWxzLmVycm9yKCdVbmRlZmluZWRNb25nb0NvbmRpdGlvbicsICdVbmFibGUgdG8gYnVpbGQgTW9uZ29EQiBxdWVyeSB3aXRoIGNvbmRpdGlvbiBcInswfVwiJywgdG9wS2V5c1swXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBydWxlcyA9IGRhdGFbdG9wS2V5c1swXV07XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgICAgICAgICAgcnVsZXMuZm9yRWFjaChmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhydWxlKTtcblxuICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb25zW2tleXNbMF0udG9Mb3dlckNhc2UoKV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcGFydHMucHVzaChwYXJzZShydWxlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBrZXlzWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBydWxlW2ZpZWxkXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlcmF0b3IgPSBkZXRlcm1pbmVNb25nb09wZXJhdG9yKHZhbHVlLCBmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignTW9uZ29QYXJzZScsICdJbnZhbGlkIE1vbmdvREIgcXVlcnkgZm9ybWF0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWRicmwgPSBzZWxmLnNldHRpbmdzLm1vbmdvUnVsZU9wZXJhdG9yc1tvcGVyYXRvcl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZGJybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignVW5kZWZpbmVkTW9uZ29PcGVyYXRvcicsICdKU09OIFJ1bGUgb3BlcmF0aW9uIHVua25vd24gZm9yIG9wZXJhdG9yIFwiezB9XCInLCBvcGVyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3BWYWwgPSBtZGJybC5jYWxsKHNlbGYsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcGFydHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogc2VsZi5jaGFuZ2UoJ2dldE1vbmdvREJGaWVsZElEJywgZmllbGQsIHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBvcFZhbC5vcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcFZhbC52YWxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciByZXMgPSB7fTtcbiAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzLmNvbmRpdGlvbiA9IGNvbmRpdGlvbnNbdG9wS2V5c1swXS50b0xvd2VyQ2FzZSgpXTtcbiAgICAgICAgICAgICAgICByZXMucnVsZXMgPSBwYXJ0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0oZGF0YSkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgcnVsZXMgZnJvbSBNb25nb0RCIG9iamVjdFxuICAgICAqIEBwYXJhbSBkYXRhIHtvYmplY3R9XG4gICAgICovXG4gICAgc2V0UnVsZXNGcm9tTW9uZ286IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdGhpcy5zZXRSdWxlcyh0aGlzLmdldFJ1bGVzRnJvbU1vbmdvKGRhdGEpKTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBGaW5kIHdoaWNoIG9wZXJhdG9yIGlzIHVzZWQgaW4gYSBNb25nb0RCIHN1Yi1vYmplY3RcbiAqIEBwYXJhbSB7bWl4ZWR9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9XG4gKi9cbmZ1bmN0aW9uIGRldGVybWluZU1vbmdvT3BlcmF0b3IodmFsdWUsIGZpZWxkKSB7XG4gICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICB2YXIgc3Via2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcblxuICAgICAgICBpZiAoc3Via2V5cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJrZXlzWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHZhbHVlLiRndGUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZS4kbHRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2JldHdlZW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLiRsdCAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLiRndCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdub3RfYmV0d2Vlbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS4kcmVnZXggIT09IHVuZGVmaW5lZCkgeyAvLyBvcHRpb25hbCAkb3B0aW9uc1xuICAgICAgICAgICAgICAgIHJldHVybiAnJHJlZ2V4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICdlcSc7XG4gICAgfVxufVxuXG5cbi8qIVxuICogalF1ZXJ5IFF1ZXJ5QnVpbGRlciBTb3J0YWJsZVxuICogRW5hYmxlcyBkcmFnICYgZHJvcCBzb3J0IG9mIHJ1bGVzLlxuICovXG5cblNlbGVjdG9ycy5ydWxlX2FuZF9ncm91cF9jb250YWluZXJzID0gU2VsZWN0b3JzLnJ1bGVfY29udGFpbmVyICsgJywgJyArIFNlbGVjdG9ycy5ncm91cF9jb250YWluZXI7XG5cblF1ZXJ5QnVpbGRlci5kZWZpbmUoJ3NvcnRhYmxlJywgZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIC8qKlxuICAgICAqIEluaXQgSFRNTDUgZHJhZyBhbmQgZHJvcFxuICAgICAqL1xuICAgIHRoaXMub24oJ2FmdGVySW5pdCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgLy8gY29uZmlndXJlIGpRdWVyeSB0byB1c2UgZGF0YVRyYW5zZmVyXG4gICAgICAgICQuZXZlbnQucHJvcHMucHVzaCgnZGF0YVRyYW5zZmVyJyk7XG5cbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyO1xuICAgICAgICB2YXIgc3JjO1xuICAgICAgICB2YXIgc2VsZiA9IGUuYnVpbGRlcjtcblxuICAgICAgICAvLyBvbmx5IGFkZCBcImRyYWdnYWJsZVwiIGF0dHJpYnV0ZSB3aGVuIGhvdmVyaW5nIGRyYWcgaGFuZGxlXG4gICAgICAgIC8vIHByZXZlbnRpbmcgdGV4dCBzZWxlY3QgYnVnIGluIEZpcmVmb3hcbiAgICAgICAgc2VsZi4kZWwub24oJ21vdXNlb3Zlci5xdWVyeUJ1aWxkZXInLCAnLmRyYWctaGFuZGxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX2FuZF9ncm91cF9jb250YWluZXJzKS5hdHRyKCdkcmFnZ2FibGUnLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYuJGVsLm9uKCdtb3VzZW91dC5xdWVyeUJ1aWxkZXInLCAnLmRyYWctaGFuZGxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX2FuZF9ncm91cF9jb250YWluZXJzKS5yZW1vdmVBdHRyKCdkcmFnZ2FibGUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZHJhZ3N0YXJ0OiBjcmVhdGUgcGxhY2Vob2xkZXIgYW5kIGhpZGUgY3VycmVudCBlbGVtZW50XG4gICAgICAgIHNlbGYuJGVsLm9uKCdkcmFnc3RhcnQucXVlcnlCdWlsZGVyJywgJ1tkcmFnZ2FibGVdJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgLy8gbm90aWZ5IGRyYWcgYW5kIGRyb3AgKG9ubHkgZHVtbXkgdGV4dClcbiAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQnLCAnZHJhZycpO1xuXG4gICAgICAgICAgICBzcmMgPSBNb2RlbChlLnRhcmdldCk7XG5cbiAgICAgICAgICAgIC8vIENocm9tZSBnbGl0Y2hzXG4gICAgICAgICAgICAvLyAtIGhlbHBlciBpbnZpc2libGUgaWYgaGlkZGVuIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAvLyAtIFwiZHJhZ2VuZFwiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBpZiB3ZSBtb2RpZnkgdGhlIERPTSBkaXJlY3RseVxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGggPSAkKCc8ZGl2IGNsYXNzPVwicnVsZS1wbGFjZWhvbGRlclwiPiZuYnNwOzwvZGl2PicpO1xuICAgICAgICAgICAgICAgIHBoLmNzcygnbWluLWhlaWdodCcsIHNyYy4kZWwuaGVpZ2h0KCkpO1xuXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBzcmMucGFyZW50LmFkZFJ1bGUocGgsIHNyYy5nZXRQb3MoKSk7XG5cbiAgICAgICAgICAgICAgICBzcmMuJGVsLmhpZGUoKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBkcmFnZW50ZXI6IG1vdmUgdGhlIHBsYWNlaG9sZGVyXG4gICAgICAgIHNlbGYuJGVsLm9uKCdkcmFnZW50ZXIucXVlcnlCdWlsZGVyJywgJ1tkcmFnZ2FibGVdJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgbW92ZVNvcnRhYmxlVG9UYXJnZXQocGxhY2Vob2xkZXIsICQoZS50YXJnZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZHJhZ292ZXI6IHByZXZlbnQgZ2xpdGNoZXNcbiAgICAgICAgc2VsZi4kZWwub24oJ2RyYWdvdmVyLnF1ZXJ5QnVpbGRlcicsICdbZHJhZ2dhYmxlXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGRyb3A6IG1vdmUgY3VycmVudCBlbGVtZW50XG4gICAgICAgIHNlbGYuJGVsLm9uKCdkcm9wLnF1ZXJ5QnVpbGRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIG1vdmVTb3J0YWJsZVRvVGFyZ2V0KHNyYywgJChlLnRhcmdldCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBkcmFnZW5kOiBzaG93IGN1cnJlbnQgZWxlbWVudCBhbmQgZGVsZXRlIHBsYWNlaG9sZGVyXG4gICAgICAgIHNlbGYuJGVsLm9uKCdkcmFnZW5kLnF1ZXJ5QnVpbGRlcicsICdbZHJhZ2dhYmxlXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIHNyYy4kZWwuc2hvdygpO1xuICAgICAgICAgICAgcGxhY2Vob2xkZXIuZHJvcCgpO1xuXG4gICAgICAgICAgICBzZWxmLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX2FuZF9ncm91cF9jb250YWluZXJzKS5yZW1vdmVBdHRyKCdkcmFnZ2FibGUnKTtcblxuICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdhZnRlck1vdmUnLCBzcmMpO1xuXG4gICAgICAgICAgICBzcmMgPSBwbGFjZWhvbGRlciA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGRyYWcgaGFuZGxlIGZyb20gbm9uLXNvcnRhYmxlIHJ1bGVzXG4gICAgICovXG4gICAgdGhpcy5vbigncGFyc2VSdWxlRmxhZ3MuZmlsdGVyJywgZnVuY3Rpb24oZmxhZ3MpIHtcbiAgICAgICAgaWYgKGZsYWdzLnZhbHVlLm5vX3NvcnRhYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZsYWdzLnZhbHVlLm5vX3NvcnRhYmxlID0gb3B0aW9ucy5kZWZhdWx0X25vX3NvcnRhYmxlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdhZnRlckFwcGx5UnVsZUZsYWdzJywgZnVuY3Rpb24oZSwgcnVsZSkge1xuICAgICAgICBpZiAocnVsZS5mbGFncy5ub19zb3J0YWJsZSkge1xuICAgICAgICAgICAgcnVsZS4kZWwuZmluZCgnLmRyYWctaGFuZGxlJykucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBkcmFnIGhhbmRsZSBmcm9tIG5vbi1zb3J0YWJsZSBncm91cHNcbiAgICAgKi9cbiAgICB0aGlzLm9uKCdwYXJzZUdyb3VwRmxhZ3MuZmlsdGVyJywgZnVuY3Rpb24oZmxhZ3MpIHtcbiAgICAgICAgaWYgKGZsYWdzLnZhbHVlLm5vX3NvcnRhYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZsYWdzLnZhbHVlLm5vX3NvcnRhYmxlID0gb3B0aW9ucy5kZWZhdWx0X25vX3NvcnRhYmxlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdhZnRlckFwcGx5R3JvdXBGbGFncycsIGZ1bmN0aW9uKGUsIGdyb3VwKSB7XG4gICAgICAgIGlmIChncm91cC5mbGFncy5ub19zb3J0YWJsZSkge1xuICAgICAgICAgICAgZ3JvdXAuJGVsLmZpbmQoJy5kcmFnLWhhbmRsZScpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBNb2RpZnkgdGVtcGxhdGVzXG4gICAgICovXG4gICAgdGhpcy5vbignZ2V0R3JvdXBUZW1wbGF0ZS5maWx0ZXInLCBmdW5jdGlvbihoLCBsZXZlbCkge1xuICAgICAgICBpZiAobGV2ZWwgPiAxKSB7XG4gICAgICAgICAgICB2YXIgJGggPSAkKGgudmFsdWUpO1xuICAgICAgICAgICAgJGguZmluZChTZWxlY3RvcnMuY29uZGl0aW9uX2NvbnRhaW5lcikuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJkcmFnLWhhbmRsZVwiPjxpIGNsYXNzPVwiJyArIG9wdGlvbnMuaWNvbiArICdcIj48L2k+PC9kaXY+Jyk7XG4gICAgICAgICAgICBoLnZhbHVlID0gJGgucHJvcCgnb3V0ZXJIVE1MJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2dldFJ1bGVUZW1wbGF0ZS5maWx0ZXInLCBmdW5jdGlvbihoKSB7XG4gICAgICAgIHZhciAkaCA9ICQoaC52YWx1ZSk7XG4gICAgICAgICRoLmZpbmQoU2VsZWN0b3JzLnJ1bGVfaGVhZGVyKS5hZnRlcignPGRpdiBjbGFzcz1cImRyYWctaGFuZGxlXCI+PGkgY2xhc3M9XCInICsgb3B0aW9ucy5pY29uICsgJ1wiPjwvaT48L2Rpdj4nKTtcbiAgICAgICAgaC52YWx1ZSA9ICRoLnByb3AoJ291dGVySFRNTCcpO1xuICAgIH0pO1xufSwge1xuICAgIGRlZmF1bHRfbm9fc29ydGFibGU6IGZhbHNlLFxuICAgIGljb246ICdnbHlwaGljb24gZ2x5cGhpY29uLXNvcnQnXG59KTtcblxuLyoqXG4gKiBNb3ZlIGFuIGVsZW1lbnQgKHBsYWNlaG9sZGVyIG9yIGFjdHVhbCBvYmplY3QpIGRlcGVuZGluZyBvbiBhY3RpdmUgdGFyZ2V0XG4gKiBAcGFyYW0ge05vZGV9XG4gKiBAcGFyYW0ge2pRdWVyeX1cbiAqL1xuZnVuY3Rpb24gbW92ZVNvcnRhYmxlVG9UYXJnZXQoZWxlbWVudCwgdGFyZ2V0KSB7XG4gICAgdmFyIHBhcmVudDtcblxuICAgIC8vIG9uIHJ1bGVcbiAgICBwYXJlbnQgPSB0YXJnZXQuY2xvc2VzdChTZWxlY3RvcnMucnVsZV9jb250YWluZXIpO1xuICAgIGlmIChwYXJlbnQubGVuZ3RoKSB7XG4gICAgICAgIGVsZW1lbnQubW92ZUFmdGVyKE1vZGVsKHBhcmVudCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gb24gZ3JvdXAgaGVhZGVyXG4gICAgcGFyZW50ID0gdGFyZ2V0LmNsb3Nlc3QoU2VsZWN0b3JzLmdyb3VwX2hlYWRlcik7XG4gICAgaWYgKHBhcmVudC5sZW5ndGgpIHtcbiAgICAgICAgcGFyZW50ID0gdGFyZ2V0LmNsb3Nlc3QoU2VsZWN0b3JzLmdyb3VwX2NvbnRhaW5lcik7XG4gICAgICAgIGVsZW1lbnQubW92ZUF0QmVnaW4oTW9kZWwocGFyZW50KSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBvbiBncm91cFxuICAgIHBhcmVudCA9IHRhcmdldC5jbG9zZXN0KFNlbGVjdG9ycy5ncm91cF9jb250YWluZXIpO1xuICAgIGlmIChwYXJlbnQubGVuZ3RoKSB7XG4gICAgICAgIGVsZW1lbnQubW92ZUF0RW5kKE1vZGVsKHBhcmVudCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5cbi8qIVxuICogalF1ZXJ5IFF1ZXJ5QnVpbGRlciBTUUwgU3VwcG9ydFxuICogQWxsb3dzIHRvIGV4cG9ydCBydWxlcyBhcyBhIFNRTCBXSEVSRSBzdGF0ZW1lbnQgYXMgd2VsbCBhcyBwb3B1bGF0aW5nIHRoZSBidWlsZGVyIGZyb20gYW4gU1FMIHF1ZXJ5LlxuICovXG5cbi8vIERFRkFVTFQgQ09ORklHXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5RdWVyeUJ1aWxkZXIuZGVmYXVsdHMoe1xuICAgIC8qIG9wZXJhdG9ycyBmb3IgaW50ZXJuYWwgLT4gU1FMIGNvbnZlcnNpb24gKi9cbiAgICBzcWxPcGVyYXRvcnM6IHtcbiAgICAgICAgZXF1YWw6ICAgICAgICAgICAgeyBvcDogJz0gPycgfSxcbiAgICAgICAgbm90X2VxdWFsOiAgICAgICAgeyBvcDogJyE9ID8nIH0sXG4gICAgICAgIGluOiAgICAgICAgICAgICAgIHsgb3A6ICdJTig/KScsICAgICAgICAgIHNlcDogJywgJyB9LFxuICAgICAgICBub3RfaW46ICAgICAgICAgICB7IG9wOiAnTk9UIElOKD8pJywgICAgICBzZXA6ICcsICcgfSxcbiAgICAgICAgbGVzczogICAgICAgICAgICAgeyBvcDogJzwgPycgfSxcbiAgICAgICAgbGVzc19vcl9lcXVhbDogICAgeyBvcDogJzw9ID8nIH0sXG4gICAgICAgIGdyZWF0ZXI6ICAgICAgICAgIHsgb3A6ICc+ID8nIH0sXG4gICAgICAgIGdyZWF0ZXJfb3JfZXF1YWw6IHsgb3A6ICc+PSA/JyB9LFxuICAgICAgICBiZXR3ZWVuOiAgICAgICAgICB7IG9wOiAnQkVUV0VFTiA/JywgICAgICBzZXA6ICcgQU5EICcgfSxcbiAgICAgICAgbm90X2JldHdlZW46ICAgICAgeyBvcDogJ05PVCBCRVRXRUVOID8nLCAgc2VwOiAnIEFORCAnIH0sXG4gICAgICAgIGJlZ2luc193aXRoOiAgICAgIHsgb3A6ICdMSUtFKD8pJywgICAgICAgIG1vZDogJ3swfSUnIH0sXG4gICAgICAgIG5vdF9iZWdpbnNfd2l0aDogIHsgb3A6ICdOT1QgTElLRSg/KScsICAgIG1vZDogJ3swfSUnIH0sXG4gICAgICAgIGNvbnRhaW5zOiAgICAgICAgIHsgb3A6ICdMSUtFKD8pJywgICAgICAgIG1vZDogJyV7MH0lJyB9LFxuICAgICAgICBub3RfY29udGFpbnM6ICAgICB7IG9wOiAnTk9UIExJS0UoPyknLCAgICBtb2Q6ICclezB9JScgfSxcbiAgICAgICAgZW5kc193aXRoOiAgICAgICAgeyBvcDogJ0xJS0UoPyknLCAgICAgICAgbW9kOiAnJXswfScgfSxcbiAgICAgICAgbm90X2VuZHNfd2l0aDogICAgeyBvcDogJ05PVCBMSUtFKD8pJywgICAgbW9kOiAnJXswfScgfSxcbiAgICAgICAgaXNfZW1wdHk6ICAgICAgICAgeyBvcDogJz0gXFwnXFwnJyB9LFxuICAgICAgICBpc19ub3RfZW1wdHk6ICAgICB7IG9wOiAnIT0gXFwnXFwnJyB9LFxuICAgICAgICBpc19udWxsOiAgICAgICAgICB7IG9wOiAnSVMgTlVMTCcgfSxcbiAgICAgICAgaXNfbm90X251bGw6ICAgICAgeyBvcDogJ0lTIE5PVCBOVUxMJyB9XG4gICAgfSxcblxuICAgIC8qIG9wZXJhdG9ycyBmb3IgU1FMIC0+IGludGVybmFsIGNvbnZlcnNpb24gKi9cbiAgICBzcWxSdWxlT3BlcmF0b3I6IHtcbiAgICAgICAgJz0nOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZhbDogdixcbiAgICAgICAgICAgICAgICBvcDogdiA9PT0gJycgPyAnaXNfZW1wdHknIDogJ2VxdWFsJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJyE9JzogZnVuY3Rpb24odikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWw6IHYsXG4gICAgICAgICAgICAgICAgb3A6IHYgPT09ICcnID8gJ2lzX25vdF9lbXB0eScgOiAnbm90X2VxdWFsJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJ0xJS0UnOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICBpZiAodi5zbGljZSgwLCAxKSA9PSAnJScgJiYgdi5zbGljZSgtMSkgPT0gJyUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsOiB2LnNsaWNlKDEsIC0xKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6ICdjb250YWlucydcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodi5zbGljZSgwLCAxKSA9PSAnJScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2YWw6IHYuc2xpY2UoMSksXG4gICAgICAgICAgICAgICAgICAgIG9wOiAnZW5kc193aXRoJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2LnNsaWNlKC0xKSA9PSAnJScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2YWw6IHYuc2xpY2UoMCwgLTEpLFxuICAgICAgICAgICAgICAgICAgICBvcDogJ2JlZ2luc193aXRoJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignU1FMUGFyc2UnLCAnSW52YWxpZCB2YWx1ZSBmb3IgTElLRSBvcGVyYXRvciBcInswfVwiJywgdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdJTic6ICAgICAgICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7IHZhbDogdiwgb3A6ICdpbicgfTsgfSxcbiAgICAgICAgJ05PVCBJTic6ICAgICAgIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgdmFsOiB2LCBvcDogJ25vdF9pbicgfTsgfSxcbiAgICAgICAgJzwnOiAgICAgICAgICAgIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgdmFsOiB2LCBvcDogJ2xlc3MnIH07IH0sXG4gICAgICAgICc8PSc6ICAgICAgICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7IHZhbDogdiwgb3A6ICdsZXNzX29yX2VxdWFsJyB9OyB9LFxuICAgICAgICAnPic6ICAgICAgICAgICAgZnVuY3Rpb24odikgeyByZXR1cm4geyB2YWw6IHYsIG9wOiAnZ3JlYXRlcicgfTsgfSxcbiAgICAgICAgJz49JzogICAgICAgICAgIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHsgdmFsOiB2LCBvcDogJ2dyZWF0ZXJfb3JfZXF1YWwnIH07IH0sXG4gICAgICAgICdCRVRXRUVOJzogICAgICBmdW5jdGlvbih2KSB7IHJldHVybiB7IHZhbDogdiwgb3A6ICdiZXR3ZWVuJyB9OyB9LFxuICAgICAgICAnTk9UIEJFVFdFRU4nOiAgZnVuY3Rpb24odikgeyByZXR1cm4geyB2YWw6IHYsIG9wOiAnbm90X2JldHdlZW4nIH07IH0sXG4gICAgICAgICdJUyc6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgIGlmICh2ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ1NRTFBhcnNlJywgJ0ludmFsaWQgdmFsdWUgZm9yIElTIG9wZXJhdG9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB2YWw6IG51bGwsIG9wOiAnaXNfbnVsbCcgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJ0lTIE5PVCc6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgIGlmICh2ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ1NRTFBhcnNlJywgJ0ludmFsaWQgdmFsdWUgZm9yIElTIG9wZXJhdG9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB2YWw6IG51bGwsIG9wOiAnaXNfbm90X251bGwnIH07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyogc3RhdGVtZW50cyBmb3IgaW50ZXJuYWwgLT4gU1FMIGNvbnZlcnNpb24gKi9cbiAgICBzcWxTdGF0ZW1lbnRzOiB7XG4gICAgICAgICdxdWVzdGlvbl9tYXJrJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gW107XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFkZDogZnVuY3Rpb24ocnVsZSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJz8nO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuXG4gICAgICAgICdudW1iZXJlZCc6IGZ1bmN0aW9uKGNoYXIpIHtcbiAgICAgICAgICAgIGlmICghY2hhciB8fCBjaGFyLmxlbmd0aCA+IDEpIGNoYXIgPSAnJCc7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uKHJ1bGUsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYXIgKyBpbmRleDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcblxuICAgICAgICAnbmFtZWQnOiBmdW5jdGlvbihjaGFyKSB7XG4gICAgICAgICAgICBpZiAoIWNoYXIgfHwgY2hhci5sZW5ndGggPiAxKSBjaGFyID0gJzonO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB7fTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbihydWxlLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWluZGV4ZXNbcnVsZS5maWVsZF0pIGluZGV4ZXNbcnVsZS5maWVsZF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gcnVsZS5maWVsZCArICdfJyArIChpbmRleGVzW3J1bGUuZmllbGRdKyspO1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhciArIGtleTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKiBzdGF0ZW1lbnRzIGZvciBTUUwgLT4gaW50ZXJuYWwgY29udmVyc2lvbiAqL1xuICAgIHNxbFJ1bGVTdGF0ZW1lbnQ6IHtcbiAgICAgICAgJ3F1ZXN0aW9uX21hcmsnOiBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2ID09ICc/JyA/IHZhbHVlc1tpbmRleCsrXSA6IHY7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlc2M6IGZ1bmN0aW9uKHNxbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3FsLnJlcGxhY2UoL1xcPy9nLCAnXFwnP1xcJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ251bWJlcmVkJzogZnVuY3Rpb24odmFsdWVzLCBjaGFyKSB7XG4gICAgICAgICAgICBpZiAoIWNoYXIgfHwgY2hhci5sZW5ndGggPiAxKSBjaGFyID0gJyQnO1xuICAgICAgICAgICAgdmFyIHJlZ2V4MSA9IG5ldyBSZWdFeHAoJ15cXFxcJyArIGNoYXIgKyAnWzAtOV0rJCcpO1xuICAgICAgICAgICAgdmFyIHJlZ2V4MiA9IG5ldyBSZWdFeHAoJ1xcXFwnICsgY2hhciArICcoWzAtOV0rKScsICdnJyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdleDEudGVzdCh2KSA/IHZhbHVlc1t2LnNsaWNlKDEpIC0gMV0gOiB2O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXNjOiBmdW5jdGlvbihzcWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNxbC5yZXBsYWNlKHJlZ2V4MiwgJ1xcJycgKyAoY2hhciA9PSAnJCcgPyAnJCQnIDogY2hhcikgKyAnJDFcXCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuXG4gICAgICAgICduYW1lZCc6IGZ1bmN0aW9uKHZhbHVlcywgY2hhcikge1xuICAgICAgICAgICAgaWYgKCFjaGFyIHx8IGNoYXIubGVuZ3RoID4gMSkgY2hhciA9ICc6JztcbiAgICAgICAgICAgIHZhciByZWdleDEgPSBuZXcgUmVnRXhwKCdeXFxcXCcgKyBjaGFyKTtcbiAgICAgICAgICAgIHZhciByZWdleDIgPSBuZXcgUmVnRXhwKCdcXFxcJyArIGNoYXIgKyAnKCcgKyBPYmplY3Qua2V5cyh2YWx1ZXMpLmpvaW4oJ3wnKSArICcpJywgJ2cnKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2V4MS50ZXN0KHYpID8gdmFsdWVzW3Yuc2xpY2UoMSldIDogdjtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVzYzogZnVuY3Rpb24oc3FsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzcWwucmVwbGFjZShyZWdleDIsICdcXCcnICsgKGNoYXIgPT0gJyQnID8gJyQkJyA6IGNoYXIpICsgJyQxXFwnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cbi8vIFBVQkxJQyBNRVRIT0RTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5RdWVyeUJ1aWxkZXIuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBHZXQgcnVsZXMgYXMgU1FMIHF1ZXJ5XG4gICAgICogQHRocm93cyBVbmRlZmluZWRTUUxDb25kaXRpb25FcnJvciwgVW5kZWZpbmVkU1FMT3BlcmF0b3JFcnJvclxuICAgICAqIEBwYXJhbSBzdG10IHtib29sZWFufHN0cmluZ30gdXNlIHByZXBhcmVkIHN0YXRlbWVudHMgLSBmYWxzZSwgJ3F1ZXN0aW9uX21hcmsnLCAnbnVtYmVyZWQnLCAnbnVtYmVyZWQoQCknLCAnbmFtZWQnLCAnbmFtZWQoQCknXG4gICAgICogQHBhcmFtIG5sIHtib29sfSBvdXRwdXQgd2l0aCBuZXcgbGluZXNcbiAgICAgKiBAcGFyYW0gZGF0YSB7b2JqZWN0fSAob3B0aW9uYWwpIHJ1bGVzXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxuICAgICAqL1xuICAgIGdldFNRTDogZnVuY3Rpb24oc3RtdCwgbmwsIGRhdGEpIHtcbiAgICAgICAgZGF0YSA9IChkYXRhID09PSB1bmRlZmluZWQpID8gdGhpcy5nZXRSdWxlcygpIDogZGF0YTtcbiAgICAgICAgbmwgPSAobmwgPT09IHRydWUpID8gJ1xcbicgOiAnICc7XG5cbiAgICAgICAgaWYgKHN0bXQgPT09IHRydWUpIHN0bXQgPSAncXVlc3Rpb25fbWFyayc7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RtdCA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IGdldFN0bXRDb25maWcoc3RtdCk7XG4gICAgICAgICAgICBzdG10ID0gdGhpcy5zZXR0aW5ncy5zcWxTdGF0ZW1lbnRzW2NvbmZpZ1sxXV0oY29uZmlnWzJdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB2YXIgc3FsID0gKGZ1bmN0aW9uIHBhcnNlKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghZGF0YS5jb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICBkYXRhLmNvbmRpdGlvbiA9IHNlbGYuc2V0dGluZ3MuZGVmYXVsdF9jb25kaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoWydBTkQnLCAnT1InXS5pbmRleE9mKGRhdGEuY29uZGl0aW9uLnRvVXBwZXJDYXNlKCkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIFV0aWxzLmVycm9yKCdVbmRlZmluZWRTUUxDb25kaXRpb24nLCAnVW5hYmxlIHRvIGJ1aWxkIFNRTCBxdWVyeSB3aXRoIGNvbmRpdGlvbiBcInswfVwiJywgZGF0YS5jb25kaXRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWRhdGEucnVsZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgICAgICAgICBkYXRhLnJ1bGVzLmZvckVhY2goZnVuY3Rpb24ocnVsZSkge1xuICAgICAgICAgICAgICAgIGlmIChydWxlLnJ1bGVzICYmIHJ1bGUucnVsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKCcoJyArIG5sICsgcGFyc2UocnVsZSkgKyBubCArICcpJyArIG5sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcWwgPSBzZWxmLnNldHRpbmdzLnNxbE9wZXJhdG9yc1tydWxlLm9wZXJhdG9yXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZSA9IHNlbGYuZ2V0T3BlcmF0b3JCeVR5cGUocnVsZS5vcGVyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ1VuZGVmaW5lZFNRTE9wZXJhdG9yJywgJ1Vua25vd24gU1FMIG9wZXJhdGlvbiBmb3Igb3BlcmF0b3IgXCJ7MH1cIicsIHJ1bGUub3BlcmF0b3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZS5uYl9pbnB1dHMgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJ1bGUudmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlLnZhbHVlID0gW3J1bGUudmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLnZhbHVlLmZvckVhY2goZnVuY3Rpb24odiwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSs9IHNxbC5zZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUudHlwZSA9PSAnaW50ZWdlcicgfHwgcnVsZS50eXBlID09ICdkb3VibGUnIHx8IHJ1bGUudHlwZSA9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IFV0aWxzLmNoYW5nZVR5cGUodiwgcnVsZS50eXBlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXN0bXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IFV0aWxzLmVzY2FwZVN0cmluZyh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3FsLm1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gVXRpbHMuZm10KHNxbC5tb2QsIHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG10KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlKz0gc3RtdC5hZGQocnVsZSwgdik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAnXFwnJyArIHYgKyAnXFwnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlKz0gdjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzLnB1c2gocnVsZS5maWVsZCArICcgJyArIHNxbC5vcC5yZXBsYWNlKC9cXD8vLCB2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcGFydHMuam9pbignICcgKyBkYXRhLmNvbmRpdGlvbiArIG5sKTtcbiAgICAgICAgfShkYXRhKSk7XG5cbiAgICAgICAgaWYgKHN0bXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3FsOiBzcWwsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBzdG10LnJ1bigpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzcWw6IHNxbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IFNRTCB0byBydWxlc1xuICAgICAqIEB0aHJvd3MgQ29uZmlnRXJyb3IsIFNRTFBhcnNlRXJyb3IsIFVuZGVmaW5lZFNRTE9wZXJhdG9yRXJyb3JcbiAgICAgKiBAcGFyYW0gZGF0YSB7b2JqZWN0fSBxdWVyeSBvYmplY3RcbiAgICAgKiBAcGFyYW0gc3RtdCB7Ym9vbGVhbnxzdHJpbmd9IHVzZSBwcmVwYXJlZCBzdGF0ZW1lbnRzIC0gZmFsc2UsICdxdWVzdGlvbl9tYXJrJywgJ251bWJlcmVkJywgJ251bWJlcmVkKEApJywgJ25hbWVkJywgJ25hbWVkKEApJ1xuICAgICAqIEByZXR1cm4ge29iamVjdH1cbiAgICAgKi9cbiAgICBnZXRSdWxlc0Zyb21TUUw6IGZ1bmN0aW9uKGRhdGEsIHN0bXQpIHtcbiAgICAgICAgaWYgKCEoJ1NRTFBhcnNlcicgaW4gd2luZG93KSkge1xuICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ01pc3NpbmdMaWJyYXJ5JywgJ1NRTFBhcnNlciBpcyByZXF1aXJlZCB0byBwYXJzZSBTUUwgcXVlcmllcy4gR2V0IGl0IGhlcmUgaHR0cHM6Ly9naXRodWIuY29tL21pc3RpYzEwMC9zcWwtcGFyc2VyJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBkYXRhID0geyBzcWw6IGRhdGEgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdG10ID09PSB0cnVlKSBzdG10ID0gJ3F1ZXN0aW9uX21hcmsnO1xuICAgICAgICBpZiAodHlwZW9mIHN0bXQgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhciBjb25maWcgPSBnZXRTdG10Q29uZmlnKHN0bXQpO1xuICAgICAgICAgICAgc3RtdCA9IHRoaXMuc2V0dGluZ3Muc3FsUnVsZVN0YXRlbWVudFtjb25maWdbMV1dKGRhdGEucGFyYW1zLCBjb25maWdbMl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0bXQpIHtcbiAgICAgICAgICAgIGRhdGEuc3FsID0gc3RtdC5lc2MoZGF0YS5zcWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEuc3FsLnRvVXBwZXJDYXNlKCkuaW5kZXhPZignU0VMRUNUJykgIT09IDApIHtcbiAgICAgICAgICAgIGRhdGEuc3FsID0gJ1NFTEVDVCAqIEZST00gdGFibGUgV0hFUkUgJyArIGRhdGEuc3FsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcnNlZCA9IFNRTFBhcnNlci5wYXJzZShkYXRhLnNxbCk7XG5cbiAgICAgICAgaWYgKCFwYXJzZWQud2hlcmUpIHtcbiAgICAgICAgICAgIFV0aWxzLmVycm9yKCdTUUxQYXJzZScsICdObyBXSEVSRSBjbGF1c2UgZm91bmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvdXQgPSB7XG4gICAgICAgICAgICBjb25kaXRpb246IHRoaXMuc2V0dGluZ3MuZGVmYXVsdF9jb25kaXRpb24sXG4gICAgICAgICAgICBydWxlczogW11cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGN1cnIgPSBvdXQ7XG5cbiAgICAgICAgKGZ1bmN0aW9uIGZsYXR0ZW4oZGF0YSwgaSkge1xuICAgICAgICAgICAgLy8gaXQncyBhIG5vZGVcbiAgICAgICAgICAgIGlmIChbJ0FORCcsICdPUiddLmluZGV4T2YoZGF0YS5vcGVyYXRpb24udG9VcHBlckNhc2UoKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgc3ViLWdyb3VwIGlmIHRoZSBjb25kaXRpb24gaXMgbm90IHRoZSBzYW1lIGFuZCBpdCdzIG5vdCB0aGUgZmlyc3QgbGV2ZWxcbiAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgY3Vyci5jb25kaXRpb24gIT0gZGF0YS5vcGVyYXRpb24udG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyLnJ1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uOiBzZWxmLnNldHRpbmdzLmRlZmF1bHRfY29uZGl0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXM6IFtdXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyLnJ1bGVzW2N1cnIucnVsZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3Vyci5jb25kaXRpb24gPSBkYXRhLm9wZXJhdGlvbi50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGkrKztcblxuICAgICAgICAgICAgICAgIC8vIHNvbWUgbWFnaWMgIVxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gY3VycjtcbiAgICAgICAgICAgICAgICBmbGF0dGVuKGRhdGEubGVmdCwgaSk7XG5cbiAgICAgICAgICAgICAgICBjdXJyID0gbmV4dDtcbiAgICAgICAgICAgICAgICBmbGF0dGVuKGRhdGEucmlnaHQsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaXQncyBhIGxlYWZcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlZnQudmFsdWUgPT09IHVuZGVmaW5lZCB8fCBkYXRhLnJpZ2h0LnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuZXJyb3IoJ1NRTFBhcnNlJywgJ01pc3NpbmcgZmllbGQgYW5kL29yIHZhbHVlJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCQuaXNQbGFpbk9iamVjdChkYXRhLnJpZ2h0LnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBVdGlscy5lcnJvcignU1FMUGFyc2UnLCAnVmFsdWUgZm9ybWF0IG5vdCBzdXBwb3J0ZWQgZm9yIHswfS4nLCBkYXRhLmxlZnQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGNvbnZlcnQgYXJyYXlcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKCQuaXNBcnJheShkYXRhLnJpZ2h0LnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGRhdGEucmlnaHQudmFsdWUubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZGF0YS5yaWdodC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBnZXQgYWN0dWFsIHZhbHVlc1xuICAgICAgICAgICAgICAgIGlmIChzdG10KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLm1hcChzdG10LnBhcnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc3RtdC5wYXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IG9wZXJhdG9yXG4gICAgICAgICAgICAgICAgdmFyIG9wZXJhdG9yID0gZGF0YS5vcGVyYXRpb24udG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3IgPT0gJzw+Jykgb3BlcmF0b3IgPSAnIT0nO1xuXG4gICAgICAgICAgICAgICAgdmFyIHNxbHJsO1xuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PSAnTk9UIExJS0UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNxbHJsID0gc2VsZi5zZXR0aW5ncy5zcWxSdWxlT3BlcmF0b3JbJ0xJS0UnXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNxbHJsID0gc2VsZi5zZXR0aW5ncy5zcWxSdWxlT3BlcmF0b3Jbb3BlcmF0b3JdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzcWxybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLmVycm9yKCdVbmRlZmluZWRTUUxPcGVyYXRvcicsICdJbnZhbGlkIFNRTCBvcGVyYXRpb24gXCJ7MH1cIi4nLCBkYXRhLm9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG9wVmFsID0gc3FscmwuY2FsbCh0aGlzLCB2YWx1ZSwgZGF0YS5vcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PSAnTk9UIExJS0UnKSBvcFZhbC5vcCA9ICdub3RfJyArIG9wVmFsLm9wO1xuXG4gICAgICAgICAgICAgICAgdmFyIGxlZnRfdmFsdWUgPSBkYXRhLmxlZnQudmFsdWVzLmpvaW4oJy4nKTtcblxuICAgICAgICAgICAgICAgIGN1cnIucnVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBzZWxmLmNoYW5nZSgnZ2V0U1FMRmllbGRJRCcsIGxlZnRfdmFsdWUsIHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGxlZnRfdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBvcFZhbC5vcCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9wVmFsLnZhbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHBhcnNlZC53aGVyZS5jb25kaXRpb25zLCAwKSk7XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHJ1bGVzIGZyb20gU1FMXG4gICAgICogQHBhcmFtIGRhdGEge29iamVjdH1cbiAgICAgKi9cbiAgICBzZXRSdWxlc0Zyb21TUUw6IGZ1bmN0aW9uKGRhdGEsIHN0bXQpIHtcbiAgICAgICAgdGhpcy5zZXRSdWxlcyh0aGlzLmdldFJ1bGVzRnJvbVNRTChkYXRhLCBzdG10KSk7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIGdldFN0bXRDb25maWcoc3RtdCkge1xuICAgIHZhciBjb25maWcgPSBzdG10Lm1hdGNoKC8ocXVlc3Rpb25fbWFya3xudW1iZXJlZHxuYW1lZCkoPzpcXCgoLilcXCkpPy8pO1xuICAgIGlmICghY29uZmlnKSBjb25maWcgPSBbbnVsbCwgJ3F1ZXN0aW9uX21hcmsnLCB1bmRlZmluZWRdO1xuICAgIHJldHVybiBjb25maWc7XG59XG5cblxuLyohXG4gKiBqUXVlcnkgUXVlcnlCdWlsZGVyIFVuaXF1ZSBGaWx0ZXJcbiAqIEFsbG93cyB0byBkZWZpbmUgc29tZSBmaWx0ZXJzIGFzIFwidW5pcXVlXCI6IGllIHdoaWNoIGNhbiBiZSB1c2VkIGZvciBvbmx5IG9uZSBydWxlLCBnbG9iYWxseSBvciBpbiB0aGUgc2FtZSBncm91cC5cbiAqL1xuXG5RdWVyeUJ1aWxkZXIuZGVmaW5lKCd1bmlxdWUtZmlsdGVyJywgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdGF0dXMudXNlZF9maWx0ZXJzID0ge307XG5cbiAgICB0aGlzLm9uKCdhZnRlclVwZGF0ZVJ1bGVGaWx0ZXInLCB0aGlzLnVwZGF0ZURpc2FibGVkRmlsdGVycyk7XG4gICAgdGhpcy5vbignYWZ0ZXJEZWxldGVSdWxlJywgdGhpcy51cGRhdGVEaXNhYmxlZEZpbHRlcnMpO1xuICAgIHRoaXMub24oJ2FmdGVyQ3JlYXRlUnVsZUZpbHRlcnMnLCB0aGlzLmFwcGx5RGlzYWJsZWRGaWx0ZXJzKTtcbiAgICB0aGlzLm9uKCdhZnRlclJlc2V0JywgdGhpcy5jbGVhckRpc2FibGVkRmlsdGVycyk7XG4gICAgdGhpcy5vbignYWZ0ZXJDbGVhcicsIHRoaXMuY2xlYXJEaXNhYmxlZEZpbHRlcnMpO1xufSk7XG5cblF1ZXJ5QnVpbGRlci5leHRlbmQoe1xuICAgIHVwZGF0ZURpc2FibGVkRmlsdGVyczogZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgc2VsZiA9IGUgPyBlLmJ1aWxkZXIgOiB0aGlzO1xuXG4gICAgICAgIHNlbGYuc3RhdHVzLnVzZWRfZmlsdGVycyA9IHt9O1xuXG4gICAgICAgIGlmICghc2VsZi5tb2RlbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IHVzZWQgZmlsdGVyc1xuICAgICAgICAoZnVuY3Rpb24gd2Fsayhncm91cCkge1xuICAgICAgICAgICAgZ3JvdXAuZWFjaChmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuZmlsdGVyICYmIHJ1bGUuZmlsdGVyLnVuaXF1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYuc3RhdHVzLnVzZWRfZmlsdGVyc1tydWxlLmZpbHRlci5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RhdHVzLnVzZWRfZmlsdGVyc1tydWxlLmZpbHRlci5pZF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocnVsZS5maWx0ZXIudW5pcXVlID09ICdncm91cCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RhdHVzLnVzZWRfZmlsdGVyc1tydWxlLmZpbHRlci5pZF0ucHVzaChydWxlLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihncm91cCkge1xuICAgICAgICAgICAgICAgIHdhbGsoZ3JvdXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0oc2VsZi5tb2RlbC5yb290KSk7XG5cbiAgICAgICAgc2VsZi5hcHBseURpc2FibGVkRmlsdGVycyhlKTtcbiAgICB9LFxuXG4gICAgY2xlYXJEaXNhYmxlZEZpbHRlcnM6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHNlbGYgPSBlID8gZS5idWlsZGVyIDogdGhpcztcblxuICAgICAgICBzZWxmLnN0YXR1cy51c2VkX2ZpbHRlcnMgPSB7fTtcblxuICAgICAgICBzZWxmLmFwcGx5RGlzYWJsZWRGaWx0ZXJzKGUpO1xuICAgIH0sXG5cbiAgICBhcHBseURpc2FibGVkRmlsdGVyczogZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgc2VsZiA9IGUgPyBlLmJ1aWxkZXIgOiB0aGlzO1xuXG4gICAgICAgIC8vIHJlLWVuYWJsZSBldmVyeXRoaW5nXG4gICAgICAgIHNlbGYuJGVsLmZpbmQoU2VsZWN0b3JzLmZpbHRlcl9jb250YWluZXIgKyAnIG9wdGlvbicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXG4gICAgICAgIC8vIGRpc2FibGUgc29tZVxuICAgICAgICAkLmVhY2goc2VsZi5zdGF0dXMudXNlZF9maWx0ZXJzLCBmdW5jdGlvbihmaWx0ZXJJZCwgZ3JvdXBzKSB7XG4gICAgICAgICAgICBpZiAoZ3JvdXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHNlbGYuJGVsLmZpbmQoU2VsZWN0b3JzLmZpbHRlcl9jb250YWluZXIgKyAnIG9wdGlvblt2YWx1ZT1cIicgKyBmaWx0ZXJJZCArICdcIl06bm90KDpzZWxlY3RlZCknKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZWFjaChmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLiRlbC5maW5kKFNlbGVjdG9ycy5maWx0ZXJfY29udGFpbmVyICsgJyBvcHRpb25bdmFsdWU9XCInICsgZmlsdGVySWQgKyAnXCJdOm5vdCg6c2VsZWN0ZWQpJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHVwZGF0ZSBTZWxlY3RwaWNrZXJcbiAgICAgICAgaWYgKHNlbGYuc2V0dGluZ3MucGx1Z2lucyAmJiBzZWxmLnNldHRpbmdzLnBsdWdpbnNbJ2J0LXNlbGVjdHBpY2tlciddKSB7XG4gICAgICAgICAgICBzZWxmLiRlbC5maW5kKFNlbGVjdG9ycy5ydWxlX2ZpbHRlcikuc2VsZWN0cGlja2VyKCdyZW5kZXInKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cbi8qIVxuICogalF1ZXJ5IFF1ZXJ5QnVpbGRlciAyLjMuM1xuICogTG9jYWxlOiBFbmdsaXNoIChlbilcbiAqIEF1dGhvcjogRGFtaWVuIFwiTWlzdGljXCIgU29yZWwsIGh0dHA6Ly93d3cuc3RyYW5nZXBsYW5ldC5mclxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUKVxuICovXG5cblF1ZXJ5QnVpbGRlci5yZWdpb25hbFsnZW4nXSA9IHtcbiAgXCJfX2xvY2FsZVwiOiBcIkVuZ2xpc2ggKGVuKVwiLFxuICBcIl9fYXV0aG9yXCI6IFwiRGFtaWVuIFxcXCJNaXN0aWNcXFwiIFNvcmVsLCBodHRwOi8vd3d3LnN0cmFuZ2VwbGFuZXQuZnJcIixcbiAgXCJhZGRfcnVsZVwiOiBcIkFkZCBydWxlXCIsXG4gIFwiYWRkX2dyb3VwXCI6IFwiQWRkIGdyb3VwXCIsXG4gIFwiZGVsZXRlX3J1bGVcIjogXCJEZWxldGVcIixcbiAgXCJkZWxldGVfZ3JvdXBcIjogXCJEZWxldGVcIixcbiAgXCJjb25kaXRpb25zXCI6IHtcbiAgICBcIkFORFwiOiBcIkFORFwiLFxuICAgIFwiT1JcIjogXCJPUlwiXG4gIH0sXG4gIFwib3BlcmF0b3JzXCI6IHtcbiAgICBcImVxdWFsXCI6IFwiZXF1YWxcIixcbiAgICBcIm5vdF9lcXVhbFwiOiBcIm5vdCBlcXVhbFwiLFxuICAgIFwiaW5cIjogXCJpblwiLFxuICAgIFwibm90X2luXCI6IFwibm90IGluXCIsXG4gICAgXCJsZXNzXCI6IFwibGVzc1wiLFxuICAgIFwibGVzc19vcl9lcXVhbFwiOiBcImxlc3Mgb3IgZXF1YWxcIixcbiAgICBcImdyZWF0ZXJcIjogXCJncmVhdGVyXCIsXG4gICAgXCJncmVhdGVyX29yX2VxdWFsXCI6IFwiZ3JlYXRlciBvciBlcXVhbFwiLFxuICAgIFwiYmV0d2VlblwiOiBcImJldHdlZW5cIixcbiAgICBcIm5vdF9iZXR3ZWVuXCI6IFwibm90IGJldHdlZW5cIixcbiAgICBcImJlZ2luc193aXRoXCI6IFwiYmVnaW5zIHdpdGhcIixcbiAgICBcIm5vdF9iZWdpbnNfd2l0aFwiOiBcImRvZXNuJ3QgYmVnaW4gd2l0aFwiLFxuICAgIFwiY29udGFpbnNcIjogXCJjb250YWluc1wiLFxuICAgIFwibm90X2NvbnRhaW5zXCI6IFwiZG9lc24ndCBjb250YWluXCIsXG4gICAgXCJlbmRzX3dpdGhcIjogXCJlbmRzIHdpdGhcIixcbiAgICBcIm5vdF9lbmRzX3dpdGhcIjogXCJkb2Vzbid0IGVuZCB3aXRoXCIsXG4gICAgXCJpc19lbXB0eVwiOiBcImlzIGVtcHR5XCIsXG4gICAgXCJpc19ub3RfZW1wdHlcIjogXCJpcyBub3QgZW1wdHlcIixcbiAgICBcImlzX251bGxcIjogXCJpcyBudWxsXCIsXG4gICAgXCJpc19ub3RfbnVsbFwiOiBcImlzIG5vdCBudWxsXCJcbiAgfSxcbiAgXCJlcnJvcnNcIjoge1xuICAgIFwibm9fZmlsdGVyXCI6IFwiTm8gZmlsdGVyIHNlbGVjdGVkXCIsXG4gICAgXCJlbXB0eV9ncm91cFwiOiBcIlRoZSBncm91cCBpcyBlbXB0eVwiLFxuICAgIFwicmFkaW9fZW1wdHlcIjogXCJObyB2YWx1ZSBzZWxlY3RlZFwiLFxuICAgIFwiY2hlY2tib3hfZW1wdHlcIjogXCJObyB2YWx1ZSBzZWxlY3RlZFwiLFxuICAgIFwic2VsZWN0X2VtcHR5XCI6IFwiTm8gdmFsdWUgc2VsZWN0ZWRcIixcbiAgICBcInN0cmluZ19lbXB0eVwiOiBcIkVtcHR5IHZhbHVlXCIsXG4gICAgXCJzdHJpbmdfZXhjZWVkX21pbl9sZW5ndGhcIjogXCJNdXN0IGNvbnRhaW4gYXQgbGVhc3QgezB9IGNoYXJhY3RlcnNcIixcbiAgICBcInN0cmluZ19leGNlZWRfbWF4X2xlbmd0aFwiOiBcIk11c3Qgbm90IGNvbnRhaW4gbW9yZSB0aGFuIHswfSBjaGFyYWN0ZXJzXCIsXG4gICAgXCJzdHJpbmdfaW52YWxpZF9mb3JtYXRcIjogXCJJbnZhbGlkIGZvcm1hdCAoezB9KVwiLFxuICAgIFwibnVtYmVyX25hblwiOiBcIk5vdCBhIG51bWJlclwiLFxuICAgIFwibnVtYmVyX25vdF9pbnRlZ2VyXCI6IFwiTm90IGFuIGludGVnZXJcIixcbiAgICBcIm51bWJlcl9ub3RfZG91YmxlXCI6IFwiTm90IGEgcmVhbCBudW1iZXJcIixcbiAgICBcIm51bWJlcl9leGNlZWRfbWluXCI6IFwiTXVzdCBiZSBncmVhdGVyIHRoYW4gezB9XCIsXG4gICAgXCJudW1iZXJfZXhjZWVkX21heFwiOiBcIk11c3QgYmUgbG93ZXIgdGhhbiB7MH1cIixcbiAgICBcIm51bWJlcl93cm9uZ19zdGVwXCI6IFwiTXVzdCBiZSBhIG11bHRpcGxlIG9mIHswfVwiLFxuICAgIFwiZGF0ZXRpbWVfZW1wdHlcIjogXCJFbXB0eSB2YWx1ZVwiLFxuICAgIFwiZGF0ZXRpbWVfaW52YWxpZFwiOiBcIkludmFsaWQgZGF0ZSBmb3JtYXQgKHswfSlcIixcbiAgICBcImRhdGV0aW1lX2V4Y2VlZF9taW5cIjogXCJNdXN0IGJlIGFmdGVyIHswfVwiLFxuICAgIFwiZGF0ZXRpbWVfZXhjZWVkX21heFwiOiBcIk11c3QgYmUgYmVmb3JlIHswfVwiLFxuICAgIFwiYm9vbGVhbl9ub3RfdmFsaWRcIjogXCJOb3QgYSBib29sZWFuXCIsXG4gICAgXCJvcGVyYXRvcl9ub3RfbXVsdGlwbGVcIjogXCJPcGVyYXRvciB7MH0gY2Fubm90IGFjY2VwdCBtdWx0aXBsZSB2YWx1ZXNcIlxuICB9LFxuICBcImludmVydFwiOiBcIkludmVydFwiXG59O1xuXG5RdWVyeUJ1aWxkZXIuZGVmYXVsdHMoeyBsYW5nX2NvZGU6ICdlbicgfSk7XG59KSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3ZlbmljZS1qcy9saWIvcXVlcnktYnVpbGRlci5qc1xuLy8gbW9kdWxlIGlkID0gNDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 488:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _Events = __webpack_require__(462);\n\nvar _Events2 = _interopRequireDefault(_Events);\n\nvar _Controller2 = __webpack_require__(454);\n\nvar _Controller3 = _interopRequireDefault(_Controller2);\n\nvar _TrinityTab = __webpack_require__(468);\n\nvar _TrinityTab2 = _interopRequireDefault(_TrinityTab);\n\nvar _Collection = __webpack_require__(489);\n\nvar _Collection2 = _interopRequireDefault(_Collection);\n\nvar _VeniceForm = __webpack_require__(455);\n\nvar _VeniceForm2 = _interopRequireDefault(_VeniceForm);\n\nvar _GlobalLib = __webpack_require__(471);\n\nvar _FormChanger = __webpack_require__(491);\n\nvar _FormChanger2 = _interopRequireDefault(_FormChanger);\n\nvar _VeniceGridBuilder = __webpack_require__(475);\n\nvar _VeniceGridBuilder2 = _interopRequireDefault(_VeniceGridBuilder);\n\nvar _FroalaLib = __webpack_require__(474);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by Jakub on 21.12.15.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar ContetntController = function (_Controller) {\n    _inherits(ContetntController, _Controller);\n\n    function ContetntController() {\n        _classCallCheck(this, ContetntController);\n\n        return _possibleConstructorReturn(this, (ContetntController.__proto__ || Object.getPrototypeOf(ContetntController)).apply(this, arguments));\n    }\n\n    _createClass(ContetntController, [{\n        key: 'indexAction',\n        value: function indexAction($scope) {\n            $scope.productGrid = _VeniceGridBuilder2.default.build(_jquery2.default.id('content-grid'), this.request.query);\n        }\n    }, {\n        key: 'newAction',\n        value: function newAction($scope) {\n            var selectEl = (0, _jquery2.default)('#entity_type_select')[0],\n                $jqFormDiv = (0, _jquery2.default)('#javascript-inserted-form'),\n                url = $jqFormDiv.attr('data-changer'),\n                unlisteners = [];\n            var app = this.getApp();\n            var handleFormChange = function handleFormChange() {\n                _lodash2.default.each(unlisteners, function (fn) {\n                    return fn();\n                });\n\n                var type = selectEl.options[selectEl.selectedIndex].value;\n                _FormChanger2.default.refreshForm($jqFormDiv[0], url.replace('contentType', type), function () {\n\n                    $scope.form = new _VeniceForm2.default((0, _jquery2.default)('form[name=\"' + type + '_content\"]')[0]);\n                    if (type === 'html' || type === 'iframe') {\n                        // let froalaContainer = $(`#${type}_content_html`)[0];\n                        // startFroala(froalaContainer);\n                        var formScope = app.parseScope();\n                        (0, _FroalaLib.startFroala)(formScope.froalaInput);\n                    }\n                    unlisteners.push(ContetntController._handleHandleGeneration());\n                });\n            };\n            // Initial\n            handleFormChange();\n            //render new form after change\n            _Events2.default.listen(selectEl, 'change', handleFormChange);\n        }\n    }, {\n        key: 'tabsAction',\n        value: function tabsAction($scope) {\n            var _this2 = this;\n\n            $scope.trinityTab = new _TrinityTab2.default();\n            var unlisteners = [];\n            //On tabs load\n            var app = this.getApp();\n            $scope.trinityTab.addListener('tab-load', function (e) {\n                var form = (0, _jquery2.default)('form', e.element)[0];\n                if (form) {\n                    $scope.veniceForms = $scope.veniceForms || {};\n                    $scope.veniceForms[e.id] = new _VeniceForm2.default(form);\n                }\n                //Edit tab\n                if (e.id === 'tab2') {\n                    // Collection\n                    $scope.collection = _lodash2.default.map((0, _jquery2.default)('[data-prototype]', e.element), function (node) {\n                        return new _Collection2.default(node, {\n                            addFirst: false,\n                            label: true\n                        });\n                    });\n\n                    var formName = form.getAttribute('name'),\n                        contentType = formName.substr(0, formName.indexOf('_')),\n                        formCont = (0, _jquery2.default)('#' + contentType + '_content_html')[0];\n\n                    if (contentType === 'html' || contentType === 'iframe') {\n                        $scope[e.id] = app.parseScope();\n                        (0, _FroalaLib.startFroala)($scope[e.id].froalaInput);\n                    }\n\n                    $scope.veniceForms['tab2'].success(function () {\n                        $scope.trinityTab.reload('tab1');\n                    });\n\n                    unlisteners.push(ContetntController._handleHandleGeneration());\n                } else if (e.id === 'tab3') {\n                    var container = _jquery2.default.id('product-grid');\n                    if (container) {\n                        $scope.productGrid = _VeniceGridBuilder2.default.build(container, _this2.request.query);\n                    }\n                }\n            });\n\n            $scope.trinityTab.addListener('tab-unload', function (e) {\n                switch (e.id) {\n                    // Edit\n                    case 'tab2':\n                        {\n                            _lodash2.default.each(unlisteners, function (fn) {\n                                return fn();\n                            });\n                        }break;\n                    default:\n                        break;\n                }\n\n                // All\n                if ($scope.veniceForms[e.id]) {\n                    $scope.veniceForms[e.id].detach();\n                }\n            });\n        }\n\n        /**\n         * New standard product action\n         * @param $scope\n         */\n\n    }, {\n        key: 'newContentProductAction',\n        value: function newContentProductAction($scope) {\n            //Attach VeniceForm\n            $scope.form = new _VeniceForm2.default((0, _jquery2.default)('form[name=\"content_product_type_with_hidden_content\"]')[0]);\n        }\n    }, {\n        key: 'contentProductTabsAction',\n        value: function contentProductTabsAction($scope) {\n            $scope.trinityTab = new _TrinityTab2.default();\n            //On tabs load\n            $scope.trinityTab.addListener('tab-load', function (e) {\n                if (e.id === 'tab2') {\n                    $scope.veniceForms = $scope.veniceForms || {};\n                    $scope.veniceForms[e.id] = new _VeniceForm2.default((0, _jquery2.default)('form', e.element)[0]);\n                    $scope.veniceForms['tab2'].success(function () {\n                        $scope.trinityTab.reload('tab1');\n                    });\n                }\n            });\n        }\n    }], [{\n        key: '_handleHandleGeneration',\n        value: function _handleHandleGeneration() {\n            return (0, _GlobalLib.handleHandleGeneration)((0, _jquery2.default)('#javascript-inserted-form').attr('data-slugify'), _jquery2.default.id('group_content_name'), _jquery2.default.id('group_content_handle'));\n        }\n    }]);\n\n    return ContetntController;\n}(_Controller3.default);\n\nexports.default = ContetntController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvQ29udHJvbGxlcnMvQ29udGVudENvbnRyb2xsZXIuanM/ZjI0OCIsIndlYnBhY2s6Ly8vP2Q0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IEpha3ViIG9uIDIxLjEyLjE1LlxuICovXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBFdmVudHMgZnJvbSAndHJpbml0eS91dGlscy9FdmVudHMnO1xuaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAndHJpbml0eS9Db250cm9sbGVyJztcbmltcG9ydCBUcmluaXR5VGFiIGZyb20gJ3RyaW5pdHkvY29tcG9uZW50cy9UcmluaXR5VGFiJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJ3RyaW5pdHkvQ29sbGVjdGlvbic7XG5pbXBvcnQgVmVuaWNlRm9ybSBmcm9tICcuLi9MaWJyYXJpZXMvVmVuaWNlRm9ybSc7XG5pbXBvcnQge2hhbmRsZUhhbmRsZUdlbmVyYXRpb259IGZyb20gJy4uL0xpYnJhcmllcy9HbG9iYWxMaWInO1xuaW1wb3J0IEZvcm1DaGFuZ2VyIGZyb20gJy4uL0xpYnJhcmllcy9Gb3JtQ2hhbmdlcic7XG5pbXBvcnQgR3JpZEJ1aWxkZXIgZnJvbSAnLi4vTGlicmFyaWVzL1ZlbmljZUdyaWRCdWlsZGVyJztcbmltcG9ydCB7c3RhcnRGcm9hbGF9IGZyb20gJ3RyaW5pdHkvdXRpbHMvRnJvYWxhTGliJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udGV0bnRDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XG5cbiAgICBpbmRleEFjdGlvbigkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RHcmlkID0gR3JpZEJ1aWxkZXIuYnVpbGQoJC5pZCgnY29udGVudC1ncmlkJyksIHRoaXMucmVxdWVzdC5xdWVyeSk7XG4gICAgfVxuXG4gICAgbmV3QWN0aW9uKCRzY29wZSkge1xuICAgICAgICBsZXQgc2VsZWN0RWwgPSAkKCcjZW50aXR5X3R5cGVfc2VsZWN0JylbMF0sXG4gICAgICAgICAgICAkanFGb3JtRGl2ID0gJCgnI2phdmFzY3JpcHQtaW5zZXJ0ZWQtZm9ybScpLFxuICAgICAgICAgICAgdXJsID0gJGpxRm9ybURpdi5hdHRyKCdkYXRhLWNoYW5nZXInKSxcbiAgICAgICAgICAgIHVubGlzdGVuZXJzID0gW107XG4gICAgICAgIGxldCBhcHAgPSB0aGlzLmdldEFwcCgpO1xuICAgICAgICBsZXQgaGFuZGxlRm9ybUNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgIF8uZWFjaCh1bmxpc3RlbmVycywgZm4gPT4gZm4oKSk7XG5cbiAgICAgICAgICAgIGxldCB0eXBlID0gc2VsZWN0RWwub3B0aW9uc1tzZWxlY3RFbC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgICAgICAgICAgIEZvcm1DaGFuZ2VyLnJlZnJlc2hGb3JtKCRqcUZvcm1EaXZbMF0sIHVybC5yZXBsYWNlKCdjb250ZW50VHlwZScsIHR5cGUpLCAoKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybSA9IG5ldyBWZW5pY2VGb3JtKCQoYGZvcm1bbmFtZT1cIiR7dHlwZX1fY29udGVudFwiXWApWzBdKTtcbiAgICAgICAgICAgICAgICBpZih0eXBlID09PSAnaHRtbCcgfHwgdHlwZSA9PT0gJ2lmcmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGZyb2FsYUNvbnRhaW5lciA9ICQoYCMke3R5cGV9X2NvbnRlbnRfaHRtbGApWzBdO1xuICAgICAgICAgICAgICAgICAgICAvLyBzdGFydEZyb2FsYShmcm9hbGFDb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybVNjb3BlID0gYXBwLnBhcnNlU2NvcGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRGcm9hbGEoZm9ybVNjb3BlLmZyb2FsYUlucHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdW5saXN0ZW5lcnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgQ29udGV0bnRDb250cm9sbGVyLl9oYW5kbGVIYW5kbGVHZW5lcmF0aW9uKClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIEluaXRpYWxcbiAgICAgICAgaGFuZGxlRm9ybUNoYW5nZSgpO1xuICAgICAgICAvL3JlbmRlciBuZXcgZm9ybSBhZnRlciBjaGFuZ2VcbiAgICAgICAgRXZlbnRzLmxpc3RlbihzZWxlY3RFbCwgJ2NoYW5nZScsIGhhbmRsZUZvcm1DaGFuZ2UpO1xuICAgIH1cblxuICAgIHRhYnNBY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS50cmluaXR5VGFiID0gbmV3IFRyaW5pdHlUYWIoKTtcbiAgICAgICAgbGV0IHVubGlzdGVuZXJzID0gW107XG4gICAgICAgIC8vT24gdGFicyBsb2FkXG4gICAgICAgIGxldCBhcHAgPSB0aGlzLmdldEFwcCgpO1xuICAgICAgICAkc2NvcGUudHJpbml0eVRhYi5hZGRMaXN0ZW5lcigndGFiLWxvYWQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGZvcm0gPSAkKCdmb3JtJywgZS5lbGVtZW50KVswXTtcbiAgICAgICAgICAgIGlmKGZvcm0pe1xuICAgICAgICAgICAgICAgICRzY29wZS52ZW5pY2VGb3JtcyA9ICRzY29wZS52ZW5pY2VGb3JtcyB8fCB7fTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmVuaWNlRm9ybXNbZS5pZF0gPSBuZXcgVmVuaWNlRm9ybShmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vRWRpdCB0YWJcbiAgICAgICAgICAgIGlmIChlLmlkID09PSAndGFiMicpIHtcbiAgICAgICAgICAgICAgICAvLyBDb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvbGxlY3Rpb24gPSBfLm1hcCgkKCdbZGF0YS1wcm90b3R5cGVdJywgZS5lbGVtZW50KSwgKG5vZGUpPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24obm9kZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmlyc3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgZm9ybU5hbWUgPSBmb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IGZvcm1OYW1lLnN1YnN0cigwLCBmb3JtTmFtZS5pbmRleE9mKCdfJykpLFxuICAgICAgICAgICAgICAgICAgICBmb3JtQ29udCA9ICQoYCMke2NvbnRlbnRUeXBlfV9jb250ZW50X2h0bWxgKVswXTtcblxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnRUeXBlID09PSAnaHRtbCcgfHwgY29udGVudFR5cGUgPT09ICdpZnJhbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZVtlLmlkXSA9IGFwcC5wYXJzZVNjb3BlKCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RnJvYWxhKCRzY29wZVtlLmlkXS5mcm9hbGFJbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZlbmljZUZvcm1zWyd0YWIyJ10uc3VjY2VzcygoKT0+e1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudHJpbml0eVRhYi5yZWxvYWQoJ3RhYjEnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHVubGlzdGVuZXJzLnB1c2goQ29udGV0bnRDb250cm9sbGVyLl9oYW5kbGVIYW5kbGVHZW5lcmF0aW9uKCkpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYoZS5pZCA9PT0gJ3RhYjMnKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9ICQuaWQoJ3Byb2R1Y3QtZ3JpZCcpO1xuICAgICAgICAgICAgICAgIGlmKGNvbnRhaW5lcil7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0R3JpZCA9IEdyaWRCdWlsZGVyLmJ1aWxkKGNvbnRhaW5lciwgdGhpcy5yZXF1ZXN0LnF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS50cmluaXR5VGFiLmFkZExpc3RlbmVyKCd0YWItdW5sb2FkJywgKGUpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaChlLmlkKXtcbiAgICAgICAgICAgICAgICAvLyBFZGl0XG4gICAgICAgICAgICAgICAgY2FzZSAndGFiMic6IHtcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHVubGlzdGVuZXJzLCBmbiA9PiBmbigpKTtcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQgOiBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWxsXG4gICAgICAgICAgICBpZigkc2NvcGUudmVuaWNlRm9ybXNbZS5pZF0pe1xuICAgICAgICAgICAgICAgICRzY29wZS52ZW5pY2VGb3Jtc1tlLmlkXS5kZXRhY2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTmV3IHN0YW5kYXJkIHByb2R1Y3QgYWN0aW9uXG4gICAgICogQHBhcmFtICRzY29wZVxuICAgICAqL1xuICAgIG5ld0NvbnRlbnRQcm9kdWN0QWN0aW9uKCRzY29wZSkge1xuICAgICAgICAvL0F0dGFjaCBWZW5pY2VGb3JtXG4gICAgICAgICRzY29wZS5mb3JtID0gbmV3IFZlbmljZUZvcm0oJCgnZm9ybVtuYW1lPVwiY29udGVudF9wcm9kdWN0X3R5cGVfd2l0aF9oaWRkZW5fY29udGVudFwiXScpWzBdKTtcbiAgICB9XG5cbiAgICBjb250ZW50UHJvZHVjdFRhYnNBY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS50cmluaXR5VGFiID0gbmV3IFRyaW5pdHlUYWIoKTtcbiAgICAgICAgLy9PbiB0YWJzIGxvYWRcbiAgICAgICAgJHNjb3BlLnRyaW5pdHlUYWIuYWRkTGlzdGVuZXIoJ3RhYi1sb2FkJywgIGUgPT4ge1xuICAgICAgICAgICAgaWYoZS5pZCA9PT0gJ3RhYjInKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZlbmljZUZvcm1zID0gJHNjb3BlLnZlbmljZUZvcm1zIHx8IHt9O1xuICAgICAgICAgICAgICAgICRzY29wZS52ZW5pY2VGb3Jtc1tlLmlkXSA9IG5ldyBWZW5pY2VGb3JtKCQoJ2Zvcm0nLCBlLmVsZW1lbnQpWzBdKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmVuaWNlRm9ybXNbJ3RhYjInXS5zdWNjZXNzKCgpPT4ge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudHJpbml0eVRhYi5yZWxvYWQoJ3RhYjEnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIF9oYW5kbGVIYW5kbGVHZW5lcmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlSGFuZGxlR2VuZXJhdGlvbihcbiAgICAgICAgICAgICQoJyNqYXZhc2NyaXB0LWluc2VydGVkLWZvcm0nKS5hdHRyKCdkYXRhLXNsdWdpZnknKSxcbiAgICAgICAgICAgICQuaWQoJ2dyb3VwX2NvbnRlbnRfbmFtZScpLFxuICAgICAgICAgICAgJC5pZCgnZ3JvdXBfY29udGVudF9oYW5kbGUnKVxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9Db250cm9sbGVycy9Db250ZW50Q29udHJvbGxlci5qcyIsInVuZGVmaW5lZFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFkQTs7Ozs7QUFlQTs7Ozs7Ozs7Ozs7QUFFQTtBQ0NBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUtBOzs7Ozs7QUE3SEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 489:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by fisa on 8/20/15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _Dom = __webpack_require__(465);\n\nvar _Dom2 = _interopRequireDefault(_Dom);\n\nvar _Events = __webpack_require__(462);\n\nvar _Events2 = _interopRequireDefault(_Events);\n\nvar _Store = __webpack_require__(490);\n\nvar _Store2 = _interopRequireDefault(_Store);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Default settings of Collection Object\n * @type {{addButton: string, deleteButton: string, onAdd: null, onDelete: null, name: string}}\n */\nvar defaultSettings = {\n    addButton: '       <div class=\"collection-add display-inline-block\">\\n                <div class=\"span-medium-8 span-large-6 span-xlarge-10\"></div>\\n                <div class=\"display-inline-block\">\\n                    <a href=\"#\" id=\"addButton\" class=\"add-collection-item\">\\n                        <i class=\"tiecons tiecons-plus-radius-large\"></i>\\n                    </a>\\n                </div>\\n            </div>',\n    deleteButton: '       <a title=\"Remove item\" href=\"#\" id=\"deleteButton\" class=\"delete-collection-item\">\\n                <span class=\"trinity trinity-trash circle\"></span>\\n            </a>',\n    onAdd: null,\n    onDelete: null,\n    label: false,\n    addFirst: true,\n    name: '[Element Name]'\n};\n\n/**\n * Collection class, handles one layer of Collection form\n * @param element {HTMLElement}\n * @param [globalOptions] {Object}\n * @param [prototypeData] {PrototypeData}\n * @param [layer] {number}\n * @constructor\n */\n\nvar Collection = function () {\n    function Collection(element) {\n        var globalOptions = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n        var prototypeData = arguments[2];\n        var layer = arguments[3];\n\n        _classCallCheck(this, Collection);\n\n        this.collectionHolder = element;\n        this.prototype = null;\n        this.protoChildren = [];\n        this.children = [];\n        this.globalOptions = globalOptions;\n        this.layer = layer || 0;\n        // Listeners\n        this.unlistenAddButton = null;\n\n        if (!prototypeData) {\n            prototypeData = __parsePrototypeData(element);\n            _Store2.default.setValue(element, 'collection', this);\n        }\n        this.settings = _lodash2.default.defaultsDeep(globalOptions, prototypeData.options, defaultSettings);\n        //this.settings = _.extend(_.clone(defaultSettings), (globalOptions ? _.extend(prototypeData.options, globalOptions) : prototypeData.options));\n        this.settings.addButton = _Dom2.default.htmlToDocumentFragment(this.settings.addButton.trim());\n        this.settings.deleteButton = _Dom2.default.htmlToDocumentFragment(this.settings.deleteButton.trim());\n\n        /** Make it live **/\n        __initialize.call(this, prototypeData);\n    }\n\n    /**\n     * Adds new child to collection\n     */\n\n\n    _createClass(Collection, [{\n        key: 'add',\n        value: function add() {\n            var settings = this.settings,\n                addButton = settings.addButton,\n                prototype = this.prototype,\n                prototypeChildren = this.protoChildren,\n\n            // children count?\n            childrenCount = _lodash2.default.filter(this.collectionHolder.children, function (node) {\n                return _Dom2.default.classlist.contains(node, 'collection-child');\n            }),\n\n            // Placeholders\n            newChildStr = __fillPlaceholders(settings['prototype_name'], settings.name, childrenCount.length, prototype);\n\n            var newChildNode = _Dom2.default.htmlToDocumentFragment(newChildStr.trim()),\n                child = new CollectionChild(newChildNode, childrenCount.length, this, prototypeChildren);\n\n            this.children.push(child);\n            __addRemoveBtn.call(this, child);\n\n            //Insert new Child\n            addButton.parentNode.insertBefore(newChildNode, addButton);\n\n            if (_lodash2.default.isFunction(settings.onAdd)) {\n                settings.onAdd(newChildNode);\n            }\n        }\n    }, {\n        key: 'removeAll',\n        value: function removeAll() {\n            _lodash2.default.each(this.children, function (child) {\n                child.detach();\n                child.remove();\n            });\n        }\n    }, {\n        key: 'detach',\n        value: function detach() {\n            _lodash2.default.each(this.children, function (child) {\n                return child.detach();\n            });\n            this.unlistenAddButton();\n        }\n    }]);\n\n    return Collection;\n}();\n\n/**\n * Initialize Collection object\n * @param data {PrototypeData}\n * @private\n */\n\n\nexports.default = Collection;\nfunction __initialize(data) {\n    var _this = this;\n\n    // init\n    var prototypeDom = _Dom2.default.htmlToDocumentFragment(data.prototype),\n        children = prototypeDom.querySelectorAll('[data-prototype]'),\n        protoChildren = _lodash2.default.map(children, function (node) {\n        return __parsePrototypeData(node);\n    });\n\n    this.prototype = __getHtmlString(prototypeDom);\n    this.protoChildren = protoChildren;\n    __addCreateBtn.call(this);\n\n    // Add class and delete button to children\n    this.children = (0, _lodash2.default)(this.collectionHolder.children).filter(function (node) {\n        return _Dom2.default.classlist.contains(node, 'row');\n    }).map(function (child, index) {\n        var newChild = new CollectionChild(child, index, _this);\n        __addRemoveBtn.call(_this, newChild);\n        return newChild;\n    }).value();\n\n    //Add first?\n    if (this.children.length === 0 && this.settings.addFirst) {\n        this.add();\n    }\n}\n\n/**\n * Parse prototype data from element and remove [data-prototype] and [data-options] values\n * [data-prototype] value is set to \"prototype_name\" of parsed element, found in options\n * @param element\n * @returns {PrototypeData}\n * @private\n */\nfunction __parsePrototypeData(element) {\n    var data = new PrototypeData(element.getAttribute('data-prototype'), JSON.parse(element.getAttribute('data-options')));\n    //clean up\n    element.removeAttribute('data-options');\n    element.setAttribute('data-prototype', data.options['prototype_name']);\n    return data;\n}\n\n/**\n * Add remove button to element\n * @param child {CollectionChild}\n * @private\n */\nfunction __addRemoveBtn(child) {\n    var _this2 = this;\n\n    var settings = this.settings,\n        removeButton = settings.deleteButton.cloneNode(true);\n\n    // right ID to delete button\n    removeButton.setAttribute('id', [removeButton.getAttribute('id'), child.node.getAttribute('id')].join('_'));\n\n    child.unlistenRemoveButton = _Events2.default.listenOnce(removeButton, 'click', function (e) {\n        // prevent the link from creating a \"#\" on the URL\n        e.preventDefault();\n\n        if (_lodash2.default.isFunction(settings.onDelete)) {\n            settings.onDelete(child.node);\n        }\n        var id = child.id;\n        // remove collection child\n        child.remove();\n        child.unlistenRemoveButton = null;\n        // Update all other children\n        _this2.children = _lodash2.default.filter(_this2.children, function (item) {\n            if (item.id > id) {\n                item.setID(item.id - 1);\n                return true;\n            }\n            return !(item.id === id);\n        });\n    });\n\n    //Append child to right\n    child.node.querySelector('.form-right').appendChild(removeButton);\n}\n\n/**\n * Add Add button to collection\n * @private\n */\nfunction __addCreateBtn() {\n    var _this3 = this;\n\n    var sett = this.settings;\n    this.unlistenAddButton = _Events2.default.listen(sett.addButton, 'click', function (e) {\n        e.preventDefault();\n        // add a new tag form (see next code block)\n        _this3.add();\n    });\n    //append add button\n    this.collectionHolder.appendChild(sett.addButton);\n}\n\n/**\n * Fills placeholders in prototype string\n * @param key {string}\n * @param name {string}\n * @param number {Number}\n * @param prototype {string}\n * @returns {XML|string}\n * @private\n */\nfunction __fillPlaceholders(key, name, number, prototype) {\n    var labelRegx = new RegExp(key + 'label__', 'g'),\n        nameRegx = new RegExp(key, 'g');\n    return prototype.replace(labelRegx, name + number).replace(nameRegx, '' + number);\n}\n\n/**\n * Return HTML string representation of HTML Element object\n * @param element {HTMLElement}\n * @returns {string}\n * @private\n */\nfunction __getHtmlString(element) {\n    var wrap = document.createElement('div');\n    wrap.appendChild(element);\n    return wrap.innerHTML;\n}\n\n/**\n * Remove label of node\n * @param node {HTMLElement}\n * @private\n */\nfunction _removeLabel(node) {\n    _Dom2.default.removeNode(node.querySelector('.form-left'));\n    var formRight = node.querySelector('.form-right');\n    _Dom2.default.classlist.removeAll(formRight, ['span-none-padding-medium-16', 'span-none-padding-large-18', 'span-none-padding-xlarge-14']);\n    _Dom2.default.classlist.addAll(formRight, ['span-none-padding-medium-24', 'span-none-padding-large-24', 'span-none-padding-xlarge-24']);\n}\n\n/**\n * Simple class which keeps basic prototype data\n * @class PrototypeData\n * @param proto {string}\n * @param options {Object}\n * @constructor\n */\n\nvar PrototypeData = function PrototypeData(proto, options) {\n    _classCallCheck(this, PrototypeData);\n\n    this.prototype = proto;\n    this.options = options;\n};\n\nvar SELECT_MAP = {\n    id: '[id]',\n    name: '[name]',\n    'for': 'label[for]'\n};\n\n/**\n * Class representing child of collection\n * @class CollectionChild\n * @param node {HTMLElement}\n * @param id {string}\n * @param parent {Collection}\n * @param [prototypeData] {Array}\n * @constructor\n */\n\nvar CollectionChild = function () {\n    function CollectionChild(node, id, parent, prototypeData) {\n        _classCallCheck(this, CollectionChild);\n\n        this.id = id;\n        this.node = node;\n        this.parent = parent;\n        this.unlistenRemoveButton = null;\n\n        _Dom2.default.classlist.add(node, 'collection-child');\n        //Label?\n        if (parent.settings.label === false) {\n            _removeLabel(node);\n        }\n\n        var prototypeElements = node.querySelectorAll('[data-prototype]');\n        if (prototypeElements.length > 0) {\n            this.collections = __initializeCollections.call(this, prototypeElements, prototypeData);\n        }\n    }\n\n    /**\n     * Safety remove of child\n     */\n\n\n    _createClass(CollectionChild, [{\n        key: 'remove',\n        value: function remove() {\n            _Dom2.default.removeNode(this.node);\n        }\n\n        /**\n         * Set ID of child and update all elements descendant\n         * @param id\n         */\n\n    }, {\n        key: 'setID',\n        value: function setID(id) {\n            var _this4 = this;\n\n            var layer = this.parent.layer;\n            this.id = id;\n            _lodash2.default.each(SELECT_MAP, function (selector, key) {\n                _lodash2.default.each(_this4.node.querySelectorAll(selector), function (el) {\n                    return __updateAttribute(el, id, layer, key);\n                });\n            });\n            // change to self\n            __updateAttribute(this.node, id, layer, 'id');\n        }\n    }, {\n        key: 'detach',\n        value: function detach() {\n            _lodash2.default.each(this.collections, function (coll) {\n                return coll.detach();\n            });\n            this.unlistenRemoveButton();\n        }\n    }]);\n\n    return CollectionChild;\n}();\n\n/**\n * Initialize new collections of child\n * @param prototypeElements {HTMLCollection | Array}\n * @param prototypeDataSource {Array}\n * @returns {*|Array}\n * @private\n */\n\n\nfunction __initializeCollections(prototypeElements, prototypeDataSource) {\n    var _this5 = this;\n\n    if (!prototypeDataSource) {\n        return _lodash2.default.map(prototypeElements, function (el) {\n            return _Store2.default.getValue(el, 'collection');\n        });\n    }\n    // Init next level\n    return _lodash2.default.map(prototypeElements, function (el) {\n        var prototypeName = el.getAttribute('data-prototype'),\n            prototypeData = _lodash2.default.cloneDeep(_lodash2.default.find(prototypeDataSource, function (data) {\n            return data.options['prototype_name'] === prototypeName;\n        }));\n        prototypeData.prototype = __fillPlaceholders(_this5.parent.settings['prototype_name'], _this5.parent.settings.name, _this5.id, prototypeData.prototype);\n        return new Collection(el, _this5.parent.globalOptions, prototypeData, _this5.parent.layer + 1);\n    });\n}\n\n/**\n * Change identifier on particular level of selected attribute\n * @param node {HTMLElement}\n * @param id {string}\n * @param layer {Number}\n * @param attribute {string}\n * @private\n */\nfunction __updateAttribute(node, id, layer, attribute) {\n    var isName = attribute === 'name',\n        regex = isName ? /\\[\\d]/g : /_\\d_|_\\d$/g,\n        parameterStr = node.getAttribute(attribute),\n        resultStr = '';\n\n    var i = 0,\n        rgxResult = null,\n        next = true;\n\n    while (next) {\n        rgxResult = regex.exec(parameterStr);\n        if (i === layer) {\n            resultStr += parameterStr.substring(0, rgxResult.index + 1);\n            resultStr += id;\n\n            if (!isName && parameterStr.length === rgxResult.index + rgxResult[0].length) {\n                break;\n            }\n            // Add trailing\n            resultStr += isName ? ']' : '_';\n            //Add end of string\n            resultStr += parameterStr.substring(rgxResult.index + rgxResult[0].length);\n            next = false;\n            break;\n        }\n        i++;\n    }\n    //Set new ID\n    node.setAttribute(attribute, resultStr);\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L0NvbGxlY3Rpb24uanM/OWYzYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgZmlzYSBvbiA4LzIwLzE1LlxuICovXG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9sb2Rhc2ggPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxudmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblxudmFyIF9Eb20gPSByZXF1aXJlKCcuL3V0aWxzL0RvbScpO1xuXG52YXIgX0RvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Eb20pO1xuXG52YXIgX0V2ZW50cyA9IHJlcXVpcmUoJy4vdXRpbHMvRXZlbnRzJyk7XG5cbnZhciBfRXZlbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50cyk7XG5cbnZhciBfU3RvcmUgPSByZXF1aXJlKCcuL1N0b3JlJyk7XG5cbnZhciBfU3RvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3RvcmUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcbiAqIERlZmF1bHQgc2V0dGluZ3Mgb2YgQ29sbGVjdGlvbiBPYmplY3RcbiAqIEB0eXBlIHt7YWRkQnV0dG9uOiBzdHJpbmcsIGRlbGV0ZUJ1dHRvbjogc3RyaW5nLCBvbkFkZDogbnVsbCwgb25EZWxldGU6IG51bGwsIG5hbWU6IHN0cmluZ319XG4gKi9cbnZhciBkZWZhdWx0U2V0dGluZ3MgPSB7XG4gICAgYWRkQnV0dG9uOiAnICAgICAgIDxkaXYgY2xhc3M9XCJjb2xsZWN0aW9uLWFkZCBkaXNwbGF5LWlubGluZS1ibG9ja1wiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3Bhbi1tZWRpdW0tOCBzcGFuLWxhcmdlLTYgc3Bhbi14bGFyZ2UtMTBcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRpc3BsYXktaW5saW5lLWJsb2NrXCI+XFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGlkPVwiYWRkQnV0dG9uXCIgY2xhc3M9XCJhZGQtY29sbGVjdGlvbi1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJ0aWVjb25zIHRpZWNvbnMtcGx1cy1yYWRpdXMtbGFyZ2VcIj48L2k+XFxuICAgICAgICAgICAgICAgICAgICA8L2E+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PicsXG4gICAgZGVsZXRlQnV0dG9uOiAnICAgICAgIDxhIHRpdGxlPVwiUmVtb3ZlIGl0ZW1cIiBocmVmPVwiI1wiIGlkPVwiZGVsZXRlQnV0dG9uXCIgY2xhc3M9XCJkZWxldGUtY29sbGVjdGlvbi1pdGVtXCI+XFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidHJpbml0eSB0cmluaXR5LXRyYXNoIGNpcmNsZVwiPjwvc3Bhbj5cXG4gICAgICAgICAgICA8L2E+JyxcbiAgICBvbkFkZDogbnVsbCxcbiAgICBvbkRlbGV0ZTogbnVsbCxcbiAgICBsYWJlbDogZmFsc2UsXG4gICAgYWRkRmlyc3Q6IHRydWUsXG4gICAgbmFtZTogJ1tFbGVtZW50IE5hbWVdJ1xufTtcblxuLyoqXG4gKiBDb2xsZWN0aW9uIGNsYXNzLCBoYW5kbGVzIG9uZSBsYXllciBvZiBDb2xsZWN0aW9uIGZvcm1cbiAqIEBwYXJhbSBlbGVtZW50IHtIVE1MRWxlbWVudH1cbiAqIEBwYXJhbSBbZ2xvYmFsT3B0aW9uc10ge09iamVjdH1cbiAqIEBwYXJhbSBbcHJvdG90eXBlRGF0YV0ge1Byb3RvdHlwZURhdGF9XG4gKiBAcGFyYW0gW2xheWVyXSB7bnVtYmVyfVxuICogQGNvbnN0cnVjdG9yXG4gKi9cblxudmFyIENvbGxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHZhciBnbG9iYWxPcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG4gICAgICAgIHZhciBwcm90b3R5cGVEYXRhID0gYXJndW1lbnRzWzJdO1xuICAgICAgICB2YXIgbGF5ZXIgPSBhcmd1bWVudHNbM107XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbGxlY3Rpb24pO1xuXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbkhvbGRlciA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMucHJvdG90eXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm90b0NoaWxkcmVuID0gW107XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdGhpcy5nbG9iYWxPcHRpb25zID0gZ2xvYmFsT3B0aW9ucztcbiAgICAgICAgdGhpcy5sYXllciA9IGxheWVyIHx8IDA7XG4gICAgICAgIC8vIExpc3RlbmVyc1xuICAgICAgICB0aGlzLnVubGlzdGVuQWRkQnV0dG9uID0gbnVsbDtcblxuICAgICAgICBpZiAoIXByb3RvdHlwZURhdGEpIHtcbiAgICAgICAgICAgIHByb3RvdHlwZURhdGEgPSBfX3BhcnNlUHJvdG90eXBlRGF0YShlbGVtZW50KTtcbiAgICAgICAgICAgIF9TdG9yZTIuZGVmYXVsdC5zZXRWYWx1ZShlbGVtZW50LCAnY29sbGVjdGlvbicsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBfbG9kYXNoMi5kZWZhdWx0LmRlZmF1bHRzRGVlcChnbG9iYWxPcHRpb25zLCBwcm90b3R5cGVEYXRhLm9wdGlvbnMsIGRlZmF1bHRTZXR0aW5ncyk7XG4gICAgICAgIC8vdGhpcy5zZXR0aW5ncyA9IF8uZXh0ZW5kKF8uY2xvbmUoZGVmYXVsdFNldHRpbmdzKSwgKGdsb2JhbE9wdGlvbnMgPyBfLmV4dGVuZChwcm90b3R5cGVEYXRhLm9wdGlvbnMsIGdsb2JhbE9wdGlvbnMpIDogcHJvdG90eXBlRGF0YS5vcHRpb25zKSk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuYWRkQnV0dG9uID0gX0RvbTIuZGVmYXVsdC5odG1sVG9Eb2N1bWVudEZyYWdtZW50KHRoaXMuc2V0dGluZ3MuYWRkQnV0dG9uLnRyaW0oKSk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuZGVsZXRlQnV0dG9uID0gX0RvbTIuZGVmYXVsdC5odG1sVG9Eb2N1bWVudEZyYWdtZW50KHRoaXMuc2V0dGluZ3MuZGVsZXRlQnV0dG9uLnRyaW0oKSk7XG5cbiAgICAgICAgLyoqIE1ha2UgaXQgbGl2ZSAqKi9cbiAgICAgICAgX19pbml0aWFsaXplLmNhbGwodGhpcywgcHJvdG90eXBlRGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBuZXcgY2hpbGQgdG8gY29sbGVjdGlvblxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29sbGVjdGlvbiwgW3tcbiAgICAgICAga2V5OiAnYWRkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZCgpIHtcbiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uID0gc2V0dGluZ3MuYWRkQnV0dG9uLFxuICAgICAgICAgICAgICAgIHByb3RvdHlwZSA9IHRoaXMucHJvdG90eXBlLFxuICAgICAgICAgICAgICAgIHByb3RvdHlwZUNoaWxkcmVuID0gdGhpcy5wcm90b0NoaWxkcmVuLFxuXG4gICAgICAgICAgICAvLyBjaGlsZHJlbiBjb3VudD9cbiAgICAgICAgICAgIGNoaWxkcmVuQ291bnQgPSBfbG9kYXNoMi5kZWZhdWx0LmZpbHRlcih0aGlzLmNvbGxlY3Rpb25Ib2xkZXIuY2hpbGRyZW4sIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Eb20yLmRlZmF1bHQuY2xhc3NsaXN0LmNvbnRhaW5zKG5vZGUsICdjb2xsZWN0aW9uLWNoaWxkJyk7XG4gICAgICAgICAgICB9KSxcblxuICAgICAgICAgICAgLy8gUGxhY2Vob2xkZXJzXG4gICAgICAgICAgICBuZXdDaGlsZFN0ciA9IF9fZmlsbFBsYWNlaG9sZGVycyhzZXR0aW5nc1sncHJvdG90eXBlX25hbWUnXSwgc2V0dGluZ3MubmFtZSwgY2hpbGRyZW5Db3VudC5sZW5ndGgsIHByb3RvdHlwZSk7XG5cbiAgICAgICAgICAgIHZhciBuZXdDaGlsZE5vZGUgPSBfRG9tMi5kZWZhdWx0Lmh0bWxUb0RvY3VtZW50RnJhZ21lbnQobmV3Q2hpbGRTdHIudHJpbSgpKSxcbiAgICAgICAgICAgICAgICBjaGlsZCA9IG5ldyBDb2xsZWN0aW9uQ2hpbGQobmV3Q2hpbGROb2RlLCBjaGlsZHJlbkNvdW50Lmxlbmd0aCwgdGhpcywgcHJvdG90eXBlQ2hpbGRyZW4pO1xuXG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgX19hZGRSZW1vdmVCdG4uY2FsbCh0aGlzLCBjaGlsZCk7XG5cbiAgICAgICAgICAgIC8vSW5zZXJ0IG5ldyBDaGlsZFxuICAgICAgICAgICAgYWRkQnV0dG9uLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld0NoaWxkTm9kZSwgYWRkQnV0dG9uKTtcblxuICAgICAgICAgICAgaWYgKF9sb2Rhc2gyLmRlZmF1bHQuaXNGdW5jdGlvbihzZXR0aW5ncy5vbkFkZCkpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbkFkZChuZXdDaGlsZE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW1vdmVBbGwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQWxsKCkge1xuICAgICAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5lYWNoKHRoaXMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgICAgIGNoaWxkLmRldGFjaCgpO1xuICAgICAgICAgICAgICAgIGNoaWxkLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RldGFjaCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRhY2goKSB7XG4gICAgICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2godGhpcy5jaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmRldGFjaCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuQWRkQnV0dG9uKCk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29sbGVjdGlvbjtcbn0oKTtcblxuLyoqXG4gKiBJbml0aWFsaXplIENvbGxlY3Rpb24gb2JqZWN0XG4gKiBAcGFyYW0gZGF0YSB7UHJvdG90eXBlRGF0YX1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5leHBvcnRzLmRlZmF1bHQgPSBDb2xsZWN0aW9uO1xuZnVuY3Rpb24gX19pbml0aWFsaXplKGRhdGEpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy8gaW5pdFxuICAgIHZhciBwcm90b3R5cGVEb20gPSBfRG9tMi5kZWZhdWx0Lmh0bWxUb0RvY3VtZW50RnJhZ21lbnQoZGF0YS5wcm90b3R5cGUpLFxuICAgICAgICBjaGlsZHJlbiA9IHByb3RvdHlwZURvbS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wcm90b3R5cGVdJyksXG4gICAgICAgIHByb3RvQ2hpbGRyZW4gPSBfbG9kYXNoMi5kZWZhdWx0Lm1hcChjaGlsZHJlbiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIF9fcGFyc2VQcm90b3R5cGVEYXRhKG5vZGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5wcm90b3R5cGUgPSBfX2dldEh0bWxTdHJpbmcocHJvdG90eXBlRG9tKTtcbiAgICB0aGlzLnByb3RvQ2hpbGRyZW4gPSBwcm90b0NoaWxkcmVuO1xuICAgIF9fYWRkQ3JlYXRlQnRuLmNhbGwodGhpcyk7XG5cbiAgICAvLyBBZGQgY2xhc3MgYW5kIGRlbGV0ZSBidXR0b24gdG8gY2hpbGRyZW5cbiAgICB0aGlzLmNoaWxkcmVuID0gKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKHRoaXMuY29sbGVjdGlvbkhvbGRlci5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBfRG9tMi5kZWZhdWx0LmNsYXNzbGlzdC5jb250YWlucyhub2RlLCAncm93Jyk7XG4gICAgfSkubWFwKGZ1bmN0aW9uIChjaGlsZCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIG5ld0NoaWxkID0gbmV3IENvbGxlY3Rpb25DaGlsZChjaGlsZCwgaW5kZXgsIF90aGlzKTtcbiAgICAgICAgX19hZGRSZW1vdmVCdG4uY2FsbChfdGhpcywgbmV3Q2hpbGQpO1xuICAgICAgICByZXR1cm4gbmV3Q2hpbGQ7XG4gICAgfSkudmFsdWUoKTtcblxuICAgIC8vQWRkIGZpcnN0P1xuICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCAmJiB0aGlzLnNldHRpbmdzLmFkZEZpcnN0KSB7XG4gICAgICAgIHRoaXMuYWRkKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFBhcnNlIHByb3RvdHlwZSBkYXRhIGZyb20gZWxlbWVudCBhbmQgcmVtb3ZlIFtkYXRhLXByb3RvdHlwZV0gYW5kIFtkYXRhLW9wdGlvbnNdIHZhbHVlc1xuICogW2RhdGEtcHJvdG90eXBlXSB2YWx1ZSBpcyBzZXQgdG8gXCJwcm90b3R5cGVfbmFtZVwiIG9mIHBhcnNlZCBlbGVtZW50LCBmb3VuZCBpbiBvcHRpb25zXG4gKiBAcGFyYW0gZWxlbWVudFxuICogQHJldHVybnMge1Byb3RvdHlwZURhdGF9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX3BhcnNlUHJvdG90eXBlRGF0YShlbGVtZW50KSB7XG4gICAgdmFyIGRhdGEgPSBuZXcgUHJvdG90eXBlRGF0YShlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1wcm90b3R5cGUnKSwgSlNPTi5wYXJzZShlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1vcHRpb25zJykpKTtcbiAgICAvL2NsZWFuIHVwXG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtb3B0aW9ucycpO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXByb3RvdHlwZScsIGRhdGEub3B0aW9uc1sncHJvdG90eXBlX25hbWUnXSk7XG4gICAgcmV0dXJuIGRhdGE7XG59XG5cbi8qKlxuICogQWRkIHJlbW92ZSBidXR0b24gdG8gZWxlbWVudFxuICogQHBhcmFtIGNoaWxkIHtDb2xsZWN0aW9uQ2hpbGR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX2FkZFJlbW92ZUJ0bihjaGlsZCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHNldHRpbmdzID0gdGhpcy5zZXR0aW5ncyxcbiAgICAgICAgcmVtb3ZlQnV0dG9uID0gc2V0dGluZ3MuZGVsZXRlQnV0dG9uLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIC8vIHJpZ2h0IElEIHRvIGRlbGV0ZSBidXR0b25cbiAgICByZW1vdmVCdXR0b24uc2V0QXR0cmlidXRlKCdpZCcsIFtyZW1vdmVCdXR0b24uZ2V0QXR0cmlidXRlKCdpZCcpLCBjaGlsZC5ub2RlLmdldEF0dHJpYnV0ZSgnaWQnKV0uam9pbignXycpKTtcblxuICAgIGNoaWxkLnVubGlzdGVuUmVtb3ZlQnV0dG9uID0gX0V2ZW50czIuZGVmYXVsdC5saXN0ZW5PbmNlKHJlbW92ZUJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgLy8gcHJldmVudCB0aGUgbGluayBmcm9tIGNyZWF0aW5nIGEgXCIjXCIgb24gdGhlIFVSTFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKF9sb2Rhc2gyLmRlZmF1bHQuaXNGdW5jdGlvbihzZXR0aW5ncy5vbkRlbGV0ZSkpIHtcbiAgICAgICAgICAgIHNldHRpbmdzLm9uRGVsZXRlKGNoaWxkLm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpZCA9IGNoaWxkLmlkO1xuICAgICAgICAvLyByZW1vdmUgY29sbGVjdGlvbiBjaGlsZFxuICAgICAgICBjaGlsZC5yZW1vdmUoKTtcbiAgICAgICAgY2hpbGQudW5saXN0ZW5SZW1vdmVCdXR0b24gPSBudWxsO1xuICAgICAgICAvLyBVcGRhdGUgYWxsIG90aGVyIGNoaWxkcmVuXG4gICAgICAgIF90aGlzMi5jaGlsZHJlbiA9IF9sb2Rhc2gyLmRlZmF1bHQuZmlsdGVyKF90aGlzMi5jaGlsZHJlbiwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmlkID4gaWQpIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldElEKGl0ZW0uaWQgLSAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKGl0ZW0uaWQgPT09IGlkKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvL0FwcGVuZCBjaGlsZCB0byByaWdodFxuICAgIGNoaWxkLm5vZGUucXVlcnlTZWxlY3RvcignLmZvcm0tcmlnaHQnKS5hcHBlbmRDaGlsZChyZW1vdmVCdXR0b24pO1xufVxuXG4vKipcbiAqIEFkZCBBZGQgYnV0dG9uIHRvIGNvbGxlY3Rpb25cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9fYWRkQ3JlYXRlQnRuKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIHNldHQgPSB0aGlzLnNldHRpbmdzO1xuICAgIHRoaXMudW5saXN0ZW5BZGRCdXR0b24gPSBfRXZlbnRzMi5kZWZhdWx0Lmxpc3RlbihzZXR0LmFkZEJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBhZGQgYSBuZXcgdGFnIGZvcm0gKHNlZSBuZXh0IGNvZGUgYmxvY2spXG4gICAgICAgIF90aGlzMy5hZGQoKTtcbiAgICB9KTtcbiAgICAvL2FwcGVuZCBhZGQgYnV0dG9uXG4gICAgdGhpcy5jb2xsZWN0aW9uSG9sZGVyLmFwcGVuZENoaWxkKHNldHQuYWRkQnV0dG9uKTtcbn1cblxuLyoqXG4gKiBGaWxscyBwbGFjZWhvbGRlcnMgaW4gcHJvdG90eXBlIHN0cmluZ1xuICogQHBhcmFtIGtleSB7c3RyaW5nfVxuICogQHBhcmFtIG5hbWUge3N0cmluZ31cbiAqIEBwYXJhbSBudW1iZXIge051bWJlcn1cbiAqIEBwYXJhbSBwcm90b3R5cGUge3N0cmluZ31cbiAqIEByZXR1cm5zIHtYTUx8c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19maWxsUGxhY2Vob2xkZXJzKGtleSwgbmFtZSwgbnVtYmVyLCBwcm90b3R5cGUpIHtcbiAgICB2YXIgbGFiZWxSZWd4ID0gbmV3IFJlZ0V4cChrZXkgKyAnbGFiZWxfXycsICdnJyksXG4gICAgICAgIG5hbWVSZWd4ID0gbmV3IFJlZ0V4cChrZXksICdnJyk7XG4gICAgcmV0dXJuIHByb3RvdHlwZS5yZXBsYWNlKGxhYmVsUmVneCwgbmFtZSArIG51bWJlcikucmVwbGFjZShuYW1lUmVneCwgJycgKyBudW1iZXIpO1xufVxuXG4vKipcbiAqIFJldHVybiBIVE1MIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBIVE1MIEVsZW1lbnQgb2JqZWN0XG4gKiBAcGFyYW0gZWxlbWVudCB7SFRNTEVsZW1lbnR9XG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19nZXRIdG1sU3RyaW5nKGVsZW1lbnQpIHtcbiAgICB2YXIgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHdyYXAuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgcmV0dXJuIHdyYXAuaW5uZXJIVE1MO1xufVxuXG4vKipcbiAqIFJlbW92ZSBsYWJlbCBvZiBub2RlXG4gKiBAcGFyYW0gbm9kZSB7SFRNTEVsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfcmVtb3ZlTGFiZWwobm9kZSkge1xuICAgIF9Eb20yLmRlZmF1bHQucmVtb3ZlTm9kZShub2RlLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWxlZnQnKSk7XG4gICAgdmFyIGZvcm1SaWdodCA9IG5vZGUucXVlcnlTZWxlY3RvcignLmZvcm0tcmlnaHQnKTtcbiAgICBfRG9tMi5kZWZhdWx0LmNsYXNzbGlzdC5yZW1vdmVBbGwoZm9ybVJpZ2h0LCBbJ3NwYW4tbm9uZS1wYWRkaW5nLW1lZGl1bS0xNicsICdzcGFuLW5vbmUtcGFkZGluZy1sYXJnZS0xOCcsICdzcGFuLW5vbmUtcGFkZGluZy14bGFyZ2UtMTQnXSk7XG4gICAgX0RvbTIuZGVmYXVsdC5jbGFzc2xpc3QuYWRkQWxsKGZvcm1SaWdodCwgWydzcGFuLW5vbmUtcGFkZGluZy1tZWRpdW0tMjQnLCAnc3Bhbi1ub25lLXBhZGRpbmctbGFyZ2UtMjQnLCAnc3Bhbi1ub25lLXBhZGRpbmcteGxhcmdlLTI0J10pO1xufVxuXG4vKipcbiAqIFNpbXBsZSBjbGFzcyB3aGljaCBrZWVwcyBiYXNpYyBwcm90b3R5cGUgZGF0YVxuICogQGNsYXNzIFByb3RvdHlwZURhdGFcbiAqIEBwYXJhbSBwcm90byB7c3RyaW5nfVxuICogQHBhcmFtIG9wdGlvbnMge09iamVjdH1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbnZhciBQcm90b3R5cGVEYXRhID0gZnVuY3Rpb24gUHJvdG90eXBlRGF0YShwcm90bywgb3B0aW9ucykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm90b3R5cGVEYXRhKTtcblxuICAgIHRoaXMucHJvdG90eXBlID0gcHJvdG87XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbn07XG5cbnZhciBTRUxFQ1RfTUFQID0ge1xuICAgIGlkOiAnW2lkXScsXG4gICAgbmFtZTogJ1tuYW1lXScsXG4gICAgJ2Zvcic6ICdsYWJlbFtmb3JdJ1xufTtcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgY2hpbGQgb2YgY29sbGVjdGlvblxuICogQGNsYXNzIENvbGxlY3Rpb25DaGlsZFxuICogQHBhcmFtIG5vZGUge0hUTUxFbGVtZW50fVxuICogQHBhcmFtIGlkIHtzdHJpbmd9XG4gKiBAcGFyYW0gcGFyZW50IHtDb2xsZWN0aW9ufVxuICogQHBhcmFtIFtwcm90b3R5cGVEYXRhXSB7QXJyYXl9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuXG52YXIgQ29sbGVjdGlvbkNoaWxkID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb25DaGlsZChub2RlLCBpZCwgcGFyZW50LCBwcm90b3R5cGVEYXRhKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xsZWN0aW9uQ2hpbGQpO1xuXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMudW5saXN0ZW5SZW1vdmVCdXR0b24gPSBudWxsO1xuXG4gICAgICAgIF9Eb20yLmRlZmF1bHQuY2xhc3NsaXN0LmFkZChub2RlLCAnY29sbGVjdGlvbi1jaGlsZCcpO1xuICAgICAgICAvL0xhYmVsP1xuICAgICAgICBpZiAocGFyZW50LnNldHRpbmdzLmxhYmVsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgX3JlbW92ZUxhYmVsKG5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByb3RvdHlwZUVsZW1lbnRzID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wcm90b3R5cGVdJyk7XG4gICAgICAgIGlmIChwcm90b3R5cGVFbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25zID0gX19pbml0aWFsaXplQ29sbGVjdGlvbnMuY2FsbCh0aGlzLCBwcm90b3R5cGVFbGVtZW50cywgcHJvdG90eXBlRGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYWZldHkgcmVtb3ZlIG9mIGNoaWxkXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhDb2xsZWN0aW9uQ2hpbGQsIFt7XG4gICAgICAgIGtleTogJ3JlbW92ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgICAgICBfRG9tMi5kZWZhdWx0LnJlbW92ZU5vZGUodGhpcy5ub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgSUQgb2YgY2hpbGQgYW5kIHVwZGF0ZSBhbGwgZWxlbWVudHMgZGVzY2VuZGFudFxuICAgICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldElEJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldElEKGlkKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGxheWVyID0gdGhpcy5wYXJlbnQubGF5ZXI7XG4gICAgICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goU0VMRUNUX01BUCwgZnVuY3Rpb24gKHNlbGVjdG9yLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goX3RoaXM0Lm5vZGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvciksIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX191cGRhdGVBdHRyaWJ1dGUoZWwsIGlkLCBsYXllciwga2V5KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2hhbmdlIHRvIHNlbGZcbiAgICAgICAgICAgIF9fdXBkYXRlQXR0cmlidXRlKHRoaXMubm9kZSwgaWQsIGxheWVyLCAnaWQnKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGV0YWNoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRldGFjaCgpIHtcbiAgICAgICAgICAgIF9sb2Rhc2gyLmRlZmF1bHQuZWFjaCh0aGlzLmNvbGxlY3Rpb25zLCBmdW5jdGlvbiAoY29sbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2xsLmRldGFjaCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuUmVtb3ZlQnV0dG9uKCk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29sbGVjdGlvbkNoaWxkO1xufSgpO1xuXG4vKipcbiAqIEluaXRpYWxpemUgbmV3IGNvbGxlY3Rpb25zIG9mIGNoaWxkXG4gKiBAcGFyYW0gcHJvdG90eXBlRWxlbWVudHMge0hUTUxDb2xsZWN0aW9uIHwgQXJyYXl9XG4gKiBAcGFyYW0gcHJvdG90eXBlRGF0YVNvdXJjZSB7QXJyYXl9XG4gKiBAcmV0dXJucyB7KnxBcnJheX1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5mdW5jdGlvbiBfX2luaXRpYWxpemVDb2xsZWN0aW9ucyhwcm90b3R5cGVFbGVtZW50cywgcHJvdG90eXBlRGF0YVNvdXJjZSkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgaWYgKCFwcm90b3R5cGVEYXRhU291cmNlKSB7XG4gICAgICAgIHJldHVybiBfbG9kYXNoMi5kZWZhdWx0Lm1hcChwcm90b3R5cGVFbGVtZW50cywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICByZXR1cm4gX1N0b3JlMi5kZWZhdWx0LmdldFZhbHVlKGVsLCAnY29sbGVjdGlvbicpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gSW5pdCBuZXh0IGxldmVsXG4gICAgcmV0dXJuIF9sb2Rhc2gyLmRlZmF1bHQubWFwKHByb3RvdHlwZUVsZW1lbnRzLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgdmFyIHByb3RvdHlwZU5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvdG90eXBlJyksXG4gICAgICAgICAgICBwcm90b3R5cGVEYXRhID0gX2xvZGFzaDIuZGVmYXVsdC5jbG9uZURlZXAoX2xvZGFzaDIuZGVmYXVsdC5maW5kKHByb3RvdHlwZURhdGFTb3VyY2UsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5vcHRpb25zWydwcm90b3R5cGVfbmFtZSddID09PSBwcm90b3R5cGVOYW1lO1xuICAgICAgICB9KSk7XG4gICAgICAgIHByb3RvdHlwZURhdGEucHJvdG90eXBlID0gX19maWxsUGxhY2Vob2xkZXJzKF90aGlzNS5wYXJlbnQuc2V0dGluZ3NbJ3Byb3RvdHlwZV9uYW1lJ10sIF90aGlzNS5wYXJlbnQuc2V0dGluZ3MubmFtZSwgX3RoaXM1LmlkLCBwcm90b3R5cGVEYXRhLnByb3RvdHlwZSk7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbihlbCwgX3RoaXM1LnBhcmVudC5nbG9iYWxPcHRpb25zLCBwcm90b3R5cGVEYXRhLCBfdGhpczUucGFyZW50LmxheWVyICsgMSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogQ2hhbmdlIGlkZW50aWZpZXIgb24gcGFydGljdWxhciBsZXZlbCBvZiBzZWxlY3RlZCBhdHRyaWJ1dGVcbiAqIEBwYXJhbSBub2RlIHtIVE1MRWxlbWVudH1cbiAqIEBwYXJhbSBpZCB7c3RyaW5nfVxuICogQHBhcmFtIGxheWVyIHtOdW1iZXJ9XG4gKiBAcGFyYW0gYXR0cmlidXRlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX3VwZGF0ZUF0dHJpYnV0ZShub2RlLCBpZCwgbGF5ZXIsIGF0dHJpYnV0ZSkge1xuICAgIHZhciBpc05hbWUgPSBhdHRyaWJ1dGUgPT09ICduYW1lJyxcbiAgICAgICAgcmVnZXggPSBpc05hbWUgPyAvXFxbXFxkXS9nIDogL19cXGRffF9cXGQkL2csXG4gICAgICAgIHBhcmFtZXRlclN0ciA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSksXG4gICAgICAgIHJlc3VsdFN0ciA9ICcnO1xuXG4gICAgdmFyIGkgPSAwLFxuICAgICAgICByZ3hSZXN1bHQgPSBudWxsLFxuICAgICAgICBuZXh0ID0gdHJ1ZTtcblxuICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICAgIHJneFJlc3VsdCA9IHJlZ2V4LmV4ZWMocGFyYW1ldGVyU3RyKTtcbiAgICAgICAgaWYgKGkgPT09IGxheWVyKSB7XG4gICAgICAgICAgICByZXN1bHRTdHIgKz0gcGFyYW1ldGVyU3RyLnN1YnN0cmluZygwLCByZ3hSZXN1bHQuaW5kZXggKyAxKTtcbiAgICAgICAgICAgIHJlc3VsdFN0ciArPSBpZDtcblxuICAgICAgICAgICAgaWYgKCFpc05hbWUgJiYgcGFyYW1ldGVyU3RyLmxlbmd0aCA9PT0gcmd4UmVzdWx0LmluZGV4ICsgcmd4UmVzdWx0WzBdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRkIHRyYWlsaW5nXG4gICAgICAgICAgICByZXN1bHRTdHIgKz0gaXNOYW1lID8gJ10nIDogJ18nO1xuICAgICAgICAgICAgLy9BZGQgZW5kIG9mIHN0cmluZ1xuICAgICAgICAgICAgcmVzdWx0U3RyICs9IHBhcmFtZXRlclN0ci5zdWJzdHJpbmcocmd4UmVzdWx0LmluZGV4ICsgcmd4UmVzdWx0WzBdLmxlbmd0aCk7XG4gICAgICAgICAgICBuZXh0ID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIC8vU2V0IG5ldyBJRFxuICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgcmVzdWx0U3RyKTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdHJpbml0eS9Db2xsZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA0ODlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 490:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by fisa on 8/20/15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Private cache data storage\n * @type {Array}\n */\nvar _Data = [];\n\n/**\n * Stores values according to specified key and owner\n * Whole class is static\n */\nvar Store = {\n    /**\n     * Public function which returns Value or Null\n     * @param owner\n     * @param key\n     * @returns {*} | null\n     */\n    getValue: function getValue(owner, key) {\n        var item = __get(owner, key);\n        return item ? item.value : null;\n    },\n\n\n    /**\n     * Adds new or update existing data, If update returns old Item\n     * @param key\n     * @param value\n     * @param owner\n     * @returns {*}\n     */\n    setValue: function setValue(owner, key, value) {\n        var item = __get(owner, key),\n            old = null;\n\n        if (_lodash2.default.isNull(item)) {\n            old = new Item(owner, key, value);\n            _Data.push(old);\n        } else {\n            old = new Item(item.owner, item.key, item.value);\n            item.value = value;\n        }\n        return old.value;\n    },\n\n\n    /**\n     * Finds all data stored by this owner\n     * @param owner\n     * @returns {Array.<Item>} | null\n     */\n    getAll: function getAll(owner) {\n        var data = _Data.filter(function (item) {\n            return owner === item.owner;\n        });\n        return data.length === 0 ? null : data;\n    },\n\n\n    /**\n     * Remove stored value from Storage if owner and key exists\n     * @param owner\n     * @param key\n     * @returns {*} | null\n     */\n    remove: function remove(owner, key) {\n        var index = _lodash2.default.findIndex(_Data, function (item) {\n            return item.key === key && item.owner === owner;\n        });\n        return index ? _lodash2.default.pullAt(_Data, index).value : null;\n    }\n};\n\n/**\n * Wrapper for data stored in collection\n * @param key\n * @param value\n * @param owner\n */\n\nvar Item = function Item(owner, key, value) {\n    _classCallCheck(this, Item);\n\n    this.key = key;\n    this.value = value;\n    this.owner = owner;\n};\n\n/**\n * Export class representing data stored in Store\n * @type {Item}\n */\n\n\nStore.Item = Item;\n\n/**\n * Export private data property for texting purposes\n * @type {Array}\n * @private\n */\nStore._data = _Data;\n\n/**\n * Look for specified data by owner and key\n * @param key\n * @param owner\n * @returns {Item} | null\n * @private\n */\nfunction __get(owner, key) {\n    var length = _Data.length;\n    for (var i = 0; i < length; i++) {\n        if (owner === _Data[i].owner && key === _Data[i].key) {\n            return _Data[i];\n        }\n    }\n    return null;\n}\n\nexports.default = Store;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L1N0b3JlLmpzPzBiZGIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGZpc2Egb24gOC8yMC8xNS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbG9kYXNoID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbnZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxuICogUHJpdmF0ZSBjYWNoZSBkYXRhIHN0b3JhZ2VcbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xudmFyIF9EYXRhID0gW107XG5cbi8qKlxuICogU3RvcmVzIHZhbHVlcyBhY2NvcmRpbmcgdG8gc3BlY2lmaWVkIGtleSBhbmQgb3duZXJcbiAqIFdob2xlIGNsYXNzIGlzIHN0YXRpY1xuICovXG52YXIgU3RvcmUgPSB7XG4gICAgLyoqXG4gICAgICogUHVibGljIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgVmFsdWUgb3IgTnVsbFxuICAgICAqIEBwYXJhbSBvd25lclxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcmV0dXJucyB7Kn0gfCBudWxsXG4gICAgICovXG4gICAgZ2V0VmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKG93bmVyLCBrZXkpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBfX2dldChvd25lciwga2V5KTtcbiAgICAgICAgcmV0dXJuIGl0ZW0gPyBpdGVtLnZhbHVlIDogbnVsbDtcbiAgICB9LFxuXG5cbiAgICAvKipcbiAgICAgKiBBZGRzIG5ldyBvciB1cGRhdGUgZXhpc3RpbmcgZGF0YSwgSWYgdXBkYXRlIHJldHVybnMgb2xkIEl0ZW1cbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICogQHBhcmFtIG93bmVyXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgc2V0VmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKG93bmVyLCBrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhciBpdGVtID0gX19nZXQob3duZXIsIGtleSksXG4gICAgICAgICAgICBvbGQgPSBudWxsO1xuXG4gICAgICAgIGlmIChfbG9kYXNoMi5kZWZhdWx0LmlzTnVsbChpdGVtKSkge1xuICAgICAgICAgICAgb2xkID0gbmV3IEl0ZW0ob3duZXIsIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgX0RhdGEucHVzaChvbGQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2xkID0gbmV3IEl0ZW0oaXRlbS5vd25lciwgaXRlbS5rZXksIGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgaXRlbS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvbGQudmFsdWU7XG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYWxsIGRhdGEgc3RvcmVkIGJ5IHRoaXMgb3duZXJcbiAgICAgKiBAcGFyYW0gb3duZXJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXkuPEl0ZW0+fSB8IG51bGxcbiAgICAgKi9cbiAgICBnZXRBbGw6IGZ1bmN0aW9uIGdldEFsbChvd25lcikge1xuICAgICAgICB2YXIgZGF0YSA9IF9EYXRhLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIG93bmVyID09PSBpdGVtLm93bmVyO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRhdGEubGVuZ3RoID09PSAwID8gbnVsbCA6IGRhdGE7XG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHN0b3JlZCB2YWx1ZSBmcm9tIFN0b3JhZ2UgaWYgb3duZXIgYW5kIGtleSBleGlzdHNcbiAgICAgKiBAcGFyYW0gb3duZXJcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHJldHVybnMgeyp9IHwgbnVsbFxuICAgICAqL1xuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG93bmVyLCBrZXkpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gX2xvZGFzaDIuZGVmYXVsdC5maW5kSW5kZXgoX0RhdGEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5rZXkgPT09IGtleSAmJiBpdGVtLm93bmVyID09PSBvd25lcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpbmRleCA/IF9sb2Rhc2gyLmRlZmF1bHQucHVsbEF0KF9EYXRhLCBpbmRleCkudmFsdWUgOiBudWxsO1xuICAgIH1cbn07XG5cbi8qKlxuICogV3JhcHBlciBmb3IgZGF0YSBzdG9yZWQgaW4gY29sbGVjdGlvblxuICogQHBhcmFtIGtleVxuICogQHBhcmFtIHZhbHVlXG4gKiBAcGFyYW0gb3duZXJcbiAqL1xuXG52YXIgSXRlbSA9IGZ1bmN0aW9uIEl0ZW0ob3duZXIsIGtleSwgdmFsdWUpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSXRlbSk7XG5cbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5vd25lciA9IG93bmVyO1xufTtcblxuLyoqXG4gKiBFeHBvcnQgY2xhc3MgcmVwcmVzZW50aW5nIGRhdGEgc3RvcmVkIGluIFN0b3JlXG4gKiBAdHlwZSB7SXRlbX1cbiAqL1xuXG5cblN0b3JlLkl0ZW0gPSBJdGVtO1xuXG4vKipcbiAqIEV4cG9ydCBwcml2YXRlIGRhdGEgcHJvcGVydHkgZm9yIHRleHRpbmcgcHVycG9zZXNcbiAqIEB0eXBlIHtBcnJheX1cbiAqIEBwcml2YXRlXG4gKi9cblN0b3JlLl9kYXRhID0gX0RhdGE7XG5cbi8qKlxuICogTG9vayBmb3Igc3BlY2lmaWVkIGRhdGEgYnkgb3duZXIgYW5kIGtleVxuICogQHBhcmFtIGtleVxuICogQHBhcmFtIG93bmVyXG4gKiBAcmV0dXJucyB7SXRlbX0gfCBudWxsXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX2dldChvd25lciwga2V5KSB7XG4gICAgdmFyIGxlbmd0aCA9IF9EYXRhLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChvd25lciA9PT0gX0RhdGFbaV0ub3duZXIgJiYga2V5ID09PSBfRGF0YVtpXS5rZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBfRGF0YVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gU3RvcmU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RyaW5pdHkvU3RvcmUuanNcbi8vIG1vZHVsZSBpZCA9IDQ5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 491:
/***/ function(module, exports, __webpack_require__) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Created by Jakub on 09.02.16.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Gateway = __webpack_require__(469);\n\nvar _Gateway2 = _interopRequireDefault(_Gateway);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Used for switching similar forms and copying it's data from form to form\nvar FormChanger = function () {\n    function FormChanger() {\n        _classCallCheck(this, FormChanger);\n    }\n\n    _createClass(FormChanger, null, [{\n        key: \"refreshForm\",\n\n        /**\n         * Call the \"url\" to get a form which will be inserted into \"parentElement\".\n         * After inserting the form the data from old form are copied to the new form.\n         * The \"afterFormChange\" callback is called after the process.\n         *\n         * @param {Element}  parentElement    Element which will contain the form which will ge get from url\n         * @param {string}   url              Url which will be used to get the form\n         * @param {function} afterFormChange  Function which is called after the refreshing is done\n         */\n        value: function refreshForm(parentElement, url, afterFormChange) {\n            //call api and get form\n            _Gateway2.default.get(url, {}, function (response) {\n                //save data from old form\n                var oldHtml = parentElement.innerHTML;\n\n                // If the element already contains a form\n                // Change the form to the new form and copy the data\n                if (oldHtml.includes(\"<form\")) {\n                    var oldForm = parentElement.getElementsByTagName(\"form\")[0];\n\n                    parentElement.innerHTML = response.text;\n                    var newForm = parentElement.getElementsByTagName(\"form\")[0];\n\n                    //copy data to new form\n                    FormChanger.copyFormData(oldForm, newForm);\n                } else {\n                    parentElement.innerHTML = response.text;\n                }\n                if (typeof afterFormChange === 'function') {\n                    afterFormChange();\n                }\n            });\n        }\n    }, {\n        key: \"copyFormData\",\n        value: function copyFormData(oldForm, newForm) {\n            var oldInputs = FormChanger.getFormInputs(oldForm);\n            var newInputs = FormChanger.getFormInputs(newForm);\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = newInputs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var newFormInput = _step.value;\n\n                    var newInputName = FormChanger.getShortInputName(newFormInput);\n\n                    var _iteratorNormalCompletion2 = true;\n                    var _didIteratorError2 = false;\n                    var _iteratorError2 = undefined;\n\n                    try {\n                        for (var _iterator2 = oldInputs[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                            var oldInput = _step2.value;\n\n                            //if the input names are the same\n                            if (newInputName !== \"[_token]\" && newInputName === FormChanger.getShortInputName(oldInput)) {\n                                if ('checkbox' === newFormInput.getAttribute('type')) {\n                                    newFormInput.checked = oldInput.checked;\n                                } else {\n                                    newFormInput.value = oldInput.value;\n                                }\n                            }\n                        }\n                    } catch (err) {\n                        _didIteratorError2 = true;\n                        _iteratorError2 = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                                _iterator2.return();\n                            }\n                        } finally {\n                            if (_didIteratorError2) {\n                                throw _iteratorError2;\n                            }\n                        }\n                    }\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        }\n    }, {\n        key: \"getShortInputName\",\n        value: function getShortInputName(formInput) {\n            // e.g. free_product[name]\n            var formInputFullName = formInput.getAttribute('name');\n\n            var leftSquareBracketIndex = formInputFullName.indexOf('[');\n            var rightSquareBracketIndex = formInputFullName.indexOf(']');\n\n            // e.g name\n            return formInputFullName.substr(leftSquareBracketIndex, rightSquareBracketIndex);\n        }\n    }, {\n        key: \"getFormInputs\",\n        value: function getFormInputs(form) {\n            var inputs = Array.prototype.slice.call(form.getElementsByTagName(\"input\"));\n            var textAreas = Array.prototype.slice.call(form.getElementsByTagName(\"textarea\"));\n            var formName = form.getAttribute('name');\n            var formTextAreas = [];\n            var formInputs = [];\n\n            inputs.forEach(function (input) {\n                //check if the input contains id of the form\n                if (input.getAttribute(\"id\") && -1 !== input.getAttribute(\"id\").indexOf(formName)) {\n                    formInputs.push(input);\n                }\n            });\n\n            textAreas.forEach(function (input) {\n                //check if the input contains id of the form\n                if (input.getAttribute(\"id\") && -1 !== input.getAttribute(\"id\").indexOf(formName)) {\n                    formTextAreas.push(input);\n                }\n            });\n\n            //convert node list of textareas and push it to the end of inputs\n            return formInputs.concat(formTextAreas);\n        }\n    }]);\n\n    return FormChanger;\n}();\n\nexports.default = FormChanger;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvTGlicmFyaWVzL0Zvcm1DaGFuZ2VyLmpzPzM5N2EiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBKYWt1YiBvbiAwOS4wMi4xNi5cbiAqL1xuXG5pbXBvcnQgR2F0ZXdheSBmcm9tICd0cmluaXR5L0dhdGV3YXknO1xuXG4vLyBVc2VkIGZvciBzd2l0Y2hpbmcgc2ltaWxhciBmb3JtcyBhbmQgY29weWluZyBpdCdzIGRhdGEgZnJvbSBmb3JtIHRvIGZvcm1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1DaGFuZ2VyIHtcbiAgICAvKipcbiAgICAgKiBDYWxsIHRoZSBcInVybFwiIHRvIGdldCBhIGZvcm0gd2hpY2ggd2lsbCBiZSBpbnNlcnRlZCBpbnRvIFwicGFyZW50RWxlbWVudFwiLlxuICAgICAqIEFmdGVyIGluc2VydGluZyB0aGUgZm9ybSB0aGUgZGF0YSBmcm9tIG9sZCBmb3JtIGFyZSBjb3BpZWQgdG8gdGhlIG5ldyBmb3JtLlxuICAgICAqIFRoZSBcImFmdGVyRm9ybUNoYW5nZVwiIGNhbGxiYWNrIGlzIGNhbGxlZCBhZnRlciB0aGUgcHJvY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gIHBhcmVudEVsZW1lbnQgICAgRWxlbWVudCB3aGljaCB3aWxsIGNvbnRhaW4gdGhlIGZvcm0gd2hpY2ggd2lsbCBnZSBnZXQgZnJvbSB1cmxcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gICB1cmwgICAgICAgICAgICAgIFVybCB3aGljaCB3aWxsIGJlIHVzZWQgdG8gZ2V0IHRoZSBmb3JtXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gYWZ0ZXJGb3JtQ2hhbmdlICBGdW5jdGlvbiB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHJlZnJlc2hpbmcgaXMgZG9uZVxuICAgICAqL1xuICAgIHN0YXRpYyByZWZyZXNoRm9ybShwYXJlbnRFbGVtZW50LCB1cmwsIGFmdGVyRm9ybUNoYW5nZSkge1xuICAgICAgICAvL2NhbGwgYXBpIGFuZCBnZXQgZm9ybVxuICAgICAgICBHYXRld2F5LmdldCh1cmwsIHt9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIC8vc2F2ZSBkYXRhIGZyb20gb2xkIGZvcm1cbiAgICAgICAgICAgIGxldCBvbGRIdG1sID0gcGFyZW50RWxlbWVudC5pbm5lckhUTUw7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGFscmVhZHkgY29udGFpbnMgYSBmb3JtXG4gICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIGZvcm0gdG8gdGhlIG5ldyBmb3JtIGFuZCBjb3B5IHRoZSBkYXRhXG4gICAgICAgICAgICBpZiAob2xkSHRtbC5pbmNsdWRlcyhcIjxmb3JtXCIpKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9sZEZvcm0gPSBwYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZm9ybVwiKVswXTtcblxuICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuaW5uZXJIVE1MID0gcmVzcG9uc2UudGV4dDtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Rm9ybSA9IHBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJmb3JtXCIpWzBdO1xuXG4gICAgICAgICAgICAgICAgLy9jb3B5IGRhdGEgdG8gbmV3IGZvcm1cbiAgICAgICAgICAgICAgICBGb3JtQ2hhbmdlci5jb3B5Rm9ybURhdGEob2xkRm9ybSwgbmV3Rm9ybSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5pbm5lckhUTUwgPSByZXNwb25zZS50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhZnRlckZvcm1DaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhZnRlckZvcm1DaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGNvcHlGb3JtRGF0YShvbGRGb3JtLCBuZXdGb3JtKSB7XG4gICAgICAgIGxldCBvbGRJbnB1dHMgPSBGb3JtQ2hhbmdlci5nZXRGb3JtSW5wdXRzKG9sZEZvcm0pO1xuICAgICAgICBsZXQgbmV3SW5wdXRzID0gRm9ybUNoYW5nZXIuZ2V0Rm9ybUlucHV0cyhuZXdGb3JtKTtcblxuICAgICAgICBmb3IgKGxldCBuZXdGb3JtSW5wdXQgb2YgbmV3SW5wdXRzKSB7XG4gICAgICAgICAgICBsZXQgbmV3SW5wdXROYW1lID0gRm9ybUNoYW5nZXIuZ2V0U2hvcnRJbnB1dE5hbWUobmV3Rm9ybUlucHV0KTtcblxuICAgICAgICAgICAgZm9yIChsZXQgb2xkSW5wdXQgb2Ygb2xkSW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgLy9pZiB0aGUgaW5wdXQgbmFtZXMgYXJlIHRoZSBzYW1lXG4gICAgICAgICAgICAgICAgaWYgKG5ld0lucHV0TmFtZSAhPT0gXCJbX3Rva2VuXVwiICYmIG5ld0lucHV0TmFtZSA9PT0gRm9ybUNoYW5nZXIuZ2V0U2hvcnRJbnB1dE5hbWUob2xkSW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCdjaGVja2JveCcgPT09IG5ld0Zvcm1JbnB1dC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Rm9ybUlucHV0LmNoZWNrZWQgPSBvbGRJbnB1dC5jaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Rm9ybUlucHV0LnZhbHVlID0gb2xkSW5wdXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0U2hvcnRJbnB1dE5hbWUoZm9ybUlucHV0KSB7XG4gICAgICAgIC8vIGUuZy4gZnJlZV9wcm9kdWN0W25hbWVdXG4gICAgICAgIGxldCBmb3JtSW5wdXRGdWxsTmFtZSA9IGZvcm1JbnB1dC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcblxuICAgICAgICBsZXQgbGVmdFNxdWFyZUJyYWNrZXRJbmRleCA9IGZvcm1JbnB1dEZ1bGxOYW1lLmluZGV4T2YoJ1snKTtcbiAgICAgICAgbGV0IHJpZ2h0U3F1YXJlQnJhY2tldEluZGV4ID0gZm9ybUlucHV0RnVsbE5hbWUuaW5kZXhPZignXScpO1xuXG4gICAgICAgIC8vIGUuZyBuYW1lXG4gICAgICAgIHJldHVybiBmb3JtSW5wdXRGdWxsTmFtZS5zdWJzdHIobGVmdFNxdWFyZUJyYWNrZXRJbmRleCwgcmlnaHRTcXVhcmVCcmFja2V0SW5kZXgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRGb3JtSW5wdXRzKGZvcm0pIHtcbiAgICAgICAgbGV0IGlucHV0cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKSk7XG4gICAgICAgIGxldCB0ZXh0QXJlYXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIikpO1xuICAgICAgICBsZXQgZm9ybU5hbWUgPSBmb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICBsZXQgZm9ybVRleHRBcmVhcyA9IFtdO1xuICAgICAgICBsZXQgZm9ybUlucHV0cyA9IFtdO1xuXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0KXtcbiAgICAgICAgICAgIC8vY2hlY2sgaWYgdGhlIGlucHV0IGNvbnRhaW5zIGlkIG9mIHRoZSBmb3JtXG4gICAgICAgICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSAmJiAtMSAhPT0gaW5wdXQuZ2V0QXR0cmlidXRlKFwiaWRcIikuaW5kZXhPZihmb3JtTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmb3JtSW5wdXRzLnB1c2goaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0ZXh0QXJlYXMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCl7XG4gICAgICAgICAgICAvL2NoZWNrIGlmIHRoZSBpbnB1dCBjb250YWlucyBpZCBvZiB0aGUgZm9ybVxuICAgICAgICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFwiaWRcIikgJiYgLTEgIT09IGlucHV0LmdldEF0dHJpYnV0ZShcImlkXCIpLmluZGV4T2YoZm9ybU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZm9ybVRleHRBcmVhcy5wdXNoKGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9jb252ZXJ0IG5vZGUgbGlzdCBvZiB0ZXh0YXJlYXMgYW5kIHB1c2ggaXQgdG8gdGhlIGVuZCBvZiBpbnB1dHNcbiAgICAgICAgcmV0dXJuIGZvcm1JbnB1dHMuY29uY2F0KGZvcm1UZXh0QXJlYXMpO1xuICAgIH1cbn1cblxuXG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvdmVuaWNlLWpzL0xpYnJhcmllcy9Gb3JtQ2hhbmdlci5qcyIsInVuZGVmaW5lZFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBSUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7OztBQVNBO0FDQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWtCQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBMUZBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 492:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Controller2 = __webpack_require__(454);\n\nvar _Controller3 = _interopRequireDefault(_Controller2);\n\nvar _TrinityTab = __webpack_require__(468);\n\nvar _TrinityTab2 = _interopRequireDefault(_TrinityTab);\n\nvar _VeniceForm = __webpack_require__(455);\n\nvar _VeniceForm2 = _interopRequireDefault(_VeniceForm);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by Jakub Fajkus on 10.12.15.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ProductAccessController = function (_Controller) {\n    _inherits(ProductAccessController, _Controller);\n\n    function ProductAccessController() {\n        _classCallCheck(this, ProductAccessController);\n\n        return _possibleConstructorReturn(this, (ProductAccessController.__proto__ || Object.getPrototypeOf(ProductAccessController)).apply(this, arguments));\n    }\n\n    _createClass(ProductAccessController, [{\n        key: 'newAction',\n\n\n        /**\n         * New billing plan action\n         * @param $scope\n         */\n        value: function newAction($scope) {\n            //Attach VeniceForm\n            $scope.form = new _VeniceForm2.default($('form[name=\"product_access\"]')[0]);\n        }\n    }, {\n        key: 'tabsAction',\n        value: function tabsAction($scope) {\n            $scope.trinityTab = new _TrinityTab2.default();\n\n            //On tabs load\n            $scope.trinityTab.addListener('tab-load', function (e) {\n                var form = $('form', e.element)[0];\n                if (form) {\n                    $scope.veniceForms = $scope.veniceForms || {};\n                    $scope.veniceForms[e.id] = new _VeniceForm2.default(form);\n                }\n            });\n        }\n    }]);\n\n    return ProductAccessController;\n}(_Controller3.default);\n\nexports.default = ProductAccessController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvQ29udHJvbGxlcnMvUHJvZHVjdEFjY2Vzc0NvbnRyb2xsZXIuanM/YTk3ZCIsIndlYnBhY2s6Ly8vP2Q0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IEpha3ViIEZhamt1cyBvbiAxMC4xMi4xNS5cbiAqL1xuXG5pbXBvcnQgQ29udHJvbGxlciBmcm9tICd0cmluaXR5L0NvbnRyb2xsZXInO1xuaW1wb3J0IFRyaW5pdHlUYWIgZnJvbSAndHJpbml0eS9jb21wb25lbnRzL1RyaW5pdHlUYWInO1xuaW1wb3J0IFZlbmljZUZvcm0gZnJvbSAnLi4vTGlicmFyaWVzL1ZlbmljZUZvcm0nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9kdWN0QWNjZXNzQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xuXG4gICAgLyoqXG4gICAgICogTmV3IGJpbGxpbmcgcGxhbiBhY3Rpb25cbiAgICAgKiBAcGFyYW0gJHNjb3BlXG4gICAgICovXG4gICAgbmV3QWN0aW9uKCRzY29wZSkge1xuICAgICAgICAvL0F0dGFjaCBWZW5pY2VGb3JtXG4gICAgICAgICRzY29wZS5mb3JtID0gbmV3IFZlbmljZUZvcm0oJCgnZm9ybVtuYW1lPVwicHJvZHVjdF9hY2Nlc3NcIl0nKVswXSk7XG4gICAgfVxuXG4gICAgdGFic0FjdGlvbigkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLnRyaW5pdHlUYWIgPSBuZXcgVHJpbml0eVRhYigpO1xuXG4gICAgICAgIC8vT24gdGFicyBsb2FkXG4gICAgICAgICRzY29wZS50cmluaXR5VGFiLmFkZExpc3RlbmVyKCd0YWItbG9hZCcsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZm9ybSA9ICQoJ2Zvcm0nLCBlLmVsZW1lbnQpWzBdO1xuICAgICAgICAgICAgaWYoZm9ybSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZlbmljZUZvcm1zID0gJHNjb3BlLnZlbmljZUZvcm1zIHx8IHt9O1xuICAgICAgICAgICAgICAgICRzY29wZS52ZW5pY2VGb3Jtc1tlLmlkXSA9IG5ldyBWZW5pY2VGb3JtKGZvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG5vZGVfbW9kdWxlcy92ZW5pY2UtanMvQ29udHJvbGxlcnMvUHJvZHVjdEFjY2Vzc0NvbnRyb2xsZXIuanMiLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUlBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7OztBQVBBOzs7O0FBUUE7Ozs7Ozs7Ozs7Ozs7QUFFQTs7OztBQUlBO0FDQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQXRCQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 493:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _Gateway = __webpack_require__(469);\n\nvar _Gateway2 = _interopRequireDefault(_Gateway);\n\nvar _VeniceForm = __webpack_require__(455);\n\nvar _VeniceForm2 = _interopRequireDefault(_VeniceForm);\n\nvar _TrinityTab = __webpack_require__(468);\n\nvar _TrinityTab2 = _interopRequireDefault(_TrinityTab);\n\nvar _GlobalLib = __webpack_require__(471);\n\nvar _Services = __webpack_require__(467);\n\nvar _Controller2 = __webpack_require__(454);\n\nvar _Controller3 = _interopRequireDefault(_Controller2);\n\nvar _VeniceGridBuilder = __webpack_require__(475);\n\nvar _VeniceGridBuilder2 = _interopRequireDefault(_VeniceGridBuilder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by Jakub Fajkus on 10.12.15.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ProductController = function (_Controller) {\n    _inherits(ProductController, _Controller);\n\n    function ProductController() {\n        _classCallCheck(this, ProductController);\n\n        return _possibleConstructorReturn(this, (ProductController.__proto__ || Object.getPrototypeOf(ProductController)).apply(this, arguments));\n    }\n\n    _createClass(ProductController, [{\n        key: 'indexAction',\n        value: function indexAction($scope) {\n            $scope.productGrid = _VeniceGridBuilder2.default.build(_jquery2.default.id('product-grid'), this.request.query);\n        }\n    }, {\n        key: 'newAction',\n        value: function newAction($scope) {\n            $scope.form = new _VeniceForm2.default((0, _jquery2.default)('form[name=\"free_product\"]')[0]);\n            ProductController._handleHandleGeneration();\n        }\n    }, {\n        key: 'tabsAction',\n        value: function tabsAction($scope) {\n            var _this2 = this;\n\n            $scope.trinityTab = new _TrinityTab2.default();\n            var unlisteners = [];\n            //On tabs load\n            $scope.trinityTab.addListener('tab-load', function (e) {\n\n                var form = (0, _jquery2.default)('form', e.element)[0];\n                if (form) {\n                    $scope.veniceForms = $scope.veniceForms || {};\n                    $scope.veniceForms[e.id] = new _VeniceForm2.default(form);\n                }\n\n                switch (e.id) {\n                    // Edit\n                    case 'tab2':\n                        {\n                            unlisteners.push(ProductController._handleHandleGeneration());\n\n                            $scope.veniceForms['tab2'].success(function () {\n                                $scope.trinityTab.reload('tab1');\n                            });\n                        }break;\n                    case 'tab3':\n                        {\n                            var container = _jquery2.default.id('content-grid');\n                            if (container) {\n                                $scope.productGrid = _VeniceGridBuilder2.default.build(container, _this2.request.query);\n                            }\n                        }break;\n                    case 'tab4':\n                        {\n                            var _container = _jquery2.default.id('billing-plan-grid');\n                            if (_container) {\n                                $scope.bilingPlanGrid = _VeniceGridBuilder2.default.build(_container, _this2.request.query);\n                            }\n\n                            window.setAsDefault = function (id) {\n                                //this way work in grids so i let it this way\n                                var $currentTarget = (0, _jquery2.default)('#' + id),\n                                    billingPlanId = id.substr(id.lastIndexOf('-') + 1),\n                                    $loadingIcon = (0, _jquery2.default)('#loading-icon-for-default-id-' + billingPlanId);\n\n                                $currentTarget.css('display', 'none');\n                                $loadingIcon.css('display', 'block');\n\n                                // Request\n                                _Gateway2.default.putJSON($currentTarget.attr('data-href'), null, function (response) {\n                                    var pins = (0, _jquery2.default)('.set-default');\n                                    _lodash2.default.each((0, _jquery2.default)('.is-default'), function (el, i) {\n                                        if (el.style.display === 'block') {\n                                            el.style.display = 'none';\n                                            pins[i].style.display = 'block';\n                                            return false;\n                                        }\n                                    });\n\n                                    (0, _jquery2.default)('#is-default-id-' + billingPlanId).css('display', 'block');\n\n                                    (0, _Services.messageService)(response.body.message, 'success');\n                                    $scope.trinityTab.reload('tab1');\n                                }, function (error) {\n                                    (0, _Services.messageService)(error.response.body.message, 'warning');\n                                    $currentTarget.css('display', 'block');\n                                });\n                                $loadingIcon.css('display', 'none');\n                            };\n                        }break;\n                    // TODO: WHAT IS TAB 5 ?\n                    case 'tab5':\n                        {\n                            $scope.productGrid = _VeniceGridBuilder2.default.build(_jquery2.default.id('blog-article-grid'), _this2.request.query);\n                        }break;\n                }\n            });\n\n            $scope.trinityTab.addListener('tab-unload', function (e) {\n                switch (e.id) {\n                    // Edit\n                    case 'tab2':\n                        {\n                            _lodash2.default.each(unlisteners, function (fn) {\n                                return fn();\n                            });\n                        }break;\n                    default:\n                        break;\n                }\n                // All\n                if ($scope.veniceForms[e.id]) {\n                    $scope.veniceForms[e.id].detach();\n                }\n            });\n        }\n\n        /**\n         * TODO: @RichardBures\n         * @param $scope\n         */\n\n    }, {\n        key: 'newContentProductAction',\n        value: function newContentProductAction($scope) {\n            $scope.form = new _VeniceForm2.default((0, _jquery2.default)('form[name=\"content_product_type_with_hidden_product\"]')[0]);\n        }\n    }], [{\n        key: '_handleHandleGeneration',\n        value: function _handleHandleGeneration() {\n            return (0, _GlobalLib.handleHandleGeneration)((0, _jquery2.default)('#product_form').attr('data-slugify'), _jquery2.default.id('free_product_name'), _jquery2.default.id('free_product_handle'));\n        }\n    }]);\n\n    return ProductController;\n}(_Controller3.default);\n\nexports.default = ProductController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvQ29udHJvbGxlcnMvUHJvZHVjdENvbnRyb2xsZXIuanM/ODAwMCIsIndlYnBhY2s6Ly8vP2Q0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IEpha3ViIEZhamt1cyBvbiAxMC4xMi4xNS5cbiAqL1xuXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBHYXRld2F5IGZyb20gJ3RyaW5pdHkvR2F0ZXdheSc7XG5pbXBvcnQgVmVuaWNlRm9ybSBmcm9tICcuLi9MaWJyYXJpZXMvVmVuaWNlRm9ybSc7XG5pbXBvcnQgVHJpbml0eVRhYiBmcm9tICd0cmluaXR5L2NvbXBvbmVudHMvVHJpbml0eVRhYic7XG5pbXBvcnQge2hhbmRsZUhhbmRsZUdlbmVyYXRpb259IGZyb20gJy4uL0xpYnJhcmllcy9HbG9iYWxMaWInO1xuaW1wb3J0IHttZXNzYWdlU2VydmljZX0gZnJvbSAndHJpbml0eS9TZXJ2aWNlcyc7XG5pbXBvcnQgQ29udHJvbGxlciBmcm9tICd0cmluaXR5L0NvbnRyb2xsZXInO1xuaW1wb3J0IEdyaWRCdWlsZGVyIGZyb20gJy4uL0xpYnJhcmllcy9WZW5pY2VHcmlkQnVpbGRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2R1Y3RDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XG5cbiAgICBpbmRleEFjdGlvbigkc2NvcGUpIHtcbiAgICAgICAkc2NvcGUucHJvZHVjdEdyaWQgPSBHcmlkQnVpbGRlci5idWlsZCgkLmlkKCdwcm9kdWN0LWdyaWQnKSwgdGhpcy5yZXF1ZXN0LnF1ZXJ5KTtcbiAgICB9XG5cblxuICAgIG5ld0FjdGlvbigkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLmZvcm0gPSBuZXcgVmVuaWNlRm9ybSgkKCdmb3JtW25hbWU9XCJmcmVlX3Byb2R1Y3RcIl0nKVswXSk7XG4gICAgICAgIFByb2R1Y3RDb250cm9sbGVyLl9oYW5kbGVIYW5kbGVHZW5lcmF0aW9uKCk7XG4gICAgfVxuXG4gICAgdGFic0FjdGlvbigkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLnRyaW5pdHlUYWIgPSBuZXcgVHJpbml0eVRhYigpO1xuICAgICAgICBsZXQgdW5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgLy9PbiB0YWJzIGxvYWRcbiAgICAgICAgJHNjb3BlLnRyaW5pdHlUYWIuYWRkTGlzdGVuZXIoJ3RhYi1sb2FkJywgKGUpID0+IHtcblxuICAgICAgICAgICAgbGV0IGZvcm0gPSAkKCdmb3JtJywgZS5lbGVtZW50KVswXTtcbiAgICAgICAgICAgIGlmKGZvcm0pe1xuICAgICAgICAgICAgICAgICRzY29wZS52ZW5pY2VGb3JtcyA9ICRzY29wZS52ZW5pY2VGb3JtcyB8fCB7fTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmVuaWNlRm9ybXNbZS5pZF0gPSBuZXcgVmVuaWNlRm9ybShmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoKGUuaWQpe1xuICAgICAgICAgICAgICAgIC8vIEVkaXRcbiAgICAgICAgICAgICAgICBjYXNlICd0YWIyJzoge1xuICAgICAgICAgICAgICAgICAgICB1bmxpc3RlbmVycy5wdXNoKFByb2R1Y3RDb250cm9sbGVyLl9oYW5kbGVIYW5kbGVHZW5lcmF0aW9uKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS52ZW5pY2VGb3Jtc1sndGFiMiddLnN1Y2Nlc3MoKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50cmluaXR5VGFiLnJlbG9hZCgndGFiMScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RhYjMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250YWluZXIgPSAkLmlkKCdjb250ZW50LWdyaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoY29udGFpbmVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0R3JpZCA9IEdyaWRCdWlsZGVyLmJ1aWxkKGNvbnRhaW5lciwgdGhpcy5yZXF1ZXN0LnF1ZXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGFiNCc6e1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGFpbmVyID0gJC5pZCgnYmlsbGluZy1wbGFuLWdyaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoY29udGFpbmVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5iaWxpbmdQbGFuR3JpZCA9IEdyaWRCdWlsZGVyLmJ1aWxkKGNvbnRhaW5lciwgdGhpcy5yZXF1ZXN0LnF1ZXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRBc0RlZmF1bHQgPSBmdW5jdGlvbihpZCl7IC8vdGhpcyB3YXkgd29yayBpbiBncmlkcyBzbyBpIGxldCBpdCB0aGlzIHdheVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0ICRjdXJyZW50VGFyZ2V0ID0gJCgnIycraWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbGxpbmdQbGFuSWQgPSBpZC5zdWJzdHIoaWQubGFzdEluZGV4T2YoJy0nKSArIDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsb2FkaW5nSWNvbiA9ICQoJyNsb2FkaW5nLWljb24tZm9yLWRlZmF1bHQtaWQtJyArIGJpbGxpbmdQbGFuSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVudFRhcmdldC5jc3MgKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2FkaW5nSWNvbi5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgR2F0ZXdheS5wdXRKU09OKCRjdXJyZW50VGFyZ2V0LmF0dHIoJ2RhdGEtaHJlZicpLCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGlucyA9ICQoJy5zZXQtZGVmYXVsdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmVhY2goJCgnLmlzLWRlZmF1bHQnKSwgKGVsLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbC5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpbnNbaV0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGAjaXMtZGVmYXVsdC1pZC0ke2JpbGxpbmdQbGFuSWR9YCkuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVNlcnZpY2UocmVzcG9uc2UuYm9keS5tZXNzYWdlLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50cmluaXR5VGFiLnJlbG9hZCgndGFiMScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VTZXJ2aWNlKGVycm9yLnJlc3BvbnNlLmJvZHkubWVzc2FnZSwgJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRUYXJnZXQuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2FkaW5nSWNvbi5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogV0hBVCBJUyBUQUIgNSA/XG4gICAgICAgICAgICAgICAgY2FzZSAndGFiNSc6e1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdEdyaWQgPSBHcmlkQnVpbGRlci5idWlsZCgkLmlkKCdibG9nLWFydGljbGUtZ3JpZCcpLCB0aGlzLnJlcXVlc3QucXVlcnkpO1xuICAgICAgICAgICAgICAgIH0gYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS50cmluaXR5VGFiLmFkZExpc3RlbmVyKCd0YWItdW5sb2FkJywgKGUpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaChlLmlkKXtcbiAgICAgICAgICAgICAgICAvLyBFZGl0XG4gICAgICAgICAgICAgICAgY2FzZSAndGFiMic6IHtcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHVubGlzdGVuZXJzLCBmbiA9PiBmbigpKTtcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQgOiBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFsbFxuICAgICAgICAgICAgaWYoJHNjb3BlLnZlbmljZUZvcm1zW2UuaWRdKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmVuaWNlRm9ybXNbZS5pZF0uZGV0YWNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRPRE86IEBSaWNoYXJkQnVyZXNcbiAgICAgKiBAcGFyYW0gJHNjb3BlXG4gICAgICovXG4gICAgbmV3Q29udGVudFByb2R1Y3RBY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5mb3JtID0gbmV3IFZlbmljZUZvcm0oJCgnZm9ybVtuYW1lPVwiY29udGVudF9wcm9kdWN0X3R5cGVfd2l0aF9oaWRkZW5fcHJvZHVjdFwiXScpWzBdKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX2hhbmRsZUhhbmRsZUdlbmVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVIYW5kbGVHZW5lcmF0aW9uKFxuICAgICAgICAgICAgJCgnI3Byb2R1Y3RfZm9ybScpLmF0dHIoJ2RhdGEtc2x1Z2lmeScpLFxuICAgICAgICAgICAgJC5pZCgnZnJlZV9wcm9kdWN0X25hbWUnKSxcbiAgICAgICAgICAgICQuaWQoJ2ZyZWVfcHJvZHVjdF9oYW5kbGUnKSk7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBub2RlX21vZHVsZXMvdmVuaWNlLWpzL0NvbnRyb2xsZXJzL1Byb2R1Y3RDb250cm9sbGVyLmpzIiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFJQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7OztBQWJBOzs7O0FBY0E7Ozs7Ozs7Ozs7O0FBRUE7QUNDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQTFEQTtBQTREQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUlBOzs7Ozs7QUFsSEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 494:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _Controller2 = __webpack_require__(454);\n\nvar _Controller3 = _interopRequireDefault(_Controller2);\n\nvar _TrinityTab = __webpack_require__(468);\n\nvar _TrinityTab2 = _interopRequireDefault(_TrinityTab);\n\nvar _VeniceForm = __webpack_require__(455);\n\nvar _VeniceForm2 = _interopRequireDefault(_VeniceForm);\n\nvar _VeniceGridBuilder = __webpack_require__(475);\n\nvar _VeniceGridBuilder2 = _interopRequireDefault(_VeniceGridBuilder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by Jakub Fajkus on 28.12.15.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ContetntController = function (_Controller) {\n    _inherits(ContetntController, _Controller);\n\n    function ContetntController() {\n        _classCallCheck(this, ContetntController);\n\n        return _possibleConstructorReturn(this, (ContetntController.__proto__ || Object.getPrototypeOf(ContetntController)).apply(this, arguments));\n    }\n\n    _createClass(ContetntController, [{\n        key: 'indexAction',\n        value: function indexAction($scope) {\n            $scope.productGrid = _VeniceGridBuilder2.default.build(_jquery2.default.id('user-grid'), this.request.query);\n        }\n\n        /**\n         * @param $scope\n         */\n\n    }, {\n        key: 'tabsAction',\n        value: function tabsAction($scope) {\n            var _this2 = this;\n\n            //Tell trinity there is tab to be loaded\n            $scope.trinityTab = new _TrinityTab2.default();\n\n            //On tabs load\n            $scope.trinityTab.addListener('tab-load', function (e) {\n                var form = (0, _jquery2.default)('form', e.element)[0];\n                if (form) {\n                    $scope.veniceForms = $scope.veniceForms || {};\n                    $scope.veniceForms[e.id] = new _VeniceForm2.default(form);\n                }\n                if (e.id === 'tab2') {\n                    $scope.veniceForms['tab2'].success(function () {\n                        $scope.trinityTab.reload('tab1');\n                    });\n                } else if (e.id === 'tab3') {\n                    var gridConf = _jquery2.default.id('product-access-grid');\n                    if (gridConf) {\n                        $scope.userGrid = _VeniceGridBuilder2.default.build(gridConf, _this2.request.query);\n                    }\n                }\n            });\n        }\n    }]);\n\n    return ContetntController;\n}(_Controller3.default);\n\nexports.default = ContetntController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvQ29udHJvbGxlcnMvVXNlckNvbnRyb2xsZXIuanM/Y2IxNyIsIndlYnBhY2s6Ly8vP2Q0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IEpha3ViIEZhamt1cyBvbiAyOC4xMi4xNS5cbiAqL1xuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAndHJpbml0eS9Db250cm9sbGVyJztcbmltcG9ydCBUcmluaXR5VGFiIGZyb20gJ3RyaW5pdHkvY29tcG9uZW50cy9UcmluaXR5VGFiJztcbmltcG9ydCBWZW5pY2VGb3JtIGZyb20gJy4uL0xpYnJhcmllcy9WZW5pY2VGb3JtJztcbmltcG9ydCBHcmlkQnVpbGRlciBmcm9tICcuLi9MaWJyYXJpZXMvVmVuaWNlR3JpZEJ1aWxkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZXRudENvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcblxuICAgIGluZGV4QWN0aW9uKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUucHJvZHVjdEdyaWQgPSBHcmlkQnVpbGRlci5idWlsZCgkLmlkKCd1c2VyLWdyaWQnKSwgdGhpcy5yZXF1ZXN0LnF1ZXJ5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gJHNjb3BlXG4gICAgICovXG4gICAgdGFic0FjdGlvbigkc2NvcGUpIHtcbiAgICAgICAgLy9UZWxsIHRyaW5pdHkgdGhlcmUgaXMgdGFiIHRvIGJlIGxvYWRlZFxuICAgICAgICAkc2NvcGUudHJpbml0eVRhYiA9IG5ldyBUcmluaXR5VGFiKCk7XG5cbiAgICAgICAgLy9PbiB0YWJzIGxvYWRcbiAgICAgICAgJHNjb3BlLnRyaW5pdHlUYWIuYWRkTGlzdGVuZXIoJ3RhYi1sb2FkJywgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCBmb3JtID0gJCgnZm9ybScsIGUuZWxlbWVudClbMF07XG4gICAgICAgICAgICBpZihmb3JtKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmVuaWNlRm9ybXMgPSAkc2NvcGUudmVuaWNlRm9ybXMgfHwge307XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZlbmljZUZvcm1zW2UuaWRdID0gbmV3IFZlbmljZUZvcm0oZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihlLmlkID09PSAndGFiMicpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmVuaWNlRm9ybXNbJ3RhYjInXS5zdWNjZXNzKCgpPT57XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50cmluaXR5VGFiLnJlbG9hZCgndGFiMScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmlkID09PSAndGFiMycpIHtcbiAgICAgICAgICAgICAgICBsZXQgZ3JpZENvbmYgPSAkLmlkKCdwcm9kdWN0LWFjY2Vzcy1ncmlkJyk7XG4gICAgICAgICAgICAgICAgaWYoZ3JpZENvbmYpe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlckdyaWQgPSBHcmlkQnVpbGRlci5idWlsZChncmlkQ29uZiwgdGhpcy5yZXF1ZXN0LnF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9Db250cm9sbGVycy9Vc2VyQ29udHJvbGxlci5qcyIsInVuZGVmaW5lZFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBSUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7O0FBVEE7Ozs7QUFVQTs7Ozs7Ozs7Ozs7QUFFQTtBQ0NBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBL0JBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 495:
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Created by fisa on 11/3/15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _jquery = __webpack_require__(24);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _Controller2 = __webpack_require__(454);\n\nvar _Controller3 = _interopRequireDefault(_Controller2);\n\nvar _VeniceForm = __webpack_require__(455);\n\nvar _VeniceForm2 = _interopRequireDefault(_VeniceForm);\n\nvar _TrinityTab = __webpack_require__(468);\n\nvar _TrinityTab2 = _interopRequireDefault(_TrinityTab);\n\nvar _VeniceGridBuilder = __webpack_require__(475);\n\nvar _VeniceGridBuilder2 = _interopRequireDefault(_VeniceGridBuilder);\n\nvar _GlobalLib = __webpack_require__(471);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * tab id to element query map\n * @type {{}}\n */\nvar IDMAP = {\n    '1': 'exception-grid',\n    '2': 'notification-grid',\n    '3': 'ipn-grid',\n    '4': 'entity-action-grid',\n    '5': 'access-log-grid',\n    '6': 'payment-error-grid',\n    '7': 'ban-log-grid',\n    '8': 'message-log-grid'\n};\n\nvar LoggerController = function (_Controller) {\n    _inherits(LoggerController, _Controller);\n\n    function LoggerController() {\n        _classCallCheck(this, LoggerController);\n\n        return _possibleConstructorReturn(this, (LoggerController.__proto__ || Object.getPrototypeOf(LoggerController)).apply(this, arguments));\n    }\n\n    _createClass(LoggerController, [{\n        key: 'tabAction',\n\n\n        /**\n         * Tab action\n         * @param $scope\n         */\n        value: function tabAction($scope) {\n            var query = _lodash2.default.clone(this.request.query);\n\n            $scope.trinityTab = new _TrinityTab2.default();\n            $scope.trinityTab.addListener('tab-load', function (e) {\n                var form = (0, _jquery2.default)('form', e.element)[0];\n                if (form) {\n                    $scope.veniceForms = $scope.veniceForms || {};\n                    $scope.veniceForms[e.id] = new _VeniceForm2.default(form);\n                }\n                // Little trick to omit both switch and if statements\n                // replaces bellow code\n                var gridID = IDMAP[e.id.substring(3)];\n                var gridContainer = _jquery2.default.id(gridID);\n                if (gridContainer) {\n                    $scope[gridID] = _VeniceGridBuilder2.default.build(gridContainer, query);\n                } else {\n                    console.warn('Missing grid container!');\n                }\n            });\n\n            // connect Sidebar navigation\n            (0, _GlobalLib.connectTrinityTabMenu)($scope['logger-menu'], $scope.trinityTab);\n        }\n    }]);\n\n    return LoggerController;\n}(_Controller3.default);\n\nexports.default = LoggerController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL25vZGVfbW9kdWxlcy92ZW5pY2UtanMvQ29udHJvbGxlcnMvTG9nZ2VyQ29udHJvbGxlci5qcz9kMmY2Iiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgZmlzYSBvbiAxMS8zLzE1LlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAndHJpbml0eS9Db250cm9sbGVyJztcbmltcG9ydCBWZW5pY2VGb3JtIGZyb20gJy4uL0xpYnJhcmllcy9WZW5pY2VGb3JtJztcbmltcG9ydCBUcmluaXR5VGFiIGZyb20gJ3RyaW5pdHkvY29tcG9uZW50cy9UcmluaXR5VGFiJztcbmltcG9ydCBHcmlkQnVpbGRlciBmcm9tICcuLi9MaWJyYXJpZXMvVmVuaWNlR3JpZEJ1aWxkZXInO1xuaW1wb3J0IHtjb25uZWN0VHJpbml0eVRhYk1lbnV9IGZyb20gJy4uL0xpYnJhcmllcy9HbG9iYWxMaWInO1xuXG4vKipcbiAqIHRhYiBpZCB0byBlbGVtZW50IHF1ZXJ5IG1hcFxuICogQHR5cGUge3t9fVxuICovXG5jb25zdCBJRE1BUCA9IHtcbiAgICAnMSc6J2V4Y2VwdGlvbi1ncmlkJyxcbiAgICAnMic6J25vdGlmaWNhdGlvbi1ncmlkJyxcbiAgICAnMyc6J2lwbi1ncmlkJyxcbiAgICAnNCc6J2VudGl0eS1hY3Rpb24tZ3JpZCcsXG4gICAgJzUnOidhY2Nlc3MtbG9nLWdyaWQnLFxuICAgICc2JzoncGF5bWVudC1lcnJvci1ncmlkJyxcbiAgICAnNyc6J2Jhbi1sb2ctZ3JpZCcsXG4gICAgJzgnOidtZXNzYWdlLWxvZy1ncmlkJ1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9nZ2VyQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXJ7XG5cbiAgICAvKipcbiAgICAgKiBUYWIgYWN0aW9uXG4gICAgICogQHBhcmFtICRzY29wZVxuICAgICAqL1xuICAgIHRhYkFjdGlvbigkc2NvcGUpe1xuICAgICAgICBsZXQgcXVlcnkgPSBfLmNsb25lKHRoaXMucmVxdWVzdC5xdWVyeSk7XG5cbiAgICAgICAgJHNjb3BlLnRyaW5pdHlUYWIgPSBuZXcgVHJpbml0eVRhYigpO1xuICAgICAgICAkc2NvcGUudHJpbml0eVRhYi5hZGRMaXN0ZW5lcigndGFiLWxvYWQnLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGxldCBmb3JtID0gJCgnZm9ybScsIGUuZWxlbWVudClbMF07XG4gICAgICAgICAgICBpZiAoZm9ybSkge1xuICAgICAgICAgICAgICAgICRzY29wZS52ZW5pY2VGb3JtcyA9ICRzY29wZS52ZW5pY2VGb3JtcyB8fCB7fTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmVuaWNlRm9ybXNbZS5pZF0gPSBuZXcgVmVuaWNlRm9ybShmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIExpdHRsZSB0cmljayB0byBvbWl0IGJvdGggc3dpdGNoIGFuZCBpZiBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAvLyByZXBsYWNlcyBiZWxsb3cgY29kZVxuICAgICAgICAgICAgbGV0IGdyaWRJRCA9IElETUFQW2UuaWQuc3Vic3RyaW5nKDMpXTtcbiAgICAgICAgICAgIGxldCBncmlkQ29udGFpbmVyID0gJC5pZChncmlkSUQpO1xuICAgICAgICAgICAgaWYoZ3JpZENvbnRhaW5lcil7XG4gICAgICAgICAgICAgICAgJHNjb3BlW2dyaWRJRF0gPSBHcmlkQnVpbGRlci5idWlsZChncmlkQ29udGFpbmVyLCBxdWVyeSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWlzc2luZyBncmlkIGNvbnRhaW5lciEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gY29ubmVjdCBTaWRlYmFyIG5hdmlnYXRpb25cbiAgICAgICAgY29ubmVjdFRyaW5pdHlUYWJNZW51KCRzY29wZVsnbG9nZ2VyLW1lbnUnXSwgJHNjb3BlLnRyaW5pdHlUYWIpO1xuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbm9kZV9tb2R1bGVzL3ZlbmljZS1qcy9Db250cm9sbGVycy9Mb2dnZXJDb250cm9sbGVyLmpzIiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6IkFBQUE7OztBQUdBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFVQTs7Ozs7Ozs7Ozs7OztBQ0VBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUE3QkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 496:
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Controller2 = __webpack_require__(454);\n\nvar _Controller3 = _interopRequireDefault(_Controller2);\n\nvar _Gateway = __webpack_require__(469);\n\nvar _Gateway2 = _interopRequireDefault(_Gateway);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by Richard on 27.06.16.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ExampleController = function (_Controller) {\n    _inherits(ExampleController, _Controller);\n\n    function ExampleController() {\n        _classCallCheck(this, ExampleController);\n\n        return _possibleConstructorReturn(this, (ExampleController.__proto__ || Object.getPrototypeOf(ExampleController)).apply(this, arguments));\n    }\n\n    _createClass(ExampleController, [{\n        key: 'newAction',\n        value: function newAction($scope) {\n            // your JS\n        }\n    }, {\n        key: 'tabsAction',\n        value: function tabsAction($scope) {\n            // your JS\n        }\n    }]);\n\n    return ExampleController;\n}(_Controller3.default);\n\nexports.default = ExampleController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2FwcC9Db250cm9sbGVycy9FeGFtcGxlQ29udHJvbGxlci5qcz9mNGJkIiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgUmljaGFyZCBvbiAyNy4wNi4xNi5cbiAqL1xuXG5pbXBvcnQgQ29udHJvbGxlciBmcm9tICd0cmluaXR5L0NvbnRyb2xsZXInO1xuaW1wb3J0IEdhdGV3YXkgZnJvbSAndHJpbml0eS9HYXRld2F5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhhbXBsZUNvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcblxuICAgIG5ld0FjdGlvbigkc2NvcGUpIHtcbiAgICAgICAgLy8geW91ciBKU1xuICAgIH1cblxuICAgIHRhYnNBY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgIC8vIHlvdXIgSlNcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9Db250cm9sbGVycy9FeGFtcGxlQ29udHJvbGxlci5qcyIsInVuZGVmaW5lZFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBSUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7O0FBTkE7Ozs7QUFPQTs7Ozs7Ozs7Ozs7QUFFQTtBQ0NBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7O0FBUkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 497:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(process) {/**\n * Created by fisa on 11/1/15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _Router = __webpack_require__(498);\n\nvar _Router2 = _interopRequireDefault(_Router);\n\nvar _Controller = __webpack_require__(454);\n\nvar _Controller2 = _interopRequireDefault(_Controller);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultSettings = {\n    attributeName: 'data-ng-scope'\n};\n\n/**\n * Represents application, provides main control over running js\n */\n\nvar App = function () {\n    function App(routes, controllers, settings) {\n        _classCallCheck(this, App);\n\n        //Settings FIRST !\n        this.settings = _lodash2.default.defaultsDeep(settings || {}, defaultSettings);\n\n        this.routes = routes;\n        this.controllers = controllers;\n        this.router = new _Router2.default(routes);\n        // this.global = null;\n        this.activeController = null;\n        this.preBootScripts = [];\n\n        // This way $scope property cannot be reassigned\n        Object.defineProperty(this, '$scope', {\n            value: {}\n        });\n\n        /** Try to find initial scope **/\n        _lodash2.default.extend(this.$scope, this.parseScope());\n    }\n\n    /**\n     * Kick up application\n     * @param [successCallback] {Function} optional success callback\n     * @param [errorCallback] {Function} optional error callback\n     * @returns {boolean}\n     */\n\n\n    _createClass(App, [{\n        key: 'start',\n        value: function start(successCallback, errorCallback) {\n            var _this = this;\n\n            //super cool feature\n            _lodash2.default.find(this.preBootScripts, function (script) {\n                return script(_this.$scope);\n            });\n\n            /**\n             * Active controller\n             */\n            var controllerInfo = this.router.findController();\n            if (_lodash2.default.isNull(controllerInfo)) {\n                return this.finishCallback(false, successCallback);\n            }\n\n            var _controllerInfo$actio = controllerInfo.action.split('.');\n\n            var _controllerInfo$actio2 = _slicedToArray(_controllerInfo$actio, 2);\n\n            var name = _controllerInfo$actio2[0];\n            var action = _controllerInfo$actio2[1];\n\n\n            if (!name) {\n                var err = new Error('No Controller defined! did you forget to define controller in routes?');\n                if (errorCallback) {\n                    return errorCallback(err);\n                }\n                throw err;\n            }\n\n            // Load controller\n            name += 'Controller';\n            action = (action || 'index') + 'Action';\n\n            // Create new active controller instance\n            if (!this.controllers.hasOwnProperty(name)) {\n                throw new Error('Controller ' + name + ' does not exist, did you forget to run \"buildControllers.js\" script?' + ' or did you write correct routes?');\n            }\n\n            /** Create and Set up controller instance **/\n            var instance = new this.controllers[name](name);\n            if (!(instance instanceof _Controller2.default)) {\n                throw new Error(name + ' does not inherit from \"Controller\" class!');\n            }\n\n            instance._scope = this.$scope;\n            instance._app = this;\n            instance.request = controllerInfo.request;\n            this.activeController = instance;\n\n            /** Run **/\n            if (instance[action]) {\n                instance.beforeAction(this.$scope);\n                instance[action](this.$scope);\n                instance.afterAction(this.$scope);\n            } else {\n                var _err = new Error('Action \"' + action + '\" doesn\\'t exists');\n                if (errorCallback) {\n                    return errorCallback(_err);\n                }\n                throw _err;\n            }\n            return this.finishCallback(true, successCallback);\n        }\n\n        /**\n         * add script befor launching of app\n         * @param func {function} if true is returned => lounch app (skip other pre-scripts)\n         */\n\n    }, {\n        key: 'addPreBOOTScript',\n        value: function addPreBOOTScript(func) {\n            this.preBootScripts.push(func);\n        }\n\n        /**\n         * Finishing success callback\n         * @param isController {boolean}\n         * @param callback {function}\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'finishCallback',\n        value: function finishCallback(isController, callback) {\n            var message = isController ? this.activeController.name + ' loaded.' : 'Route does\\'t have any controller.';\n\n            if (process.env.NODE_ENV !== 'production') {\n                console.log(message);\n            }\n            if (callback) {\n                callback(this.activeController || false);\n            }\n            return isController;\n        }\n\n        /**\n         * Search in \"root\" element for every element with attribute defined in settings\n         * @param root\n         * @returns {{}} - bag with {attName.value:element}\n         */\n\n    }, {\n        key: 'parseScope',\n        value: function parseScope(root) {\n            root = root || window.document;\n            var attName = defaultSettings.attributeName,\n                elements = root.querySelectorAll('[' + attName + ']');\n\n            var bag = {};\n            _lodash2.default.each(elements, function (el, i) {\n                var name = el.getAttribute(attName) || '' + el.name + i;\n                if (_lodash2.default.isUndefined(bag[name])) {\n                    bag[name] = el;\n                } else {\n                    if (_lodash2.default.isArray(bag[name])) {\n                        bag[name].push(el);\n                    } else {\n                        // crate new array\n                        bag[name] = [bag[name], el];\n                    }\n                }\n            });\n            return bag;\n        }\n    }]);\n\n    return App;\n}();\n\nexports.default = App;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(31)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L0FwcC5qcz84YmJiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBmaXNhIG9uIDExLzEvMTUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfbG9kYXNoID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbnZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cbnZhciBfUm91dGVyID0gcmVxdWlyZSgnLi9Sb3V0ZXInKTtcblxudmFyIF9Sb3V0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUm91dGVyKTtcblxudmFyIF9Db250cm9sbGVyID0gcmVxdWlyZSgnLi9Db250cm9sbGVyLmpzJyk7XG5cbnZhciBfQ29udHJvbGxlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db250cm9sbGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIGRlZmF1bHRTZXR0aW5ncyA9IHtcbiAgICBhdHRyaWJ1dGVOYW1lOiAnZGF0YS1uZy1zY29wZSdcbn07XG5cbi8qKlxuICogUmVwcmVzZW50cyBhcHBsaWNhdGlvbiwgcHJvdmlkZXMgbWFpbiBjb250cm9sIG92ZXIgcnVubmluZyBqc1xuICovXG5cbnZhciBBcHAgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXBwKHJvdXRlcywgY29udHJvbGxlcnMsIHNldHRpbmdzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcHApO1xuXG4gICAgICAgIC8vU2V0dGluZ3MgRklSU1QgIVxuICAgICAgICB0aGlzLnNldHRpbmdzID0gX2xvZGFzaDIuZGVmYXVsdC5kZWZhdWx0c0RlZXAoc2V0dGluZ3MgfHwge30sIGRlZmF1bHRTZXR0aW5ncyk7XG5cbiAgICAgICAgdGhpcy5yb3V0ZXMgPSByb3V0ZXM7XG4gICAgICAgIHRoaXMuY29udHJvbGxlcnMgPSBjb250cm9sbGVycztcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSBuZXcgX1JvdXRlcjIuZGVmYXVsdChyb3V0ZXMpO1xuICAgICAgICAvLyB0aGlzLmdsb2JhbCA9IG51bGw7XG4gICAgICAgIHRoaXMuYWN0aXZlQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIHRoaXMucHJlQm9vdFNjcmlwdHMgPSBbXTtcblxuICAgICAgICAvLyBUaGlzIHdheSAkc2NvcGUgcHJvcGVydHkgY2Fubm90IGJlIHJlYXNzaWduZWRcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICckc2NvcGUnLCB7XG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqIFRyeSB0byBmaW5kIGluaXRpYWwgc2NvcGUgKiovXG4gICAgICAgIF9sb2Rhc2gyLmRlZmF1bHQuZXh0ZW5kKHRoaXMuJHNjb3BlLCB0aGlzLnBhcnNlU2NvcGUoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2ljayB1cCBhcHBsaWNhdGlvblxuICAgICAqIEBwYXJhbSBbc3VjY2Vzc0NhbGxiYWNrXSB7RnVuY3Rpb259IG9wdGlvbmFsIHN1Y2Nlc3MgY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0gW2Vycm9yQ2FsbGJhY2tdIHtGdW5jdGlvbn0gb3B0aW9uYWwgZXJyb3IgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKEFwcCwgW3tcbiAgICAgICAga2V5OiAnc3RhcnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAvL3N1cGVyIGNvb2wgZmVhdHVyZVxuICAgICAgICAgICAgX2xvZGFzaDIuZGVmYXVsdC5maW5kKHRoaXMucHJlQm9vdFNjcmlwdHMsIGZ1bmN0aW9uIChzY3JpcHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NyaXB0KF90aGlzLiRzY29wZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBY3RpdmUgY29udHJvbGxlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlckluZm8gPSB0aGlzLnJvdXRlci5maW5kQ29udHJvbGxlcigpO1xuICAgICAgICAgICAgaWYgKF9sb2Rhc2gyLmRlZmF1bHQuaXNOdWxsKGNvbnRyb2xsZXJJbmZvKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaENhbGxiYWNrKGZhbHNlLCBzdWNjZXNzQ2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgX2NvbnRyb2xsZXJJbmZvJGFjdGlvID0gY29udHJvbGxlckluZm8uYWN0aW9uLnNwbGl0KCcuJyk7XG5cbiAgICAgICAgICAgIHZhciBfY29udHJvbGxlckluZm8kYWN0aW8yID0gX3NsaWNlZFRvQXJyYXkoX2NvbnRyb2xsZXJJbmZvJGFjdGlvLCAyKTtcblxuICAgICAgICAgICAgdmFyIG5hbWUgPSBfY29udHJvbGxlckluZm8kYWN0aW8yWzBdO1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IF9jb250cm9sbGVySW5mbyRhY3RpbzJbMV07XG5cblxuICAgICAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignTm8gQ29udHJvbGxlciBkZWZpbmVkISBkaWQgeW91IGZvcmdldCB0byBkZWZpbmUgY29udHJvbGxlciBpbiByb3V0ZXM/Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yQ2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBMb2FkIGNvbnRyb2xsZXJcbiAgICAgICAgICAgIG5hbWUgKz0gJ0NvbnRyb2xsZXInO1xuICAgICAgICAgICAgYWN0aW9uID0gKGFjdGlvbiB8fCAnaW5kZXgnKSArICdBY3Rpb24nO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGFjdGl2ZSBjb250cm9sbGVyIGluc3RhbmNlXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29udHJvbGxlcnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRyb2xsZXIgJyArIG5hbWUgKyAnIGRvZXMgbm90IGV4aXN0LCBkaWQgeW91IGZvcmdldCB0byBydW4gXCJidWlsZENvbnRyb2xsZXJzLmpzXCIgc2NyaXB0PycgKyAnIG9yIGRpZCB5b3Ugd3JpdGUgY29ycmVjdCByb3V0ZXM/Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKiBDcmVhdGUgYW5kIFNldCB1cCBjb250cm9sbGVyIGluc3RhbmNlICoqL1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMuY29udHJvbGxlcnNbbmFtZV0obmFtZSk7XG4gICAgICAgICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIF9Db250cm9sbGVyMi5kZWZhdWx0KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihuYW1lICsgJyBkb2VzIG5vdCBpbmhlcml0IGZyb20gXCJDb250cm9sbGVyXCIgY2xhc3MhJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluc3RhbmNlLl9zY29wZSA9IHRoaXMuJHNjb3BlO1xuICAgICAgICAgICAgaW5zdGFuY2UuX2FwcCA9IHRoaXM7XG4gICAgICAgICAgICBpbnN0YW5jZS5yZXF1ZXN0ID0gY29udHJvbGxlckluZm8ucmVxdWVzdDtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ29udHJvbGxlciA9IGluc3RhbmNlO1xuXG4gICAgICAgICAgICAvKiogUnVuICoqL1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlW2FjdGlvbl0pIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5iZWZvcmVBY3Rpb24odGhpcy4kc2NvcGUpO1xuICAgICAgICAgICAgICAgIGluc3RhbmNlW2FjdGlvbl0odGhpcy4kc2NvcGUpO1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLmFmdGVyQWN0aW9uKHRoaXMuJHNjb3BlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIF9lcnIgPSBuZXcgRXJyb3IoJ0FjdGlvbiBcIicgKyBhY3Rpb24gKyAnXCIgZG9lc25cXCd0IGV4aXN0cycpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvckNhbGxiYWNrKF9lcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBfZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoQ2FsbGJhY2sodHJ1ZSwgc3VjY2Vzc0NhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhZGQgc2NyaXB0IGJlZm9yIGxhdW5jaGluZyBvZiBhcHBcbiAgICAgICAgICogQHBhcmFtIGZ1bmMge2Z1bmN0aW9ufSBpZiB0cnVlIGlzIHJldHVybmVkID0+IGxvdW5jaCBhcHAgKHNraXAgb3RoZXIgcHJlLXNjcmlwdHMpXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhZGRQcmVCT09UU2NyaXB0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFByZUJPT1RTY3JpcHQoZnVuYykge1xuICAgICAgICAgICAgdGhpcy5wcmVCb290U2NyaXB0cy5wdXNoKGZ1bmMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpbmlzaGluZyBzdWNjZXNzIGNhbGxiYWNrXG4gICAgICAgICAqIEBwYXJhbSBpc0NvbnRyb2xsZXIge2Jvb2xlYW59XG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB7ZnVuY3Rpb259XG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZmluaXNoQ2FsbGJhY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluaXNoQ2FsbGJhY2soaXNDb250cm9sbGVyLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBpc0NvbnRyb2xsZXIgPyB0aGlzLmFjdGl2ZUNvbnRyb2xsZXIubmFtZSArICcgbG9hZGVkLicgOiAnUm91dGUgZG9lc1xcJ3QgaGF2ZSBhbnkgY29udHJvbGxlci4nO1xuXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5hY3RpdmVDb250cm9sbGVyIHx8IGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc0NvbnRyb2xsZXI7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2VhcmNoIGluIFwicm9vdFwiIGVsZW1lbnQgZm9yIGV2ZXJ5IGVsZW1lbnQgd2l0aCBhdHRyaWJ1dGUgZGVmaW5lZCBpbiBzZXR0aW5nc1xuICAgICAgICAgKiBAcGFyYW0gcm9vdFxuICAgICAgICAgKiBAcmV0dXJucyB7e319IC0gYmFnIHdpdGgge2F0dE5hbWUudmFsdWU6ZWxlbWVudH1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3BhcnNlU2NvcGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VTY29wZShyb290KSB7XG4gICAgICAgICAgICByb290ID0gcm9vdCB8fCB3aW5kb3cuZG9jdW1lbnQ7XG4gICAgICAgICAgICB2YXIgYXR0TmFtZSA9IGRlZmF1bHRTZXR0aW5ncy5hdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdbJyArIGF0dE5hbWUgKyAnXScpO1xuXG4gICAgICAgICAgICB2YXIgYmFnID0ge307XG4gICAgICAgICAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uIChlbCwgaSkge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKGF0dE5hbWUpIHx8ICcnICsgZWwubmFtZSArIGk7XG4gICAgICAgICAgICAgICAgaWYgKF9sb2Rhc2gyLmRlZmF1bHQuaXNVbmRlZmluZWQoYmFnW25hbWVdKSkge1xuICAgICAgICAgICAgICAgICAgICBiYWdbbmFtZV0gPSBlbDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2xvZGFzaDIuZGVmYXVsdC5pc0FycmF5KGJhZ1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhZ1tuYW1lXS5wdXNoKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyYXRlIG5ldyBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFnW25hbWVdID0gW2JhZ1tuYW1lXSwgZWxdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYmFnO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEFwcDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQXBwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi90cmluaXR5L0FwcC5qc1xuLy8gbW9kdWxlIGlkID0gNDk3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 498:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(process) {/**\n * Created by fisa on 7/23/15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _lodash = __webpack_require__(22);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Private help RegExpressions\n * @type {RegExp}\n */\nvar optionalParam = /\\((.*?)\\)/g,\n    namedParam = /(\\(\\?)?:\\w+/g,\n    splatParam = /\\*\\w+/g,\n    escapeRegExp = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g,\n    paramsRegExp = /:\\w+/g;\n\n/**\n * Takes routes and create regular expression for each\n * @param routes\n * @constructor\n */\nfunction Router(routes) {\n    this.routes = routes.map(function (route) {\n        route.regx = _routeToRegExp(route.path);\n        return route;\n    }, this);\n\n    /** Adds prefix to regular expressions **/\n    if (process.env.NODE_ENV !== 'production') {\n        this.routes = this.routes.map(function (route) {\n            var path = route['path'];\n            if (path.indexOf('/') > 1) {\n                console.warn('Route should start with \"/\" char. Or should be index page \"(/)\". It can cause unexpected behaviour!', route);\n            }\n            route.regx = __modifyRouteRegx(route.regx);\n            return route;\n        }, this);\n    }\n}\n\n/**\n * Regular expression template to modify regular expressions of routes\n * @type {string}\n */\nvar prefixRegExp = '(?:\\/\\w+)*';\n\n/**\n * Adds prefix to regular expression that any path can have any route prefix\n * Note: used only for debug purposes\n * @param regx\n * @returns {RegExp}\n * @private\n */\nfunction __modifyRouteRegx(regx) {\n    var source = regx.source;\n    var start = source.indexOf('^') !== 0 ? 0 : 1;\n    return new RegExp(prefixRegExp + source.substring(start));\n}\n\n/**\n * Finds controller for route parameter\n * @param route {string}\n * @returns {Object| null}\n */\nRouter.prototype.findController = function findController(route) {\n    route = route || window.location.pathname;\n    var data = null,\n        cache = void 0,\n        controllerInfo = void 0;\n\n    controllerInfo = _lodash2.default.find(this.routes, function (el) {\n        cache = el.regx.exec(route);\n        if (cache) {\n            data = cache;\n            return true;\n        }\n        return false;\n    }) || null;\n\n    // If we found any controller -> create request and return it\n    if (controllerInfo) {\n        /** Create request Info object */\n        var search = window.location.search;\n        controllerInfo.request = new this.Request(controllerInfo.path, data.length > 2 ? __getParams(controllerInfo.path, data) : null, search.length > 0 ? _getQueryObj(search) : null);\n        //And return all inside one package\n        return controllerInfo;\n    }\n    return null;\n};\n\n/**\n * Represents request object\n * @param path\n * @param params\n * @param query\n * @constructor\n */\nRouter.prototype.Request = function Request(path, params, query) {\n    this.path = path;\n    this.query = query;\n    this.params = params;\n};\n\n/**\n * Returns object with params like key:value\n * @param path {string}\n * @param regxResult\n * @returns {Object}\n * @private\n */\nfunction __getParams(path, regxResult) {\n    var keys = path.match(paramsRegExp),\n        values = regxResult.slice(1, regxResult.length - 1),\n        params = {};\n\n    // create pairs\n    _lodash2.default.each(values, function (val, i) {\n        params[keys[i].substring(1)] = val;\n    });\n\n    return params;\n}\n\n/**\n * Creates object with key:value pairs from query string (e.g. location.search)\n * @param str\n * @returns {Object}\n * @private\n */\nfunction _getQueryObj(str) {\n    var pairs = str.substr(1).split('&'),\n        query = {};\n\n    _lodash2.default.each(pairs, function (p) {\n        var ind = p.indexOf('=');\n        query[p.substr(0, ind)] = p.substr(ind + 1);\n    });\n    return query;\n}\n\n/**\n * Create regular expression from route - from backbone framework\n * // TODO: check if there is new version\n * @param route\n * @returns {RegExp}\n * @private\n */\nfunction _routeToRegExp(route) {\n    route = route.replace(escapeRegExp, '\\\\$&').replace(optionalParam, '(?:$1)?').replace(namedParam, function (match, optional) {\n        return optional ? match : '([^/?]+)';\n    }).replace(splatParam, '([^?]*?)');\n    return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n}\n\nexports.default = Router;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(31)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi90cmluaXR5L1JvdXRlci5qcz9mYTg2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBmaXNhIG9uIDcvMjMvMTUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIFByaXZhdGUgaGVscCBSZWdFeHByZXNzaW9uc1xuICogQHR5cGUge1JlZ0V4cH1cbiAqL1xudmFyIG9wdGlvbmFsUGFyYW0gPSAvXFwoKC4qPylcXCkvZyxcbiAgICBuYW1lZFBhcmFtID0gLyhcXChcXD8pPzpcXHcrL2csXG4gICAgc3BsYXRQYXJhbSA9IC9cXCpcXHcrL2csXG4gICAgZXNjYXBlUmVnRXhwID0gL1tcXC17fVxcW1xcXSs/LixcXFxcXFxeJHwjXFxzXS9nLFxuICAgIHBhcmFtc1JlZ0V4cCA9IC86XFx3Ky9nO1xuXG4vKipcbiAqIFRha2VzIHJvdXRlcyBhbmQgY3JlYXRlIHJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgZWFjaFxuICogQHBhcmFtIHJvdXRlc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFJvdXRlcihyb3V0ZXMpIHtcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlcy5tYXAoZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICAgIHJvdXRlLnJlZ3ggPSBfcm91dGVUb1JlZ0V4cChyb3V0ZS5wYXRoKTtcbiAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgIH0sIHRoaXMpO1xuXG4gICAgLyoqIEFkZHMgcHJlZml4IHRvIHJlZ3VsYXIgZXhwcmVzc2lvbnMgKiovXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSB0aGlzLnJvdXRlcy5tYXAoZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IHJvdXRlWydwYXRoJ107XG4gICAgICAgICAgICBpZiAocGF0aC5pbmRleE9mKCcvJykgPiAxKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdSb3V0ZSBzaG91bGQgc3RhcnQgd2l0aCBcIi9cIiBjaGFyLiBPciBzaG91bGQgYmUgaW5kZXggcGFnZSBcIigvKVwiLiBJdCBjYW4gY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvdXIhJywgcm91dGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm91dGUucmVneCA9IF9fbW9kaWZ5Um91dGVSZWd4KHJvdXRlLnJlZ3gpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVndWxhciBleHByZXNzaW9uIHRlbXBsYXRlIHRvIG1vZGlmeSByZWd1bGFyIGV4cHJlc3Npb25zIG9mIHJvdXRlc1xuICogQHR5cGUge3N0cmluZ31cbiAqL1xudmFyIHByZWZpeFJlZ0V4cCA9ICcoPzpcXC9cXHcrKSonO1xuXG4vKipcbiAqIEFkZHMgcHJlZml4IHRvIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGFueSBwYXRoIGNhbiBoYXZlIGFueSByb3V0ZSBwcmVmaXhcbiAqIE5vdGU6IHVzZWQgb25seSBmb3IgZGVidWcgcHVycG9zZXNcbiAqIEBwYXJhbSByZWd4XG4gKiBAcmV0dXJucyB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX19tb2RpZnlSb3V0ZVJlZ3gocmVneCkge1xuICAgIHZhciBzb3VyY2UgPSByZWd4LnNvdXJjZTtcbiAgICB2YXIgc3RhcnQgPSBzb3VyY2UuaW5kZXhPZignXicpICE9PSAwID8gMCA6IDE7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAocHJlZml4UmVnRXhwICsgc291cmNlLnN1YnN0cmluZyhzdGFydCkpO1xufVxuXG4vKipcbiAqIEZpbmRzIGNvbnRyb2xsZXIgZm9yIHJvdXRlIHBhcmFtZXRlclxuICogQHBhcmFtIHJvdXRlIHtzdHJpbmd9XG4gKiBAcmV0dXJucyB7T2JqZWN0fCBudWxsfVxuICovXG5Sb3V0ZXIucHJvdG90eXBlLmZpbmRDb250cm9sbGVyID0gZnVuY3Rpb24gZmluZENvbnRyb2xsZXIocm91dGUpIHtcbiAgICByb3V0ZSA9IHJvdXRlIHx8IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgICB2YXIgZGF0YSA9IG51bGwsXG4gICAgICAgIGNhY2hlID0gdm9pZCAwLFxuICAgICAgICBjb250cm9sbGVySW5mbyA9IHZvaWQgMDtcblxuICAgIGNvbnRyb2xsZXJJbmZvID0gX2xvZGFzaDIuZGVmYXVsdC5maW5kKHRoaXMucm91dGVzLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgY2FjaGUgPSBlbC5yZWd4LmV4ZWMocm91dGUpO1xuICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICAgIGRhdGEgPSBjYWNoZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KSB8fCBudWxsO1xuXG4gICAgLy8gSWYgd2UgZm91bmQgYW55IGNvbnRyb2xsZXIgLT4gY3JlYXRlIHJlcXVlc3QgYW5kIHJldHVybiBpdFxuICAgIGlmIChjb250cm9sbGVySW5mbykge1xuICAgICAgICAvKiogQ3JlYXRlIHJlcXVlc3QgSW5mbyBvYmplY3QgKi9cbiAgICAgICAgdmFyIHNlYXJjaCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgICAgIGNvbnRyb2xsZXJJbmZvLnJlcXVlc3QgPSBuZXcgdGhpcy5SZXF1ZXN0KGNvbnRyb2xsZXJJbmZvLnBhdGgsIGRhdGEubGVuZ3RoID4gMiA/IF9fZ2V0UGFyYW1zKGNvbnRyb2xsZXJJbmZvLnBhdGgsIGRhdGEpIDogbnVsbCwgc2VhcmNoLmxlbmd0aCA+IDAgPyBfZ2V0UXVlcnlPYmooc2VhcmNoKSA6IG51bGwpO1xuICAgICAgICAvL0FuZCByZXR1cm4gYWxsIGluc2lkZSBvbmUgcGFja2FnZVxuICAgICAgICByZXR1cm4gY29udHJvbGxlckluZm87XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHJlcXVlc3Qgb2JqZWN0XG4gKiBAcGFyYW0gcGF0aFxuICogQHBhcmFtIHBhcmFtc1xuICogQHBhcmFtIHF1ZXJ5XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuUm91dGVyLnByb3RvdHlwZS5SZXF1ZXN0ID0gZnVuY3Rpb24gUmVxdWVzdChwYXRoLCBwYXJhbXMsIHF1ZXJ5KSB7XG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG59O1xuXG4vKipcbiAqIFJldHVybnMgb2JqZWN0IHdpdGggcGFyYW1zIGxpa2Uga2V5OnZhbHVlXG4gKiBAcGFyYW0gcGF0aCB7c3RyaW5nfVxuICogQHBhcmFtIHJlZ3hSZXN1bHRcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfX2dldFBhcmFtcyhwYXRoLCByZWd4UmVzdWx0KSB7XG4gICAgdmFyIGtleXMgPSBwYXRoLm1hdGNoKHBhcmFtc1JlZ0V4cCksXG4gICAgICAgIHZhbHVlcyA9IHJlZ3hSZXN1bHQuc2xpY2UoMSwgcmVneFJlc3VsdC5sZW5ndGggLSAxKSxcbiAgICAgICAgcGFyYW1zID0ge307XG5cbiAgICAvLyBjcmVhdGUgcGFpcnNcbiAgICBfbG9kYXNoMi5kZWZhdWx0LmVhY2godmFsdWVzLCBmdW5jdGlvbiAodmFsLCBpKSB7XG4gICAgICAgIHBhcmFtc1trZXlzW2ldLnN1YnN0cmluZygxKV0gPSB2YWw7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcGFyYW1zO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgb2JqZWN0IHdpdGgga2V5OnZhbHVlIHBhaXJzIGZyb20gcXVlcnkgc3RyaW5nIChlLmcuIGxvY2F0aW9uLnNlYXJjaClcbiAqIEBwYXJhbSBzdHJcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfZ2V0UXVlcnlPYmooc3RyKSB7XG4gICAgdmFyIHBhaXJzID0gc3RyLnN1YnN0cigxKS5zcGxpdCgnJicpLFxuICAgICAgICBxdWVyeSA9IHt9O1xuXG4gICAgX2xvZGFzaDIuZGVmYXVsdC5lYWNoKHBhaXJzLCBmdW5jdGlvbiAocCkge1xuICAgICAgICB2YXIgaW5kID0gcC5pbmRleE9mKCc9Jyk7XG4gICAgICAgIHF1ZXJ5W3Auc3Vic3RyKDAsIGluZCldID0gcC5zdWJzdHIoaW5kICsgMSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHF1ZXJ5O1xufVxuXG4vKipcbiAqIENyZWF0ZSByZWd1bGFyIGV4cHJlc3Npb24gZnJvbSByb3V0ZSAtIGZyb20gYmFja2JvbmUgZnJhbWV3b3JrXG4gKiAvLyBUT0RPOiBjaGVjayBpZiB0aGVyZSBpcyBuZXcgdmVyc2lvblxuICogQHBhcmFtIHJvdXRlXG4gKiBAcmV0dXJucyB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX3JvdXRlVG9SZWdFeHAocm91dGUpIHtcbiAgICByb3V0ZSA9IHJvdXRlLnJlcGxhY2UoZXNjYXBlUmVnRXhwLCAnXFxcXCQmJykucmVwbGFjZShvcHRpb25hbFBhcmFtLCAnKD86JDEpPycpLnJlcGxhY2UobmFtZWRQYXJhbSwgZnVuY3Rpb24gKG1hdGNoLCBvcHRpb25hbCkge1xuICAgICAgICByZXR1cm4gb3B0aW9uYWwgPyBtYXRjaCA6ICcoW14vP10rKSc7XG4gICAgfSkucmVwbGFjZShzcGxhdFBhcmFtLCAnKFteP10qPyknKTtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByb3V0ZSArICcoPzpcXFxcPyhbXFxcXHNcXFxcU10qKSk/JCcpO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBSb3V0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RyaW5pdHkvUm91dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA0OThcbi8vIG1vZHVsZSBjaHVua3MgPSAyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 499:
/***/ function(module, exports) {

	eval("/**\n * Created by fisa on 11/6/15.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = globalFunction;\nfunction globalFunction() {\n  console.log('Global function');\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2FwcC9MaWJyYXJpZXMvR2xvYmFsU2NyaXB0LmpzPzA0ZTYiLCJ3ZWJwYWNrOi8vLz9kNDFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBmaXNhIG9uIDExLzYvMTUuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2xvYmFsRnVuY3Rpb24oKXtcbiAgICBjb25zb2xlLmxvZygnR2xvYmFsIGZ1bmN0aW9uJyk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9MaWJyYXJpZXMvR2xvYmFsU2NyaXB0LmpzIiwidW5kZWZpbmVkXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICJdLCJtYXBwaW5ncyI6IkFBQUE7OztBQUdBO0FBQ0E7Ozs7QUFDQTtBQUFBO0FBQ0E7QUNDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }

});