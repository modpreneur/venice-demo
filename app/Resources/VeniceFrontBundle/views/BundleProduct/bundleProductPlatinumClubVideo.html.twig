{% extends "VeniceFrontBundle:Products:bundleProductDetail.html.twig" %}

{% block buyModal %}
    {% include ":DownloadsBundle/Front/buyPopup:ocbPopup.html.twig" %}
{% endblock %}

{% block jumbotronClass %}jumbotron-platinum-club{% endblock %}

{% block headerInside %}
    <div class="row">
        <div class="span-small-13 span-medium-17 margin-top-50">

        </div>
        <div class="span-small-11 span-medium-7 margin-top-100 text-center headline-button">
            <h1>{{ bundleProduct.name  }}</h1>
            <button class="button button-buy-jumbotron uppercase buy-pop-button padding-top-10 padding-bottom-10"><span>BUY NOW</span></button>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="downloads-dashboard-main-content landing-page">
    <div class="row">

        <div class="span-medium-18 offset-medium-3 text-center">
            {#<p>{{ bundleProduct.longDescription|raw }}</p>#}
            <p>As a special bonus you get {{ trial }} days FREE access to the FLO FIT Platinum Club, an exclusive membership that provides access to VIP videos from trainer Mike Saffaie and FLO RIDA himself, extra FLO FIT workouts that will further enhance your body transformation, special meals and recipes, and other valuable content only accessible to Platinum Club members. You also get extra, individual help and support from the Platinum Club community and much more! Try it absolutely free for {{ trial }} days! </p>
        </div>

        <div class="row">
            {% set allVideosAndArticleProducts = productsService.getProductsByBundleProductHandle("videos-and-articles",activeModule) %}
            {% set allworkoutProducts = productsService.getProductsByBundleProductHandle("workouts",activeModule) %}
            {% set allmealPlansProducts = productsService.getProductsByBundleProductHandle("meal-plans",activeModule) %}
            {% set accesIntoModule = app.user.platinumClubAccessIntoModule(activeModule) %}
            {% set navigationLinks = [] %}
            {% set openIn = 0 %}

            {% if allVideosAndArticleProducts|length > 0 %}
                {% set navigationLinks = navigationLinks|merge([{href:"#videos-and-articles",text:"Videos"}]) %}

                {% set openIn = allVideosAndArticleProducts[0].daysRemainingToUnlock(app.user) %}
            {% endif %}

            {% if allworkoutProducts|length > 0 %}
                {% set navigationLinks = navigationLinks|merge([{href:"#workouts",text:"Workouts"}]) %}
                {% if openIn == 0 %}
                    {% set openIn = allworkoutProducts[0].daysRemainingToUnlock(app.user) %}
                {% endif %}
            {% endif %}

            {% if allmealPlansProducts|length > 0 %}
                {% set navigationLinks = navigationLinks|merge([{href:"#meal-plans",text:"Meal Plans"}]) %}
                {% if openIn == 0 %}
                    {% set openIn = allmealPlansProducts[0].daysRemainingToUnlock(app.user) %}
                {% endif %}
            {% endif %}
            {#<div class="span-medium-24">#}
            {#<div class="platinum-club-plan">#}
            {#<div class="scroll">#}
            {#{% for i in range(1,6) %}#}
            {#<a class="item {% if not app.user.platinumClubAccessIntoModule(i) %}disable{% endif %}{% if i == activeModule %} current{% endif %}" href="{{ path("downloads_platinumclub_video_detail_with_module",{"handle":bundleProduct.handle,"module":i}) }}">#}
            {#<i class="ff-player-stop"></i>#}
            {#{% if i == activeModule %}#}
            {#<span class="module">module</span>#}
            {#{% endif %}#}
            {#<span>{{ i }}</span>#}
            {#</a>#}
            {#{% endfor %}#}
            {#</div>#}
            {#</div>#}
            {#</div>#}
            <div id="moduleBlock" class="span-medium-24 ajax-slide-down {% if not app.user.platinumClubAccessIntoModule(1) %}disable-products{% endif %}">

                {#{% if not accesIntoModule %}#}
                <img class="display-none-mini display-block-medium img-responsive" src="{{ asset("Resources/public/images/site/platinumclub-locked-desktop.png") }}" alt="">
                <img class="display-none-medium img-responsive row" src="{{ asset("Resources/public/images/site/platinumclub-locked-mobile.png") }}" alt="">
                {#{% else %}#}
                {#{% if allVideosAndArticleProducts|length > 0 %}#}
                {#<div id="videos-and-articles" class="persist-area">#}
                {#<div class="block block-title persist-header">#}
                {#<div class="hr"></div>#}
                {#{{ include(":DownloadsBundle/Front/flomersion:sectionTop.html.twig",{navigationLinks:navigationLinks,actual:"#videos-and-articles"}) }}#}
                {#</div>#}

                {#{% for videosAndArticleProduct in allVideosAndArticleProducts %}#}
                {#<div class="downloads-dashboard row {{ videosAndArticleProduct.getTypeName() }}">#}
                {#{% if accesIntoModule %}#}
                {#{{ productRenderer(videosAndArticleProduct,"downloadsDashboard") }}#}
                {#{% else %}#}
                {#{{ productRenderer(videosAndArticleProduct,"downloadsDashboard",false,true) }}#}
                {#{% endif %}#}
                {#</div>#}
                {#{% endfor %}#}
                {#</div>#}
                {#{% endif %}#}


                {#{% if allworkoutProducts|length > 0 %}#}
                {#<div id="workouts" class="persist-area">#}
                {#<div class="block block-title persist-header">#}
                {#<div class="hr"></div>#}
                {#{{ include(":DownloadsBundle/Front/flomersion:sectionTop.html.twig",{navigationLinks:navigationLinks,actual:"#workouts"}) }}#}
                {#</div>#}
                {#{% for workoutProduct in allworkoutProducts %}#}
                {#<div class="downloads-dashboard row {{ workoutProduct.getTypeName() }}{% if notVisibleFromStart is defined and notVisibleFromStart %}{% endif %}">#}
                {#{% if accesIntoModule %}#}
                {#{{ productRenderer(workoutProduct,"downloadsDashboard") }}#}
                {#{% else %}#}
                {#{{ productRenderer(workoutProduct,"downloadsDashboard",false,true) }}#}
                {#{% endif %}#}
                {#</div>#}
                {#{% endfor %}#}
                {#</div>#}
                {#{% endif %}#}

                {#{% if allmealPlansProducts|length > 0 %}#}
                {#<div id="meal-plans" class="persist-area">#}
                {#<div class="block block-title persist-header">#}
                {#<div class="hr"></div>#}
                {#{{ include(":DownloadsBundle/Front/flomersion:sectionTop.html.twig",{navigationLinks:navigationLinks,actual:"#meal-plans"}) }}#}
                {#</div>#}

                {#{% for mealPlansProduct in allmealPlansProducts %}#}
                {#<div class="downloads-dashboard row {{ mealPlansProduct.getTypeName() }} {% if notVisibleFromStart is defined and notVisibleFromStart %}{% endif %}">#}
                {#{% if accesIntoModule %}#}
                {#{{ productRenderer(mealPlansProduct,"downloadsDashboard") }}#}
                {#{% else %}#}
                {#{{ productRenderer(mealPlansProduct,"downloadsDashboard",false,true) }}#}
                {#{% endif %}#}
                {#</div>#}
                {#{% endfor %}#}
                {#</div>#}
                {#{% endif %}#}
                {#{% endif %}#}
            </div>
            {#</div>#}

            <div class="span-medium-24">
                <div id="add-ons" class="recomended persist-area">
                    <div class="block block-title persist-header">
                        <div class="hr"></div>
                        <div class="block-left">
                            <a href="#add-ons" class="nice-scroll current current_ancestor">Add-Ons</a>
                        </div>
                        <div class="block-center">
                        </div>
                        <div class="block-right">
                        </div>
                    </div>
                    <div class="row">
                        {% for upsellProduct in upsellProducts %}
                            <div class="span-large-6 span-medium-12 span-col">
                                <div class="recomended-item">
                                    <img src="{{ upsellProduct.upselMiniature }}" alt="" class="img-responsive"/>
                                    <span class="inside-title">{{ upsellProduct.shortName }}</span>

                                    <div class="recomended-hover">
                                        <div><span>{{ upsellProduct.shortName }}</span></div>
                                        <div class="divider"></div>
                                        <p>{{ upsellProduct.shortDescription }}</p>

                                        <div class="row">
                                            {% if app.user.haveAccess(upsellProduct) %}
                                                <a class="button"
                                                   href="{{ path("downloads_product_bundle_detail",{"handle":upsellProduct.handle}) }}">Details</a>
                                            {% else %}
                                                <a class="button"
                                                   href="{{ path("downloads_product_bundle_detail",{"handle":upsellProduct.handle}) }}">Get more details</a>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}